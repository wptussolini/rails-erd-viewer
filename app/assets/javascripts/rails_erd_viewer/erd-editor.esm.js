/**
 * Bundled by jsDelivr using Rollup v2.79.1 and Terser v5.19.2.
 * Original file: /npm/@dineug/erd-editor@3.2.6/dist/erd-editor.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var e="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function t(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}var i=t,o=n;function l(e){if(i===setTimeout)return setTimeout(e,0);if((i===t||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}"function"==typeof e.setTimeout&&(i=setTimeout),"function"==typeof e.clearTimeout&&(o=clearTimeout);var r,a=[],s=!1,c=-1;function u(){s&&r&&(s=!1,r.length?a=r.concat(a):c=-1,a.length&&d())}function d(){if(!s){var e=l(u);s=!0;for(var t=a.length;t;){for(r=a,a=[];++c<t;)r&&r[c].run();c=-1,t=a.length}r=null,s=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===n||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{return o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}p.prototype.run=function(){this.fun.apply(null,this.array)};function h(){}var m=h,b=h,f=h,y=h,g=h,v=h,Z=h;var x=e.performance||{},X=x.now||x.mozNow||x.msNow||x.oNow||x.webkitNow||function(){return(new Date).getTime()};var G=new Date;var I={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];a.push(new p(e,t)),1!==a.length||s||l(d)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:m,addListener:b,once:f,off:y,removeListener:g,removeAllListeners:v,emit:Z,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*X.call(x),n=Math.floor(t),i=Math.floor(t%1*1e9);return e&&(n-=e[0],(i-=e[1])<0&&(n--,i+=1e9)),[n,i]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-G)/1e3}},W="object"==typeof e&&e&&e.Object===Object&&e,k="object"==typeof self&&self&&self.Object===Object&&self,V=W||k||Function("return this")(),C=V.Symbol,S=Object.prototype,R=S.hasOwnProperty,L=S.toString,Y=C?C.toStringTag:void 0;
/*!
 * @dineug/erd-editor
 * @version 3.2.6 | Sat Nov 09 2024
 * @author SeungHwan-Lee <dineug2@gmail.com>
 * @license MIT
 */var T=Object.prototype.toString;var w="[object Null]",N="[object Undefined]",K=C?C.toStringTag:void 0;function H(e){return null==e?void 0===e?N:w:K&&K in Object(e)?function(e){var t=R.call(e,Y),n=e[Y];try{e[Y]=void 0;var i=!0}catch{}var o=L.call(e);return i&&(t?e[Y]=n:delete e[Y]),o}(e):function(e){return T.call(e)}(e)}function M(e){return null!=e&&"object"==typeof e}var z="[object Symbol]";function J(e){return"symbol"==typeof e||M(e)&&H(e)==z}function j(e,t){for(var n=-1,i=null==e?0:e.length,o=Array(i);++n<i;)o[n]=t(e[n],n,e);return o}var F=Array.isArray,O=1/0,$=C?C.prototype:void 0,E=$?$.toString:void 0;function U(e){if("string"==typeof e)return e;if(F(e))return j(e,U)+"";if(J(e))return E?E.call(e):"";var t=e+"";return"0"==t&&1/e==-O?"-0":t}var P=/\s/;var A=/^\s+/;function B(e){return e&&e.slice(0,function(e){for(var t=e.length;t--&&P.test(e.charAt(t)););return t}(e)+1).replace(A,"")}function Q(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var D=NaN,_=/^[-+]0x[0-9a-f]+$/i,q=/^0b[01]+$/i,ee=/^0o[0-7]+$/i,te=parseInt;function ne(e){if("number"==typeof e)return e;if(J(e))return D;if(Q(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Q(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=B(e);var n=q.test(e);return n||ee.test(e)?te(e.slice(2),n?2:8):_.test(e)?D:+e}var ie=1/0,oe=17976931348623157e292;function le(e){return e?(e=ne(e))===ie||e===-ie?(e<0?-1:1)*oe:e==e?e:0:0===e?e:0}function re(e){return e}var ae="[object AsyncFunction]",se="[object Function]",ce="[object GeneratorFunction]",ue="[object Proxy]";function de(e){if(!Q(e))return!1;var t=H(e);return t==se||t==ce||t==ae||t==ue}var pe,he=V["__core-js_shared__"],me=(pe=/[^.]+$/.exec(he&&he.keys&&he.keys.IE_PROTO||""))?"Symbol(src)_1."+pe:"";var be=Function.prototype.toString;function fe(e){if(null!=e){try{return be.call(e)}catch{}try{return e+""}catch{}}return""}var ye=/^\[object .+?Constructor\]$/,ge=Function.prototype,ve=Object.prototype,Ze=ge.toString,xe=ve.hasOwnProperty,Xe=RegExp("^"+Ze.call(xe).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ge(e){return!(!Q(e)||function(e){return!!me&&me in e}(e))&&(de(e)?Xe:ye).test(fe(e))}function Ie(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Ge(n)?n:void 0}var We=Ie(V,"WeakMap"),ke=Object.create,Ve=function(){function e(){}return function(t){if(!Q(t))return{};if(ke)return ke(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();var Ce=Date.now;function Se(e){return function(){return e}}var Re=function(){try{var e=Ie(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Le=Re?function(e,t){return Re(e,"toString",{configurable:!0,enumerable:!1,value:Se(t),writable:!0})}:re;var Ye=function(e){var t=0,n=0;return function(){var i=Ce(),o=16-(i-n);if(n=i,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(Le);function Te(e){return e!=e}function we(e,t){return!!(null==e?0:e.length)&&function(e,t,n){return t==t?function(e,t,n){for(var i=n-1,o=e.length;++i<o;)if(e[i]===t)return i;return-1}(e,t,n):function(e,t,n,i){for(var o=e.length,l=n+(i?1:-1);i?l--:++l<o;)if(t(e[l],l,e))return l;return-1}(e,Te,n)}(e,t,0)>-1}var Ne=9007199254740991,Ke=/^(?:0|[1-9]\d*)$/;function He(e,t){var n=typeof e;return!!(t=t??Ne)&&("number"==n||"symbol"!=n&&Ke.test(e))&&e>-1&&e%1==0&&e<t}function Me(e,t,n){"__proto__"==t&&Re?Re(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function ze(e,t){return e===t||e!=e&&t!=t}var Je=Object.prototype.hasOwnProperty;function je(e,t,n){var i=e[t];(!Je.call(e,t)||!ze(i,n)||void 0===n&&!(t in e))&&Me(e,t,n)}function Fe(e,t,n,i){var o=!n;n||(n={});for(var l=-1,r=t.length;++l<r;){var a=t[l],s=i?i(n[a],e[a],a,n,e):void 0;void 0===s&&(s=e[a]),o?Me(n,a,s):je(n,a,s)}return n}var Oe=Math.max;function $e(e,t,n){return t=Oe(void 0===t?e.length-1:t,0),function(){for(var i=arguments,o=-1,l=Oe(i.length-t,0),r=Array(l);++o<l;)r[o]=i[t+o];o=-1;for(var a=Array(t+1);++o<t;)a[o]=i[o];return a[t]=n(r),function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(e,this,a)}}var Ee=9007199254740991;function Ue(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Ee}function Pe(e){return null!=e&&Ue(e.length)&&!de(e)}var Ae=Object.prototype;function Be(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ae)}function Qe(e){return M(e)&&"[object Arguments]"==H(e)}var De=Object.prototype,_e=De.hasOwnProperty,qe=De.propertyIsEnumerable,et=Qe(function(){return arguments}())?Qe:function(e){return M(e)&&_e.call(e,"callee")&&!qe.call(e,"callee")};const tt=et;var nt="object"==typeof exports&&exports&&!exports.nodeType&&exports,it=nt&&"object"==typeof module&&module&&!module.nodeType&&module,ot=it&&it.exports===nt?V.Buffer:void 0;const lt=(ot?ot.isBuffer:void 0)||function(){return!1};var rt={};function at(e){return function(t){return e(t)}}rt["[object Float32Array]"]=rt["[object Float64Array]"]=rt["[object Int8Array]"]=rt["[object Int16Array]"]=rt["[object Int32Array]"]=rt["[object Uint8Array]"]=rt["[object Uint8ClampedArray]"]=rt["[object Uint16Array]"]=rt["[object Uint32Array]"]=!0,rt["[object Arguments]"]=rt["[object Array]"]=rt["[object ArrayBuffer]"]=rt["[object Boolean]"]=rt["[object DataView]"]=rt["[object Date]"]=rt["[object Error]"]=rt["[object Function]"]=rt["[object Map]"]=rt["[object Number]"]=rt["[object Object]"]=rt["[object RegExp]"]=rt["[object Set]"]=rt["[object String]"]=rt["[object WeakMap]"]=!1;var st="object"==typeof exports&&exports&&!exports.nodeType&&exports,ct=st&&"object"==typeof module&&module&&!module.nodeType&&module,ut=ct&&ct.exports===st&&W.process,dt=function(){try{return ct&&ct.require&&ct.require("util").types||ut&&ut.binding&&ut.binding("util")}catch{}}(),pt=dt&&dt.isTypedArray,ht=pt?at(pt):function(e){return M(e)&&Ue(e.length)&&!!rt[H(e)]};const mt=ht;var bt=Object.prototype.hasOwnProperty;function ft(e,t){var n=F(e),i=!n&&tt(e),o=!n&&!i&&lt(e),l=!n&&!i&&!o&&mt(e),r=n||i||o||l,a=r?function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}(e.length,String):[],s=a.length;for(var c in e)(t||bt.call(e,c))&&(!r||!("length"==c||o&&("offset"==c||"parent"==c)||l&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||He(c,s)))&&a.push(c);return a}function yt(e,t){return function(n){return e(t(n))}}var gt=yt(Object.keys,Object),vt=Object.prototype.hasOwnProperty;function Zt(e){if(!Be(e))return gt(e);var t=[];for(var n in Object(e))vt.call(e,n)&&"constructor"!=n&&t.push(n);return t}function xt(e){return Pe(e)?ft(e):Zt(e)}var Xt=Object.prototype.hasOwnProperty;function Gt(e){if(!Q(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=Be(e),n=[];for(var i in e)"constructor"==i&&(t||!Xt.call(e,i))||n.push(i);return n}function It(e){return Pe(e)?ft(e,!0):Gt(e)}var Wt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,kt=/^\w*$/;function Vt(e,t){if(F(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!J(e))||(kt.test(e)||!Wt.test(e)||null!=t&&e in Object(t))}var Ct=Ie(Object,"create");var St=Object.prototype.hasOwnProperty;var Rt=Object.prototype.hasOwnProperty;function Lt(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Yt(e,t){for(var n=e.length;n--;)if(ze(e[n][0],t))return n;return-1}Lt.prototype.clear=function(){this.__data__=Ct?Ct(null):{},this.size=0},Lt.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Lt.prototype.get=function(e){var t=this.__data__;if(Ct){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return St.call(t,e)?t[e]:void 0},Lt.prototype.has=function(e){var t=this.__data__;return Ct?void 0!==t[e]:Rt.call(t,e)},Lt.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Ct&&void 0===t?"__lodash_hash_undefined__":t,this};var Tt=Array.prototype.splice;function wt(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}wt.prototype.clear=function(){this.__data__=[],this.size=0},wt.prototype.delete=function(e){var t=this.__data__,n=Yt(t,e);return!(n<0)&&(n==t.length-1?t.pop():Tt.call(t,n,1),--this.size,!0)},wt.prototype.get=function(e){var t=this.__data__,n=Yt(t,e);return n<0?void 0:t[n][1]},wt.prototype.has=function(e){return Yt(this.__data__,e)>-1},wt.prototype.set=function(e,t){var n=this.__data__,i=Yt(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this};var Nt=Ie(V,"Map");function Kt(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function Ht(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}Ht.prototype.clear=function(){this.size=0,this.__data__={hash:new Lt,map:new(Nt||wt),string:new Lt}},Ht.prototype.delete=function(e){var t=Kt(this,e).delete(e);return this.size-=t?1:0,t},Ht.prototype.get=function(e){return Kt(this,e).get(e)},Ht.prototype.has=function(e){return Kt(this,e).has(e)},Ht.prototype.set=function(e,t){var n=Kt(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this};var Mt="Expected a function";function zt(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(Mt);var n=function(){var i=arguments,o=t?t.apply(this,i):i[0],l=n.cache;if(l.has(o))return l.get(o);var r=e.apply(this,i);return n.cache=l.set(o,r)||l,r};return n.cache=new(zt.Cache||Ht),n}zt.Cache=Ht;var Jt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,jt=/\\(\\)?/g,Ft=function(e){var t=zt(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Jt,(function(e,n,i,o){t.push(i?o.replace(jt,"$1"):n||e)})),t}));function Ot(e){return null==e?"":U(e)}function $t(e,t){return F(e)?e:Vt(e,t)?[e]:Ft(Ot(e))}var Et=1/0;function Ut(e){if("string"==typeof e||J(e))return e;var t=e+"";return"0"==t&&1/e==-Et?"-0":t}function Pt(e,t){for(var n=0,i=(t=$t(t,e)).length;null!=e&&n<i;)e=e[Ut(t[n++])];return n&&n==i?e:void 0}function At(e,t,n){var i=null==e?void 0:Pt(e,t);return void 0===i?n:i}function Bt(e,t){for(var n=-1,i=t.length,o=e.length;++n<i;)e[o+n]=t[n];return e}var Qt=C?C.isConcatSpreadable:void 0;function Dt(e){return F(e)||tt(e)||!!(Qt&&e&&e[Qt])}function _t(e,t,n,i,o){var l=-1,r=e.length;for(n||(n=Dt),o||(o=[]);++l<r;){var a=e[l];t>0&&n(a)?t>1?_t(a,t-1,n,i,o):Bt(o,a):i||(o[o.length]=a)}return o}function qt(e){return(null==e?0:e.length)?_t(e,1):[]}function en(e){return Ye($e(e,void 0,qt),e+"")}const tn=yt(Object.getPrototypeOf,Object);var nn="[object Object]",on=Function.prototype,ln=Object.prototype,rn=on.toString,an=ln.hasOwnProperty,sn=rn.call(Object);function cn(e,t,n){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var l=Array(o);++i<o;)l[i]=e[i+t];return l}var un=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function dn(e){return un.test(e)}var pn="\\ud800-\\udfff",hn="["+pn+"]",mn="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",bn="\\ud83c[\\udffb-\\udfff]",fn="[^"+pn+"]",yn="(?:\\ud83c[\\udde6-\\uddff]){2}",gn="[\\ud800-\\udbff][\\udc00-\\udfff]",vn="(?:"+mn+"|"+bn+")"+"?",Zn="[\\ufe0e\\ufe0f]?",xn=Zn+vn+("(?:\\u200d(?:"+[fn,yn,gn].join("|")+")"+Zn+vn+")*"),Xn="(?:"+[fn+mn+"?",mn,yn,gn,hn].join("|")+")",Gn=RegExp(bn+"(?="+bn+")|"+Xn+xn,"g");function In(e){return dn(e)?function(e){return e.match(Gn)||[]}(e):function(e){return e.split("")}(e)}var Wn=function(e){return function(t){var n=dn(t=Ot(t))?In(t):void 0,i=n?n[0]:t.charAt(0),o=n?function(e,t,n){var i=e.length;return n=void 0===n?i:n,!t&&n>=i?e:cn(e,t,n)}(n,1).join(""):t.slice(1);return i[e]()+o}}("toUpperCase");var kn=function(e){return function(t){return null==e?void 0:e[t]}}({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"});const Vn=kn;var Cn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Sn=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");var Rn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var Ln=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var Yn="\\ud800-\\udfff",Tn="\\u2700-\\u27bf",wn="a-z\\xdf-\\xf6\\xf8-\\xff",Nn="A-Z\\xc0-\\xd6\\xd8-\\xde",Kn="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Hn="["+Kn+"]",Mn="\\d+",zn="["+Tn+"]",Jn="["+wn+"]",jn="[^"+Yn+Kn+Mn+Tn+wn+Nn+"]",Fn="(?:\\ud83c[\\udde6-\\uddff]){2}",On="[\\ud800-\\udbff][\\udc00-\\udfff]",$n="["+Nn+"]",En="(?:"+Jn+"|"+jn+")",Un="(?:"+$n+"|"+jn+")",Pn="(?:['’](?:d|ll|m|re|s|t|ve))?",An="(?:['’](?:D|LL|M|RE|S|T|VE))?",Bn="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",Qn="[\\ufe0e\\ufe0f]?",Dn=Qn+Bn+("(?:\\u200d(?:"+["[^"+Yn+"]",Fn,On].join("|")+")"+Qn+Bn+")*"),_n="(?:"+[zn,Fn,On].join("|")+")"+Dn,qn=RegExp([$n+"?"+Jn+"+"+Pn+"(?="+[Hn,$n,"$"].join("|")+")",Un+"+"+An+"(?="+[Hn,$n+En,"$"].join("|")+")",$n+"?"+En+"+"+Pn,$n+"+"+An,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Mn,_n].join("|"),"g");function ei(e,t,n){return e=Ot(e),void 0===(t=n?void 0:t)?function(e){return Ln.test(e)}(e)?function(e){return e.match(qn)||[]}(e):function(e){return e.match(Rn)||[]}(e):e.match(t)||[]}var ti=RegExp("['’]","g");function ni(e){return function(t){return function(e,t,n,i){var o=-1,l=null==e?0:e.length;for(i&&l&&(n=e[++o]);++o<l;)n=t(n,e[o],o,e);return n}(ei(function(e){return(e=Ot(e))&&e.replace(Cn,Vn).replace(Sn,"")}(t).replace(ti,"")),e,"")}}var ii=ni((function(e,t,n){return t=t.toLowerCase(),e+(n?function(e){return Wn(Ot(e).toLowerCase())}(t):t)})),oi=V.isFinite,li=Math.min;function ri(e){var t=this.__data__=new wt(e);this.size=t.size}ri.prototype.clear=function(){this.__data__=new wt,this.size=0},ri.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},ri.prototype.get=function(e){return this.__data__.get(e)},ri.prototype.has=function(e){return this.__data__.has(e)},ri.prototype.set=function(e,t){var n=this.__data__;if(n instanceof wt){var i=n.__data__;if(!Nt||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new Ht(i)}return n.set(e,t),this.size=n.size,this};var ai="object"==typeof exports&&exports&&!exports.nodeType&&exports,si=ai&&"object"==typeof module&&module&&!module.nodeType&&module,ci=si&&si.exports===ai?V.Buffer:void 0,ui=ci?ci.allocUnsafe:void 0;function di(){return[]}var pi=Object.prototype.propertyIsEnumerable,hi=Object.getOwnPropertySymbols,mi=hi?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,i=null==e?0:e.length,o=0,l=[];++n<i;){var r=e[n];t(r,n,e)&&(l[o++]=r)}return l}(hi(e),(function(t){return pi.call(e,t)})))}:di;var bi=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Bt(t,mi(e)),e=tn(e);return t}:di;function fi(e,t,n){var i=t(e);return F(e)?i:Bt(i,n(e))}function yi(e){return fi(e,xt,mi)}function gi(e){return fi(e,It,bi)}var vi=Ie(V,"DataView"),Zi=Ie(V,"Promise"),xi=Ie(V,"Set"),Xi="[object Map]",Gi="[object Promise]",Ii="[object Set]",Wi="[object WeakMap]",ki="[object DataView]",Vi=fe(vi),Ci=fe(Nt),Si=fe(Zi),Ri=fe(xi),Li=fe(We),Yi=H;(vi&&Yi(new vi(new ArrayBuffer(1)))!=ki||Nt&&Yi(new Nt)!=Xi||Zi&&Yi(Zi.resolve())!=Gi||xi&&Yi(new xi)!=Ii||We&&Yi(new We)!=Wi)&&(Yi=function(e){var t=H(e),n="[object Object]"==t?e.constructor:void 0,i=n?fe(n):"";if(i)switch(i){case Vi:return ki;case Ci:return Xi;case Si:return Gi;case Ri:return Ii;case Li:return Wi}return t});const Ti=Yi;var wi=Object.prototype.hasOwnProperty;var Ni=V.Uint8Array;function Ki(e){var t=new e.constructor(e.byteLength);return new Ni(t).set(new Ni(e)),t}var Hi=/\w*$/;var Mi=C?C.prototype:void 0,zi=Mi?Mi.valueOf:void 0;var Ji="[object Boolean]",ji="[object Date]",Fi="[object Map]",Oi="[object Number]",$i="[object RegExp]",Ei="[object Set]",Ui="[object String]",Pi="[object Symbol]",Ai="[object ArrayBuffer]",Bi="[object DataView]",Qi="[object Float32Array]",Di="[object Float64Array]",_i="[object Int8Array]",qi="[object Int16Array]",eo="[object Int32Array]",to="[object Uint8Array]",no="[object Uint8ClampedArray]",io="[object Uint16Array]",oo="[object Uint32Array]";function lo(e,t,n){var i=e.constructor;switch(t){case Ai:return Ki(e);case Ji:case ji:return new i(+e);case Bi:return function(e,t){var n=t?Ki(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case Qi:case Di:case _i:case qi:case eo:case to:case no:case io:case oo:return function(e,t){var n=t?Ki(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}(e,n);case Fi:return new i;case Oi:case Ui:return new i(e);case $i:return function(e){var t=new e.constructor(e.source,Hi.exec(e));return t.lastIndex=e.lastIndex,t}(e);case Ei:return new i;case Pi:return function(e){return zi?Object(zi.call(e)):{}}(e)}}var ro=dt&&dt.isMap,ao=ro?at(ro):function(e){return M(e)&&"[object Map]"==Ti(e)};var so=dt&&dt.isSet,co=so?at(so):function(e){return M(e)&&"[object Set]"==Ti(e)},uo=1,po=2,ho=4,mo="[object Arguments]",bo="[object Function]",fo="[object GeneratorFunction]",yo="[object Object]",go={};function vo(e,t,n,i,o,l){var r,a=t&uo,s=t&po,c=t&ho;if(n&&(r=o?n(e,i,o,l):n(e)),void 0!==r)return r;if(!Q(e))return e;var u=F(e);if(u){if(r=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&wi.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!a)return function(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}(e,r)}else{var d=Ti(e),p=d==bo||d==fo;if(lt(e))return function(e,t){if(t)return e.slice();var n=e.length,i=ui?ui(n):new e.constructor(n);return e.copy(i),i}(e,a);if(d==yo||d==mo||p&&!o){if(r=s||p?{}:function(e){return"function"!=typeof e.constructor||Be(e)?{}:Ve(tn(e))}(e),!a)return s?function(e,t){return Fe(e,bi(e),t)}(e,function(e,t){return e&&Fe(t,It(t),e)}(r,e)):function(e,t){return Fe(e,mi(e),t)}(e,function(e,t){return e&&Fe(t,xt(t),e)}(r,e))}else{if(!go[d])return o?e:{};r=lo(e,d,a)}}l||(l=new ri);var h=l.get(e);if(h)return h;l.set(e,r),co(e)?e.forEach((function(i){r.add(vo(i,t,n,i,e,l))})):ao(e)&&e.forEach((function(i,o){r.set(o,vo(i,t,n,o,e,l))}));var m=u?void 0:(c?s?gi:yi:s?It:xt)(e);return function(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n,e););}(m||e,(function(i,o){m&&(i=e[o=i]),je(r,o,vo(i,t,n,o,e,l))})),r}go[mo]=go["[object Array]"]=go["[object ArrayBuffer]"]=go["[object DataView]"]=go["[object Boolean]"]=go["[object Date]"]=go["[object Float32Array]"]=go["[object Float64Array]"]=go["[object Int8Array]"]=go["[object Int16Array]"]=go["[object Int32Array]"]=go["[object Map]"]=go["[object Number]"]=go[yo]=go["[object RegExp]"]=go["[object Set]"]=go["[object String]"]=go["[object Symbol]"]=go["[object Uint8Array]"]=go["[object Uint8ClampedArray]"]=go["[object Uint16Array]"]=go["[object Uint32Array]"]=!0,go["[object Error]"]=go[bo]=go["[object WeakMap]"]=!1;var Zo=1,xo=4;function Xo(e){return vo(e,Zo|xo)}function Go(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Ht;++t<n;)this.add(e[t])}function Io(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}function Wo(e,t){return e.has(t)}Go.prototype.add=Go.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Go.prototype.has=function(e){return this.__data__.has(e)};var ko=1,Vo=2;function Co(e,t,n,i,o,l){var r=n&ko,a=e.length,s=t.length;if(a!=s&&!(r&&s>a))return!1;var c=l.get(e),u=l.get(t);if(c&&u)return c==t&&u==e;var d=-1,p=!0,h=n&Vo?new Go:void 0;for(l.set(e,t),l.set(t,e);++d<a;){var m=e[d],b=t[d];if(i)var f=r?i(b,m,d,t,e,l):i(m,b,d,e,t,l);if(void 0!==f){if(f)continue;p=!1;break}if(h){if(!Io(t,(function(e,t){if(!Wo(h,t)&&(m===e||o(m,e,n,i,l)))return h.push(t)}))){p=!1;break}}else if(m!==b&&!o(m,b,n,i,l)){p=!1;break}}return l.delete(e),l.delete(t),p}function So(e){var t=-1,n=Array(e.size);return e.forEach((function(e,i){n[++t]=[i,e]})),n}function Ro(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var Lo=1,Yo=2,To="[object Boolean]",wo="[object Date]",No="[object Error]",Ko="[object Map]",Ho="[object Number]",Mo="[object RegExp]",zo="[object Set]",Jo="[object String]",jo="[object Symbol]",Fo="[object ArrayBuffer]",Oo="[object DataView]",$o=C?C.prototype:void 0,Eo=$o?$o.valueOf:void 0;var Uo=1,Po=Object.prototype.hasOwnProperty;var Ao=1,Bo="[object Arguments]",Qo="[object Array]",Do="[object Object]",_o=Object.prototype.hasOwnProperty;function qo(e,t,n,i,o,l){var r=F(e),a=F(t),s=r?Qo:Ti(e),c=a?Qo:Ti(t),u=(s=s==Bo?Do:s)==Do,d=(c=c==Bo?Do:c)==Do,p=s==c;if(p&&lt(e)){if(!lt(t))return!1;r=!0,u=!1}if(p&&!u)return l||(l=new ri),r||mt(e)?Co(e,t,n,i,o,l):function(e,t,n,i,o,l,r){switch(n){case Oo:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Fo:return!(e.byteLength!=t.byteLength||!l(new Ni(e),new Ni(t)));case To:case wo:case Ho:return ze(+e,+t);case No:return e.name==t.name&&e.message==t.message;case Mo:case Jo:return e==t+"";case Ko:var a=So;case zo:var s=i&Lo;if(a||(a=Ro),e.size!=t.size&&!s)return!1;var c=r.get(e);if(c)return c==t;i|=Yo,r.set(e,t);var u=Co(a(e),a(t),i,o,l,r);return r.delete(e),u;case jo:if(Eo)return Eo.call(e)==Eo.call(t)}return!1}(e,t,s,n,i,o,l);if(!(n&Ao)){var h=u&&_o.call(e,"__wrapped__"),m=d&&_o.call(t,"__wrapped__");if(h||m){var b=h?e.value():e,f=m?t.value():t;return l||(l=new ri),o(b,f,n,i,l)}}return!!p&&(l||(l=new ri),function(e,t,n,i,o,l){var r=n&Uo,a=yi(e),s=a.length;if(s!=yi(t).length&&!r)return!1;for(var c=s;c--;){var u=a[c];if(!(r?u in t:Po.call(t,u)))return!1}var d=l.get(e),p=l.get(t);if(d&&p)return d==t&&p==e;var h=!0;l.set(e,t),l.set(t,e);for(var m=r;++c<s;){var b=e[u=a[c]],f=t[u];if(i)var y=r?i(f,b,u,t,e,l):i(b,f,u,e,t,l);if(!(void 0===y?b===f||o(b,f,n,i,l):y)){h=!1;break}m||(m="constructor"==u)}if(h&&!m){var g=e.constructor,v=t.constructor;g!=v&&"constructor"in e&&"constructor"in t&&!("function"==typeof g&&g instanceof g&&"function"==typeof v&&v instanceof v)&&(h=!1)}return l.delete(e),l.delete(t),h}(e,t,n,i,o,l))}function el(e,t,n,i,o){return e===t||(null==e||null==t||!M(e)&&!M(t)?e!=e&&t!=t:qo(e,t,n,i,el,o))}var tl=1,nl=2;function il(e){return e==e&&!Q(e)}function ol(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}function ll(e){var t=function(e){for(var t=xt(e),n=t.length;n--;){var i=t[n],o=e[i];t[n]=[i,o,il(o)]}return t}(e);return 1==t.length&&t[0][2]?ol(t[0][0],t[0][1]):function(n){return n===e||function(e,t,n,i){var o=n.length,l=o,r=!i;if(null==e)return!l;for(e=Object(e);o--;){var a=n[o];if(r&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++o<l;){var s=(a=n[o])[0],c=e[s],u=a[1];if(r&&a[2]){if(void 0===c&&!(s in e))return!1}else{var d=new ri;if(i)var p=i(c,u,s,e,t,d);if(!(void 0===p?el(u,c,tl|nl,i,d):p))return!1}}return!0}(n,e,t)}}function rl(e,t){return null!=e&&t in Object(e)}function al(e,t){return null!=e&&function(e,t,n){for(var i=-1,o=(t=$t(t,e)).length,l=!1;++i<o;){var r=Ut(t[i]);if(!(l=null!=e&&n(e,r)))break;e=e[r]}return l||++i!=o?l:!!(o=null==e?0:e.length)&&Ue(o)&&He(r,o)&&(F(e)||tt(e))}(e,t,rl)}var sl=1,cl=2;function ul(e){return Vt(e)?function(e){return function(t){return null==t?void 0:t[e]}}(Ut(e)):function(e){return function(t){return Pt(t,e)}}(e)}function dl(e){return"function"==typeof e?e:null==e?re:"object"==typeof e?F(e)?function(e,t){return Vt(e)&&il(t)?ol(Ut(e),t):function(n){var i=At(n,e);return void 0===i&&i===t?al(n,e):el(t,i,sl|cl)}}(e[0],e[1]):ll(e):ul(e)}function pl(e,t,n,i){for(var o=-1,l=null==e?0:e.length;++o<l;){var r=e[o];t(i,r,n(r),e)}return i}var hl=function(e){return function(t,n,i){for(var o=-1,l=Object(t),r=i(t),a=r.length;a--;){var s=r[e?a:++o];if(!1===n(l[s],s,l))break}return t}}();const ml=hl;var bl=function(e,t){return function(n,i){if(null==n)return n;if(!Pe(n))return e(n,i);for(var o=n.length,l=t?o:-1,r=Object(n);(t?l--:++l<o)&&!1!==i(r[l],l,r););return n}}((function(e,t){return e&&ml(e,t,xt)}));function fl(e,t,n,i){return bl(e,(function(e,o,l){t(i,e,n(e),l)})),i}function yl(e){return M(e)&&Pe(e)}function gl(e,t,n){for(var i=-1,o=null==e?0:e.length;++i<o;)if(n(t,e[i]))return!0;return!1}var vl=function(e,t){return Ye($e(e,t,re),e+"")}((function(e,t){return yl(e)?function(e,t,n,i){var o=-1,l=we,r=!0,a=e.length,s=[],c=t.length;if(!a)return s;n&&(t=j(t,at(n))),i?(l=gl,r=!1):t.length>=200&&(l=Wo,r=!1,t=new Go(t));e:for(;++o<a;){var u=e[o],d=null==n?u:n(u);if(u=i||0!==u?u:0,r&&d==d){for(var p=c;p--;)if(t[p]===d)continue e;s.push(u)}else l(t,d,i)||s.push(u)}return s}(e,_t(t,1,yl,!0)):[]}));function Zl(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}function xl(e){return e&&e.length?e[0]:void 0}var Xl=Object.prototype.hasOwnProperty,Gl=function(e,t){return function(n,i){var o=F(n)?pl:fl,l=t?t():{};return o(n,e,dl(i),l)}}((function(e,t,n){Xl.call(e,n)?e[n].push(t):Me(e,n,[t])}));var Il="[object Map]",Wl="[object Set]",kl=Object.prototype.hasOwnProperty;function Vl(e){if(null==e)return!0;if(Pe(e)&&(F(e)||"string"==typeof e||"function"==typeof e.splice||lt(e)||mt(e)||tt(e)))return!e.length;var t=Ti(e);if(t==Il||t==Wl)return!e.size;if(Be(e))return!Zt(e).length;for(var n in e)if(kl.call(e,n))return!1;return!0}function Cl(e,t){return null==(e=function(e,t){return t.length<2?e:Pt(e,cn(t,0,-1))}(e,t=$t(t,e)))||delete e[Ut(Zl(t))]}function Sl(e){return function(e){if(!M(e)||H(e)!=nn)return!1;var t=tn(e);if(null===t)return!0;var n=an.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&rn.call(n)==sn}(e)?void 0:e}var Rl=en((function(e,t){var n={};if(null==e)return n;var i=!1;t=j(t,(function(t){return t=$t(t,e),i||(i=t.length>1),t})),Fe(e,gi(e),n),i&&(n=vo(n,7,Sl));for(var o=t.length;o--;)Cl(n,t[o]);return n}));function Ll(e,t,n,i){if(!Q(e))return e;for(var o=-1,l=(t=$t(t,e)).length,r=l-1,a=e;null!=a&&++o<l;){var s=Ut(t[o]),c=n;if("__proto__"===s||"constructor"===s||"prototype"===s)return e;if(o!=r){var u=a[s];void 0===(c=i?i(u,s,a):void 0)&&(c=Q(u)?u:He(t[o+1])?[]:{})}je(a,s,c),a=a[s]}return e}function Yl(e,t){return function(e,t,n){for(var i=-1,o=t.length,l={};++i<o;){var r=t[i],a=Pt(e,r);n(a,r)&&Ll(l,$t(r,e),a)}return l}(e,t,(function(t,n){return al(e,n)}))}var Tl=en((function(e,t){return null==e?{}:Yl(e,t)})),wl=Math.ceil,Nl=Math.max;var Kl=function(e){return function(t,n,i){return i&&"number"!=typeof i&&function(e,t,n){if(!Q(n))return!1;var i=typeof t;return!!("number"==i?Pe(n)&&He(t,n.length):"string"==i&&t in n)&&ze(n[t],e)}(t,n,i)&&(n=i=void 0),t=le(t),void 0===n?(n=t,t=0):n=le(n),function(e,t,n,i){for(var o=-1,l=Nl(wl((t-e)/(n||1)),0),r=Array(l);l--;)r[i?l:++o]=e,e+=n;return r}(t,n,i=void 0===i?t<n?1:-1:le(i),e)}}(),Hl=function(e){var t=Math[e];return function(e,n){if(e=ne(e),n=null==n?0:li(function(e){var t=le(e),n=t%1;return t==t?n?t-n:t:0}(n),292),n&&oi(e)){var i=(Ot(e)+"e").split("e");return+((i=(Ot(t(i[0]+"e"+(+i[1]+n)))+"e").split("e"))[0]+"e"+(+i[1]-n))}return t(e)}}("round"),Ml=xi&&1/Ro(new xi([,-0]))[1]==1/0?function(e){return new xi(e)}:function(){},zl=200;function Jl(e){return e&&e.length?function(e,t,n){var i=-1,o=we,l=e.length,r=!0,a=[],s=a;if(n)r=!1,o=gl;else if(l>=zl){var c=t?null:Ml(e);if(c)return Ro(c);r=!1,o=Wo,s=new Go}else s=t?[]:a;e:for(;++i<l;){var u=e[i],d=t?t(u):u;if(u=n||0!==u?u:0,r&&d==d){for(var p=s.length;p--;)if(s[p]===d)continue e;t&&s.push(d),a.push(u)}else o(s,d,n)||(s!==a&&s.push(d),a.push(u))}return a}(e):[]}function jl(e){const t=new Set(e);return e=>t.has(e)}function Fl(e,...t){try{return null==e?void 0:e(...t)}catch(e){console.error(e)}}const Ol=queueMicrotask??(e=>{Promise.resolve().then(e)}),$l=e=>t=>typeof t===e,El=$l("object"),Ul=$l("boolean"),Pl=$l("function"),Al=$l("number"),Bl=$l("string"),Ql=$l("undefined"),Dl=e=>null===e,_l=e=>Dl(e)||Ql(e),{isArray:ql}=Array,er=e=>El(e)&&!Dl(e)&&!ql(e),tr=e=>Number.isInteger(e);const nr=((e,t,n)=>{let i=(2<<Math.log(e.length-1)/Math.LN2)-1,o=-~(1.6*i*t/e.length);return(l=t)=>{let r="";for(;;){let t=n(o),a=o;for(;a--;)if(r+=e[t[a]&i]||"",r.length===l)return r}}})("useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",21,(e=>{let t=globalThis.crypto;return void 0===t&&(t=require("node:crypto").webcrypto),t.getRandomValues(new Uint8Array(e))})),ir=(e,t)=>n=>Math.min(Math.max(n,e),t)
    /*!
     * @dineug/erd-editor-schema
     * @version 0.1.0 | Sun Oct 20 2024
     * @author SeungHwan-Lee <dineug2@gmail.com>
     * @license MIT
     */;function or(e,t,n){return i=>{if(!n)return;const o=n[i];e(o)&&(t[i]=o)}}function lr(e){return t=>Bl(t)&&e.includes(t)}function rr(e){return t=>Al(t)&&e.includes(t)}function ar(e,t,n){return Reflect.get(e,t)??n}function sr(){const e=Date.now();return{updateAt:e,createAt:e}}function cr(e,t){const n=or(Al,e,t);n("updateAt"),n("createAt")}const ur=()=>({tableIds:[],relationshipIds:[],indexIds:[],memoIds:[]});const dr=()=>({id:"",name:"",tableId:"",indexColumnIds:[],seqIndexColumnIds:[],unique:!1,meta:sr()});const pr={ASC:1,DESC:2},hr=Object.values(pr),mr=()=>({id:"",indexId:"",columnId:"",orderType:pr.ASC,meta:sr()});const br=()=>({});const fr=()=>({id:"",value:"",ui:{x:200,y:100,zIndex:2,width:116,height:100,color:""},meta:sr()});const yr={ZeroOne:2,ZeroN:4,OneOnly:8,OneN:16},gr=Object.values(yr),vr={ring:1,dash:2},Zr=Object.values(vr),xr={left:1,right:2,top:4,bottom:8},Xr=Object.values(xr),Gr=()=>({id:"",identification:!1,relationshipType:yr.ZeroN,startRelationshipType:vr.dash,start:{tableId:"",columnIds:[],x:0,y:0,direction:xr.bottom},end:{tableId:"",columnIds:[],x:0,y:0,direction:xr.bottom},meta:sr()});const Ir={ERD:"ERD",visualization:"@dineug/erd-editor/builtin-visualization",schemaSQL:"@dineug/erd-editor/builtin-schema-sql",generatorCode:"@dineug/erd-editor/builtin-generator-code",settings:"settings"},Wr=Object.values(Ir),kr={tableComment:1,columnComment:2,columnDataType:4,columnDefault:8,columnAutoIncrement:16,columnPrimaryKey:32,columnUnique:64,columnNotNull:128,relationship:256},Vr={columnName:1,columnDataType:2,columnNotNull:4,columnUnique:8,columnAutoIncrement:16,columnDefault:32,columnComment:64},Cr=Object.values(Vr),Sr={MariaDB:1,MSSQL:2,MySQL:4,Oracle:8,PostgreSQL:16,SQLite:32},Rr=Object.values(Sr),Lr={GraphQL:1,csharp:2,Java:4,Kotlin:8,TypeScript:16,JPA:32,Scala:64},Yr=Object.values(Lr),Tr={none:1,camelCase:2,pascalCase:4,snakeCase:8},wr=Object.values(Tr),Nr={none:1,doubleQuote:2,singleQuote:4,backtick:8},Kr=Object.values(Nr),Hr=kr.tableComment|kr.columnComment|kr.columnDataType|kr.columnDefault|kr.columnPrimaryKey|kr.columnNotNull|kr.relationship,Mr=()=>({width:2e3,height:2e3,scrollTop:0,scrollLeft:0,zoomLevel:1,show:Hr,database:Sr.MySQL,databaseName:"",canvasType:Ir.ERD,language:Lr.GraphQL,tableNameCase:Tr.pascalCase,columnNameCase:Tr.camelCase,bracketType:Nr.none,relationshipDataTypeSync:!0,relationshipOptimization:!1,columnOrder:[Vr.columnName,Vr.columnDataType,Vr.columnNotNull,Vr.columnUnique,Vr.columnAutoIncrement,Vr.columnDefault,Vr.columnComment],maxWidthComment:-1,ignoreSaveSettings:0}),zr=ir(2e3,2e4),Jr=ir(.1,1),jr=ir(60,200);const Fr=()=>({id:"",name:"",comment:"",columnIds:[],seqColumnIds:[],ui:{x:200,y:100,zIndex:2,widthName:60,widthComment:60,color:""},meta:sr()});const Or=()=>({id:"",tableId:"",name:"",comment:"",dataType:"",default:"",options:0,ui:{keys:0,widthName:60,widthComment:60,widthDataType:60,widthDefault:60},meta:sr()});function Er(e){var t,n,i,o,l,r;const a=e,s=function(e){const t=Mr();if(!er(e)||_l(e))return t;const n=or(Al,t,e),i=or(Bl,t,e),o=or(Ul,t,e);return Al(e.width)&&(t.width=zr(e.width)),Al(e.height)&&(t.height=zr(e.height)),Al(e.zoomLevel)&&(t.zoomLevel=Jr(e.zoomLevel)),Al(e.maxWidthComment)&&-1!==e.maxWidthComment&&(t.maxWidthComment=jr(e.maxWidthComment)),n("scrollTop"),n("scrollLeft"),n("show"),n("ignoreSaveSettings"),i("databaseName"),i("canvasType"),o("relationshipDataTypeSync"),o("relationshipOptimization"),or(rr(Rr),t,e)("database"),or(rr(Yr),t,e)("language"),or(rr(wr),t,e)("tableNameCase"),or(rr(wr),t,e)("columnNameCase"),or(rr(Kr),t,e)("bracketType"),ql(e.columnOrder)&&Cr.length===e.columnOrder.length&&0===vl(Cr,e.columnOrder).length&&(t.columnOrder=e.columnOrder),t}(a.settings),c=function(e){const t=ur();if(!er(e)||_l(e))return t;const n=or(ql,t,e);return n("tableIds"),n("relationshipIds"),n("indexIds"),n("memoIds"),t}(a.doc),u=function(e){const t=br();if(!er(e)||_l(e))return t;for(const[n,i]of Object.entries(e)){if(!ql(i)||4!==i.length)continue;const[e,o,l,r]=i;if(Bl(e)&&Al(o)&&Al(l)&&er(r)){const i={},a=or(Al,i,r);Object.keys(r).forEach(a),t[n]=[e,o,l,i]}}return t}(a.lww),d=function(e){const t={};if(!er(e)||_l(e))return t;for(const n of Object.values(e)){if(!n)continue;const e=Fr(),i=or(Bl,e,n),o=or(ql,e,n),l=or(Al,e.ui,n.ui),r=or(Bl,e.ui,n.ui);i("id"),i("name"),i("comment"),o("columnIds"),o("seqColumnIds"),r("color"),l("x"),l("y"),l("zIndex"),l("widthName"),l("widthComment"),cr(e.meta,n.meta),e.id&&(t[e.id]=e)}return t}(null==(t=a.collections)?void 0:t.tableEntities),p=function(e){const t={};if(!er(e)||_l(e))return t;for(const n of Object.values(e)){if(!n)continue;const e=Or(),i=or(Bl,e,n),o=or(Al,e,n),l=or(Al,e.ui,n.ui);i("id"),i("tableId"),i("name"),i("comment"),i("dataType"),i("default"),o("options"),l("keys"),l("widthName"),l("widthComment"),l("widthDataType"),l("widthDefault"),cr(e.meta,n.meta),e.id&&(t[e.id]=e)}return t}(null==(n=a.collections)?void 0:n.tableColumnEntities),h=function(e){const t={};if(!er(e)||_l(e))return t;for(const n of Object.values(e)){if(!n)continue;const e=Gr(),i=or(Bl,e,n),o=or(Ul,e,n),l=or(Al,e.start,n.start),r=or(Bl,e.start,n.start),a=or(Al,e.end,n.end),s=or(Bl,e.end,n.end);i("id"),o("identification"),or(rr(gr),e,n)("relationshipType"),or(rr(Zr),e,n)("startRelationshipType"),r("tableId"),l("x"),l("y"),or(rr(Xr),e.start,n.start)("direction"),or(ql,e.start,n.start)("columnIds"),s("tableId"),a("x"),a("y"),or(rr(Xr),e.end,n.end)("direction"),or(ql,e.end,n.end)("columnIds"),cr(e.meta,n.meta),e.id&&(t[e.id]=e)}return t}(null==(i=a.collections)?void 0:i.relationshipEntities),m=function(e){const t={};if(!er(e)||_l(e))return t;for(const n of Object.values(e)){if(!n)continue;const e=dr(),i=or(Bl,e,n),o=or(Ul,e,n),l=or(ql,e,n);i("id"),i("name"),i("tableId"),o("unique"),l("indexColumnIds"),l("seqIndexColumnIds"),cr(e.meta,n.meta),e.id&&(t[e.id]=e)}return t}(null==(o=a.collections)?void 0:o.indexEntities),b=function(e){const t={};if(!er(e)||_l(e))return t;for(const n of Object.values(e)){if(!n)continue;const e=mr(),i=or(Bl,e,n);i("id"),i("indexId"),i("columnId"),or(rr(hr),e,n)("orderType"),cr(e.meta,n.meta),e.id&&(t[e.id]=e)}return t}(null==(l=a.collections)?void 0:l.indexColumnEntities),f=function(e){const t={};if(!er(e)||_l(e))return t;for(const n of Object.values(e)){if(!n)continue;const e=fr(),i=or(Bl,e,n),o=or(Al,e.ui,n.ui),l=or(Bl,e.ui,n.ui);i("id"),i("value"),l("color"),o("x"),o("y"),o("zIndex"),o("width"),o("height"),cr(e.meta,n.meta),e.id&&(t[e.id]=e)}return t}(null==(r=a.collections)?void 0:r.memoEntities);return{$schema:"https://raw.githubusercontent.com/dineug/erd-editor/main/json-schema/schema.json",version:"3.0.0",settings:s,doc:c,collections:{tableEntities:d,tableColumnEntities:p,relationshipEntities:h,indexEntities:m,indexColumnEntities:b,memoEntities:f},lww:u}}const Ur={CanvasType:Ir,CanvasTypeList:Wr,Show:kr,ColumnType:Vr,ColumnTypeList:Cr,Database:Sr,DatabaseList:Rr,Language:Lr,LanguageList:Yr,NameCase:Tr,NameCaseList:wr,BracketType:Nr,BracketTypeList:Kr,RelationshipType:yr,RelationshipTypeList:gr,StartRelationshipType:vr,StartRelationshipTypeList:Zr,Direction:xr,DirectionList:Xr,ColumnOption:{autoIncrement:1,primaryKey:2,unique:4,notNull:8},ColumnUIKey:{primaryKey:1,foreignKey:2},OrderType:pr,OrderTypeList:hr,SaveSettingType:{scroll:1,zoomLevel:2},CANVAS_SIZE_MAX:2e4,CANVAS_SIZE_MIN:2e3,CANVAS_ZOOM_MAX:1,CANVAS_ZOOM_MIN:.1};function Pr(e){const t=Er({});return function(e,t){e.width=t.width,e.height=t.height,e.scrollTop=t.scrollTop,e.scrollLeft=t.scrollLeft,e.zoomLevel=t.zoomLevel,e.databaseName=t.databaseName,e.canvasType=Ur.CanvasType.ERD,e.show=Object.keys(t.show).reduce(((e,n)=>{if(ar(t.show,n,!1)){return e|ar(Ur.Show,n,0)}return e}),0),e.database=Reflect.get(Ur.Database,t.database)??Ur.Database.MySQL,e.language="C#"===t.language?Ur.Language.csharp:ar(Ur.Language,t.language,Ur.Language.GraphQL),e.tableNameCase=ar(Ur.NameCase,t.tableCase,Ur.NameCase.pascalCase),e.columnNameCase=ar(Ur.NameCase,t.columnCase,Ur.NameCase.camelCase),e.bracketType=ar(Ur.BracketType,t.bracketType,Ur.BracketType.none),e.relationshipDataTypeSync=t.setting.relationshipDataTypeSync,e.relationshipOptimization=t.setting.relationshipOptimization;const n=t.setting.columnOrder.map((e=>Ur.ColumnType[e]));0===vl(Ur.ColumnTypeList,n).length&&(e.columnOrder=n)}(t.settings,e.canvas),function(e,t){const n=t.tables.filter((({id:e})=>!!e)),i=t.indexes.filter((({id:e})=>!!e));e.doc.tableIds=n.map((({id:e})=>e)),e.doc.indexIds=i.map((({id:e})=>e));for(const t of n){const n=Fr();n.id=t.id,n.name=t.name,n.comment=t.comment,n.columnIds=t.columns.map((({id:e})=>e)),n.seqColumnIds=[...n.columnIds],n.ui.y=t.ui.top,n.ui.x=t.ui.left,n.ui.zIndex=t.ui.zIndex,n.ui.widthName=t.ui.widthName,n.ui.widthComment=t.ui.widthComment,n.ui.color=t.ui.color??"";for(const n of t.columns){const i=Or();i.id=n.id,i.tableId=t.id,i.name=n.name,i.comment=n.comment,i.dataType=n.dataType,i.default=n.default,i.options=Object.keys(n.option).reduce(((e,t)=>{if(ar(n.option,t,!1)){return e|ar(Ur.ColumnOption,t,0)}return e}),0),i.ui.widthName=n.ui.widthName,i.ui.widthComment=n.ui.widthComment,i.ui.widthDataType=n.ui.widthDataType,i.ui.widthDefault=n.ui.widthDefault,n.ui.pfk?i.ui.keys=Ur.ColumnUIKey.primaryKey|Ur.ColumnUIKey.foreignKey:n.ui.pk?i.ui.keys=Ur.ColumnUIKey.primaryKey:n.ui.fk&&(i.ui.keys=Ur.ColumnUIKey.foreignKey),e.collections.tableColumnEntities[i.id]=i}e.collections.tableEntities[n.id]=n}for(const t of i){const n=dr();n.id=t.id,n.name=t.name,n.tableId=t.tableId,n.unique=t.unique;for(const i of t.columns){const o=nr(),l=mr();n.indexColumnIds.push(o),n.seqIndexColumnIds.push(o),l.id=o,l.indexId=t.id,l.columnId=i.id,l.orderType=ar(Ur.OrderType,i.orderType,Ur.OrderType.ASC),e.collections.indexColumnEntities[l.id]=l}e.collections.indexEntities[n.id]=n}}(t,e.table),function(e,t){const n=t.memos.filter((({id:e})=>!!e));e.doc.memoIds=n.map((({id:e})=>e));for(const t of n){const n=fr();n.id=t.id,n.value=t.value,n.ui.y=t.ui.top,n.ui.x=t.ui.left,n.ui.width=t.ui.width,n.ui.height=t.ui.height,n.ui.zIndex=t.ui.zIndex,n.ui.color=t.ui.color??"",e.collections.memoEntities[n.id]=n}}(t,e.memo),function(e,t){const n=t.relationships.filter((({id:e})=>!!e));e.doc.relationshipIds=n.map((({id:e})=>e));for(const t of n){const n=Gr();n.id=t.id,n.identification=t.identification,n.relationshipType=ar(Ur.RelationshipType,t.relationshipType,Ur.RelationshipType.ZeroN),n.startRelationshipType=ar(Ur.StartRelationshipType,"Ring"===t.startRelationshipType?"ring":"dash",Ur.StartRelationshipType.dash),n.start.tableId=t.start.tableId,n.start.columnIds=t.start.columnIds,n.start.x=t.start.x,n.start.y=t.start.y,n.start.direction=ar(Ur.Direction,t.start.direction,Ur.Direction.bottom),n.end.tableId=t.end.tableId,n.end.columnIds=t.end.columnIds,n.end.x=t.end.x,n.end.y=t.end.y,n.end.direction=ar(Ur.Direction,t.end.direction,Ur.Direction.bottom),e.collections.relationshipEntities[n.id]=n}}(t,e.relationship),t}function Ar(e,t,n){return e[t]||(e[t]=function(e){return[e,-1,-1,{}]}(n),e[t])}function Br(e,t,n,i,o,l){const r=Ar(e,n,i);(r[3][o]??-1)<=t&&(r[3][o]=t,l())}let Qr=class{constructor(e,t){Object.defineProperty(this,"collection",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"collectionKey",{enumerable:!0,configurable:!0,writable:!0,value:t})}selectById(e){return this.collection[e]}selectByIds(e){return e.length,e.map((e=>this.selectById(e))).filter(Boolean)}selectEntities(){return this.collection}selectAll(){return Object.values(this.collection)}setOne(e){return this.collection[e.id]=e,this}setMany(e){return e.forEach((e=>this.setOne(e))),this}setAll(e){return this.removeAll(),this.setMany(e),this}addOne(e){return this.selectById(e.id)||this.setOne(e),this}addMany(e){return e.forEach((e=>this.addOne(e))),this}removeOne(e){return this.selectById(e)&&Reflect.deleteProperty(this.collection,e),this}removeMany(e){return e.forEach((e=>this.removeOne(e))),this}removeAll(){return this.collection={},this}updateOne(e,t){const n=this.selectById(e);return n&&(t(n),n.meta.updateAt=Date.now()),this}updateMany(e,t){return e.forEach((e=>this.updateOne(e,t))),this}getOrCreate(e,t){const n=this.selectById(e);if(n)return n;const i=t(e);return this.setOne(i),this.selectById(e)}addOperator(e,t,n,i){return function(e,t,n,i,o){const l=Ar(e,n,i),r=l[1],a=l[2];r<t&&(l[1]=t),a<t&&o()}(e,t,n,this.collectionKey,i),this}removeOperator(e,t,n,i){return function(e,t,n,i,o){const l=Ar(e,n,i),r=l[2],a=l[1];r<t&&(l[2]=t),a<=t&&o()}(e,t,n,this.collectionKey,i),this}replaceOperator(e,t,n,i,o){return Br(e,t,n,this.collectionKey,i,o),this}};const Dr=e=>new class{constructor(e){Object.defineProperty(this,"collections",{enumerable:!0,configurable:!0,writable:!0,value:e})}collection(e){return new Qr(this.collections[e],e)}}(e);function _r(e,t){return(e&t)===t}const qr=Object.values({columnUnique:"columnUnique",columnAutoIncrement:"columnAutoIncrement",columnName:"columnName",columnDataType:"columnDataType",columnNotNull:"columnNotNull",columnDefault:"columnDefault",columnComment:"columnComment"}),ea=Object.values({ERD:"ERD","@vuerd/builtin-sql-ddl":"@vuerd/builtin-sql-ddl","@vuerd/builtin-grid":"@vuerd/builtin-grid","@vuerd/builtin-generator-code":"@vuerd/builtin-generator-code","@vuerd/builtin-visualization":"@vuerd/builtin-visualization"}),ta=Object.values({MariaDB:"MariaDB",MSSQL:"MSSQL",MySQL:"MySQL",Oracle:"Oracle",PostgreSQL:"PostgreSQL",SQLite:"SQLite"}),na=Object.values({GraphQL:"GraphQL","C#":"C#",Java:"Java",Kotlin:"Kotlin",TypeScript:"TypeScript",JPA:"JPA",Scala:"Scala"}),ia=Object.values({none:"none",camelCase:"camelCase",pascalCase:"pascalCase",snakeCase:"snakeCase"}),oa=Object.values({AtomOneDark:"AtomOneDark",AtomOneLight:"AtomOneLight",MonokaiSublime:"MonokaiSublime",GithubGist:"GithubGist",VS2015:"VS2015"}),la=Object.values({none:"none",doubleQuote:"doubleQuote",singleQuote:"singleQuote",backtick:"backtick"}),ra=()=>({version:"2.2.11",width:2e3,height:2e3,scrollTop:0,scrollLeft:0,zoomLevel:1,show:{tableComment:!0,columnComment:!0,columnDataType:!0,columnDefault:!0,columnAutoIncrement:!1,columnPrimaryKey:!0,columnUnique:!1,columnNotNull:!0,relationship:!0},database:"MySQL",databaseName:"",canvasType:"ERD",language:"GraphQL",tableCase:"pascalCase",columnCase:"camelCase",highlightTheme:"VS2015",bracketType:"none",setting:{relationshipDataTypeSync:!0,relationshipOptimization:!1,columnOrder:["columnName","columnDataType","columnNotNull","columnUnique","columnAutoIncrement","columnDefault","columnComment"]},pluginSerializationMap:{}}),aa=ir(2e3,2e4),sa=ir(.1,1);const ca=()=>({memos:[]}),ua=()=>({id:"",value:"",ui:{active:!1,left:200,top:200,zIndex:2,width:127,height:127}});const da=["ZeroOneN","One","N"],pa={ZeroOneN:"ZeroN",One:"OneOnly",N:"OneN"},ha=e=>da.includes(e)?pa[e]:e,ma={ZeroOneN:"ZeroOneN",ZeroOne:"ZeroOne",ZeroN:"ZeroN",OneOnly:"OneOnly",OneN:"OneN",One:"One",N:"N"},ba=Object.values(ma),fa=Object.values({Ring:"Ring",Dash:"Dash"}),ya={left:"left",right:"right",top:"top",bottom:"bottom"},ga=Object.values(ya),va=()=>({relationships:[]}),Za=()=>({id:"",identification:!1,relationshipType:"ZeroN",startRelationshipType:"Dash",start:{tableId:"",columnIds:[],x:0,y:0,direction:"bottom"},end:{tableId:"",columnIds:[],x:0,y:0,direction:"bottom"},constraintName:"",visible:!0});const xa={ASC:"ASC",DESC:"DESC"},Xa=Object.values(xa),Ga=()=>({tables:[],indexes:[]}),Ia=()=>({id:"",name:"",comment:"",columns:[],ui:{active:!1,left:200,top:100,zIndex:2,widthName:60,widthComment:60},visible:!0}),Wa=()=>({id:"",name:"",comment:"",dataType:"",default:"",option:{autoIncrement:!1,primaryKey:!1,unique:!1,notNull:!1},ui:{active:!1,pk:!1,fk:!1,pfk:!1,widthName:60,widthComment:60,widthDataType:60,widthDefault:60}}),ka=()=>({id:"",name:"",tableId:"",columns:[],unique:!1}),Va=()=>({id:"",orderType:xa.ASC});function Ca(e){const t=e,n=function(e){var t;const n=ra();if(_l(e))return n;const i=or(Al,n,e),o=or(Bl,n,e),l=or(Ul,n.show,e.show),r=or(Ul,n.setting,e.setting);if(Al(e.width)&&(n.width=aa(e.width)),Al(e.height)&&(n.height=aa(e.height)),Al(e.zoomLevel)&&(n.zoomLevel=sa(e.zoomLevel)),o("version"),o("databaseName"),i("scrollTop"),i("scrollLeft"),or(lr(ta),n,e)("database"),or(lr(ea),n,e)("canvasType"),or(lr(na),n,e)("language"),or(lr(ia),n,e)("tableCase"),or(lr(ia),n,e)("columnCase"),or(lr(oa),n,e)("highlightTheme"),or(lr(la),n,e)("bracketType"),l("tableComment"),l("columnComment"),l("columnDataType"),l("columnDefault"),l("columnAutoIncrement"),l("columnPrimaryKey"),l("columnUnique"),l("columnNotNull"),l("relationship"),r("relationshipDataTypeSync"),r("relationshipOptimization"),null!=(t=e.setting)&&t.columnOrder&&qr.length===e.setting.columnOrder.length&&0===vl(qr,e.setting.columnOrder).length&&(n.setting.columnOrder=e.setting.columnOrder),er(e.pluginSerializationMap)){const t=e.pluginSerializationMap;for(const e of Object.keys(t)){const i=t[e];Bl(i)&&(n.pluginSerializationMap[e]=i)}}return n}(t.canvas),i=function(e){const t=Ga();if(_l(e))return t;if(ql(e.tables))for(const n of e.tables){const e=Ia(),i=or(Bl,e,n),o=or(Ul,e,n),l=or(Al,e.ui,n.ui),r=or(Ul,e.ui,n.ui),a=or(Bl,e.ui,n.ui);if(i("id"),i("name"),i("comment"),o("visible"),r("active"),a("color"),l("left"),l("top"),l("zIndex"),l("widthName"),l("widthComment"),ql(n.columns))for(const t of n.columns){const n=Wa(),i=or(Bl,n,t),o=or(Al,n.ui,t.ui),l=or(Ul,n.ui,t.ui),r=or(Ul,n.option,t.option);i("id"),i("name"),i("comment"),i("dataType"),i("default"),r("autoIncrement"),r("primaryKey"),r("unique"),r("notNull"),l("active"),l("pk"),l("fk"),l("pfk"),o("widthName"),o("widthComment"),o("widthDataType"),o("widthDefault"),e.columns.push(n)}t.tables.push(e)}if(ql(e.indexes))for(const n of e.indexes){const e=ka(),i=or(Bl,e,n),o=or(Ul,e,n);if(i("id"),i("name"),i("tableId"),o("unique"),ql(n.columns))for(const t of n.columns){const n=Va();or(Bl,n,t)("id"),or(lr(Xa),n,t)("orderType"),e.columns.push(n)}t.indexes.push(e)}return t}(t.table),o=function(e){var t,n,i,o;const l=va();if(_l(e)||!ql(e.relationships))return l;for(const r of e.relationships){const e=Za(),a=or(Bl,e,r),s=or(Ul,e,r),c=or(Al,e.start,r.start),u=or(Bl,e.start,r.start),d=or(Al,e.end,r.end),p=or(Bl,e.end,r.end);a("id"),a("constraintName"),s("identification"),s("visible"),or(lr(ba),e,r)("relationshipType"),e.relationshipType=ha(e.relationshipType),or(lr(fa),e,r)("startRelationshipType"),u("tableId"),c("x"),c("y"),or(lr(ga),e.start,r.start)("direction"),ql(null==(t=r.start)?void 0:t.columnIds)&&(e.start.columnIds=null==(n=r.start)?void 0:n.columnIds.filter(Bl)),p("tableId"),d("x"),d("y"),or(lr(ga),e.end,r.end)("direction"),ql(null==(i=r.end)?void 0:i.columnIds)&&(e.end.columnIds=null==(o=r.end)?void 0:o.columnIds.filter(Bl)),l.relationships.push(e)}return l}(t.relationship),l=function(e){const t=ca();if(_l(e)||!ql(e.memos))return t;for(const n of e.memos){const e=ua(),i=or(Bl,e,n),o=or(Al,e.ui,n.ui),l=or(Ul,e.ui,n.ui),r=or(Bl,e.ui,n.ui);i("id"),i("value"),l("active"),r("color"),o("left"),o("top"),o("zIndex"),o("width"),o("height"),t.memos.push(e)}return t}(t.memo);return{canvas:n,table:i,relationship:o,memo:l}}function Sa(e){const t=JSON.parse(e);return"3.0.0"===Reflect.get(t,"version")?Er(t):Pr(Ca(t))}function Ra(e){const t=Tl(e,["$schema","version","settings","doc","collections","lww"]);return _r(t.settings.ignoreSaveSettings,Ur.SaveSettingType.scroll)&&(t.settings.scrollTop=0,t.settings.scrollLeft=0),_r(t.settings.ignoreSaveSettings,Ur.SaveSettingType.zoomLevel)&&(t.settings.zoomLevel=1),JSON.stringify(t,null,2)
    /*!
     * @dineug/r-html
     * @version 0.1.3 | Sun Oct 20 2024
     * @author SeungHwan-Lee <dineug2@gmail.com>
     * @license MIT
     */}function La(e,t){return Object.freeze({key:t??Symbol(),value:e})}Ur.RelationshipType.ZeroOne,Ur.RelationshipType.ZeroN,Ur.RelationshipType.OneOnly,Ur.RelationshipType.OneN,Ur.Direction.left,Ur.Direction.right,Ur.Direction.top,Ur.Direction.bottom;const Ya="@@r-html/context-unsubscribe";function Ta(e,t){function n(n,i){return new CustomEvent(e,{detail:n,...t,...i})}return n.toString=()=>`${e}`,n.type=e,n}const wa=Ta("@@r-html/context-subscribe",{bubbles:!0,composed:!0}),Na=Ta(Ya,{bubbles:!0,composed:!0});function Ka(e,...t){try{return null==e?void 0:e(...t)}catch(e){console.error(e)}}const Ha=queueMicrotask??(e=>{Promise.resolve().then(e)}),Ma=e=>t=>typeof t===e,za=Ma("object"),Ja=Ma("bigint"),ja=Ma("boolean"),Fa=Ma("function"),Oa=Ma("number"),$a=Ma("string"),Ea=Ma("symbol"),Ua=Ma("undefined"),Pa=e=>null===e,{isArray:Aa}=Array,Ba=e=>za(e)&&!Pa(e)&&!Aa(e),Qa=e=>Ja(e)||ja(e)||Oa(e)||$a(e)||Ea(e)||Ua(e)||Pa(e);function Da(){const e=new Set,t=t=>(e.has(t)||e.add(t),()=>{e.delete(t)});return{subscribe:t,next:t=>{e.forEach((e=>e(t)))},asReadonly:()=>({subscribe:t})}}const _a=1,qa=[],es=new Map,ts=new Map;let ns=!0,is=0;const os=e=>t=>{const n=es.get(t);let i=()=>{};const o=null!=n&&n.promise?n.promise:new Promise((e=>{i=e}));if(!n){const n={type:e,tickCount:is,promise:o,fn:t,resolve:()=>{i()}};qa.push(n),es.set(t,n)}return ns&&(Ha(cs),ns=!1),o},ls=os("observer"),rs=os("nextTick"),as=(e,t)=>{var n;return null==(n=Js.get(e))?void 0:n.forEach((n=>function(e,t,n){const i=Os.get(n);if(!i)return!1;const o=i.get(e);return!!o&&o.has(t)}(e,t,n)&&ls(n)))};function ss(){const e=qa.shift();if(e){if(es.delete(e.fn),"observer"===e.type)Ps(e.fn),Us(e.fn),e.resolve();else if("nextTick"===e.type){const t=Ka(e.fn);t instanceof Promise?t.finally(e.resolve):e.resolve()}(function(){const e=qa[0];return!!e&&_a<=is-e.tickCount})()&&ss()}}function cs(){!function(){for(;qa.length;)ss();ns=!0,is=0}()}function us(e,t){const n=zs.get(e);if(!n)return;const i=Fs.get(n);if(!i)return;const o=ts.get(n);o?o.has(t)||o.add(t):(ts.set(n,new Set([t])),rs((()=>{const e=ts.get(n);e&&(ts.delete(n),e.forEach((e=>i.next(e))))})))}function ds(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)}function ps(e,t,n,i,o){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?o.call(e,n):o?o.value=n:t.set(e,n),n}const hs=`@@r-html-${Math.random().toString().substring(2,8)}`,ms=`...${hs}`,bs=new RegExp(`${hs}_(\\d+)_`,"g"),fs=new RegExp(`^${hs}_\\d+_$`),ys=/^\n/;var gs;!function(e){e.attribute="attribute",e.boolean="boolean",e.event="event",e.property="property",e.spread="spread",e.directive="directive"}(gs||(gs={}));const vs=Symbol.for("https://github.com/dineug/r-html#beforeMount"),Zs=Symbol.for("https://github.com/dineug/r-html#mounted"),xs=Symbol.for("https://github.com/dineug/r-html#unmounted"),Xs=Symbol.for("https://github.com/dineug/r-html#beforeFirstUpdate"),Gs=Symbol.for("https://github.com/dineug/r-html#beforeUpdate"),Is=Symbol.for("https://github.com/dineug/r-html#firstUpdated"),Ws=Symbol.for("https://github.com/dineug/r-html#updated"),ks=[vs,Zs,xs,Xs,Gs,Is,Ws],Vs=Symbol.for("https://github.com/dineug/r-html#Directive"),Cs=Symbol.for("https://github.com/dineug/r-html#TemplateLiterals");let Ss=null;function Rs(e){Ss=e}const Ls=e=>t=>{Ss&&(Ss[e]??(Ss[e]=[])).push(t)},Ys=Ls(vs),Ts=Ls(Zs),ws=Ls(xs),Ns=Ls(Gs),Ks=Ls(Ws);function Hs(e,t){const n=Reflect.get(e,t,e);Aa(n)&&n.forEach(Ka)}const Ms=Da(),zs=new WeakMap,Js=new WeakMap,js=new WeakMap,Fs=new WeakMap,Os=new WeakMap,$s={shallow:!1};let Es=null;function Us(e){return Es=e,Ka(e),Es=null,()=>Ps(e)}function Ps(e){const t=Os.get(e);if(t)for(const[n]of t.entries()){const t=Js.get(n);null==t||t.delete(e)}t&&Os.delete(e)}const As=e=>e instanceof Node||e instanceof Map||e instanceof Set||e instanceof WeakMap||e instanceof WeakSet||e instanceof RegExp||e instanceof Date||e instanceof Promise||(Aa(e)||Ba(e))&&Object.isFrozen(e);function Bs(e,t={}){const{shallow:n}=Object.assign({},$s,t),i=new Proxy(e,{get(i,o,l){const r=Reflect.get(i,o,l);return As(r)?r:(function(e){if(!Es)return;const t=Js.get(e);t?t.has(Es)||t.add(Es):Js.set(e,new Set([Es]))}(e),function(e,t){if(!Es)return;const n=Os.get(Es);if(n){const i=n.get(e);i?i.has(t)||i.add(t):n.set(e,new Set([t]))}else Os.set(Es,new Map([[e,new Set([t])]]))}(e,o),n||!Ba(r)&&!Aa(r)||js.has(r)?r:zs.has(r)?zs.get(r):Bs(r,t))},set(e,t,n,i){const o=Reflect.get(e,t,i),l=Reflect.set(e,t,n,i);return(!Aa(e)&&o!==n||"length"===t)&&(as(e,t),us(e,t)),l},deleteProperty(e,t){const n=Reflect.deleteProperty(e,t);return as(e,t),us(e,t),n}});return zs.set(e,i),js.set(i,e),i}function Qs(e){return(Fs.get(e)??Fs.set(e,Da()).get(e)).asReadonly()}function Ds(e,t){const n=Bs({value:t.value},{shallow:!0}),i=e=>{n.value=e},o=()=>e instanceof HTMLElement?e:e.parentElement??e.host,l=()=>{o().dispatchEvent(wa({context:t,observer:i}))};return l(),Ys(l),ws((()=>{o().dispatchEvent(Na({context:t,observer:i}))})),n}function _s(e,t,n){const i=e instanceof HTMLElement?e:e.parentElement??e.host,o=Da(),l=new Map,r=e=>{var i,r;const a=e;(null==(r=null==(i=a.detail)?void 0:i.context)?void 0:r.key)===t.key&&(a.stopPropagation(),a.detail.observer(n),l.set(a.detail.observer,o.subscribe(a.detail.observer)))},a=e=>{var n,i;const o=e;if((null==(i=null==(n=o.detail)?void 0:n.context)?void 0:i.key)===t.key){o.stopPropagation();const e=l.get(o.detail.observer);null==e||e(),l.delete(o.detail.observer)}};return i.addEventListener(wa.type,r),i.addEventListener(Na.type,a),{set:e=>{o.next(e)},destroy:()=>{i.removeEventListener(wa.type,r),i.removeEventListener(Na.type,a);for(const e of l.values())e();l.clear()}}}var qs;!function(e){e.element="element",e.text="text",e.comment="comment"}(qs||(qs={}));class ec{constructor(e={}){Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:qs.comment}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"attrs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"children",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.assign(this,e)}*iterParent(){yield this,this.parent&&(yield*this.parent.iterParent())}*[Symbol.iterator](){if(yield this,this.children)for(const e of this.children)yield*e}}const tc=({type:e,value:t},n=!1)=>e===qs.element?((e,t=!1)=>t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e))(t,n):e===qs.text?document.createTextNode(t):document.createComment(t),nc=e=>!!e&&"false"!==e;const ic=(e,t)=>e.length===t.length&&e.every(((e,n)=>e===t[n]));function oc(e,t){if(e===t)return!0;const n=Ba(e)?e:{},i=Ba(t)?t:{},o=Object.keys(n),l=Object.keys(i);return o.length===l.length&&l.every((e=>Reflect.get(n,e)===Reflect.get(i,e)))}function lc(e,t){const n=t.parentNode;n&&n.insertBefore(e,t)}function rc(e,t){const n=t.parentNode;n&&(t.nextSibling?n.insertBefore(e,t.nextSibling):n.appendChild(e))}const ac=e=>e.parentNode&&e.parentNode.removeChild(e);function sc(e,t){const n=[];let i=e.nextSibling;for(;i&&i!==t;)n.push(i),i=i.nextSibling;return n}const cc=()=>{},uc=e=>e instanceof HTMLElement,dc=e=>e instanceof SVGElement,pc=e=>e.replace(/^([A-Z])|[\s-_](\w)/g,((e,t,n)=>n?n.toUpperCase():t.toLowerCase()));var hc;!function(e){e.html="html",e.svg="svg",e.css="css"}(hc||(hc={}));const mc=new Set(Object.values(hc)),bc=new WeakMap,fc=new WeakMap,yc=new Set([hc.svg]),gc=e=>`${hs}_${e}_`,vc=e=>Ba(e)&&(e=>Aa(e)&&Aa(e.raw))(e.strings)&&Aa(e.values)&&mc.has(Reflect.get(e,Cs)??""),Zc=e=>vc(e)&&e[Cs]===hc.css,xc=(e,t=!0,n=!1)=>i=>t?!(null==i||!i.trimStart().startsWith(e)):n?!(null==i||!i.trimEnd().endsWith(e)):new RegExp(e).test(i??""),Xc=xc(ms),Gc=xc("."),Ic=xc("?"),Wc=xc("@"),kc=xc("on"),Vc=xc(hs,!1),Cc=e=>Vc(e)&&fs.test((null==e?void 0:e.trim())??""),Sc=({type:e,value:t})=>e===gs.spread||e===gs.directive||Vc(t),Rc=e=>Cc(e)?gs.directive:Xc(e)?gs.spread:Gc(e)?gs.property:Wc(e)||kc(e)?gs.event:Ic(e)?gs.boolean:gs.attribute,Lc=e=>Xc(e)?e.substring(3):Cc(e)?e:Gc(e)||Wc(e)||Ic(e)?e.substring(1):kc(e)?e.substring(2):e;function Yc(e){const t=[];let n=bs.exec(e);for(;n;){const i=Number(n[1]);t.push([n[0],Number.isInteger(i)?i:-1]),n=bs.exec(e)}return t}const Tc="0123456789abcdefghijklmnopqrstuvwxyz-_";function wc(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e}var Nc,Kc,Hc,Mc,zc,Jc,jc,Fc,Oc,$c,Ec,Uc,Pc,Ac,Bc,Qc,Dc;class _c{constructor(e,{name:t,value:n}){Nc.set(this,void 0),Kc.set(this,void 0),Hc.set(this,void 0),Mc.set(this,[]),zc.set(this,[]),Jc.set(this,null),jc.set(this,null),ps(this,Nc,e,"f"),ps(this,Kc,t,"f"),ps(this,Hc,n,"f"),ps(this,Mc,Yc(n??""),"f")}commit(e){const t=ds(this,Mc,"f").map((([t,n])=>e[n]));if(ic(ds(this,zc,"f"),t))return;const n=t[t.length-1];if("class"===ds(this,Kc,"f"))this.classCommit(n);else if("style"===ds(this,Kc,"f"))this.styleCommit(n);else{const e=t.reduce(((e,t,n)=>e.replace(new RegExp(ds(this,Mc,"f")[n][0]),qc(t))),ds(this,Hc,"f")??"");ds(this,Nc,"f").setAttribute(ds(this,Kc,"f"),e.trim())}ps(this,zc,t,"f")}classCommit(e){if(!uc(ds(this,Nc,"f"))&&!dc(ds(this,Nc,"f"))||!Ba(e)&&!Aa(e))return;const t=ds(this,zc,"f")[ds(this,zc,"f").length-1];if(t===e||Aa(t)&&Aa(e)&&ic(t,e)||Ba(t)&&Ba(e)&&oc(t,e))return;const n=[...ds(this,Nc,"f").classList],i=eu(e);if(Pa(ds(this,jc,"f")))ps(this,jc,n,"f");else{const e=ds(this,jc,"f"),t=n.filter((t=>!e.includes(t)&&!i.includes(t)));ds(this,Nc,"f").classList.remove(...t)}ds(this,Nc,"f").classList.add(...i)}styleCommit(e){if(!uc(ds(this,Nc,"f"))&&!dc(ds(this,Nc,"f")))return;if(oc(ds(this,zc,"f")[ds(this,zc,"f").length-1],e))return;const t=function(e){const t={};for(let n=0;n<e.style.length;n++){const i=e.style.item(n);t[i]=e.style.getPropertyValue(i)}return t}(ds(this,Nc,"f")),n=Ba(e)?e:{};if(Pa(ds(this,Jc,"f")))ps(this,Jc,t,"f");else{const e=ds(this,Jc,"f");Object.keys(t).filter((t=>!e[t]&&!n[t])).forEach((e=>ds(this,Nc,"f").style.removeProperty(e)))}for(const e of Object.keys(n))ds(this,Nc,"f").style.setProperty(e,n[e])}}function qc(e){return Qa(e)&&!Pa(e)&&!Ua(e)||Zc(e)?String(e):""}function eu(e,t=[]){if(Zc(e))return t.push(qc(e)),t;if(Qa(e))t.push(qc(e));else if(za(e))if(Aa(e))for(let n=0;n<e.length;n++)e[n]&&eu(e[n],t);else for(let n in e)e[n]&&t.push(qc(n));return t}Nc=new WeakMap,Kc=new WeakMap,Hc=new WeakMap,Mc=new WeakMap,zc=new WeakMap,Jc=new WeakMap,jc=new WeakMap;class tu{constructor(e,{name:t,value:n}){Fc.set(this,void 0),Oc.set(this,void 0),$c.set(this,[]),Ec.set(this,[]),ps(this,Fc,e,"f"),ps(this,Oc,t,"f"),ps(this,$c,Yc(n??""),"f")}commit(e){const t=ds(this,$c,"f").map((([t,n])=>e[n]));if(ic(ds(this,Ec,"f"),t))return;const n=t[t.length-1];nc(n)?ds(this,Fc,"f").setAttribute(ds(this,Oc,"f"),""):ds(this,Fc,"f").removeAttribute(ds(this,Oc,"f")),ps(this,Ec,t,"f")}}function nu(e,t){return Reflect.set(t,Vs,e),t}Fc=new WeakMap,Oc=new WeakMap,$c=new WeakMap,Ec=new WeakMap,function(e){e.node="node",e.attribute="attribute"}(Uc||(Uc={}));let iu=class{constructor(e,{name:t}){Pc.set(this,void 0),Ac.set(this,void 0),Bc.set(this,null),Qc.set(this,null),Dc.set(this,null),ps(this,Pc,e,"f"),ps(this,Ac,Yc(t)[0],"f")}commit(e){var t,n,i,o;const[,l]=ds(this,Ac,"f"),r=e[l];if(!(e=>Aa(e)&&Reflect.get(e,Vs)===Uc.attribute)(r))return;const[a,s]=r;if(ds(this,Bc,"f")!==s)null==(t=ds(this,Dc,"f"))||t.call(this),ps(this,Qc,s({node:ds(this,Pc,"f")}),"f"),ps(this,Bc,s,"f"),ps(this,Dc,null==(n=ds(this,Qc,"f"))?void 0:n.call(this,a),"f");else{const e=null==(i=ds(this,Qc,"f"))?void 0:i.call(this,a);ds(this,Dc,"f")!==e&&(null==(o=ds(this,Dc,"f"))||o.call(this),ps(this,Dc,e,"f"))}}destroy(){var e;null==(e=ds(this,Dc,"f"))||e.call(this)}};var ou,lu,ru,au,su,cu,uu,du,pu,hu,mu;Pc=new WeakMap,Ac=new WeakMap,Bc=new WeakMap,Qc=new WeakMap,Dc=new WeakMap;class bu{constructor(e,{name:t,value:n}){ou.set(this,void 0),lu.set(this,void 0),ru.set(this,[]),au.set(this,[]),ps(this,ou,e,"f"),ps(this,lu,t,"f"),ps(this,ru,Yc(n??""),"f")}commit(e){const t=ds(this,ru,"f").map((([t,n])=>e[n])).filter((e=>Fa(e)||(e=>Aa(e)&&Fa(e[0])&&(Ua(e[1])||ja(e[1])||Ba(e[1])))(e)));ic(ds(this,au,"f"),t)||(this.clear(),t.forEach((e=>Fa(e)?ds(this,ou,"f").addEventListener(ds(this,lu,"f"),e):ds(this,ou,"f").addEventListener(ds(this,lu,"f"),e[0],e[1]))),ps(this,au,t,"f"))}clear(){ds(this,au,"f").forEach((e=>Fa(e)?ds(this,ou,"f").removeEventListener(ds(this,lu,"f"),e):ds(this,ou,"f").removeEventListener(ds(this,lu,"f"),e[0],e[1])))}destroy(){this.clear()}}ou=new WeakMap,lu=new WeakMap,ru=new WeakMap,au=new WeakMap;class fu{constructor(e,{name:t,value:n}){su.set(this,void 0),cu.set(this,void 0),uu.set(this,[]),du.set(this,[]),ps(this,su,e,"f"),ps(this,cu,t,"f"),ps(this,uu,Yc(n??""),"f")}commit(e){const t=ds(this,uu,"f").map((([t,n])=>e[n]));if(ic(ds(this,du,"f"),t))return;const n=t[t.length-1];Reflect.set(ds(this,su,"f"),ds(this,cu,"f"),n,ds(this,su,"f")),ps(this,du,t,"f")}}su=new WeakMap,cu=new WeakMap,uu=new WeakMap,du=new WeakMap;class yu{constructor(e,{name:t}){pu.set(this,void 0),hu.set(this,void 0),mu.set(this,null),ps(this,pu,e,"f"),ps(this,hu,Yc(t)[0],"f")}commit(e){const[,t]=ds(this,hu,"f"),n=e[t];!Ba(n)||oc(ds(this,mu,"f"),n)||(Object.keys(n).forEach((e=>Reflect.set(ds(this,pu,"f"),e,n[e],ds(this,pu,"f")))),ps(this,mu,n,"f"))}}pu=new WeakMap,hu=new WeakMap,mu=new WeakMap;const gu=(e,t)=>t.type===gs.attribute?new _c(e,t):t.type===gs.boolean?new tu(e,t):t.type===gs.event?new bu(e,t):t.type===gs.property?new fu(e,t):t.type===gs.spread?new yu(e,t):new iu(e,t);var vu,Zu,xu,Xu;class Gu{constructor(e,{value:t}){vu.set(this,void 0),Zu.set(this,void 0),xu.set(this,[]),Xu.set(this,[]),ps(this,vu,e,"f"),ps(this,Zu,t,"f"),$a(t)&&ps(this,xu,Yc(t),"f")}commit(e){const t=ds(this,xu,"f").map((([t,n])=>e[n]));if(ic(ds(this,Xu,"f"),t))return;ps(this,Xu,t,"f");const n=ds(this,Xu,"f").reduce(((e,t,n)=>e.replace(new RegExp(ds(this,xu,"f")[n][0]),!Qa(t)||Pa(t)||Ua(t)?"":String(t))),ds(this,Zu,"f")??"");ds(this,vu,"f").data=n}}vu=new WeakMap,Zu=new WeakMap,xu=new WeakMap,Xu=new WeakMap;const Iu=Symbol("https://github.com/dineug/r-html.git#hostBridge");var Wu,ku,Vu,Cu,Su,Ru,Lu,Yu,Tu;class wu{constructor(e,{name:t,value:n}){Wu.set(this,void 0),ku.set(this,void 0),Vu.set(this,[]),Cu.set(this,[]),ps(this,Wu,e,"f"),ps(this,ku,t,"f"),ps(this,Vu,Yc(n??""),"f")}commit(e){const t=ds(this,Vu,"f").map((([t,n])=>e[n]));if(ic(ds(this,Cu,"f"),t))return;const n=t[t.length-1];Reflect.set(ds(this,Wu,"f"),ds(this,ku,"f"),n),ps(this,Cu,t,"f")}}function Nu(e,t,n){const i=!(null==n||!n.strict),o={update:[],delete:[]},l=new Set,r=[],a=e.items,s=t.items;return a.forEach(((e,t)=>{const n=s.findIndex(((t,n)=>e.type===t.type&&e.key===t.key&&!l.has(n)));-1===n?i?o.delete.push({from:t}):r.push(e):(l.add(n),o.update.push({action:Su.move,from:t,to:n}))})),r.forEach((n=>{const i=e.itemToIndex.get(n),r=s.find(((e,t)=>n.type===e.type&&!l.has(t)));if(r){const e=t.itemToIndex.get(r);l.add(e),o.update.push({action:Su.move,from:i,to:e})}else o.delete.push({from:i})})),s.forEach(((e,n)=>{l.has(n)||o.update.push({action:Su.create,from:-1,to:t.itemToIndex.get(e)})})),o.update.sort(((e,t)=>e.to-t.to)),o}Wu=new WeakMap,ku=new WeakMap,Vu=new WeakMap,Cu=new WeakMap,function(e){e.create="create",e.move="move"}(Su||(Su={}));class Ku{constructor(e,t){Ru.set(this,void 0),Lu.set(this,void 0),Yu.set(this,[]),ps(this,Ru,e,"f"),ps(this,Lu,t,"f")}commit(e){const t=Nu(function(e){const t=[],n=new Map;return e.forEach((({type:e,value:i},o)=>{const l={type:e,key:e===td.templateLiterals?i.strings:i};t.push(l),n.set(l,o)})),{items:t,itemToIndex:n}}(ds(this,Yu,"f")),function(e){const t=[],n=new Map;return e.forEach(((e,i)=>{const o=yd(e),l={type:o,key:o===td.templateLiterals?e.strings:e};t.push(l),n.set(l,i)})),{items:t,itemToIndex:n}}(e)),n={length:e.length};t.update.forEach((({action:t,from:i,to:o})=>{switch(t){case Su.create:const t=document.createComment("");0===o?rc(t,ds(this,Ru,"f")):ds(this,Yu,"f").length?rc(t,n[o-1]?n[o-1].endNode:ds(this,Yu,"f")[o-1].endNode):lc(t,ds(this,Lu,"f")),n[o]=new Hu(t,e[o]);break;case Su.move:if(n[o]=ds(this,Yu,"f")[i],o===i)return;0===o?ds(this,Yu,"f")[i].insert("after",ds(this,Ru,"f")):ds(this,Yu,"f")[i].insert("after",n[o-1]?n[o-1].endNode:ds(this,Yu,"f")[o-1].endNode)}})),t.delete.forEach((({from:e})=>ds(this,Yu,"f")[e].destroy())),ps(this,Yu,Array.from(n),"f"),ds(this,Yu,"f").forEach(((t,n)=>t.commit(e[n])))}destroy(){ds(this,Yu,"f").forEach((e=>e.destroy()))}}Ru=new WeakMap,Lu=new WeakMap,Yu=new WeakMap;let Hu=class{constructor(e,t){Tu.set(this,void 0),Object.defineProperty(this,"startNode",{enumerable:!0,configurable:!0,writable:!0,value:document.createComment("")}),Object.defineProperty(this,"endNode",{enumerable:!0,configurable:!0,writable:!0,value:document.createComment("")}),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),lc(this.startNode,e),rc(this.endNode,e),ac(e),this.value=t,this.type=yd(t),ps(this,Tu,xd(this.type,this.startNode,this.endNode),"f")}commit(e){ds(this,Tu,"f").commit(e),this.value=e}insert(e,t){const n=[this.startNode,...sc(this.startNode,this.endNode),this.endNode];"before"===e?n.forEach((e=>lc(e,t))):n.reverse().forEach((e=>rc(e,t)))}destroy(){var e,t;null==(t=(e=ds(this,Tu,"f")).destroy)||t.call(e),sc(this.startNode,this.endNode).forEach(ac),this.startNode.remove(),this.endNode.remove()}};var Mu,zu,Ju,ju,Fu,Ou,$u,Eu,Uu,Pu,Au,Bu,Qu,Du,_u,qu,ed,td;Tu=new WeakMap;class nd{constructor(e,t){Mu.set(this,void 0),zu.set(this,void 0),Ju.set(this,null),ju.set(this,null),Fu.set(this,void 0),ps(this,Mu,e,"f"),ps(this,zu,t,"f")}commit(e){var t,n;if(!sd(e))return;const[i,o]=e;if(ds(this,Ju,"f")!==o)this.clear(),ps(this,ju,o({startNode:ds(this,Mu,"f"),endNode:ds(this,zu,"f")}),"f"),ps(this,Ju,o,"f"),ps(this,Fu,null==(t=ds(this,ju,"f"))?void 0:t.call(this,i),"f");else{const e=null==(n=ds(this,ju,"f"))?void 0:n.call(this,i);ds(this,Fu,"f")!==e&&(this.clear(),ps(this,Fu,e,"f"))}}clear(){var e;null==(e=ds(this,Fu,"f"))||e.call(this),sc(ds(this,Mu,"f"),ds(this,zu,"f")).forEach(ac)}destroy(){this.clear()}}Mu=new WeakMap,zu=new WeakMap,Ju=new WeakMap,ju=new WeakMap,Fu=new WeakMap;class id{constructor(e,t){}commit(e){}}class od{constructor(e,t){Ou.set(this,void 0),$u.set(this,null),ps(this,Ou,t,"f")}commit(e){ds(this,$u,"f")!==e&&(ds(this,$u,"f")&&ac(ds(this,$u,"f")),lc(e,ds(this,Ou,"f")),ps(this,$u,e,"f"))}}Ou=new WeakMap,$u=new WeakMap;class ld{constructor(e,t){Eu.set(this,void 0),Uu.set(this,void 0),Pu.set(this,null),Au.set(this,null),Bu.set(this,cc),ps(this,Eu,e,"f"),ps(this,Uu,t,"f")}commit(e){ds(this,Pu,"f")!==e&&(this.clear(),(e=>e instanceof Promise)(e)&&this.promiseCommit(e))}promiseCommit(e){const[t,n]=function(e){let t=cc;const n=new Promise(((e,n)=>t=n)),i=()=>t();return[Promise.race([n,e]),i]}(e);ps(this,Bu,n,"f"),t.then((e=>{var t;const n=yd(e);ps(this,Au,xd(n,ds(this,Eu,"f"),ds(this,Uu,"f")),"f"),null==(t=ds(this,Au,"f"))||t.commit(e)})),ps(this,Pu,e,"f")}partClear(){var e,t;null==(t=null==(e=ds(this,Au,"f"))?void 0:e.destroy)||t.call(e),sc(ds(this,Eu,"f"),ds(this,Uu,"f")).forEach(ac)}clear(){var e,t;ds(this,Bu,"f").call(this),null==(t=null==(e=ds(this,Au,"f"))?void 0:e.destroy)||t.call(e),sc(ds(this,Eu,"f"),ds(this,Uu,"f")).forEach(ac),ps(this,Bu,cc,"f")}destroy(){this.clear()}}Eu=new WeakMap,Uu=new WeakMap,Pu=new WeakMap,Au=new WeakMap,Bu=new WeakMap;class rd{constructor(e,t){Qu.set(this,document.createTextNode("")),Du.set(this,null),rc(ds(this,Qu,"f"),e)}commit(e){ds(this,Du,"f")!==e&&(ds(this,Qu,"f").data=Pa(e)||Ua(e)?"":String(e),ps(this,Du,e,"f"))}}Qu=new WeakMap,Du=new WeakMap;class ad{constructor(e,t){_u.set(this,void 0),qu.set(this,void 0),ed.set(this,null),ps(this,_u,e,"f"),ps(this,qu,t,"f")}commit(e){const{strings:t,values:n}=e;ds(this,ed,"f")&&!ds(this,ed,"f").equalStrings(t)&&(ds(this,ed,"f").destroy(),ps(this,ed,null,"f")),ds(this,ed,"f")||(ps(this,ed,new qd(e,ds(this,_u,"f"),ds(this,qu,"f")),"f"),ds(this,ed,"f").insert("before",ds(this,qu,"f"))),ds(this,ed,"f").commit(n)}destroy(){var e;null==(e=ds(this,ed,"f"))||e.destroy()}}_u=new WeakMap,qu=new WeakMap,ed=new WeakMap,function(e){e.primitive="primitive",e.templateLiterals="templateLiterals",e.array="array",e.node="node",e.object="object",e.function="function",e.directive="directive"}(td||(td={}));const sd=e=>Aa(e)&&Reflect.get(e,Vs)===Uc.node,cd=e=>t=>t instanceof e,ud=cd(rd),dd=cd(ad),pd=cd(Ku),hd=cd(od),md=cd(ld),bd=cd(id),fd=cd(nd),yd=e=>Qa(e)?td.primitive:vc(e)?td.templateLiterals:sd(e)?td.directive:Aa(e)?td.array:(e=>e instanceof Node)(e)?td.node:Fa(e)?td.function:td.object,gd={[td.primitive]:ud,[td.templateLiterals]:dd,[td.array]:pd,[td.node]:hd,[td.function]:bd,[td.object]:md,[td.directive]:fd},vd={[td.primitive]:rd,[td.templateLiterals]:ad,[td.array]:Ku,[td.node]:od,[td.function]:id,[td.object]:ld,[td.directive]:nd},Zd=(e,t)=>gd[e](t),xd=(e,t,n)=>new vd[e](t,n);var Xd,Gd,Id,Wd,kd,Vd,Cd,Sd,Rd,Ld,Yd,Td,wd,Nd,Kd;class Hd{constructor(e,t,n,i){var o;Xd.set(this,document.createComment("")),Gd.set(this,document.createComment("")),Id.set(this,void 0),Wd.set(this,void 0),kd.set(this,[]),Vd.set(this,[]),Cd.set(this,null),Sd.set(this,Bs({},{shallow:!0})),Rd.set(this,null),Ld.set(this,null),Yd.set(this,document.createElement("div")),ps(this,Xd,e,"f"),ps(this,Gd,t,"f"),ps(this,Wd,n,"f"),ps(this,Id,Yc(n.value)[0],"f"),n.staticAttrs&&n.staticAttrs.forEach((e=>function(e,{type:t,name:n,value:i}){switch(t){case gs.attribute:case gs.property:Reflect.set(e,n,i);break;case gs.boolean:Reflect.set(e,n,nc(i))}}(ds(this,Sd,"f"),e))),null==(o=n.attrs)||o.forEach((e=>{e.type===gs.directive?ds(this,kd,"f").push(e):e.type===gs.spread?i.push(new yu(ds(this,Sd,"f"),e)):e.type===gs.event?i.push(new bu(ds(this,Yd,"f"),e)):i.push(new wu(ds(this,Sd,"f"),e))}))}createContext(){const e=ds(this,Xd,"f"),t={host:document.body,get parentElement(){return e.parentElement},dispatchEvent:e=>ds(this,Yd,"f").dispatchEvent(e)},n=ds(this,Xd,"f").getRootNode();if(n instanceof ShadowRoot){const e=n.host;t.host=e}else if(n instanceof DocumentFragment){const e=function(e){return Reflect.get(e,Iu)??null}(n);e&&(t.host=e)}return t}commit(e){const[,t]=ds(this,Id,"f"),n=e[t];if(!Fa(n)||ds(this,Rd,"f")===n)return void ds(this,Vd,"f").forEach((t=>t.commit(e)));const i=this.createContext();this.clear(),Rs(this);const o=n.call(i,ds(this,Sd,"f"),i);Rs(null),ds(this,kd,"f").length&&ds(this,Vd,"f").push(...ds(this,kd,"f").map((e=>new iu(i,e)))),Hs(this,vs);let l=!1;ps(this,Ld,Us((()=>{var e;const t=o(),n=yd(t);Zd(n,ds(this,Cd,"f"))||(this.partClear(),ps(this,Cd,xd(n,ds(this,Xd,"f"),ds(this,Gd,"f")),"f")),Hs(this,l?Gs:Xs),null==(e=ds(this,Cd,"f"))||e.commit(t),l?Hs(this,Ws):(Hs(this,Is),l=!0)})),"f"),ds(this,Vd,"f").forEach((t=>t.commit(e))),Hs(this,Zs),ps(this,Rd,n,"f")}partClear(){var e,t;null==(t=null==(e=ds(this,Cd,"f"))?void 0:e.destroy)||t.call(e),sc(ds(this,Xd,"f"),ds(this,Gd,"f")).forEach(ac)}clear(){var e;sc(ds(this,Xd,"f"),ds(this,Gd,"f")).forEach(ac),Hs(this,xs),ds(this,Vd,"f").forEach((e=>{var t;return null==(t=e.destroy)?void 0:t.call(e)})),null==(e=ds(this,Ld,"f"))||e.call(this),ps(this,Vd,[],"f"),ps(this,Ld,null,"f"),function(e){ks.forEach((t=>Reflect.set(e,t,null,e)))}(this)}destroy(){this.clear(),this.partClear()}}Xd=new WeakMap,Gd=new WeakMap,Id=new WeakMap,Wd=new WeakMap,kd=new WeakMap,Vd=new WeakMap,Cd=new WeakMap,Sd=new WeakMap,Rd=new WeakMap,Ld=new WeakMap,Yd=new WeakMap;const Md=(Kd=class{constructor(e,t,n){Td.set(this,document.createComment("")),wd.set(this,document.createComment("")),Nd.set(this,void 0),ps(this,Nd,new Hd(ds(this,Td,"f"),ds(this,wd,"f"),t,n),"f"),lc(ds(this,Td,"f"),e),rc(ds(this,wd,"f"),e),e.remove()}commit(e){ds(this,Nd,"f").commit(e)}destroy(){var e,t;null==(t=(e=ds(this,Nd,"f")).destroy)||t.call(e),ds(this,Td,"f").remove(),ds(this,wd,"f").remove()}},Td=new WeakMap,wd=new WeakMap,Nd=new WeakMap,Kd),zd=(e=>{var t,n,i;return i=class extends e{constructor(e,i,o){super(e,i,o),t.set(this,[]),n.set(this,null),this.hmr()}commit(e){const n=e;super.commit(n),ps(this,t,e,"f")}hmr(){ps(this,n,Ms.subscribe((e=>ds(this,t,"f").includes(e)&&this.commit(ds(this,t,"f")))),"f")}destroy(){var e,t;null==(e=ds(this,n,"f"))||e.call(this),null==(t=super.destroy)||t.call(this)}},t=new WeakMap,n=new WeakMap,i})(Md);var Jd,jd,Fd,Od,$d,Ed,Ud,Pd,Ad,Bd,Qd;class Dd{constructor(e,{value:t}){Jd.set(this,document.createComment("")),jd.set(this,document.createComment("")),Fd.set(this,void 0),Od.set(this,null),$d.set(this,null),ps(this,Fd,Yc(t)[0],"f"),lc(ds(this,Jd,"f"),e),rc(ds(this,jd,"f"),e),e.remove()}commit(e){var t;const[,n]=ds(this,Fd,"f"),i=e[n];if(ds(this,Od,"f")===i)return;const o=yd(i);Zd(o,ds(this,$d,"f"))||(Pa(ds(this,$d,"f"))||this.clear(),ps(this,$d,xd(o,ds(this,Jd,"f"),ds(this,jd,"f")),"f")),null==(t=ds(this,$d,"f"))||t.commit(i),ps(this,Od,i,"f")}clear(){var e,t;null==(t=null==(e=ds(this,$d,"f"))?void 0:e.destroy)||t.call(e),sc(ds(this,Jd,"f"),ds(this,jd,"f")).forEach(ac)}destroy(){this.clear(),ds(this,Jd,"f").remove(),ds(this,jd,"f").remove()}}function _d(e=[],t,n=!1,i=[]){return e.forEach((e=>{if(e.isComponent){const n=document.createComment("");return t.appendChild(n),void i.push(new zd(n,e,i))}const o=tc(e,e.isSvg||n);t.appendChild(o),o instanceof Comment&&e.isMarker&&i.push(new Gu(o,e)),o instanceof Text&&e.isMarkerOnly&&i.push(new Dd(o,e)),o instanceof Element&&(e.staticAttrs&&e.staticAttrs.forEach((e=>function(e,{type:t,name:n,value:i}){switch(t){case gs.attribute:e.setAttribute(n,i??"");break;case gs.boolean:nc(i)&&e.setAttribute(n,"");break;case gs.property:Reflect.set(e,n,i,e)}}(o,e))),e.attrs&&i.push(...e.attrs.map((e=>gu(o,e)))),e.children&&_d(e.children,o,e.isSvg||n,i))})),i}Jd=new WeakMap,jd=new WeakMap,Fd=new WeakMap,Od=new WeakMap,$d=new WeakMap;class qd{constructor(e,t,n){if(Ed.set(this,document.createComment("")),Ud.set(this,document.createComment("")),Pd.set(this,null),Ad.set(this,[]),Bd.set(this,void 0),Qd.set(this,!1),ps(this,Bd,e.strings,"f"),e[Cs]!==hc.html&&e[Cs]!==hc.svg)return;const[i,o]=function(e,t=!1){const n=document.createDocumentFragment();return[n,_d(e.children,n,t)]}(e.template.node,(e=>yc.has(e))(e[Cs]));ps(this,Pd,i,"f"),ps(this,Ad,o,"f"),t&&n?(ps(this,Ed,t,"f"),ps(this,Ud,n,"f"),ps(this,Qd,!0,"f")):(i.prepend(ds(this,Ed,"f")),i.append(ds(this,Ud,"f")))}equalStrings(e){return ds(this,Bd,"f")===e}commit(e){ds(this,Ad,"f").forEach((t=>t.commit(e)))}insert(e,t){ds(this,Pd,"f")&&("before"===e?lc(ds(this,Pd,"f"),t):"after"===e?rc(ds(this,Pd,"f"),t):t.appendChild(ds(this,Pd,"f")),ps(this,Pd,null,"f"))}destroy(){ds(this,Ad,"f").forEach((e=>{var t;return null==(t=e.destroy)?void 0:t.call(e)})),sc(ds(this,Ed,"f"),ds(this,Ud,"f")).forEach(ac),ds(this,Qd,"f")||(ds(this,Ed,"f").remove(),ds(this,Ud,"f").remove())}}Ed=new WeakMap,Ud=new WeakMap,Pd=new WeakMap,Ad=new WeakMap,Bd=new WeakMap,Qd=new WeakMap;const ep=new WeakMap;const tp=e=>({value:e}),np=function(e,t){return(...n)=>nu(Uc.attribute,[e(...n),t])}((e=>e),(({node:e})=>{let t=null;const n=()=>{t&&(t.value=null)};return i=>(t===i||(i.value=e,t=i),n)}));function ip(e,t){return(...n)=>nu(Uc.node,[e(...n),t])}const op=ip((e=>e),(({startNode:e,endNode:t})=>{const n=e.getRootNode();let i=new Map,o=null;const l=e=>vc(e)?e.strings:e,r=e=>{const t=l(e);return i.has(t)?i.get(t):null},a=i=>{const o=yd(i),l=xd(o,e,t),r=document.createDocumentFragment(),a=function(e,t){const n=e=>{const n=e;t.dispatchEvent(wa(n.detail))},i=e=>{const n=e;t.dispatchEvent(Na(n.detail))};return e.addEventListener(wa.type,n),e.addEventListener(Na.type,i),()=>{e.removeEventListener(wa.type,n),e.removeEventListener(Na.type,i)}}(r,n),s=function(e,t){if(t instanceof ShadowRoot){const n=t.host;Reflect.set(e,Iu,n)}return()=>{Reflect.deleteProperty(e,Iu)}}(r,n);return{part:l,fragment:r,destroy:()=>{var e;a(),s(),null==(e=l.destroy)||e.call(l)}}},s=()=>{i.forEach((({destroy:e})=>e())),i=new Map,sc(e,t).forEach(ac)};return n=>{const c=r(o),u=r(n);if(c&&l(o)!==l(n)&&sc(e,t).forEach((e=>c.fragment.appendChild(e))),u)l(o)!==l(n)&&lc(u.fragment,t),u.part.commit(n);else{const e=a(n);((e,t)=>{i.set(l(e),t)})(n,e),e.part.commit(n)}return o=n,s}})),lp=ip((e=>e),(({startNode:e,endNode:t})=>{let n=null;const i=()=>{sc(e,t).forEach(ac)};return e=>{if(n===e)return i;i();const o=document.createElement("template");return o.innerHTML=e,lc(o.content,t),n=e,i}}));var rp;const ap=ip(((e,t,n)=>(e.length,[e,t,n])),(({startNode:e,endNode:t})=>{let n=[];const i=()=>{n.forEach((e=>e.destroy()))};return([o,l,r])=>{const a=function(e,t,n){const i=[],o=new Map,l=[];return e.forEach(((e,r,a)=>{const s={key:t(e),value:n(e,r,a)},c={type:yd(s.value),key:s.key};l.push(s),i.push(c),o.set(c,r)})),{items:i,itemToIndex:o,values:l}}(o,l,r),s=a.values,c=Nu(function(e){const t=[],n=new Map;return e.forEach((({type:e,key:i},o)=>{const l={type:e,key:i};t.push(l),n.set(l,o)})),{items:t,itemToIndex:n}}(n),a,{strict:!0}),u={length:s.length};return c.update.forEach((({action:i,from:o,to:l})=>{switch(i){case Su.create:const i=document.createComment("");0===l?rc(i,e):n.length?rc(i,u[l-1]?u[l-1].endNode:n[l-1].endNode):lc(i,t),u[l]=new sp(i,s[l].value,s[l].key);break;case Su.move:if(u[l]=n[o],l===o)return;0===l?n[o].insert("after",e):n[o].insert("after",u[l-1]?u[l-1].endNode:n[l-1].endNode)}})),c.delete.forEach((({from:e})=>n[e].destroy())),n=Array.from(u),n.forEach(((e,t)=>e.commit(s[t].value))),i}}));class sp{constructor(e,t,n){rp.set(this,void 0),Object.defineProperty(this,"startNode",{enumerable:!0,configurable:!0,writable:!0,value:document.createComment("")}),Object.defineProperty(this,"endNode",{enumerable:!0,configurable:!0,writable:!0,value:document.createComment("")}),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"key",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),lc(this.startNode,e),rc(this.endNode,e),ac(e),this.key=n,this.type=yd(t),ps(this,rp,xd(this.type,this.startNode,this.endNode),"f")}commit(e){ds(this,rp,"f").commit(e)}insert(e,t){const n=[this.startNode,...sc(this.startNode,this.endNode),this.endNode];"before"===e?n.forEach((e=>lc(e,t))):n.reverse().forEach((e=>rc(e,t)))}destroy(){var e,t;null==(t=(e=ds(this,rp,"f")).destroy)||t.call(e),sc(this.startNode,this.endNode).forEach(ac),this.startNode.remove(),this.endNode.remove()}}rp=new WeakMap;var cp,up;!function(e){e.string="string",e.whiteSpace="whiteSpace",e.nextLine="nextLine",e.equal="equal",e.tilde="tilde",e.plus="plus",e.sharp="sharp",e.asterisk="asterisk",e.commercialAt="commercialAt",e.ampersand="ampersand",e.period="period",e.comma="comma",e.colon="colon",e.semicolon="semicolon",e.gt="gt",e.leftBrace="leftBrace",e.rightBrace="rightBrace",e.leftBracket="leftBracket",e.rightBracket="rightBracket",e.leftParent="leftParent",e.rightParent="rightParent"}(cp||(cp={})),function(e){e.style="style",e.multiComment="multiComment",e.singleComment="singleComment"}(up||(up={}));const dp={doubleQuote:'"',singleQuote:"'",whiteSpace:/\s/,string:/\S/,breakString:/:|;|{|&|#|@|,|>|~|\(|\)|\[|\.|\+/,nextLine:"\n",slash:"/",equal:"=",tilde:"~",plus:"+",sharp:"#",asterisk:"*",commercialAt:"@",ampersand:"&",period:".",comma:",",colon:":",semicolon:";",gt:">",leftBrace:"{",rightBrace:"}",leftBracket:"[",rightBracket:"]",leftParent:"(",rightParent:")"},pp=e=>t=>e===t,hp=e=>t=>e.test(t),mp={doubleQuote:pp(dp.doubleQuote),singleQuote:pp(dp.singleQuote),whiteSpace:hp(dp.whiteSpace),string:hp(dp.string),breakString:hp(dp.breakString),nextLine:pp(dp.nextLine),slash:pp(dp.slash),equal:pp(dp.equal),tilde:pp(dp.tilde),plus:pp(dp.plus),sharp:pp(dp.sharp),asterisk:pp(dp.asterisk),commercialAt:pp(dp.commercialAt),ampersand:pp(dp.ampersand),period:pp(dp.period),comma:pp(dp.comma),colon:pp(dp.colon),semicolon:pp(dp.semicolon),gt:pp(dp.gt),leftBrace:pp(dp.leftBrace),rightBrace:pp(dp.rightBrace),leftBracket:pp(dp.leftBracket),rightBracket:pp(dp.rightBracket),leftParent:pp(dp.leftParent),rightParent:pp(dp.rightParent)};function bp(e){const t=[];let n=0;const i=()=>n<e.length,o=(e=>t=>mp.slash(e[t])&&mp.asterisk(e[t+1]))(e),l=(e=>t=>mp.asterisk(e[t])&&mp.slash(e[t+1]))(e),r=(e=>t=>mp.slash(e[t])&&mp.slash(e[t+1]))(e),a=(s=up.style)=>{for(;i();){let c=e[n];if(mp.nextLine(c)){if(t.push({type:cp.nextLine,value:c}),n++,s===up.singleComment)break}else if(mp.whiteSpace(c)){let o="";for(;i()&&mp.whiteSpace(c)&&!mp.nextLine(c);)o+=c,c=e[++n];t.push({type:cp.whiteSpace,value:o})}else{if(s===up.style){if(o(n)){a(up.multiComment);continue}if(r(n)){a(up.singleComment);continue}if(mp.colon(c)){t.push({type:cp.colon,value:c});let o="";if(c=e[++n],!mp.whiteSpace(c))continue;for(o="";i()&&mp.whiteSpace(c);)o+=c,c=e[++n];for(t.push({type:cp.whiteSpace,value:o}),o="";i()&&!mp.semicolon(c);)o+=c,c=e[++n];t.push({type:cp.string,value:o});continue}if(mp.leftBracket(c)){t.push({type:cp.leftBracket,value:c});let o="";for(c=e[++n];i()&&!mp.equal(c)&&!mp.rightBracket(c);)o+=c,c=e[++n];if(t.push({type:cp.string,value:o}),mp.equal(c)&&(t.push({type:cp.equal,value:c}),c=e[++n]),mp.doubleQuote(c)){let o="";for(c=e[++n];i()&&!mp.doubleQuote(c);)o+=c,c=e[++n];t.push({type:cp.string,value:o}),c=e[++n]}if(mp.singleQuote(c)){let o="";for(c=e[++n];i()&&!mp.singleQuote(c);)o+=c,c=e[++n];t.push({type:cp.string,value:o}),c=e[++n]}mp.rightBracket(c)&&(t.push({type:cp.rightBracket,value:c}),n++);continue}if(mp.commercialAt(c)){t.push({type:cp.commercialAt,value:c}),n++;continue}if(mp.gt(c)){t.push({type:cp.gt,value:c}),n++;continue}if(mp.tilde(c)){t.push({type:cp.tilde,value:c}),n++;continue}if(mp.plus(c)){t.push({type:cp.plus,value:c}),n++;continue}if(mp.sharp(c)){t.push({type:cp.sharp,value:c}),n++;continue}if(mp.asterisk(c)){t.push({type:cp.asterisk,value:c}),n++;continue}if(mp.ampersand(c)){t.push({type:cp.ampersand,value:c}),n++;continue}if(mp.period(c)){t.push({type:cp.period,value:c}),n++;continue}if(mp.comma(c)){t.push({type:cp.comma,value:c}),n++;continue}if(mp.semicolon(c)){t.push({type:cp.semicolon,value:c}),n++;continue}if(mp.leftBrace(c)){t.push({type:cp.leftBrace,value:c}),n++;continue}if(mp.rightBrace(c)){t.push({type:cp.rightBrace,value:c}),n++;continue}if(mp.leftParent(c)){let o="";for(;i()&&!mp.rightParent(c);)o+=c,c=e[++n];o+=c,t.push({type:cp.string,value:o}),n++;continue}}else if(s===up.multiComment){if(l(n)){t.push({type:cp.string,value:"*/"}),n+=2;break}}else if(s===up.singleComment&&mp.nextLine(c)){t.push({type:cp.nextLine,value:c}),n++;break}if(mp.string(c)){let o="";for(;i()&&mp.string(c)&&!mp.breakString(c);)o+=c,c=e[++n];t.push({type:cp.string,value:o})}else n++}}};return a(),t}const fp=new RegExp(`^${hs.replace("@@","")}_\\d+_$`),yp=e=>t=>n=>i=>!!n[i]&&n[i][e]===t,gp=yp("type"),vp=yp("value"),Zp=gp(cp.string),xp=gp(cp.whiteSpace),Xp=gp(cp.nextLine);gp(cp.equal),gp(cp.tilde),gp(cp.plus);const Gp=gp(cp.sharp),Ip=gp(cp.asterisk),Wp=gp(cp.commercialAt),kp=gp(cp.ampersand),Vp=gp(cp.period);gp(cp.comma);const Cp=gp(cp.colon),Sp=gp(cp.semicolon);gp(cp.gt);const Rp=gp(cp.leftBrace),Lp=gp(cp.rightBrace);gp(cp.leftBracket),gp(cp.rightBracket),gp(cp.leftParent),gp(cp.rightParent);const Yp=vp("/*"),Tp=vp("*/"),wp=vp("//"),Np=Xp,Kp=e=>{const t=Wp(e),n=Zp(e);return e=>t(e)&&n(e+1)},Hp=Zp,Mp=Ip,zp=e=>{const t=Hp(e),n=Mp(e),i=kp(e),o=(e=>{const t=Wp(e),n=Zp(e);return i=>t(i)&&t(i+1)&&n(i+2)&&fp.test(e[i+2].value)})(e);return e=>t(e)||n(e)||i(e)||o(e)},Jp=e=>{const t=zp(e),n=(e=>{const t=Vp(e),n=Zp(e);return e=>t(e)&&n(e+1)})(e),i=(e=>{const t=Gp(e),n=Zp(e);return e=>t(e)&&n(e+1)})(e),o=Kp(e),l=(e=>{const t=Cp(e),n=Zp(e);return e=>t(e)&&n(e+1)})(e);return e=>t(e)||n(e)||i(e)||o(e)||l(e)},jp=e=>t=>n=>{var i;n&&(t[e]?null==(i=t[e])||i.push(n):t[e]=[n])},Fp=jp("properties"),Op=jp("children");var $p;!function(e){e.style="style",e.comment="comment",e.atRule="atRule"}($p||($p={}));let Ep=class{constructor(e={}){Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:$p.comment}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"properties",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"children",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.assign(this,e)}*iterParent(){yield this,this.parent&&(yield*this.parent.iterParent())}*[Symbol.iterator](){if(yield this,this.children)for(const e of this.children)yield*e}};function Up(e){let t=0;const n=()=>t<e.length,i=(e=>{const t=Zp(e),n=Cp(e),i=xp(e),o=Sp(e);return e=>t(e)&&n(e+1)&&i(e+2)&&t(e+3)&&o(e+4)})(e),o=(e=>{const t=Wp(e),n=Zp(e),i=Sp(e),o=Xp(e);return l=>t(l)&&t(l+1)&&n(l+2)&&fp.test(e[l+2].value)&&(o(l+3)||i(l+3))})(e),l=Jp(e),r=Rp(e),a=Lp(e),s=Yp(e),c=Tp(e),u=wp(e),d=Np(e),p=Kp(e),h=Sp(e),m=(b,f,y=$p.style)=>{const g=new Ep({type:y,parent:b,value:f});for(;n();){let b=e[t];if(a(t)){t++;break}if(i(t)){const n=e[t+3];Fp(g)({name:b.value,value:n.value}),t+=5}else if(o(t)){const n=`@@${e[t+2].value}`;Fp(g)({name:n,value:n}),t+=4}else if(s(t)){let i=b.value;for(b=e[++t];n()&&!c(t);)i+=b.value,b=e[++t];i+=b.value,Op(g)(new Ep({type:$p.comment,parent:g,value:i})),t++}else if(u(t)){let i=b.value;for(b=e[++t];n()&&!d(t);)i+=b.value,b=e[++t];Op(g)(new Ep({type:$p.comment,parent:g,value:i})),t++}else if(p(t)){let i=b.value;for(b=e[++t];n()&&!r(t)&&!h(t);)i+=b.value,b=e[++t];if(h(t)){i+=";",Op(g)(new Ep({type:$p.atRule,parent:g,value:i})),t++;continue}Op(g)(m(g,i.trim(),$p.atRule))}else if(l(t)){let i=b.value;for(b=e[++t];n()&&!r(t);)i+=b.value,b=e[++t];Op(g)(m(g,i.trim()))}else t++}return g};return m(null)}var Pp,Ap;!function(e){e.string="string",e.whiteSpace="whiteSpace",e.lt="lt",e.gt="gt",e.slash="slash",e.equal="equal"}(Pp||(Pp={})),function(e){e.element="element",e.text="text",e.comment="comment"}(Ap||(Ap={}));const Bp="'",Qp=/\s/,Dp=/\S/,_p=/<|>|=/,qp="<",eh=">",th="/",nh="=",ih="-",oh="!",lh=e=>t=>e===t,rh=e=>t=>e.test(t),ah={doubleQuote:lh('"'),singleQuote:lh(Bp),whiteSpace:rh(Qp),string:rh(Dp),breakString:rh(_p),lt:lh(qp),gt:lh(eh),slash:lh(th),equal:lh(nh),hyphen:lh(ih),exclamationPoint:lh(oh)};function sh(e){const t=[];let n=0;const i=()=>n<e.length,o=(e=>t=>ah.lt(e[t])&&ah.exclamationPoint(e[t+1])&&ah.hyphen(e[t+2])&&ah.hyphen(e[t+3]))(e),l=(r=Ap.text)=>{for(;i();){let a=e[n];if(ah.whiteSpace(a)){let o="";for(;i()&&ah.whiteSpace(a);)o+=a,a=e[++n];r!==Ap.element&&t.push({type:Pp.whiteSpace,value:o})}else{if(r===Ap.element){if(ah.lt(a)){t.push({type:Pp.lt,value:a}),n++;continue}if(ah.gt(a)){t.push({type:Pp.gt,value:a}),n++;break}if(ah.slash(a)){t.push({type:Pp.slash,value:a}),n++;continue}if(ah.equal(a)){t.push({type:Pp.equal,value:a}),n++;continue}if(ah.doubleQuote(a)){let o="";for(a=e[++n];i()&&!ah.doubleQuote(a);)o+=a,a=e[++n];t.push({type:Pp.string,value:o}),n++;continue}if(ah.singleQuote(a)){let o="";for(a=e[++n];i()&&!ah.singleQuote(a);)o+=a,a=e[++n];t.push({type:Pp.string,value:o}),n++;continue}}else if(r===Ap.comment){if(ah.lt(a)){t.push({type:Pp.lt,value:a}),n++;continue}if(ah.gt(a)){t.push({type:Pp.gt,value:a}),n++;break}}else if(ah.lt(a)){l(o(n)?Ap.comment:Ap.element);continue}if(ah.string(a)){let o="";for(;i()&&ah.string(a)&&!ah.breakString(a);)o+=a,a=e[++n];t.push({type:Pp.string,value:o})}else n++}}};return l(),t}const ch=/^(area|base|br|col|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i,uh=e=>t=>n=>i=>!!n[i]&&n[i][e]===t,dh=uh("type"),ph=uh("value"),hh=dh(Pp.lt),mh=dh(Pp.gt),bh=dh(Pp.slash),fh=dh(Pp.equal),yh=dh(Pp.string),gh=dh(Pp.whiteSpace),vh=ph("!--"),Zh=ph("--"),xh=e=>t=>n=>{var i;n&&(t[e]?null==(i=t[e])||i.push(n):t[e]=[n])},Xh=xh("attrs"),Gh=xh("children");function Ih(e){const t=new ec({type:qs.element,value:"template",children:[]});let n=0;const i=()=>n<e.length,o=(e=>{const t=hh(e),n=yh(e);return e=>t(e)&&n(e+1)})(e),l=(e=>{const t=hh(e),n=bh(e),i=yh(e),o=mh(e);return e=>t(e)&&n(e+1)&&i(e+2)&&o(e+3)})(e),r=(e=>{const t=hh(e),n=bh(e),i=mh(e);return e=>t(e)&&n(e+1)&&n(e+2)&&i(e+3)})(e),a=(e=>{const t=bh(e),n=mh(e);return e=>t(e)&&n(e+1)})(e),s=(e=>{const t=hh(e),n=yh(e),i=vh(e);return e=>t(e)&&n(e+1)&&i(e+1)})(e),c=(e=>{const t=yh(e),n=Zh(e),i=mh(e);return e=>t(e)&&n(e)&&i(e+1)})(e),u=hh(e),d=mh(e),p=fh(e),h=gh(e),m=yh(e),b=()=>{let t=e[n];const i={name:t.value};return t=e[++n],p(n)&&(t=e[++n],m(n)&&(i.value=t.value,n++)),i},f=t=>{let p=e[n];if(h(n)||m(n)){let o=p.value;for(p=e[++n];i()&&!u(n);)o+=p.value,p=e[++n];return o=o.trim(),o.length?new ec({parent:t,type:qs.text,value:o}):null}if(s(n)){let o="";for(n+=2,p=e[n];i()&&!c(n);)o+=p.value,p=e[++n];return c(n)&&(n+=2),new ec({parent:t,type:qs.comment,value:o})}if(o(n)){p=e[++n];const o=(e=>ch.test(e))(p.value),s=new ec({parent:t,type:qs.element,value:p.value.toLowerCase()});for(n++;i()&&!d(n)&&!a(n);)m(n)?Xh(s)(b()):n++;if(a(n))return n+=2,s;for(p=e[++n];i()&&!l(n)&&!r(n)&&!o;)Gh(s)(f(s));return(l(n)||r(n))&&(n+=4),s}return n++,null};for(;i();)Gh(t)(f(t));return t}class Wh{get isMarker(){return Vc(this.value)}get isMarkerOnly(){return Cc(this.value)}get isSvg(){return this.type===qs.element&&/^svg$/i.test(this.value)}get isComponent(){return this.type===qs.element&&this.isMarkerOnly}constructor(e,t=null){if(Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:qs.comment}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"staticAttrs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"attrs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"children",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.type=e.type,this.value=e.value,this.parent=t,e.attrs){const[t,n]=function(e=[]){const t=((e,t)=>e.reduce(((e,n)=>{const i=e[t(n)];return i?i.push(n):e[t(n)]=[n],e}),{}))(e,(e=>Lc(e.name)));return Object.keys(t).map((e=>t[e])).reduce(((e,t)=>{const[n,i]=e,o=t[t.length-1],l=Rc(o.name);if(l===gs.event)i.push(...t.filter((e=>!!e.value)).map((e=>({type:Rc(e.name),name:Lc(e.name),value:e.value}))));else if(l===gs.attribute){const e=t.filter((e=>!!e.value)).map((e=>e.value)).join(" "),r={type:l,name:Lc(o.name)};e&&(r.value=e),Sc(r)?i.push(r):n.push(r)}else{const e={type:l,name:Lc(o.name)};o.value&&(e.value=o.value),Sc(e)?i.push(e):n.push(e)}return e}),[[],[]])}(e.attrs);t.length&&(this.staticAttrs=t),n.length&&(this.attrs=n)}e.children&&(this.children=e.children.map((e=>new Wh(e,this))))}insert(e,t,n){if(this.children){const i="before"===e?0:1;this.children.includes(n)&&this.children.splice(this.children.indexOf(n)+i,0,t)}else this.children=[t]}*iterParent(){yield this,this.parent&&(yield*this.parent.iterParent())}*[Symbol.iterator](){if(yield this,this.children)for(const e of this.children)yield*e}}function kh(e){const t=Yc(e.value);e.value.replace(bs,hs).split(hs).reduce(((n,i,o)=>(o<t.length?n.push(new Wh(new ec({type:qs.text,value:i}),e.parent),new Wh(new ec({type:qs.text,value:t[o][0]}),e.parent)):n.push(new Wh(new ec({type:qs.text,value:i}),e.parent)),n)),[]).filter((e=>""!==e.value&&!(!e.value.trim()&&ys.test(e.value)))).reverse().forEach(((t,n,{length:i})=>n===i-1?e.value=t.value:e.parent&&e.parent.insert("after",t,e)))}const Vh=e=>(t,...n)=>{const i={strings:t,values:n,[Cs]:e};if(bc.has(t)){const e=bc.get(t);return i.template=e,i}const o=function(e){const t=new Wh(e);for(const e of t)e.type===qs.text&&!Cc(e.value)&&kh(e);return t}((e=>Ih(sh(e)))(t.reduce(((e,t,i)=>(i<n.length?e.push(t,gc(i)):e.push(t),e)),[]).join("")));return i.template=Object.freeze({node:o}),bc.set(t,i.template),i},Ch=Vh(hc.html),Sh=Vh(hc.svg),Rh=e=>!Qa(e)||Pa(e)||Ua(e)?Zc(e)?`.${String(e)}`:"":String(e),Lh=e=>(t,[n,i])=>t.replace(new RegExp(n),Rh(e[i]));class Yh{get selector(){return[...this.iterParent()].reverse().map((e=>e.toString(!0))).join(" ")}get isAtRule(){return this.type===$p.atRule}constructor(e,t=null,n){var i;if(Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:$p.comment}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"style",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"parent",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"children",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"skipParent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.type=e.type,this.value=e.value,this.parent=t,e.value&&e.isMarker){const t=Lh(n),i=Yc(e.value).reduce(t,e.value);this.value=i}this.value&&e.isThis&&this.parent&&(this.value=this.value.replace(/\&/,null==(i=this.parent)?void 0:i.toString(!0)),this.skipParent=!0),this.value&&e.isAtRule&&this.parent&&(this.skipParent=!0);const[o,l]=Kh(e,n);if(e.children&&l.push(...e.children.map((e=>[e,n]))),this.style=o,this.children=l.filter((([e])=>e.type===$p.style||e.type===$p.atRule)).map((([e,t])=>new Yh(e,this,t))),this.value&&e.isAtRule&&this.parent&&e.children){let e="";for(const t of this.children)t.value&&(e+=`${t.value} {\n${t.style}}\n`);this.style=e}}toString(e=!1){return this.value?this.value:e?`.${wh(this.style)}`:wh(this.style)}*iterParent(){if(yield this,this.parent)if(this.skipParent){if(!this.parent.parent)return;yield*this.parent.parent.iterParent()}else yield*this.parent.iterParent()}*[Symbol.iterator](){if(yield this,this.children)for(const e of this.children)e.isAtRule?yield e:yield*e}}const Th=new Map;function wh(e){if(Th.has(e))return Th.get(e);const t=function(e=21){let t="_";for(let n=0;n<e;n++)t+=Tc.charAt(wc(0,Tc.length));return t}();return Th.set(e,t),t}const Nh=(e,t)=>`${e}: ${t};\n`;function Kh(e,t,n=["",[]]){var i;const o=Lh(t);return null==(i=e.properties)||i.forEach((e=>{if(e.isDynamic){const i=Yc(e.name),o=t[i[0][1]];Zc(o)?(o.template.node.children&&n[1].push(...o.template.node.children.map((e=>[e,o.values]))),Kh(o.template.node,o.values,n)):n[0]+=Rh(o)}else if(e.isMarkerName&&e.isMarkerValue){const t=Yc(e.name),i=Yc(e.value),l=t.reduce(o,e.name),r=i.reduce(o,e.value);n[0]+=Nh(l,r)}else if(e.isMarkerName){const t=Yc(e.name).reduce(o,e.name);n[0]+=Nh(t,e.value)}else if(e.isMarkerValue){const t=Yc(e.value).reduce(o,e.value);n[0]+=Nh(e.name,t)}else n[0]+=Nh(e.name,e.value)})),n}const Hh={vCSSStyleSheetMap:new Map,hostContextMap:new Map};let Mh=globalThis.ShadowRoot&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype;function zh(){return Hh}function Jh(e,t){const n=zh(),i=new Yh(e,null,t);return[...i].forEach((e=>{const t=e.selector;if(n.vCSSStyleSheetMap.has(t))return;const i=Mh?new CSSStyleSheet:null,o=Mh?null:document.createElement("style"),l=e.isAtRule&&!e.style?`${t}`:`${t} {\n${e.style}}`;i?i.replaceSync(l):o&&(o.textContent=l),n.vCSSStyleSheetMap.set(t,{selector:t,cssText:l,style:e.style,sheet:i,styleElement:o}),jh()})),String(i)}function jh(){Mh?function(){const e=zh(),t=Array.from(e.vCSSStyleSheetMap).map((([,{sheet:e}])=>e)).filter(Boolean);Array.from(e.hostContextMap).forEach((([e])=>{e.adoptedStyleSheets=t}))}():function(){const e=zh();Array.from(e.hostContextMap).forEach((([t,{vSheets:n,styleElements:i}])=>{Array.from(e.vCSSStyleSheetMap).filter((([,e])=>!n.has(e))).map((([,e])=>(n.add(e),e.styleElement?document.importNode(e.styleElement,!0):null))).filter(Boolean).forEach((e=>{t.appendChild(e),i.add(e)}))}))}()}const Fh=Symbol.for("https://github.com/dineug/r-html#props");function Oh(e){function t(t){return{type:e,payload:t,timestamp:Date.now()}}return t.toString=()=>`${e}`,t.type=e,t}function*$h(e,t,n){for(const i of n)null!=i&&i[Symbol.iterator]?yield*$h(e,t,i):Fa(i)?yield*$h(e,t,i(e,t)):yield i}const Eh=(e,t,n)=>[...$h(e,t,n)],Uh=(...e)=>t=>e.reduce(((e,t)=>t(e)),t);const Ph=function*(e){for(const t of e)t.length&&(yield t)};class Ah{get isMarkerName(){return Vc(this.name)}get isMarkerValue(){return Vc(this.value)}get isDynamic(){return Cc(this.name)&&this.name===this.value}constructor(e){Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.value=e.value}}class Bh{get isMarker(){return Vc(this.value)}get isThis(){var e;return!(null==(e=this.value)||!e.startsWith("&"))}get isAtRule(){return this.type===$p.atRule}constructor(e,t=null){Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:$p.comment}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"properties",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"children",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.type=e.type,this.value=e.value,this.parent=t,e.properties&&(this.properties=e.properties.map((e=>new Ah(e)))),e.children&&(this.children=e.children.map((e=>new Bh(e,this))))}*iterParent(){yield this,this.parent&&(yield*this.parent.iterParent())}*[Symbol.iterator](){if(yield this,this.children)for(const e of this.children)yield*e}}const Qh=(e,...t)=>{const n={strings:e,values:t,[Cs]:hc.css};if(fc.has(e)){const i=fc.get(e),o=Jh(i.node,t);return n.template=i,n.toString=()=>o,n}const i=function(e){return new Bh(e)}((e=>Up(bp(e)))(e.raw.reduce(((e,n,i)=>(i<t.length?e.push(n,gc(i)):e.push(n),e)),[]).join(""))),o=Jh(i,t);return n.template=Object.freeze({node:i}),n.toString=()=>o,fc.set(e,n.template),n};var Dh=function(e,t){return(Dh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function _h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Dh(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function qh(e,t,n,i){return new(n||(n=Promise))((function(o,l){function r(e){try{s(i.next(e))}catch(e){l(e)}}function a(e){try{s(i.throw(e))}catch(e){l(e)}}function s(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(r,a)}s((i=i.apply(e,t||[])).next())}))}function em(e,t){var n,i,o,l,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return l={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function a(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,a[0]&&(r=0)),r;)try{if(n=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,i=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(6===a[0]&&r.label<o[1]){r.label=o[1],o=a;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(a);break}o[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],i=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}function tm(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function nm(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,l=n.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(i=l.next()).done;)r.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=l.return)&&n.call(l)}finally{if(o)throw o.error}}return r}function im(e,t,n){if(n||2===arguments.length)for(var i,o=0,l=t.length;o<l;o++)(i||!(o in t))&&(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return e.concat(i||Array.prototype.slice.call(t))}function om(e){return this instanceof om?(this.v=e,this):new om(e)}function lm(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,o=n.apply(e,t||[]),l=[];return i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i;function r(e){o[e]&&(i[e]=function(t){return new Promise((function(n,i){l.push([e,t,n,i])>1||a(e,t)}))})}function a(e,t){try{!function(e){e.value instanceof om?Promise.resolve(e.value.v).then(s,c):u(l[0][2],e)}(o[e](t))}catch(e){u(l[0][3],e)}}function s(e){a("next",e)}function c(e){a("throw",e)}function u(e,t){e(t),l.shift(),l.length&&a(l[0][0],l[0][1])}}function rm(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=tm(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(n){t[n]=e[n]&&function(t){return new Promise((function(i,o){(function(e,t,n,i){Promise.resolve(i).then((function(t){e({value:t,done:n})}),t)})(i,o,(t=e[n](t)).done,t.value)}))}}}function am(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)}function sm(e){return"function"==typeof e}function cm(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var um=cm((function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}));function dm(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var pm=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var e,t,n,i,o;if(!this.closed){this.closed=!0;var l=this._parentage;if(l)if(this._parentage=null,Array.isArray(l))try{for(var r=tm(l),a=r.next();!a.done;a=r.next()){a.value.remove(this)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}else l.remove(this);var s=this.initialTeardown;if(sm(s))try{s()}catch(e){o=e instanceof um?e.errors:[e]}var c=this._finalizers;if(c){this._finalizers=null;try{for(var u=tm(c),d=u.next();!d.done;d=u.next()){var p=d.value;try{bm(p)}catch(e){o=o??[],e instanceof um?o=im(im([],nm(o)),nm(e.errors)):o.push(e)}}}catch(e){n={error:e}}finally{try{d&&!d.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}}if(o)throw new um(o)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)bm(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&dm(t,e)},e.prototype.remove=function(t){var n=this._finalizers;n&&dm(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e;var t}(),hm=pm.EMPTY;function mm(e){return e instanceof pm||e&&"closed"in e&&sm(e.remove)&&sm(e.add)&&sm(e.unsubscribe)}function bm(e){sm(e)?e():e.unsubscribe()}var fm=void 0,ym=!1,gm={setTimeout:function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return setTimeout.apply(void 0,im([e,t],nm(n)))},clearTimeout:function(e){return clearTimeout(e)},delegate:void 0};function vm(e){gm.setTimeout((function(){throw e}))}function Zm(){}function xm(e){e()}var Xm=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,mm(t)&&t.add(n)):n.destination=Cm,n}return _h(t,e),t.create=function(e,t,n){return new km(e,t,n)},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(pm),Gm=Function.prototype.bind;function Im(e,t){return Gm.call(e,t)}var Wm=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){Vm(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){Vm(e)}else Vm(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){Vm(e)}},e}(),km=function(e){function t(t,n,i){var o,l,r=e.call(this)||this;sm(t)||!t?o={next:t??void 0,error:n??void 0,complete:i??void 0}:r&&ym?((l=Object.create(t)).unsubscribe=function(){return r.unsubscribe()},o={next:t.next&&Im(t.next,l),error:t.error&&Im(t.error,l),complete:t.complete&&Im(t.complete,l)}):o=t;return r.destination=new Wm(o),r}return _h(t,e),t}(Xm);function Vm(e){vm(e)}var Cm={closed:!0,next:Zm,error:function(e){throw e},complete:Zm},Sm="function"==typeof Symbol&&Symbol.observable||"@@observable";function Rm(e){return e}var Lm=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var i=this,o=function(e){return e&&e instanceof Xm||function(e){return e&&sm(e.next)&&sm(e.error)&&sm(e.complete)}(e)&&mm(e)}(e)?e:new km(e,t,n);return xm((function(){var e=i,t=e.operator,n=e.source;o.add(t?t.call(o,n):n?i._subscribe(o):i._trySubscribe(o))})),o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=Ym(t))((function(t,i){var o=new km({next:function(t){try{e(t)}catch(e){i(e),o.unsubscribe()}},error:i,complete:t});n.subscribe(o)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[Sm]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(e){return 0===e.length?Rm:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=Ym(e))((function(e,n){var i;t.subscribe((function(e){return i=e}),(function(e){return n(e)}),(function(){return e(i)}))}))},e.create=function(t){return new e(t)},e}();function Ym(e){var t;return null!==(t=e??fm)&&void 0!==t?t:Promise}function Tm(e){return function(t){if(function(e){return sm(null==e?void 0:e.lift)}(t))return t.lift((function(t){try{return e(t,this)}catch(e){this.error(e)}}));throw new TypeError("Unable to lift unknown Observable type")}}function wm(e,t,n,i,o){return new Nm(e,t,n,i,o)}var Nm=function(e){function t(t,n,i,o,l,r){var a=e.call(this,t)||this;return a.onFinalize=l,a.shouldUnsubscribe=r,a._next=n?function(e){try{n(e)}catch(e){t.error(e)}}:e.prototype._next,a._error=o?function(e){try{o(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,a._complete=i?function(){try{i()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,a}return _h(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(Xm),Km=cm((function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),Hm=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return _h(t,e),t.prototype.lift=function(e){var t=new Mm(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new Km},t.prototype.next=function(e){var t=this;xm((function(){var n,i;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var o=tm(t.currentObservers),l=o.next();!l.done;l=o.next()){l.value.next(e)}}catch(e){n={error:e}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}}}))},t.prototype.error=function(e){var t=this;xm((function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var n=t.observers;n.length;)n.shift().error(e)}}))},t.prototype.complete=function(){var e=this;xm((function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}}))},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,n=this,i=n.hasError,o=n.isStopped,l=n.observers;return i||o?hm:(this.currentObservers=null,l.push(e),new pm((function(){t.currentObservers=null,dm(l,e)})))},t.prototype._checkFinalizedStatuses=function(e){var t=this,n=t.hasError,i=t.thrownError,o=t.isStopped;n?e.error(i):o&&e.complete()},t.prototype.asObservable=function(){var e=new Lm;return e.source=this,e},t.create=function(e,t){return new Mm(e,t)},t}(Lm),Mm=function(e){function t(t,n){var i=e.call(this)||this;return i.destination=t,i.source=n,i}return _h(t,e),t.prototype.next=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)},t.prototype.error=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:hm},t}(Hm),zm=function(){return Date.now()},Jm=function(e){function t(t,n){return e.call(this)||this}return _h(t,e),t.prototype.schedule=function(e,t){return this},t}(pm),jm=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return setInterval.apply(void 0,im([e,t],nm(n)))},Fm=function(e){return clearInterval(e)},Om=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i.pending=!1,i}return _h(t,e),t.prototype.schedule=function(e,t){var n;if(void 0===t&&(t=0),this.closed)return this;this.state=e;var i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(o,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),jm(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!=n&&this.delay===n&&!1===this.pending)return t;null!=t&&Fm(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n,i=!1;try{this.work(e)}catch(e){i=!0,n=e||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),n},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,n=this.scheduler,i=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,dm(i,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(Jm),$m=function(){function e(t,n){void 0===n&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(n,t)},e.now=zm,e}(),Em=function(e){function t(t,n){void 0===n&&(n=$m.now);var i=e.call(this,t,n)||this;return i.actions=[],i._active=!1,i}return _h(t,e),t.prototype.flush=function(e){var t=this.actions;if(this._active)t.push(e);else{var n;this._active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}($m),Um=new Em(Om),Pm=Um;function Am(e){return e&&sm(e.schedule)}var Bm=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function Qm(e){return sm(null==e?void 0:e.then)}function Dm(e){return sm(e[Sm])}function _m(e){return Symbol.asyncIterator&&sm(null==e?void 0:e[Symbol.asyncIterator])}function qm(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var eb="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function tb(e){return sm(null==e?void 0:e[eb])}function nb(e){return lm(this,arguments,(function(){var t,n,i;return em(this,(function(o){switch(o.label){case 0:t=e.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,om(t.read())];case 3:return n=o.sent(),i=n.value,n.done?[4,om(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,om(i)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}function ib(e){return sm(null==e?void 0:e.getReader)}function ob(e){if(e instanceof Lm)return e;if(null!=e){if(Dm(e))return function(e){return new Lm((function(t){var n=e[Sm]();if(sm(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")}))}(e);if(Bm(e))return function(e){return new Lm((function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()}))}(e);if(Qm(e))return function(e){return new Lm((function(t){e.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,vm)}))}(e);if(_m(e))return lb(e);if(tb(e))return function(e){return new Lm((function(t){var n,i;try{for(var o=tm(e),l=o.next();!l.done;l=o.next()){var r=l.value;if(t.next(r),t.closed)return}}catch(e){n={error:e}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}t.complete()}))}(e);if(ib(e))return function(e){return lb(nb(e))}(e)}throw qm(e)}function lb(e){return new Lm((function(t){(function(e,t){var n,i,o,l;return qh(this,void 0,void 0,(function(){var r,a;return em(this,(function(s){switch(s.label){case 0:s.trys.push([0,5,6,11]),n=rm(e),s.label=1;case 1:return[4,n.next()];case 2:if((i=s.sent()).done)return[3,4];if(r=i.value,t.next(r),t.closed)return[2];s.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=s.sent(),o={error:a},[3,11];case 6:return s.trys.push([6,,9,10]),i&&!i.done&&(l=n.return)?[4,l.call(n)]:[3,8];case 7:s.sent(),s.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))}))})(e,t).catch((function(e){return t.error(e)}))}))}function rb(e,t,n,i,o){void 0===i&&(i=0),void 0===o&&(o=!1);var l=t.schedule((function(){n(),o?e.add(this.schedule(null,i)):this.unsubscribe()}),i);if(e.add(l),!o)return l}function ab(e,t){return Tm((function(n,i){var o=0;n.subscribe(wm(i,(function(n){i.next(e.call(t,n,o++))})))}))}function sb(e,t,n){return void 0===n&&(n=1/0),sm(t)?sb((function(n,i){return ab((function(e,o){return t(n,e,i,o)}))(ob(e(n,i)))}),n):("number"==typeof t&&(n=t),Tm((function(t,i){return function(e,t,n,i,o,l,r,a){var s=[],c=0,u=0,d=!1,p=function(){d&&!s.length&&!c&&t.complete()},h=function(e){return c<i?m(e):s.push(e)},m=function(e){l&&t.next(e),c++;var a=!1;ob(n(e,u++)).subscribe(wm(t,(function(e){null==o||o(e),l?h(e):t.next(e)}),(function(){a=!0}),void 0,(function(){if(a)try{c--;for(var e=function(){var e=s.shift();r?rb(t,r,(function(){return m(e)})):m(e)};s.length&&c<i;)e();p()}catch(e){t.error(e)}})))};return e.subscribe(wm(t,h,(function(){d=!0,p()}))),function(){null==a||a()}}(t,i,e,n)})))}function cb(e,t,n){void 0===e&&(e=0),void 0===n&&(n=Pm);var i=-1;return null!=t&&(Am(t)?n=t:i=t),new Lm((function(t){var o=function(e){return e instanceof Date&&!isNaN(e)}(e)?+e-n.now():e;o<0&&(o=0);var l=0;return n.schedule((function(){t.closed||(t.next(l++),0<=i?this.schedule(void 0,i):t.complete())}),o)}))}function ub(e,t){return Tm((function(n,i){var o=0;n.subscribe(wm(i,(function(n){return e.call(t,n,o++)&&i.next(n)})))}))}function db(e){return Tm((function(t,n){var i=[];return t.subscribe(wm(n,(function(e){return i.push(e)}),(function(){n.next(i),n.complete()}))),ob(e).subscribe(wm(n,(function(){var e=i;i=[],n.next(e)}),Zm)),function(){i=null}}))}function pb(e,t){return void 0===t&&(t=Um),Tm((function(n,i){var o=null,l=null,r=null,a=function(){if(o){o.unsubscribe(),o=null;var e=l;l=null,i.next(e)}};function s(){var n=r+e,l=t.now();if(l<n)return o=this.schedule(void 0,n-l),void i.add(o);a()}n.subscribe(wm(i,(function(n){l=n,r=t.now(),o||(o=t.schedule(s,e),i.add(o))}),(function(){a(),i.complete()}),void 0,(function(){l=o=null})))}))}function hb(e,t,n,i){return Tm((function(o,l){var r;t&&"function"!=typeof t?(n=t.duration,r=t.element,i=t.connector):r=t;var a=new Map,s=function(e){a.forEach(e),e(l)},c=function(e){return s((function(t){return t.error(e)}))},u=0,d=!1,p=new Nm(l,(function(t){try{var o=e(t),s=a.get(o);if(!s){a.set(o,s=i?i():new Hm);var h=function(e,t){var n=new Lm((function(e){u++;var n=t.subscribe(e);return function(){n.unsubscribe(),0==--u&&d&&p.unsubscribe()}}));return n.key=e,n}(o,s);if(l.next(h),n){var m=wm(s,(function(){s.complete(),null==m||m.unsubscribe()}),void 0,void 0,(function(){return a.delete(o)}));p.add(ob(n(h)).subscribe(m))}}s.next(r?r(t):t)}catch(e){c(e)}}),(function(){return s((function(e){return e.complete()}))}),c,(function(){return a.clear()}),(function(){return d=!0,0===u}));o.subscribe(p)}))}function mb(e,t,n){void 0===t&&(t=Um);var i=cb(e,t);return function(e,t){return Tm((function(n,i){var o=t??{},l=o.leading,r=void 0===l||l,a=o.trailing,s=void 0!==a&&a,c=!1,u=null,d=null,p=!1,h=function(){null==d||d.unsubscribe(),d=null,s&&(f(),p&&i.complete())},m=function(){d=null,p&&i.complete()},b=function(t){return d=ob(e(t)).subscribe(wm(i,h,m))},f=function(){if(c){c=!1;var e=u;u=null,i.next(e),!p&&b(e)}};n.subscribe(wm(i,(function(e){c=!0,u=e,(!d||d.closed)&&(r?f():b(e))}),(function(){p=!0,(!(s&&c&&d)||d.closed)&&i.complete()})))}))}((function(){return i}),n)}const bb="editor.changeHasHistory",fb="editor.selectAll",yb="editor.unselectAll",gb="editor.select",vb="editor.changeViewport",Zb="editor.clear",xb="editor.loadJson",Xb="editor.initialClear",Gb="editor.initialLoadJson",Ib="editor.focusTable",Wb="editor.focusColumn",kb="editor.focusTableEnd",Vb="editor.focusMoveTable",Cb="editor.editTable",Sb="editor.editTableEnd",Rb="editor.selectAllColumn",Lb="editor.drawStartRelationship",Yb="editor.drawStartAddRelationship",Tb="editor.drawEndRelationship",wb="editor.drawRelationship",Nb="editor.hoverColumnMap",Kb="editor.hoverRelationshipMap",Hb="editor.changeOpenMap",Mb="editor.dragstartColumn",zb="editor.dragendColumn",Jb="editor.sharedMouseTracker",jb="editor.validationIds",Fb=Ur.CanvasType,Ob=Ur.CanvasTypeList,Eb=Ur.Show,Ub=Ur.ColumnType,Pb=Ur.ColumnTypeList,Ab=Ur.Database,Bb=Ur.DatabaseList,Qb=Ur.Language,Db=Ur.LanguageList,_b=Ur.NameCase,qb=Ur.NameCaseList,ef=Ur.BracketType,tf=Ur.BracketTypeList,nf=Ur.RelationshipType,of=Ur.StartRelationshipType,lf=Ur.Direction,rf=Ur.ColumnOption,af=Ur.ColumnUIKey,sf=Ur.OrderType,cf=Ur.SaveSettingType,uf=Ur.CANVAS_SIZE_MAX,df=Ur.CANVAS_SIZE_MIN,pf=Ur.CANVAS_ZOOM_MAX,hf=Ur.CANVAS_ZOOM_MIN,mf={[ef.none]:"",[ef.backtick]:"`",[ef.doubleQuote]:'"',[ef.singleQuote]:"'"},bf={[Ub.columnName]:"Name",[Ub.columnDataType]:"DataType",[Ub.columnDefault]:"Default",[Ub.columnComment]:"Comment",[Ub.columnAutoIncrement]:"Auto Increment",[Ub.columnUnique]:"Unique",[Ub.columnNotNull]:"Not Null"},ff={shared:1,changeOnly:2,following:4};function yf(e,t){return{...Xo(t),tags:tr(t.tags)?t.tags|e:e}}function gf(e,t){return t.map((t=>yf(e,t)))}const vf=(e=>(...t)=>function*(n,i){const o=Eh(n,i,t);yield gf(e,o)})(ff.changeOnly);function Zf(e,t){return(e&t)===t}function xf(e,t){return!(e.x>t.x+t.w||e.x+e.w<t.x||e.y>t.y+t.h||e.y+e.h<t.y)}function Xf(e,t,n){const i={x:0,y:0,w:0,h:0};return i.w=e*n,i.h=t*n,i.x=(e-i.w)/2,i.y=(t-i.h)/2,i}function Gf({x:e,y:t},n,i,o){const l=Xf(n,i,o),r=e*o,a=t*o;return{x:l.x+r,y:l.y+a}}function If(e,t,n,i){const{x:o,y:l}=e,{x:r,y:a}=Gf(e,t,n,i);return{x:o+(o-r)/i,y:l+(l-a)/i}}const Wf=200,kf=100,Vf=8,Cf=1,Sf=8,Rf=38,Lf=12,Yf=12,Tf=60,wf=35,Nf=22,Kf=15,Hf=24,Mf=150,zf={MariaDB:"MariaDB",MSSQL:"MSSQL",MySQL:"MySQL",Oracle:"Oracle",PostgreSQL:"PostgreSQL",SQLite:"SQLite"},Jf=Object.values(zf),jf={[zf.MariaDB]:Ab.MariaDB,[zf.MSSQL]:Ab.MSSQL,[zf.MySQL]:Ab.MySQL,[zf.Oracle]:Ab.Oracle,[zf.PostgreSQL]:Ab.PostgreSQL,[zf.SQLite]:Ab.SQLite},Ff=/[^0-9]/g,Of=e=>e.replace(Ff,""),$f=ir(df,uf),Ef=ir(hf,pf),Uf=ir(Tf,200);function Pf(e){const t=Bl(e)?Number(Of(e)):e;return $f(t)}function Af(e){return Hl(Ef(e),2)}function Bf(e){const t=Bl(e)?Number(Of(e)):e;return`${Uf(t)}px`}function Qf(e){return`${(100*e).toFixed()}%`}const Df=jl(Bb),_f=jl(qb),qf=jl(tf),ey=jl(Db),ty=jl(Pb),ny=jl(Jf),iy=jl(Ob);function oy(e){return Math.max(e,Tf)}function ly(e){return Bl(e)?e.trim():""}function ry(e){return e<=.7}const ay="table",sy="memo",cy={tableName:"tableName",tableComment:"tableComment",columnName:"columnName",columnDataType:"columnDataType",columnNotNull:"columnNotNull",columnUnique:"columnUnique",columnAutoIncrement:"columnAutoIncrement",columnDefault:"columnDefault",columnComment:"columnComment"},uy={ArrowUp:"ArrowUp",ArrowRight:"ArrowRight",ArrowDown:"ArrowDown",ArrowLeft:"ArrowLeft",Tab:"Tab"},dy=jl(Object.values(uy)),py=()=>({id:nr(),selectedMap:{},hasUndo:!1,hasRedo:!1,viewport:{width:1200,height:675},focusTable:null,drawRelationship:null,hoverColumnMap:{},hoverRelationshipMap:{},openMap:{},draggableColumn:null,draggingColumnMap:{},sharedMouseTrackerMap:{}}),hy=e=>e.ui.zIndex,my=(e,t)=>Math.max(1,...e.map(hy),...t.map(hy))+1,by=e=>t=>e.y===t.y&&e.x===t.x;function fy({width:e,height:t,zoomLevel:n,scrollLeft:i,scrollTop:o},l,r){const a=If({x:Wf-i,y:kf-o},e,t,n),s=[...l,...r].map((({ui:e})=>e));for(;s.some(by(a));)a.x+=50,a.y+=50;return a}function yy(){const e=Date.now();return{updateAt:e,createAt:e}}function gy(e,t){return Jl([...e,t])}function vy(e,t,n){if(!t||t===n)return[n];const i=e.indexOf(t),o=e.indexOf(n);return-1===i?[n]:function(e,t){return e<t?Kl(e,t+1):Kl(t,e+1)}(i,o).map((t=>e[t]))}const Zy={[Ub.columnName]:!0,[Ub.columnDataType]:Eb.columnDataType,[Ub.columnNotNull]:Eb.columnNotNull,[Ub.columnUnique]:Eb.columnUnique,[Ub.columnAutoIncrement]:Eb.columnAutoIncrement,[Ub.columnDefault]:Eb.columnDefault,[Ub.columnComment]:Eb.columnComment},xy={[Ub.columnName]:cy.columnName,[Ub.columnDataType]:cy.columnDataType,[Ub.columnNotNull]:cy.columnNotNull,[Ub.columnUnique]:cy.columnUnique,[Ub.columnAutoIncrement]:cy.columnAutoIncrement,[Ub.columnDefault]:cy.columnDefault,[Ub.columnComment]:cy.columnComment},Xy=[cy.tableName,cy.tableComment];function Gy({settings:{show:e,columnOrder:t}}){return t.filter((t=>{const n=Zy[t];return!0===n||Zf(e,n)})).map((e=>xy[e]))}function Iy({collections:e,editor:{focusTable:t}}){if(!t)return!1;const n=Dr(e).collection("tableEntities").selectById(t.tableId);return!(null==n||!n.columnIds.length)}function Wy(e){const{editor:{focusTable:t}}=e;if(!t)return!0;const n=Gy(e);return n.indexOf(t.focusType)===n.length-1}function ky(e){const{editor:{focusTable:t}}=e;return!t||0===Gy(e).indexOf(t.focusType)}function Vy({collections:e,editor:{focusTable:t}}){if(null==t||!t.columnId)return!0;const n=Dr(e).collection("tableEntities").selectById(t.tableId);return!n||n.columnIds.indexOf(t.columnId)===n.columnIds.length-1}function Cy({collections:e,editor:{focusTable:t}}){if(null==t||!t.columnId)return!0;const n=Dr(e).collection("tableEntities").selectById(t.tableId);return!n||0===n.columnIds.indexOf(t.columnId)}function Sy(e){const t=Gy(e);return t[t.length-1]}function Ry(e){return Gy(e)[0]}function Ly({settings:{show:e}}){return Zf(e,Eb.tableComment)?Xy:[cy.tableName]}function Yy(e){const{editor:{focusTable:t}}=e;if(!t)return!0;const n=Ly(e);return n.indexOf(t.focusType)===n.length-1}function Ty(e){const{editor:{focusTable:t}}=e;return!t||0===Ly(e).indexOf(t.focusType)}const wy=jl(Xy);function Ny(e){const{editor:{focusTable:t}}=e;if(!t)return cy.tableName;const n=Ly(e),i=n.indexOf(t.focusType);return Yy(e)?n[0]:n[i+1]}function Ky(e){const{editor:{focusTable:t}}=e;if(!t)return cy.tableName;const n=Ly(e),i=n.indexOf(t.focusType);return Ty(e)?n[n.length-1]:n[i-1]}function Hy(e,t){const{collections:n,editor:{focusTable:i}}=e;if(!i)return;const o=Dr(n).collection("tableEntities").selectById(i.tableId);if(o)if(wy(i.focusType))if(Ty(e))if(Iy(e)){const t=o.columnIds[o.columnIds.length-1];i.focusType=Sy(e),i.columnId=t,i.prevSelectColumnId=t,i.selectColumnIds=[t]}else i.focusType=Ky(e);else i.focusType=Ky(e);else if(ky(e)){if(Cy(e))i.focusType=Zf(e.settings.show,Eb.tableComment)?cy.tableComment:cy.tableName,i.columnId=null,i.prevSelectColumnId=null,i.selectColumnIds=[];else if(i.columnId){const n=o.columnIds.indexOf(i.columnId),l=o.columnIds[n-1];i.focusType=Sy(e),i.columnId=l,i.prevSelectColumnId=l,t.shiftKey&&t.moveKey!==uy.Tab?i.selectColumnIds=gy(i.selectColumnIds,l):i.selectColumnIds=[l]}}else i.focusType=function(e){const{editor:{focusTable:t}}=e;if(!t)return cy.columnName;const n=Gy(e),i=n.indexOf(t.focusType);return ky(e)?n[n.length-1]:n[i-1]}(e),!t.shiftKey&&i.columnId&&(i.prevSelectColumnId=i.columnId,i.selectColumnIds=[i.columnId])}function My(e,t){const{collections:n,editor:{focusTable:i}}=e;if(!i)return;const o=Dr(n).collection("tableEntities").selectById(i.tableId);if(o)if(wy(i.focusType))if(Yy(e))if(Iy(e)){const t=o.columnIds[0];i.focusType=Ry(e),i.columnId=t,i.prevSelectColumnId=t,i.selectColumnIds=[t]}else i.focusType=Ny(e);else i.focusType=Ny(e);else if(Wy(e)){if(Vy(e))i.focusType=cy.tableName,i.columnId=null,i.prevSelectColumnId=null,i.selectColumnIds=[];else if(i.columnId){const n=o.columnIds.indexOf(i.columnId),l=o.columnIds[n+1];i.focusType=Ry(e),i.columnId=l,i.prevSelectColumnId=l,t.shiftKey&&t.moveKey!==uy.Tab?i.selectColumnIds=gy(i.selectColumnIds,l):i.selectColumnIds=[l]}}else i.focusType=function(e){const{editor:{focusTable:t}}=e;if(!t)return cy.columnName;const n=Gy(e),i=n.indexOf(t.focusType);return Wy(e)?n[0]:n[i+1]}(e),!t.shiftKey&&i.columnId&&(i.prevSelectColumnId=i.columnId,i.selectColumnIds=[i.columnId])}const zy=Oh(bb),Jy=Oh(fb),jy=Oh(yb),Fy=Oh(gb),Oy=Oh(vb),$y=Oh(Zb),Ey=Oh(xb),Uy=Oh(Xb),Py=Oh(Gb),Ay=Oh(Ib),By=Oh(Wb),Qy=Oh(kb),Dy=Oh(Vb),_y=Oh(Cb),qy=Oh(Sb),eg=Oh(Rb),tg=Oh(Lb),ng=Oh(Yb),ig=Oh(Tb),og=Oh(wb),lg=Oh(Nb),rg=Oh(Kb),ag=Oh(Hb),sg=Oh(Mb),cg=Oh(zb),ug=Oh(Jb),dg=Oh(jb),pg={[bb]:({editor:e},{payload:{hasRedo:t,hasUndo:n}})=>{e.hasRedo=t,e.hasUndo=n},[fb]:({editor:e,doc:t})=>{const n=t.tableIds.reduce(((e,t)=>(e[t]=ay,e)),{}),i=t.memoIds.reduce(((e,t)=>(e[t]=sy,e)),{});e.selectedMap={...i,...n}},[yb]:({editor:e})=>{Object.keys(e.selectedMap).forEach((t=>{Reflect.deleteProperty(e.selectedMap,t)}))},[gb]:({editor:e},{payload:t})=>{Object.assign(e.selectedMap,t)},[vb]:({editor:e},{payload:{width:t,height:n}})=>{e.viewport.width=t,e.viewport.height=n},[Zb]:e=>{const{doc:t,collections:n,lww:i}=Er({});e.doc=t,e.collections=n,e.lww=i},[xb]:(e,{payload:{value:t}})=>{const{version:n,settings:i,doc:o,collections:l,lww:r}=Sa(t);iy(i.canvasType)||(i.canvasType=Fb.ERD),Object.assign(e.settings,i),e.version=n,e.doc=o,e.collections=l,e.lww=r},[Xb]:e=>{const{doc:t,collections:n,lww:i}=Er({});e.doc=t,e.collections=n,e.lww=i},[Gb]:(e,{payload:{value:t}})=>{const{version:n,settings:i,doc:o,collections:l,lww:r}=Sa(t);iy(i.canvasType)||(i.canvasType=Fb.ERD),Object.assign(e.settings,i),e.version=n,e.doc=o,e.collections=l,e.lww=r},[Ib]:({editor:e,collections:t},{payload:n})=>{var i,o;const l=Dr(t).collection("tableEntities");if((null==(i=e.focusTable)?void 0:i.tableId)===n.tableId&&n.focusType)e.focusTable.focusType=n.focusType,e.focusTable.columnId=null,e.focusTable.prevSelectColumnId=null,e.focusTable.selectColumnIds=[];else if(n.focusType){const t=l.selectById(n.tableId);if(!t)return;e.focusTable={tableId:t.id,focusType:n.focusType,columnId:null,prevSelectColumnId:null,selectColumnIds:[],edit:!1}}else if((null==(o=e.focusTable)?void 0:o.tableId)!==n.tableId){const t=l.selectById(n.tableId);if(!t)return;e.focusTable={tableId:t.id,focusType:cy.tableName,columnId:null,prevSelectColumnId:null,selectColumnIds:[],edit:!1}}},[Wb]:({editor:e,collections:t},{payload:n})=>{var i;const o=Dr(t).collection("tableEntities");if((null==(i=e.focusTable)?void 0:i.tableId)===n.tableId){const t=o.selectById(n.tableId);if(!t)return;const i=e.focusTable;i.columnId=n.columnId,i.focusType=n.focusType,n.$mod&&n.shiftKey?i.selectColumnIds=function(e,t,n,i){return Jl([...t,...vy(e,n,i)])}(t.columnIds,i.selectColumnIds,i.prevSelectColumnId,i.columnId):n.shiftKey?i.selectColumnIds=vy(t.columnIds,i.prevSelectColumnId,i.columnId):n.$mod?i.selectColumnIds=gy(i.selectColumnIds,n.columnId):i.selectColumnIds=[n.columnId],i.prevSelectColumnId=n.columnId}else{const t=o.selectById(n.tableId);if(!t)return;e.focusTable={tableId:t.id,focusType:n.focusType,columnId:n.columnId,prevSelectColumnId:n.columnId,selectColumnIds:[n.columnId],edit:!1}}},[kb]:({editor:e})=>{e.focusTable=null},[Vb]:(e,{payload:t})=>{const{editor:{focusTable:n}}=e;if(n)switch(n.edit=!1,t.moveKey){case uy.ArrowUp:!function(e,t){const{collections:n,editor:{focusTable:i}}=e;if(!i)return;const o=Dr(n).collection("tableEntities").selectById(i.tableId);if(o)if(wy(i.focusType)){if(Iy(e)){const t=o.columnIds[o.columnIds.length-1];i.focusType=Sy(e),i.columnId=t,i.prevSelectColumnId=t,i.selectColumnIds=[t]}}else if(Cy(e))i.focusType=cy.tableName,i.columnId=null,i.prevSelectColumnId=null,i.selectColumnIds=[];else if(i.columnId){const e=o.columnIds.indexOf(i.columnId),n=o.columnIds[e-1];i.columnId=n,i.prevSelectColumnId=n,t.shiftKey&&t.moveKey!==uy.Tab?i.selectColumnIds=gy(i.selectColumnIds,n):i.selectColumnIds=[n]}}(e,t);break;case uy.ArrowDown:!function(e,t){const{collections:n,editor:{focusTable:i}}=e;if(!i)return;const o=Dr(n).collection("tableEntities").selectById(i.tableId);if(o)if(wy(i.focusType)){if(Iy(e)){const t=o.columnIds[0];i.focusType=Ry(e),i.columnId=t,i.prevSelectColumnId=t,i.selectColumnIds=[t]}}else if(Vy(e))i.focusType=cy.tableName,i.columnId=null,i.prevSelectColumnId=null,i.selectColumnIds=[];else if(i.columnId){const e=o.columnIds.indexOf(i.columnId),n=o.columnIds[e+1];i.columnId=n,i.prevSelectColumnId=n,t.shiftKey&&t.moveKey!==uy.Tab?i.selectColumnIds=gy(i.selectColumnIds,n):i.selectColumnIds=[n]}}(e,t);break;case uy.ArrowLeft:Hy(e,t);break;case uy.ArrowRight:My(e,t);break;case uy.Tab:t.shiftKey?Hy(e,t):My(e,t)}},[Cb]:({editor:{focusTable:e}})=>{e&&(e.edit=!0)},[Sb]:({editor:{focusTable:e}})=>{e&&(e.edit=!1)},[Rb]:({collections:e,editor:{focusTable:t}})=>{if(!t)return;const n=Dr(e).collection("tableEntities").selectById(t.tableId);n&&(t.selectColumnIds=[...n.columnIds])},[Lb]:({editor:e},{payload:{relationshipType:t}})=>{e.drawRelationship={relationshipType:t,start:null,end:{x:0,y:0}}},[Yb]:({editor:{drawRelationship:e},collections:t},{payload:{tableId:n}})=>{if(!e)return;const i=Dr(t).collection("tableEntities").selectById(n);i&&(e.start={tableId:n,x:i.ui.x,y:i.ui.y})},[Tb]:({editor:e})=>{e.drawRelationship=null},[wb]:({editor:{drawRelationship:e},settings:{scrollLeft:t,scrollTop:n,zoomLevel:i,width:o,height:l}},{payload:{x:r,y:a}})=>{if(null==e||!e.start)return;const s=If({x:r-t,y:a-n},o,l,i);e.end.x=s.x,e.end.y=s.y},[Nb]:({editor:e},{payload:{columnIds:t}})=>{Object.keys(e.hoverColumnMap).forEach((t=>{Reflect.deleteProperty(e.hoverColumnMap,t)}));for(const n of t)e.hoverColumnMap[n]=!0},[Kb]:({editor:e},{payload:{relationshipIds:t}})=>{Object.keys(e.hoverRelationshipMap).forEach((t=>{Reflect.deleteProperty(e.hoverRelationshipMap,t)}));for(const n of t)e.hoverRelationshipMap[n]=!0},[Hb]:({editor:e},{payload:t})=>{Object.assign(e.openMap,t)},[Mb]:({editor:e},{payload:t})=>{e.draggableColumn=t,t.columnIds.forEach((t=>{e.draggingColumnMap[t]=!0}))},[zb]:({editor:e})=>{e.draggableColumn=null,Object.keys(e.draggingColumnMap).forEach((t=>{Reflect.deleteProperty(e.draggingColumnMap,t)}))},[Jb]:({editor:e},{payload:t,tags:n,meta:i})=>{if(_l(n)||!Zf(n,ff.shared)||!Bl(null==i?void 0:i.editorId)||e.id===i.editorId)return;const o=e.sharedMouseTrackerMap[i.editorId],l=!Bl(i.nickname)||Vl(i.nickname.trim())?"user":i.nickname.trim();o?(o.x=t.x,o.y=t.y,o.nickname=l,clearTimeout(o.timeoutId),o.timeoutId=setTimeout((()=>{Reflect.deleteProperty(e.sharedMouseTrackerMap,i.editorId)}),3e4)):e.sharedMouseTrackerMap[i.editorId]={...t,id:i.editorId,nickname:l,timeoutId:setTimeout((()=>{Reflect.deleteProperty(e.sharedMouseTrackerMap,i.editorId)}),3e4)}},[jb]:({doc:e,collections:t})=>{const n=Dr(t).collection("tableEntities"),i=Dr(t).collection("tableColumnEntities"),o=Dr(t).collection("indexEntities"),l=Dr(t).collection("indexColumnEntities"),r=Dr(t).collection("relationshipEntities"),a=Dr(t).collection("memoEntities"),s=e.tableIds.filter((e=>!n.selectById(e))),c=e.relationshipIds.filter((e=>!r.selectById(e))),u=e.indexIds.filter((e=>!o.selectById(e))),d=e.memoIds.filter((e=>!a.selectById(e)));e.tableIds=e.tableIds.filter((e=>!s.includes(e))),e.relationshipIds=e.relationshipIds.filter((e=>!c.includes(e))),e.indexIds=e.indexIds.filter((e=>!u.includes(e))),e.memoIds=e.memoIds.filter((e=>!d.includes(e))),n.selectAll().forEach((e=>{const t=e.columnIds.filter((e=>!i.selectById(e))),n=e.seqColumnIds.filter((e=>!i.selectById(e)));e.columnIds=e.columnIds.filter((e=>!t.includes(e))),e.seqColumnIds=e.seqColumnIds.filter((e=>!n.includes(e)))})),o.selectAll().forEach((e=>{const t=e.indexColumnIds.filter((e=>!l.selectById(e))),n=e.seqIndexColumnIds.filter((e=>!l.selectById(e)));e.indexColumnIds=e.indexColumnIds.filter((e=>!t.includes(e))),e.seqIndexColumnIds=e.seqIndexColumnIds.filter((e=>!n.includes(e)))}))}},hg={changeHasHistoryAction:zy,selectAllAction:Jy,unselectAllAction:jy,selectAction:Fy,changeViewportAction:Oy,clearAction:$y,loadJsonAction:Ey,initialClearAction:Uy,initialLoadJsonAction:Py,focusTableAction:Ay,focusColumnAction:By,focusTableEndAction:Qy,focusMoveTableAction:Dy,editTableAction:_y,editTableEndAction:qy,selectAllColumnAction:eg,drawStartRelationshipAction:tg,drawStartAddRelationshipAction:ng,drawEndRelationshipAction:ig,drawRelationshipAction:og,hoverColumnMapAction:lg,hoverRelationshipMapAction:rg,changeOpenMapAction:ag,dragstartColumnAction:sg,dragendColumnAction:cg,sharedMouseTrackerAction:ug,validationIdsAction:dg},mg={[xb]:(e,t,n)=>{e.push($y(),Ey({value:Ra(n)}))},[Zb]:(e,t,n)=>{e.push(Ey({value:Ra(n)}))}},bg="index.add",fg="index.remove",yg="index.changeName",gg="index.changeUnique";typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof e<"u"||typeof self<"u"&&self;function vg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Zg=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===xg}(e)}(e)};var xg="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function Xg(e,t){return!1!==t.clone&&t.isMergeableObject(e)?Vg(function(e){return Array.isArray(e)?[]:{}}(e),e,t):e}function Gg(e,t,n){return e.concat(t).map((function(e){return Xg(e,n)}))}function Ig(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return Object.propertyIsEnumerable.call(e,t)})):[]}(e))}function Wg(e,t){try{return t in e}catch{return!1}}function kg(e,t,n){var i={};return n.isMergeableObject(e)&&Ig(e).forEach((function(t){i[t]=Xg(e[t],n)})),Ig(t).forEach((function(o){(function(e,t){return Wg(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,o)||(Wg(e,o)&&n.isMergeableObject(t[o])?i[o]=function(e,t){if(!t.customMerge)return Vg;var n=t.customMerge(e);return"function"==typeof n?n:Vg}(o,n)(e[o],t[o],n):i[o]=Xg(t[o],n))})),i}function Vg(e,t,n){(n=n||{}).arrayMerge=n.arrayMerge||Gg,n.isMergeableObject=n.isMergeableObject||Zg,n.cloneUnlessOtherwiseSpecified=Xg;var i=Array.isArray(t);return i===Array.isArray(e)?i?n.arrayMerge(e,t,n):kg(e,t,n):Xg(t,n)}Vg.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return Vg(e,n,t)}),{})};const Cg=vg(Vg),Sg=e=>Cg({id:nr(),name:"",tableId:"",indexColumnIds:[],seqIndexColumnIds:[],unique:!1,meta:yy()},e??{}),Rg=Oh(bg),Lg=Oh(fg),Yg=Oh(yg),Tg=Oh(gg),wg={[bg]:({doc:e,collections:t,lww:n},{payload:{id:i,tableId:o},timestamp:l})=>{Dr(t).collection("indexEntities").addOne(Sg({id:i,tableId:o})).addOperator(n,l,i,(()=>{jl(e.indexIds)(i)||e.indexIds.push(i)}))},[fg]:({doc:e,collections:t,lww:n},{payload:{id:i},timestamp:o})=>{Dr(t).collection("indexEntities").removeOperator(n,o,i,(()=>{const t=e.indexIds.indexOf(i);-1!==t&&e.indexIds.splice(t,1)}))},[yg]:({collections:e,lww:t},{payload:{id:n,tableId:i,value:o},timestamp:l})=>{const r=Dr(e).collection("indexEntities");r.getOrCreate(n,(e=>Sg({id:e,tableId:i}))),r.replaceOperator(t,l,n,"name",(()=>{r.updateOne(n,(e=>{e.name=o}))}))},[gg]:({collections:e,lww:t},{payload:{id:n,tableId:i,value:o},timestamp:l})=>{const r=Dr(e).collection("indexEntities");r.getOrCreate(n,(e=>Sg({id:e,tableId:i}))),r.replaceOperator(t,l,n,"unique",(()=>{r.updateOne(n,(e=>{e.unique=o}))}))}},Ng={addIndexAction:Rg,removeIndexAction:Lg,changeIndexNameAction:Yg,changeIndexUniqueAction:Tg},Kg={[bg]:(e,{payload:{id:t}})=>{e.push(Lg({id:t}))},[fg]:(e,{payload:{id:t}},{collections:n})=>{const i=Dr(n).collection("indexEntities").selectById(t);i&&e.push(Rg({id:t,tableId:i.tableId}))},[yg]:(e,{payload:{id:t,tableId:n}},{collections:i})=>{const o=Dr(i).collection("indexEntities").selectById(t);o&&e.push(Yg({id:t,tableId:n,value:o.name}))},[gg]:(e,{payload:{id:t,tableId:n,value:i}},{collections:o})=>{Dr(o).collection("indexEntities").selectById(t)&&e.push(Tg({id:t,tableId:n,value:!i}))}},Hg="indexColumn.add",Mg="indexColumn.remove",zg="indexColumn.move",Jg="indexColumn.changeOrderType",jg=e=>Cg({id:nr(),indexId:"",columnId:"",orderType:sf.ASC,meta:yy()},e??{});function Fg(e,t,n){if(jl(t)(n)){const i=t.reduce(((e,t,n)=>(e[t]=n,e)),{});e.push(n),e.sort(((e,t)=>{const n=i[e],o=i[t];return void 0===n?1:void 0===o?-1:n-o}))}else e.push(n),t.push(n)}const Og=Oh(Hg),Eg=Oh(Mg),Ug=Oh(zg),Pg=Oh(Jg),Ag={[Hg]:({collections:e,lww:t},{payload:{id:n,indexId:i,tableId:o,columnId:l},timestamp:r})=>{const a=Dr(e).collection("indexEntities"),s=a.getOrCreate(i,(e=>Sg({id:e,tableId:o})));Dr(e).collection("indexColumnEntities").addOne(jg({id:n,indexId:i,columnId:l})).addOperator(t,r,n,(()=>{jl(s.indexColumnIds)(n)||a.updateOne(i,(e=>{Fg(e.indexColumnIds,e.seqIndexColumnIds,n)}))}))},[Mg]:({collections:e,lww:t},{payload:{id:n,indexId:i,tableId:o},timestamp:l})=>{const r=Dr(e).collection("indexEntities"),a=r.getOrCreate(i,(e=>Sg({id:e,tableId:o})));Dr(e).collection("indexColumnEntities").removeOperator(t,l,n,(()=>{const e=a.indexColumnIds.indexOf(n);-1!==e&&r.updateOne(i,(t=>{t.indexColumnIds.splice(e,1)}))}))},[zg]:({collections:e},{payload:{id:t,indexId:n,tableId:i,targetId:o}})=>{if(t===o)return;const l=Dr(e).collection("indexEntities"),r=l.getOrCreate(n,(e=>Sg({id:e,tableId:i}))),a=r.indexColumnIds.indexOf(t);if(-1===a)return;const s=r.indexColumnIds.indexOf(o);-1!==s&&l.updateOne(n,(e=>{e.indexColumnIds.splice(a,1),e.indexColumnIds.splice(s,0,t);const n=e.seqIndexColumnIds.indexOf(t),i=e.seqIndexColumnIds.indexOf(o);-1!==n&&-1!==i&&(e.seqIndexColumnIds.splice(n,1),e.seqIndexColumnIds.splice(i,0,t))}))},[Jg]:({collections:e,lww:t},{payload:{id:n,indexId:i,columnId:o,value:l},timestamp:r})=>{const a=Dr(e).collection("indexColumnEntities");a.getOrCreate(n,(e=>jg({id:e,indexId:i,columnId:o}))),a.replaceOperator(t,r,n,"orderType",(()=>{a.updateOne(n,(e=>{e.orderType=l}))}))}},Bg={addIndexColumnAction:Og,removeIndexColumnAction:Eg,moveIndexColumnAction:Ug,changeIndexColumnOrderTypeAction:Pg},Qg={[Hg]:(e,{payload:{id:t,indexId:n,tableId:i}})=>{e.push(Eg({id:t,indexId:n,tableId:i}))},[Mg]:(e,{payload:{id:t,indexId:n,tableId:i}},{collections:o})=>{const l=Dr(o).collection("indexColumnEntities").selectById(t);l&&e.push(Og({id:t,indexId:n,tableId:i,columnId:l.columnId}))},[zg]:(e,{payload:{id:t,indexId:n,tableId:i,targetId:o}},{collections:l})=>{const r=Dr(l).collection("indexEntities").selectById(n);if(!r)return;const a=r.indexColumnIds.indexOf(t);if(-1===a)return;const s=r.indexColumnIds.indexOf(o);if(-1===s)return;const c=a<s?a+1:a-1,u=r.indexColumnIds[c];e.push(Ug({indexId:n,tableId:i,id:t,targetId:u}))},[Jg]:(e,{payload:{id:t,indexId:n,columnId:i}},{collections:o})=>{const l=Dr(o).collection("indexColumnEntities").selectById(t);l&&e.push(Pg({id:t,indexId:n,columnId:i,value:l.orderType}))}},Dg="memo.add",_g="memo.move",qg="memo.moveTo",ev="memo.remove",tv="memo.changeValue",nv="memo.changeColor",iv="memo.resize",ov="memo.changeZIndex",lv=e=>Cg({id:nr(),value:"",ui:{x:200,y:100,zIndex:2,width:116,height:100,color:""},meta:yy()},e??{}),rv=Oh(Dg),av=Oh(_g),sv=Oh(qg),cv=Oh(ev),uv=Oh(tv),dv=Oh(nv),pv=Oh(iv),hv=Oh(ov),mv={[Dg]:({doc:e,collections:t,lww:n},{payload:{id:i,ui:o},timestamp:l})=>{Dr(t).collection("memoEntities").addOne(lv({id:i,ui:o})).addOperator(n,l,i,(()=>{jl(e.memoIds)(i)||e.memoIds.push(i)}))},[_g]:({collections:e},{payload:{ids:t,movementX:n,movementY:i}})=>{const o=Dr(e).collection("memoEntities");for(const e of t)o.getOrCreate(e,(e=>lv({id:e})));o.updateMany(t,(e=>{e.ui.x=Hl(e.ui.x+n,4),e.ui.y=Hl(e.ui.y+i,4)}))},[qg]:({collections:e},{payload:{id:t,x:n,y:i}})=>{const o=Dr(e).collection("memoEntities");o.getOrCreate(t,(e=>lv({id:e}))),o.updateOne(t,(e=>{e.ui.x=n,e.ui.y=i}))},[ev]:({doc:e,collections:t,lww:n},{payload:{id:i},timestamp:o})=>{Dr(t).collection("memoEntities").removeOperator(n,o,i,(()=>{const t=e.memoIds.indexOf(i);-1!==t&&e.memoIds.splice(t,1)}))},[tv]:({collections:e,lww:t},{payload:{id:n,value:i},timestamp:o})=>{const l=Dr(e).collection("memoEntities");l.getOrCreate(n,(e=>lv({id:e}))),l.replaceOperator(t,o,n,"value",(()=>{l.updateOne(n,(e=>{e.value=i}))}))},[nv]:({collections:e,lww:t},{payload:{id:n,color:i},timestamp:o})=>{const l=Dr(e).collection("memoEntities");l.getOrCreate(n,(e=>lv({id:e}))),l.replaceOperator(t,o,n,"ui.color",(()=>{l.updateOne(n,(e=>{e.ui.color=i}))}))},[iv]:({collections:e},{payload:{id:t,x:n,y:i,width:o,height:l}})=>{const r=Dr(e).collection("memoEntities");r.getOrCreate(t,(e=>lv({id:e}))),r.updateOne(t,(e=>{e.ui.x=n,e.ui.y=i,e.ui.width=o,e.ui.height=l}))},[ov]:({collections:e},{payload:{id:t,zIndex:n}})=>{const i=Dr(e).collection("memoEntities");i.getOrCreate(t,(e=>lv({id:e}))),i.updateOne(t,(e=>{e.ui.zIndex=n}))}},bv={addMemoAction:rv,moveMemoAction:av,moveToMemoAction:sv,removeMemoAction:cv,changeMemoValueAction:uv,changeMemoColorAction:dv,resizeMemoAction:pv,changeZIndexAction:hv},fv={[Dg]:(e,{payload:{id:t}})=>{e.push(cv({id:t}))},[ev]:(e,{payload:{id:t}},{collections:n})=>{const i=Dr(n).collection("memoEntities").selectById(t);i&&e.push(rv({id:i.id,ui:Tl(i.ui,["x","y","zIndex"])}))},[tv]:(e,{payload:{id:t}},{collections:n})=>{const i=Dr(n).collection("memoEntities").selectById(t);i&&e.push(uv({id:t,value:i.value}))},[qg]:(e,{payload:{id:t}},{collections:n})=>{const i=Dr(n).collection("memoEntities").selectById(t);i&&e.push(sv({id:t,x:i.ui.x,y:i.ui.y}))}},yv={[_g]:(e,t,n)=>{const i=n.filter((e=>e.type===av.type));if(!i.length)return;const o=Gl(i,(e=>e.payload.ids.join(",")));for(const[,n]of Object.entries(o)){const{payload:{ids:i}}=xl(n),{x:o,y:l}=n.reduce(((e,{payload:{movementX:t,movementY:n}})=>(e.x+=t,e.y+=n,e)),{x:0,y:0});Math.abs(o)+Math.abs(l)<20||(e.push(av({ids:i,movementX:-1*o,movementY:-1*l})),t.push(av({ids:i,movementX:o,movementY:l})))}},[nv]:(e,t,n)=>{const i=n.filter((({type:e})=>e===dv.type));if(!i.length)return;const o=Gl(i,(e=>e.payload.id));for(const[n,i]of Object.entries(o)){const o=xl(i),l=Zl(i);e.push(dv({id:n,color:o.payload.prevColor,prevColor:l.payload.color})),t.push(dv({id:n,color:l.payload.color,prevColor:o.payload.prevColor}))}},[iv]:(e,t,n)=>{const i=n.filter((e=>e.type===pv.type));if(!i.length)return;const o=Gl(i,(e=>e.payload.id));for(const[,n]of Object.entries(o)){if(n.length<2)continue;const i=xl(n),o=Zl(n);e.push(i),t.push(o)}}},gv="relationship.add",vv="relationship.remove",Zv="relationship.changeType",xv=e=>Cg({id:nr(),identification:!1,relationshipType:nf.ZeroN,startRelationshipType:of.dash,start:{tableId:"",columnIds:[],x:0,y:0,direction:lf.bottom},end:{tableId:"",columnIds:[],x:0,y:0,direction:lf.bottom},meta:yy()},e??{}),Xv=Oh(gv),Gv=Oh(vv),Iv=Oh(Zv),Wv={[gv]:({doc:e,collections:t,lww:n},{payload:{id:i,relationshipType:o,start:l,end:r},timestamp:a})=>{Dr(t).collection("relationshipEntities").addOne(xv({id:i,relationshipType:o,start:{tableId:l.tableId,columnIds:l.columnIds},end:{tableId:r.tableId,columnIds:r.columnIds}})).addOperator(n,a,i,(()=>{jl(e.relationshipIds)(i)||e.relationshipIds.push(i)}))},[vv]:({doc:e,collections:t,lww:n},{payload:{id:i},timestamp:o})=>{Dr(t).collection("relationshipEntities").removeOperator(n,o,i,(()=>{const t=e.relationshipIds.indexOf(i);-1!==t&&e.relationshipIds.splice(t,1)}))},[Zv]:({collections:e,lww:t},{payload:{id:n,value:i},timestamp:o})=>{const l=Dr(e).collection("relationshipEntities");l.replaceOperator(t,o,n,"relationshipType",(()=>{l.updateOne(n,(e=>{e.relationshipType=i}))}))}},kv={addRelationshipAction:Xv,removeRelationshipAction:Gv,changeRelationshipTypeAction:Iv},Vv={[gv]:(e,{payload:{id:t}})=>{e.push(Gv({id:t}))},[vv]:(e,{payload:{id:t}},{collections:n})=>{const i=Dr(n).collection("relationshipEntities").selectById(t);i&&e.push(Xv({id:i.id,relationshipType:i.relationshipType,start:Tl(i.start,["tableId","columnIds"]),end:Tl(i.end,["tableId","columnIds"])}))},[Zv]:(e,{payload:{id:t}},{collections:n})=>{const i=Dr(n).collection("relationshipEntities").selectById(t);i&&e.push(Iv({id:t,value:i.relationshipType}))}},Cv="settings.changeDatabaseName",Sv="settings.resize",Rv="settings.changeZoomLevel",Lv="settings.streamZoomLevel",Yv="settings.scrollTo",Tv="settings.streamScrollTo",wv="settings.changeShow",Nv="settings.changeDatabase",Kv="settings.changeCanvasType",Hv="settings.changeLanguage",Mv="settings.changeTableNameCase",zv="settings.changeColumnNameCase",Jv="settings.changeBracketType",jv="settings.changeRelationshipDataTypeSync",Fv="settings.changeRelationshipOptimization",Ov="settings.changeColumnOrder",$v="settings.changeMaxWidthComment",Ev="settings.changeIgnoreSaveSettings",Uv=Oh(Cv),Pv=Oh(Sv),Av=Oh(Rv),Bv=Oh(Lv),Qv=Oh(Yv),Dv=Oh(Tv),_v=Oh(wv),qv=Oh(Nv),eZ=Oh(Kv),tZ=Oh(Hv),nZ=Oh(Mv),iZ=Oh(zv),oZ=Oh(Jv),lZ=Oh(jv),rZ=Oh(Fv),aZ=Oh(Ov),sZ=Oh($v),cZ=Oh(Ev),uZ={[Cv]:({settings:e,lww:t},{payload:{value:n},timestamp:i})=>{Br(t,i,"settings.databaseName","settings","databaseName",(()=>{e.databaseName=n}))},[Sv]:({settings:e},{payload:{width:t,height:n}})=>{e.width=Pf(t),e.height=Pf(n)},[Rv]:({settings:e},{payload:{value:t},tags:n})=>{!_l(n)&&Zf(n,ff.following)||(e.zoomLevel=Af(t))},[Lv]:({settings:e},{payload:{value:t},tags:n})=>{!_l(n)&&Zf(n,ff.following)||(e.zoomLevel=Af(e.zoomLevel+t))},[Yv]:({settings:e,editor:{viewport:t}},{payload:{scrollTop:n,scrollLeft:i},tags:o})=>{if(!_l(o)&&Zf(o,ff.following))return;const l=ir(t.height-e.height,0),r=ir(t.width-e.width,0);e.scrollTop=Hl(l(n),4),e.scrollLeft=Hl(r(i),4)},[Tv]:({settings:e,editor:{viewport:t}},{payload:{movementX:n,movementY:i},tags:o})=>{if(!_l(o)&&Zf(o,ff.following))return;const l=ir(t.height-e.height,0),r=ir(t.width-e.width,0);e.scrollTop=Hl(l(e.scrollTop+i),4),e.scrollLeft=Hl(r(e.scrollLeft+n),4)},[wv]:({settings:e},{payload:{show:t,value:n}})=>{e.show=n?e.show|t:e.show&~t},[Nv]:({settings:e},{payload:{value:t}})=>{Df(t)&&(e.database=t)},[Kv]:({settings:e},{payload:{value:t},tags:n})=>{!_l(n)&&Zf(n,ff.following)||(e.canvasType=t)},[Hv]:({settings:e},{payload:{value:t}})=>{ey(t)&&(e.language=t)},[Mv]:({settings:e},{payload:{value:t}})=>{_f(t)&&(e.tableNameCase=t)},[zv]:({settings:e},{payload:{value:t}})=>{_f(t)&&(e.columnNameCase=t)},[Jv]:({settings:e},{payload:{value:t}})=>{qf(t)&&(e.bracketType=t)},[jv]:({settings:e},{payload:{value:t}})=>{e.relationshipDataTypeSync=t},[Fv]:({settings:e},{payload:{value:t}})=>{e.relationshipOptimization=t},[Ov]:({settings:e},{payload:{value:t,target:n}})=>{if(t===n||!ty(t)||!ty(n))return;const i=e.columnOrder.indexOf(t),o=e.columnOrder.indexOf(n);-1===i||-1===o||(e.columnOrder.splice(i,1),e.columnOrder.splice(o,0,t))},[$v]:({settings:e},{payload:{value:t}})=>{e.maxWidthComment=-1===t?t:Uf(t)},[Ev]:({settings:e},{payload:{saveSettingType:t,value:n}})=>{e.ignoreSaveSettings=n?e.ignoreSaveSettings|t:e.ignoreSaveSettings&~t}},dZ={changeDatabaseNameAction:Uv,resizeAction:Pv,changeZoomLevelAction:Av,streamZoomLevelAction:Bv,scrollToAction:Qv,streamScrollToAction:Dv,changeShowAction:_v,changeDatabaseAction:qv,changeCanvasTypeAction:eZ,changeLanguageAction:tZ,changeTableNameCaseAction:nZ,changeColumnNameCaseAction:iZ,changeBracketTypeAction:oZ,changeRelationshipDataTypeSyncAction:lZ,changeRelationshipOptimizationAction:rZ,changeColumnOrderAction:aZ,changeMaxWidthCommentAction:sZ,changeIgnoreSaveSettingsAction:cZ},pZ={[Sv]:(e,t,{settings:n})=>{e.push(Pv({width:n.width,height:n.height}))},[Yv]:(e,t,{settings:n})=>{e.push(Qv({scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}))},[wv]:(e,{payload:{show:t,value:n}})=>{e.push(_v({show:t,value:!n}))},[Rv]:(e,t,{settings:n})=>{e.push(Av({value:n.zoomLevel}))}},hZ={[Tv]:(e,t,n)=>{const i=n.filter((e=>e.type===Dv.type));if(!i.length)return;const{x:o,y:l}=i.reduce(((e,{payload:{movementX:t,movementY:n}})=>(e.x+=t,e.y+=n,e)),{x:0,y:0});Math.abs(o)+Math.abs(l)<20||(e.push(Dv({movementX:-1*o,movementY:-1*l})),t.push(Dv({movementX:o,movementY:l})))},[Lv]:(e,t,n)=>{const i=n.filter((e=>e.type===Bv.type));if(!i.length)return;const o=i.reduce(((e,{payload:{value:t}})=>e+t),0);e.push(Bv({value:-1*o})),t.push(Bv({value:o}))}},mZ="table.add",bZ="table.move",fZ="table.moveTo",yZ="table.remove",gZ="table.changeName",vZ="table.changeComment",ZZ="table.changeColor",xZ="table.changeZIndex",XZ="table.sort";function GZ(e,{settings:{show:t,maxWidthComment:n},collections:i}){let o=e.ui.widthName+Vf;if(Zf(t,Eb.tableComment)){o+=(-1===n?e.ui.widthComment:n<e.ui.widthComment?n:e.ui.widthComment)+Vf}const l=function(e){return IZ.reduce(((t,{key:n,width:i})=>Zf(e,n)?t+i+Vf:t),Yf+Vf+Tf+Vf+Lf)}(t);o<l&&(o=l);const r=function(e,t,n){const i={width:0,name:0,comment:0,dataType:0,default:0,notNull:0,autoIncrement:0,unique:0};for(const o of e){if(i.name<o.ui.widthName&&(i.name=o.ui.widthName),Zf(t,Eb.columnComment)&&i.comment<o.ui.widthComment){const e=-1===n?o.ui.widthComment:n<o.ui.widthComment?n:o.ui.widthComment;i.comment=e}Zf(t,Eb.columnDataType)&&i.dataType<o.ui.widthDataType&&(i.dataType=o.ui.widthDataType),Zf(t,Eb.columnDefault)&&i.default<o.ui.widthDefault&&(i.default=o.ui.widthDefault)}return Zf(t,Eb.columnNotNull)&&(i.notNull=wf),Zf(t,Eb.columnAutoIncrement)&&(i.autoIncrement=Kf),Zf(t,Eb.columnUnique)&&(i.unique=Nf),i.width=Object.entries(i).reduce(((e,[t,n])=>"width"===t||0===n?e:e+n+Vf),Yf+Vf+Lf),i}(Dr(i).collection("tableColumnEntities").selectByIds(e.columnIds),t,n);return o<r.width&&(o=r.width),{...r,width:Cf+Sf+o+Sf+Cf}}const IZ=[{key:Eb.columnComment,width:Tf},{key:Eb.columnDataType,width:Tf},{key:Eb.columnDefault,width:Tf},{key:Eb.columnNotNull,width:wf},{key:Eb.columnAutoIncrement,width:Kf},{key:Eb.columnUnique,width:Nf}];function WZ(e){return Cf+Sf+Rf+e.columnIds.length*Hf+Sf+Cf}function kZ({doc:{tableIds:e},collections:t},{toWidth:n}){const i=Dr(t).collection("tableEntities").selectByIds(e),o=Dr(t).collection("tableColumnEntities");for(const e of i){e.ui.widthName=oy(n(e.name)),e.ui.widthComment=oy(n(e.comment));const t=o.selectByIds(e.columnIds);for(const e of t)e.ui.widthName=oy(n(e.name)),e.ui.widthDataType=oy(n(e.dataType)),e.ui.widthDefault=oy(n(e.default)),e.ui.widthComment=oy(n(e.comment))}}const VZ=e=>Cg({id:nr(),name:"",comment:"",columnIds:[],seqColumnIds:[],ui:{x:200,y:100,zIndex:2,widthName:Tf,widthComment:Tf,color:""},meta:yy()},e??{}),CZ=Oh(mZ),SZ=Oh(bZ),RZ=Oh(fZ),LZ=Oh(yZ),YZ=Oh(gZ),TZ=Oh(vZ),wZ=Oh(ZZ),NZ=Oh(xZ),KZ=Oh(XZ),HZ={[mZ]:({doc:e,collections:t,lww:n},{payload:{id:i,ui:o},timestamp:l})=>{Dr(t).collection("tableEntities").addOne(VZ({id:i,ui:o})).addOperator(n,l,i,(()=>{jl(e.tableIds)(i)||e.tableIds.push(i)}))},[bZ]:({collections:e},{payload:{ids:t,movementX:n,movementY:i}})=>{const o=Dr(e).collection("tableEntities");for(const e of t)o.getOrCreate(e,(e=>VZ({id:e})));o.updateMany(t,(e=>{e.ui.x=Hl(e.ui.x+n,4),e.ui.y=Hl(e.ui.y+i,4)}))},[fZ]:({collections:e},{payload:{id:t,x:n,y:i}})=>{const o=Dr(e).collection("tableEntities");o.getOrCreate(t,(e=>VZ({id:e}))),o.updateOne(t,(e=>{e.ui.x=n,e.ui.y=i}))},[yZ]:({doc:e,collections:t,lww:n},{payload:{id:i},timestamp:o})=>{Dr(t).collection("tableEntities").removeOperator(n,o,i,(()=>{const t=e.tableIds.indexOf(i);-1!==t&&e.tableIds.splice(t,1)}))},[gZ]:({collections:e,lww:t},{payload:{id:n,value:i},timestamp:o},{toWidth:l})=>{const r=Dr(e).collection("tableEntities");r.getOrCreate(n,(e=>VZ({id:e}))),r.replaceOperator(t,o,n,"name",(()=>{r.updateOne(n,(e=>{e.name=i,e.ui.widthName=oy(l(i))}))}))},[vZ]:({collections:e,lww:t},{payload:{id:n,value:i},timestamp:o},{toWidth:l})=>{const r=Dr(e).collection("tableEntities");r.getOrCreate(n,(e=>VZ({id:e}))),r.replaceOperator(t,o,n,"comment",(()=>{r.updateOne(n,(e=>{e.comment=i,e.ui.widthComment=oy(l(i))}))}))},[ZZ]:({collections:e,lww:t},{payload:{id:n,color:i},timestamp:o})=>{const l=Dr(e).collection("tableEntities");l.getOrCreate(n,(e=>VZ({id:e}))),l.replaceOperator(t,o,n,"ui.color",(()=>{l.updateOne(n,(e=>{e.ui.color=i}))}))},[xZ]:({collections:e},{payload:{id:t,zIndex:n}})=>{const i=Dr(e).collection("tableEntities");i.getOrCreate(t,(e=>VZ({id:e}))),i.updateOne(t,(e=>{e.ui.zIndex=n}))},[XZ]:e=>{const{doc:t,settings:n,collections:i}=e,o=n.width,l=Dr(i).collection("tableEntities").selectByIds(t.tableIds);l.sort(((e,t)=>e.columnIds.length-t.columnIds.length));let r=50,a=50,s=50;l.forEach((t=>{const n=GZ(t,e).width+80,i=WZ(t)+80;r+n>o&&(a+=s,s=0,r=50),s<i&&(s=i),t.ui.y=a,t.ui.x=r,r+=n}))}},MZ={addTableAction:CZ,moveTableAction:SZ,moveToTableAction:RZ,removeTableAction:LZ,changeTableNameAction:YZ,changeTableCommentAction:TZ,changeTableColorAction:wZ,changeZIndexAction:NZ,sortTableAction:KZ},zZ={[mZ]:(e,{payload:{id:t}})=>{e.push(LZ({id:t}))},[yZ]:(e,{payload:{id:t}},{collections:n})=>{const i=Dr(n).collection("tableEntities").selectById(t);i&&e.push(CZ({id:i.id,ui:Tl(i.ui,["x","y","zIndex"])}))},[gZ]:(e,{payload:{id:t}},{collections:n})=>{const i=Dr(n).collection("tableEntities").selectById(t);i&&e.push(YZ({id:t,value:i.name}))},[vZ]:(e,{payload:{id:t}},{collections:n})=>{const i=Dr(n).collection("tableEntities").selectById(t);i&&e.push(TZ({id:t,value:i.comment}))},[fZ]:(e,{payload:{id:t}},{collections:n})=>{const i=Dr(n).collection("tableEntities").selectById(t);i&&e.push(RZ({id:t,x:i.ui.x,y:i.ui.y}))},[XZ]:()=>{}},JZ={[bZ]:(e,t,n)=>{const i=n.filter((e=>e.type===SZ.type));if(!i.length)return;const o=Gl(i,(e=>e.payload.ids.join(",")));for(const[,n]of Object.entries(o)){const{payload:{ids:i}}=xl(n),{x:o,y:l}=n.reduce(((e,{payload:{movementX:t,movementY:n}})=>(e.x+=t,e.y+=n,e)),{x:0,y:0});Math.abs(o)+Math.abs(l)<20||(e.push(SZ({ids:i,movementX:-1*o,movementY:-1*l})),t.push(SZ({ids:i,movementX:o,movementY:l})))}},[ZZ]:(e,t,n)=>{const i=n.filter((({type:e})=>e===wZ.type));if(!i.length)return;const o=Gl(i,(e=>e.payload.id));for(const[n,i]of Object.entries(o)){const o=xl(i),l=Zl(i);e.push(wZ({id:n,color:o.payload.prevColor,prevColor:l.payload.color})),t.push(wZ({id:n,color:l.payload.color,prevColor:o.payload.prevColor}))}}},jZ="column.add",FZ="column.remove",OZ="column.changeName",$Z="column.changeComment",EZ="column.changeDataType",UZ="column.changeDefault",PZ="column.changeAutoIncrement",AZ="column.changePrimaryKey",BZ="column.changeUnique",QZ="column.changeNotNull",DZ="column.move",_Z=e=>Cg({id:nr(),tableId:"",name:"",comment:"",dataType:"",default:"",options:0,ui:{keys:0,widthName:Tf,widthComment:Tf,widthDataType:Tf,widthDefault:Tf},meta:yy()},e??{}),qZ=Oh(jZ),ex=Oh(FZ),tx=Oh(OZ),nx=Oh($Z),ix=Oh(EZ),ox=Oh(UZ),lx=Oh(PZ),rx=Oh(AZ),ax=Oh(BZ),sx=Oh(QZ),cx=Oh(DZ),ux={[jZ]:({collections:e,lww:t},{payload:{id:n,tableId:i},timestamp:o})=>{const l=Dr(e).collection("tableEntities"),r=l.getOrCreate(i,(e=>VZ({id:e})));Dr(e).collection("tableColumnEntities").addOne(_Z({id:n,tableId:i})).addOperator(t,o,n,(()=>{jl(r.columnIds)(n)||l.updateOne(i,(e=>{Fg(e.columnIds,e.seqColumnIds,n)}))}))},[FZ]:({collections:e,lww:t},{payload:{id:n,tableId:i},timestamp:o})=>{const l=Dr(e).collection("tableEntities"),r=l.getOrCreate(i,(e=>VZ({id:e})));Dr(e).collection("tableColumnEntities").removeOperator(t,o,n,(()=>{const e=r.columnIds.indexOf(n);-1!==e&&l.updateOne(i,(t=>{t.columnIds.splice(e,1)}))}))},[OZ]:({collections:e,lww:t},{payload:{id:n,value:i},timestamp:o},{toWidth:l})=>{const r=Dr(e).collection("tableColumnEntities");r.getOrCreate(n,(e=>_Z({id:e}))),r.replaceOperator(t,o,n,"name",(()=>{r.updateOne(n,(e=>{e.name=i,e.ui.widthName=oy(l(i))}))}))},[$Z]:({collections:e,lww:t},{payload:{id:n,value:i},timestamp:o},{toWidth:l})=>{const r=Dr(e).collection("tableColumnEntities");r.getOrCreate(n,(e=>_Z({id:e}))),r.replaceOperator(t,o,n,"comment",(()=>{r.updateOne(n,(e=>{e.comment=i,e.ui.widthComment=oy(l(i))}))}))},[EZ]:({collections:e,lww:t},{payload:{id:n,value:i},timestamp:o},{toWidth:l})=>{const r=Dr(e).collection("tableColumnEntities");r.getOrCreate(n,(e=>_Z({id:e}))),r.replaceOperator(t,o,n,"dataType",(()=>{r.updateOne(n,(e=>{e.dataType=i,e.ui.widthDataType=oy(l(i))}))}))},[UZ]:({collections:e,lww:t},{payload:{id:n,value:i},timestamp:o},{toWidth:l})=>{const r=Dr(e).collection("tableColumnEntities");r.getOrCreate(n,(e=>_Z({id:e}))),r.replaceOperator(t,o,n,"default",(()=>{r.updateOne(n,(e=>{e.default=i,e.ui.widthDefault=oy(l(i))}))}))},[PZ]:({collections:e,lww:t},{payload:{id:n,value:i},timestamp:o})=>{const l=Dr(e).collection("tableColumnEntities");l.getOrCreate(n,(e=>_Z({id:e}))),l.replaceOperator(t,o,n,"options(autoIncrement)",(()=>{l.updateOne(n,(e=>{e.options=i?e.options|rf.autoIncrement:e.options&~rf.autoIncrement}))}))},[AZ]:({collections:e,lww:t},{payload:{id:n,value:i},timestamp:o})=>{const l=Dr(e).collection("tableColumnEntities");l.getOrCreate(n,(e=>_Z({id:e}))),l.replaceOperator(t,o,n,"options(primaryKey)",(()=>{l.updateOne(n,(e=>{e.options=i?e.options|rf.primaryKey:e.options&~rf.primaryKey,e.ui.keys=i?e.ui.keys|af.primaryKey:e.ui.keys&~af.primaryKey}))}))},[BZ]:({collections:e,lww:t},{payload:{id:n,value:i},timestamp:o})=>{const l=Dr(e).collection("tableColumnEntities");l.getOrCreate(n,(e=>_Z({id:e}))),l.replaceOperator(t,o,n,"options(unique)",(()=>{l.updateOne(n,(e=>{e.options=i?e.options|rf.unique:e.options&~rf.unique}))}))},[QZ]:({collections:e,lww:t},{payload:{id:n,value:i},timestamp:o})=>{const l=Dr(e).collection("tableColumnEntities");l.getOrCreate(n,(e=>_Z({id:e}))),l.replaceOperator(t,o,n,"options(notNull)",(()=>{l.updateOne(n,(e=>{e.options=i?e.options|rf.notNull:e.options&~rf.notNull}))}))},[DZ]:({collections:e},{payload:{id:t,tableId:n,targetId:i}})=>{if(t===i)return;const o=Dr(e).collection("tableEntities"),l=o.getOrCreate(n,(e=>VZ({id:e}))),r=l.columnIds.indexOf(t);if(-1===r)return;const a=l.columnIds.indexOf(i);-1!==a&&o.updateOne(n,(e=>{e.columnIds.splice(r,1),e.columnIds.splice(a,0,t);const n=e.seqColumnIds.indexOf(t),o=e.seqColumnIds.indexOf(i);-1!==n&&-1!==o&&(e.seqColumnIds.splice(n,1),e.seqColumnIds.splice(o,0,t))}))}},dx={addColumnAction:qZ,removeColumnAction:ex,changeColumnNameAction:tx,changeColumnCommentAction:nx,changeColumnDataTypeAction:ix,changeColumnDefaultAction:ox,changeColumnAutoIncrementAction:lx,changeColumnPrimaryKeyAction:rx,changeColumnUniqueAction:ax,changeColumnNotNullAction:sx,moveColumnAction:cx},px={[jZ]:(e,{payload:{id:t,tableId:n}})=>{e.push(ex({id:t,tableId:n}))},[FZ]:(e,{payload:{id:t,tableId:n}})=>{e.push(qZ({id:t,tableId:n}))},[OZ]:(e,{payload:{id:t,tableId:n}},{collections:i})=>{const o=Dr(i).collection("tableColumnEntities").selectById(t);o&&e.push(tx({id:t,tableId:n,value:o.name}))},[EZ]:(e,{payload:{id:t,tableId:n}},{collections:i})=>{const o=Dr(i).collection("tableColumnEntities").selectById(t);o&&e.push(ix({id:t,tableId:n,value:o.dataType}))},[UZ]:(e,{payload:{id:t,tableId:n}},{collections:i})=>{const o=Dr(i).collection("tableColumnEntities").selectById(t);o&&e.push(ox({id:t,tableId:n,value:o.default}))},[$Z]:(e,{payload:{id:t,tableId:n}},{collections:i})=>{const o=Dr(i).collection("tableColumnEntities").selectById(t);o&&e.push(nx({id:t,tableId:n,value:o.comment}))},[PZ]:(e,{payload:{id:t,tableId:n,value:i}},{collections:o})=>{Dr(o).collection("tableColumnEntities").selectById(t)&&e.push(lx({id:t,tableId:n,value:!i}))},[QZ]:(e,{payload:{id:t,tableId:n,value:i}},{collections:o})=>{Dr(o).collection("tableColumnEntities").selectById(t)&&e.push(sx({id:t,tableId:n,value:!i}))},[AZ]:(e,{payload:{id:t,tableId:n,value:i}},{collections:o})=>{Dr(o).collection("tableColumnEntities").selectById(t)&&e.push(rx({id:t,tableId:n,value:!i}))},[BZ]:(e,{payload:{id:t,tableId:n,value:i}},{collections:o})=>{Dr(o).collection("tableColumnEntities").selectById(t)&&e.push(ax({id:t,tableId:n,value:!i}))},[DZ]:(e,{payload:{id:t,tableId:n,targetId:i}},{collections:o})=>{const l=Dr(o).collection("tableEntities").selectById(n);if(!l)return;const r=l.columnIds.indexOf(t);if(-1===r)return;const a=l.columnIds.indexOf(i);if(-1===a)return;const s=r<a?r+1:r-1,c=l.columnIds[s];e.push(cx({id:t,tableId:n,targetId:c}))}},hx={...zZ,...px,...Vv,...fv,...pZ,...mg,...Kg,...Qg},mx={...JZ,...yv,...hZ};function bx(e,t,n){const i=[],o=[];for(const t of n){const n=hx[t.type];n&&(n(i,t,e.state),o.push(Xo(t)))}for(const e of Object.keys(mx))mx[e](i,o,n);!i.length||!o.length||t.push({undo:e=>{const t=Date.now();e(i.map(fx(t)))},redo:e=>{const t=Date.now();e(o.map(fx(t)))}})}function fx(e){return t=>({...Xo(t),timestamp:e})}const yx=(e,t)=>n=>{Fl(bx,e,t,n)},gx=()=>function*({settings:e,doc:{tableIds:t,memoIds:n},collections:i}){const o=Dr(i).collection("tableEntities").selectByIds(t),l=Dr(i).collection("memoEntities").selectByIds(n),r=fy(e,o,l),a=nr();yield ZG(),yield Fy({[a]:sy}),yield rv({id:a,ui:{...r,zIndex:my(o,l)}})},vx=e=>function*({editor:{selectedMap:t}}){if(e)return void(yield cv({id:e}));const n=Object.entries(t).filter((([,e])=>e===sy));for(const[e]of n)yield cv({id:e})},Zx=(e,t)=>function*({doc:{tableIds:n,memoIds:i},collections:o}){const l=Dr(o).collection("tableEntities").selectByIds(n),r=Dr(o).collection("memoEntities").selectByIds(i);t||(yield ZG()),yield Fy({[e]:sy}),yield hv({id:e,zIndex:my(l,r)})},xx={addMemoAction$:gx,removeMemoAction$:vx,selectMemoAction$:Zx},Xx={columnName:"columnName",columnDataType:"columnDataType",columnNotNull:"columnNotNull",columnUnique:"columnUnique",columnAutoIncrement:"columnAutoIncrement",columnDefault:"columnDefault",columnComment:"columnComment"},Gx=jl(Object.values(Xx));function Ix(e,t){return t.filter((t=>{switch(t){case Ub.columnName:return!0;case Ub.columnDataType:return Zf(e,Eb.columnDataType);case Ub.columnDefault:return Zf(e,Eb.columnDefault);case Ub.columnComment:return Zf(e,Eb.columnComment);case Ub.columnAutoIncrement:return Zf(e,Eb.columnAutoIncrement);case Ub.columnUnique:return Zf(e,Eb.columnUnique);case Ub.columnNotNull:return Zf(e,Eb.columnNotNull);default:return!1}}))}const Wx=()=>function*({settings:e,doc:{tableIds:t,memoIds:n},collections:i}){const o=Dr(i).collection("tableEntities").selectByIds(t),l=Dr(i).collection("memoEntities").selectByIds(n),r=fy(e,o,l),a=nr();yield jy(),yield Fy({[a]:ay}),yield CZ({id:a,ui:{...r,zIndex:my(o,l)}}),yield Ay({tableId:a})},kx=e=>function*({doc:{relationshipIds:t,indexIds:n},editor:{selectedMap:i},collections:o}){const l=Dr(o).collection("relationshipEntities").selectByIds(t),r=Dr(o).collection("indexEntities").selectByIds(n);if(e){const t=l.filter((({start:t,end:n})=>t.tableId===e||n.tableId===e)),n=r.filter((({tableId:t})=>t===e));for(const{id:e}of n)yield Lg({id:e});for(const{id:e}of t)yield Gv({id:e});return void(yield LZ({id:e}))}const a=Object.entries(i).filter((([,e])=>e===ay)).map((([e])=>e)),s=jl(a),c=l.filter((({start:e,end:t})=>s(e.tableId)||s(t.tableId))),u=r.filter((({tableId:e})=>s(e)));for(const{id:e}of u)yield Lg({id:e});for(const{id:e}of c)yield Gv({id:e});for(const e of a)yield LZ({id:e})},Vx=(e,t)=>function*({doc:{tableIds:n,memoIds:i},collections:o,editor:{drawRelationship:l}}){const r=Dr(o).collection("tableEntities"),a=r.selectByIds(n),s=Dr(o).collection("memoEntities").selectByIds(i);if(t||(yield jy()),yield Fy({[e]:ay}),yield NZ({id:e,zIndex:my(a,s)}),yield Ay({tableId:e}),l)if(l.start){const t=r.selectById(l.start.tableId),n=r.selectById(e);if(!t||!n)return;const i=Dr(o).collection("tableColumnEntities").selectByIds(t.columnIds).filter((({options:e})=>Zf(e,rf.primaryKey)));if(!i.length)return;const a=i.map((()=>nr()));for(let e=0;e<i.length;e++){const t=i[e],o={id:a[e],tableId:n.id};yield[qZ(o),sx({...o,value:!0}),tx({...o,value:t.name}),ix({...o,value:t.dataType}),ox({...o,value:t.default}),nx({...o,value:t.comment})]}yield Xv({id:nr(),relationshipType:l.relationshipType,start:{tableId:t.id,columnIds:i.map((({id:e})=>e))},end:{tableId:n.id,columnIds:a}}),yield ig()}else yield GG(e)},Cx=e=>function*({editor:{selectedMap:t,focusTable:n},settings:{show:i,columnOrder:o},collections:l}){const r=n&&!wy(n.focusType),a=Object.entries(t).filter((([,e])=>e===ay)).map((([e])=>e)).filter((e=>!r||e!==(null==n?void 0:n.tableId)));for(const t of a)for(const n of e){const e={id:nr(),tableId:t};yield[qZ(e),tx({...e,value:n.name}),ix({...e,value:n.dataType}),ox({...e,value:n.default}),nx({...e,value:n.comment}),sx({...e,value:Zf(n.options,rf.notNull)}),ax({...e,value:Zf(n.options,rf.unique)}),lx({...e,value:Zf(n.options,rf.autoIncrement)})]}if(!n||!r)return;const s=Dr(l).collection("tableEntities").selectById(n.tableId);if(!s)return;const c=s.columnIds.filter(jl(n.selectColumnIds));if(0===c.length)return;const u=s.columnIds.slice(s.columnIds.indexOf(c[c.length-1])+1),d=[...c,...u],p=Ix(i,o);yield Qy();for(let t=0;t<d.length;t++){const i=d[t],o=e[t];if(!o)break;const l={id:i,tableId:s.id};yield[...p.map((e=>{switch(e){case Ub.columnName:return tx({...l,value:o.name});case Ub.columnDataType:return ix({...l,value:o.dataType});case Ub.columnDefault:return ox({...l,value:o.default});case Ub.columnComment:return nx({...l,value:o.comment});case Ub.columnAutoIncrement:return lx({...l,value:Zf(o.options,rf.autoIncrement)});case Ub.columnUnique:return ax({...l,value:Zf(o.options,rf.unique)});case Ub.columnNotNull:return sx({...l,value:Zf(o.options,rf.notNull)});default:return null}})).filter(Boolean),By({tableId:s.id,columnId:i,focusType:n.focusType,$mod:!0,shiftKey:!1})]}const h=e.slice(d.length);for(const e of h){const t=nr(),i={id:t,tableId:s.id};yield[qZ(i),...p.map((t=>{switch(t){case Ub.columnName:return tx({...i,value:e.name});case Ub.columnDataType:return ix({...i,value:e.dataType});case Ub.columnDefault:return ox({...i,value:e.default});case Ub.columnComment:return nx({...i,value:e.comment});case Ub.columnAutoIncrement:return lx({...i,value:Zf(e.options,rf.autoIncrement)});case Ub.columnUnique:return ax({...i,value:Zf(e.options,rf.unique)});case Ub.columnNotNull:return sx({...i,value:Zf(e.options,rf.notNull)});default:return null}})).filter(Boolean),By({tableId:s.id,columnId:t,focusType:n.focusType,$mod:!0,shiftKey:!1})]}},Sx={addTableAction$:Wx,removeTableAction$:kx,selectTableAction$:Vx,pasteTableAction$:Cx};function Rx(e,t,n,i=[]){const{doc:{relationshipIds:o},collections:l}=t,r=e.pop();return r&&(i.some((({id:e})=>e===r.id))||(i.push(r),Dr(l).collection("relationshipEntities").selectByIds(o).forEach((({start:t,end:i})=>{const o=t.columnIds.indexOf(r.id);if(-1!==o){const t=i.columnIds[o];e.push({id:t,tableId:i.tableId,value:n.value})}else{const o=i.columnIds.indexOf(r.id);if(-1!==o){const i=t.columnIds[o];e.push({id:i,tableId:t.tableId,value:n.value})}}}))),Rx(e,t,n,i)),i}const Lx=jl([cy.columnNotNull,cy.columnUnique,cy.columnAutoIncrement]),Yx=jl([cy.columnName,cy.columnDataType,cy.columnDefault,cy.columnComment]),Tx=e=>function*({editor:{selectedMap:t}}){if(e){const t=nr();return yield qZ({id:t,tableId:e}),void(yield By({tableId:e,columnId:t,focusType:cy.columnName,$mod:!1,shiftKey:!1}))}const n=Object.entries(t).filter((([,e])=>e===ay)).map((([e])=>({tableId:e,id:nr()})));for(const e of n)yield qZ(e);const i=Zl(n);i&&(yield By({tableId:i.tableId,columnId:i.id,focusType:cy.columnName,$mod:!1,shiftKey:!1}))},wx=(e,t)=>function*(n){const{doc:{relationshipIds:i,indexIds:o},editor:{focusTable:l},collections:r}=n;if(null!=l&&l.columnId){const e=function(e,t){const{collections:n,editor:{focusTable:i}}=e;if(null==i||!i.columnId)return null;const o=Dr(n).collection("tableEntities").selectById(i.tableId);if(!o)return null;const l=o.columnIds.indexOf(i.columnId);if(l<=0)return null;let r=null;for(let e=l;e>=0;e--){const n=o.columnIds[e];if(!t.includes(n)){r=n;break}}return r}(n,t);e?yield By({tableId:l.tableId,columnId:e,focusType:l.focusType,$mod:!1,shiftKey:!1}):yield Ay({tableId:l.tableId,focusType:cy.tableName})}const a=jl(t),s=Dr(r).collection("relationshipEntities").selectByIds(i).filter((({start:t,end:n})=>t.tableId===e&&t.columnIds.some(a)||n.tableId===e&&n.columnIds.some(a))),c=Dr(r).collection("indexEntities").selectByIds(o).filter((t=>t.tableId===e&&Dr(r).collection("indexColumnEntities").selectByIds(t.indexColumnIds).map((({columnId:e})=>e)).some(a)));for(const{id:e}of c)yield Lg({id:e});for(const{id:e}of s)yield Gv({id:e});for(const n of t)yield ex({id:n,tableId:e})},Nx=(e,t,n)=>function*({collections:i}){if(!Lx(e))return;const o=Dr(i).collection("tableColumnEntities").selectById(n);if(o)switch(e){case cy.columnNotNull:yield sx({id:n,tableId:t,value:!Zf(o.options,rf.notNull)});break;case cy.columnUnique:yield ax({id:n,tableId:t,value:!Zf(o.options,rf.unique)});break;case cy.columnAutoIncrement:yield lx({id:n,tableId:t,value:!Zf(o.options,rf.autoIncrement)})}},Kx=e=>function*(t){const{settings:{relationshipDataTypeSync:n}}=t;let i=[e];n&&(i=Rx([e],t,e)),yield i.map(ix)},Hx=(e,t,n,i)=>function*({collections:o}){if(!Yx(e)||!Dr(o).collection("tableColumnEntities").selectById(n))return;const l={id:n,tableId:t,value:i};switch(e){case cy.columnName:yield tx(l);break;case cy.columnDataType:yield Kx(l);break;case cy.columnDefault:yield ox(l);break;case cy.columnComment:yield nx(l)}},Mx=(e,t)=>function*({collections:n}){const i=Dr(n).collection("tableColumnEntities").selectById(t);if(!i)return;const o=Zf(i.options,rf.primaryKey);yield rx({tableId:e,id:t,value:!o})},zx={addColumnAction$:Tx,removeColumnAction$:wx,toggleColumnValueAction$:Nx,changeColumnDataTypeAction$:Kx,changeColumnValueAction$:Hx,changeColumnPrimaryKeyAction$:Mx};function Jx(e){return 9+e.ui.width+8+1}function jx(e){return 25+e.ui.height+8+1}
/*!
 * @dineug/schema-sql-parser
 * @version 0.1.0 | Sun Oct 20 2024
 * @author SeungHwan-Lee <dineug2@gmail.com>
 * @license MIT
 */const Fx="string",Ox="leftParent",$x="rightParent",Ex="leftBracket",Ux="rightBracket",Px="comma",Ax="period",Bx="equal",Qx="semicolon",Dx="'",_x="`",qx=/\s/,eX=/\S/,tX=/;|,|\(|\)|\[|\./,nX="=",iX=".",oX=",",lX=";",rX="(",aX=")",sX="[",cX="]",uX=e=>t=>e===t,dX=e=>t=>e.test(t),pX={doubleQuote:uX('"'),singleQuote:uX(Dx),backtick:uX(_x),whiteSpace:dX(qx),string:dX(eX),breakString:dX(tX),equal:uX(nX),period:uX(iX),comma:uX(oX),semicolon:uX(lX),leftParent:uX(rX),rightParent:uX(aX),leftBracket:uX(sX),rightBracket:uX(cX)};const hX=e=>t=>n=>!!t[n]&&t[n].type===e,mX=e=>{const t=e.toUpperCase();return e=>n=>!!e[n]&&e[n].value.toUpperCase()===t},bX=hX(Fx),fX=hX(Ax),yX=hX(Px),gX=hX(Ox),vX=hX($x),ZX=mX("CREATE"),xX=mX("ALTER"),XX=mX("DROP"),GX=mX("USE"),IX=mX("RENAME"),WX=mX("DELETE"),kX=mX("SELECT"),VX=mX("TABLE"),CX=mX("INDEX"),SX=mX("UNIQUE"),RX=mX("ADD"),LX=mX("PRIMARY"),YX=mX("KEY"),TX=mX("CONSTRAINT"),wX=mX("FOREIGN"),NX=mX("NOT"),KX=mX("NULL"),HX=mX("DEFAULT"),MX=mX("COMMENT"),zX=mX("REFERENCES"),JX=mX("ASC"),jX=mX("DESC"),FX=mX("ON"),OX=mX("AUTO_INCREMENT"),$X=mX("AUTOINCREMENT"),EX=mX("IF"),UX=mX("EXISTS"),PX=e=>{const t=OX(e),n=$X(e);return e=>t(e)||n(e)},AX=e=>{const t=ZX(e),n=xX(e),i=XX(e),o=GX(e),l=IX(e),r=WX(e),a=kX(e);return e=>t(e)||n(e)||i(e)||o(e)||l(e)||r(e)||a(e)},BX=e=>{const t=ZX(e),n=VX(e),i=EX(e),o=NX(e),l=UX(e);return e=>t(e)&&n(e+1)&&i(e+2)&&o(e+3)&&l(e+4)},QX=e=>{const t=ZX(e),n=CX(e),i=SX(e);return e=>t(e)&&i(e+1)&&n(e+2)},DX=Array.from(new Set(["BIGINT","BINARY","BIT","BLOB","BOOL","BOOLEAN","CHAR","DATE","DATETIME","DEC","DECIMAL","DOUBLE PRECISION","DOUBLE","ENUM","FIXED","FLOAT","GEOMETRY","GEOMETRYCOLLECTION","INT","INTEGER","JSON","LINESTRING","LONGBLOB","LONGTEXT","MEDIUMBLOB","MEDIUMINT","MEDIUMTEXT","MULTILINESTRING","MULTIPOINT","MULTIPOLYGON","NUMERIC","POINT","POLYGON","REAL","SET","SMALLINT","TEXT","TIME","TIMESTAMP","TINYBLOB","TINYINT","TINYTEXT","VARBINARY","VARCHAR","YEAR","BIGINT","BINARY","BIT","CHAR","DATE","DATETIME","DATETIME2","DATETIMEOFFSET","DECIMAL","FLOAT","GEOGRAPHY","GEOMETRY","IMAGE","INT","MONEY","NCHAR","NTEXT","NUMERIC","NVARCHAR","REAL","SMALLDATETIME","SMALLINT","SMALLMONEY","SQL_VARIANT","TEXT","TIME","TINYINT","UNIQUEIDENTIFIER","VARBINARY","VARCHAR","XML","BIGINT","BINARY","BIT","BLOB","BOOL","BOOLEAN","CHAR","DATE","DATETIME","DEC","DECIMAL","DOUBLE PRECISION","DOUBLE","ENUM","FLOAT","GEOMETRY","GEOMETRYCOLLECTION","INT","INTEGER","JSON","LINESTRING","LONGBLOB","LONGTEXT","MEDIUMBLOB","MEDIUMINT","MEDIUMTEXT","MULTILINESTRING","MULTIPOINT","MULTIPOLYGON","NUMERIC","POINT","POLYGON","SET","SMALLINT","TEXT","TIME","TIMESTAMP","TINYBLOB","TINYINT","TINYTEXT","VARBINARY","VARCHAR","YEAR","BFILE","BINARY_DOUBLE","BINARY_FLOAT","BLOB","CHAR","CLOB","DATE","DATETIME","LONG RAW","LONG","NCHAR","NCLOB","NUMBER","NVARCHAR2","RAW","TIMESTAMP WITH LOCAL TIME ZONE","TIMESTAMP WITH TIME ZONE","TIMESTAMP","UriType","VARCHAR","VARCHAR2","XMLType","BIGINT","BIGSERIAL","BIT VARYING","BIT","BOOL","BOOLEAN","BOX","BYTEA","CHAR","CHARACTER VARYING","CHARACTER","CIDR","CIRCLE","DATE","DECIMAL","DOUBLE PRECISION","FLOAT4","FLOAT8","INET","INT","INT2","INT4","INT8","INTEGER","INTERVAL","JSON","JSONB","LINE","LSEG","MACADDR","MACADDR8","MONEY","NUMERIC","PATH","PG_LSN","POINT","POLYGON","REAL","SERIAL","SERIAL2","SERIAL4","SERIAL8","SMALLINT","SMALLSERIAL","TEXT","TIME WITH","TIME","TIMESTAMP WITH","TIMESTAMP","TIMESTAMPTZ","TIMETZ","TSQUERY","TSVECTOR","TXID_SNAPSHOT","UUID","VARBIT","VARCHAR","XML","BLOB","INTEGER","NUMERIC","REAL","TEXT"].map((e=>e.toUpperCase())))),_X=e=>{const t=bX(e);return n=>{const i=e[n];return!!i&&(t(n)&&DX.includes(i.value.toUpperCase()))}},qX={createTable:"create.table",createIndex:"create.index",alterTableAddUnique:"alter.table.add.unique",alterTableAddPrimaryKey:"alter.table.add.primaryKey",alterTableAddForeignKey:"alter.table.add.foreignKey"},eG={asc:"ASC",desc:"DESC"};function tG(e,t){const n=AX(e),i=bX(e),o=gX(e),l=fX(e),r=MX(e),a=BX(e),s={type:qX.createTable,name:"",comment:"",columns:[],indexes:[],foreignKeys:[]};for(t.value+=a(t.value)?5:2;t.value<e.length&&!n(t.value);){let n=e[t.value];if(o(t.value)){t.value++;const{columns:n,indexes:i,foreignKeys:o}=nG(e,t);s.columns=n,s.indexes=i,s.foreignKeys=o}else!i(t.value)||s.name?r(t.value)?(n=e[++t.value],i(t.value)&&(s.comment=n.value,t.value++)):t.value++:(s.name=n.value,n=e[++t.value],l(t.value)&&(n=e[++t.value],i(t.value)&&(s.name=n.value,t.value++)))}return s}function nG(e,t){const n=bX(e),i=gX(e),o=vX(e),l=yX(e),r=TX(e),a=CX(e),s=LX(e),c=wX(e),u=PX(e),d=SX(e),p=KX(e),h=NX(e),m=HX(e),b=MX(e),f=jX(e),y=JX(e),g=YX(e),v=_X(e),Z=()=>t.value<e.length,x=[],X=[],G=[],I=[],W=[];let k={name:"",dataType:"",default:"",comment:"",primaryKey:!1,autoIncrement:!1,unique:!1,nullable:!0};for(;Z();){let V=e[t.value];if(!n(t.value)||k.name||r(t.value)||s(t.value)||c(t.value)||d(t.value)||a(t.value)||g(t.value))if(i(t.value)){for(V=e[++t.value];Z()&&!o(t.value);)V=e[++t.value];t.value++}else if(r(t.value))V=e[++t.value],n(t.value)&&t.value++;else if(s(t.value)){if(V=e[++t.value],g(t.value))if(V=e[++t.value],i(t.value)){for(V=e[++t.value];Z()&&!o(t.value);)n(t.value)&&I.push(V.value.toUpperCase()),V=e[++t.value];t.value++}else k.primaryKey=!0}else if(c(t.value)){const n=iG(e,t);n&&G.push(n)}else if(a(t.value)||g(t.value)){if(V=e[++t.value],n(t.value)){const r=V.value,a=[];if(V=e[++t.value],i(t.value)){V=e[++t.value];let i={name:"",sort:eG.asc};for(;Z()&&!o(t.value);)n(t.value)&&!f(t.value)&&!y(t.value)&&(i.name=V.value),f(t.value)&&(i.sort=eG.desc),l(t.value)&&(a.push(i),i={name:"",sort:eG.asc}),V=e[++t.value];!a.includes(i)&&""!==i.name&&a.push(i),a.length&&X.push({name:r,unique:!1,columns:a}),t.value++}}}else if(d(t.value))if(V=e[++t.value],g(t.value)&&(V=e[++t.value]),n(t.value)&&(V=e[++t.value]),i(t.value)){for(V=e[++t.value];Z()&&!o(t.value);)n(t.value)&&W.push(V.value.toUpperCase()),V=e[++t.value];t.value++}else k.unique=!0;else if(h(t.value))V=e[++t.value],p(t.value)&&(k.nullable=!1,t.value++);else if(m(t.value))V=e[++t.value],n(t.value)&&(k.default=V.value,t.value++);else if(b(t.value))V=e[++t.value],n(t.value)&&(k.comment=V.value,t.value++);else if(u(t.value))k.autoIncrement=!0,t.value++;else if(v(t.value)){let n=V.value;if(V=e[++t.value],i(t.value)){for(n+="(",V=e[++t.value];Z()&&!o(t.value);)n+=V.value,V=e[++t.value];n+=")",t.value++}k.dataType=n}else if(l(t.value))(k.name||k.dataType)&&x.push(k),k={name:"",dataType:"",default:"",comment:"",primaryKey:!1,autoIncrement:!1,unique:!1,nullable:!0},t.value++;else{if(o(t.value)){t.value++;break}t.value++}else k.name=V.value,t.value++}return!x.includes(k)&&(k.name||k.dataType)&&x.push(k),x.forEach((e=>{I.includes(e.name.toUpperCase())&&(e.primaryKey=!0),W.includes(e.name.toUpperCase())&&(e.unique=!0)})),{columns:x,indexes:X,foreignKeys:G}}function iG(e,t){const n=bX(e),i=gX(e),o=vX(e),l=zX(e),r=fX(e),a=YX(e),s=()=>t.value<e.length,c={columnNames:[],refTableName:"",refColumnNames:[]};let u=e[++t.value];if(a(t.value)){if(u=e[++t.value],i(t.value)){for(u=e[++t.value];s()&&!o(t.value);)n(t.value)&&c.columnNames.push(u.value),u=e[++t.value];u=e[++t.value]}if(l(t.value)&&(u=e[++t.value],n(t.value)&&(c.refTableName=u.value,u=e[++t.value],r(t.value)&&(u=e[++t.value],n(t.value)&&(c.refTableName=u.value,u=e[++t.value])),i(t.value)))){for(u=e[++t.value];s()&&!o(t.value);)n(t.value)&&c.refColumnNames.push(u.value),u=e[++t.value];u=e[++t.value]}if(c.columnNames.length&&c.columnNames.length===c.refColumnNames.length)return c}return null}function oG(e,t){const n=AX(e),i=bX(e),o=TX(e),l=fX(e),r=VX(e),a=wX(e),s={type:qX.alterTableAddForeignKey,name:"",columnNames:[],refTableName:"",refColumnNames:[]};for(t.value++;t.value<e.length&&!n(t.value);){let n=e[t.value];if(r(t.value))n=e[++t.value],i(t.value)&&(s.name=n.value,n=e[++t.value],l(t.value)&&(n=e[++t.value],i(t.value)&&(s.name=n.value,t.value++)));else if(o(t.value))n=e[++t.value],i(t.value)&&t.value++;else if(a(t.value)){const n=iG(e,t);n&&(s.columnNames=n.columnNames,s.refTableName=n.refTableName,s.refColumnNames=n.refColumnNames)}else t.value++}return s}function lG(e,t){const n=AX(e),i=bX(e),o=gX(e),l=vX(e),r=TX(e),a=LX(e),s=fX(e),c=YX(e),u=VX(e),d=()=>t.value<e.length,p={type:qX.alterTableAddPrimaryKey,name:"",columnNames:[]};for(t.value++;d()&&!n(t.value);){let n=e[t.value];if(u(t.value))n=e[++t.value],i(t.value)&&(p.name=n.value,n=e[++t.value],s(t.value)&&(n=e[++t.value],i(t.value)&&(p.name=n.value,t.value++)));else if(r(t.value))n=e[++t.value],i(t.value)&&t.value++;else if(a(t.value)){if(n=e[++t.value],c(t.value)&&(n=e[++t.value],o(t.value))){for(n=e[++t.value];d()&&!l(t.value);)i(t.value)&&p.columnNames.push(n.value),n=e[++t.value];n=e[++t.value]}}else t.value++}return p}function rG(e,t){const n=AX(e),i=bX(e),o=TX(e),l=fX(e),r=VX(e),a=SX(e),s=gX(e),c=vX(e),u=()=>t.value<e.length,d={type:qX.alterTableAddUnique,name:"",columnNames:[]};for(t.value++;u()&&!n(t.value);){let n=e[t.value];if(r(t.value))n=e[++t.value],i(t.value)&&(d.name=n.value,n=e[++t.value],l(t.value)&&(n=e[++t.value],i(t.value)&&(d.name=n.value,t.value++)));else if(o(t.value))n=e[++t.value],i(t.value)&&t.value++;else if(a(t.value)){if(n=e[++t.value],s(t.value)){for(n=e[++t.value];u()&&!c(t.value);)i(t.value)&&d.columnNames.push(n.value),n=e[++t.value];t.value++}}else t.value++}return d}function aG(e,t){const n=AX(e),i=SX(e),o=bX(e),l=gX(e),r=vX(e),a=yX(e),s=CX(e),c=FX(e),u=jX(e),d=JX(e),p=QX(e),h=()=>t.value<e.length,m={type:qX.createIndex,name:"",unique:i(t.value+1),tableName:"",columns:[]};for(t.value+=p(t.value)?2:1;h()&&!n(t.value);){let n=e[t.value];if(s(t.value))n=e[++t.value],o(t.value)&&(m.name=n.value);else if(c(t.value)){if(n=e[++t.value],o(t.value)&&(m.tableName=n.value,n=e[++t.value],l(t.value))){n=e[++t.value];let i={name:"",sort:eG.asc};for(;h()&&!r(t.value);)o(t.value)&&!u(t.value)&&!d(t.value)&&(i.name=n.value),u(t.value)&&(i.sort=eG.desc),a(t.value)&&(m.columns.push(i),i={name:"",sort:eG.asc}),n=e[++t.value];!m.columns.includes(i)&&""!==i.name&&m.columns.push(i),t.value++}}else t.value++}return m}function sG(e){const t=[],n={value:0},i=(e=>{const t=ZX(e),n=VX(e);return e=>t(e)&&n(e+1)})(e),o=(e=>{const t=ZX(e),n=CX(e),i=QX(e);return e=>t(e)&&n(e+1)||i(e)})(e),l=(e=>{const t=xX(e),n=VX(e),i=RX(e),o=LX(e),l=YX(e),r=TX(e);return e=>t(e)&&n(e+1)&&i(e+3)&&o(e+4)&&l(e+5)||t(e)&&n(e+1)&&i(e+3)&&r(e+4)&&o(e+6)&&l(e+7)||t(e)&&n(e+1)&&i(e+5)&&o(e+6)&&l(e+7)||t(e)&&n(e+1)&&i(e+5)&&r(e+6)&&o(e+8)&&l(e+9)})(e),r=(e=>{const t=xX(e),n=VX(e),i=RX(e),o=wX(e),l=YX(e),r=TX(e);return e=>t(e)&&n(e+1)&&i(e+3)&&o(e+4)&&l(e+5)||t(e)&&n(e+1)&&i(e+3)&&r(e+4)&&o(e+6)&&l(e+7)||t(e)&&n(e+1)&&i(e+5)&&o(e+6)&&l(e+7)||t(e)&&n(e+1)&&i(e+5)&&r(e+6)&&o(e+8)&&l(e+9)})(e),a=(e=>{const t=xX(e),n=VX(e),i=RX(e),o=SX(e),l=TX(e);return e=>t(e)&&n(e+1)&&i(e+3)&&o(e+4)||t(e)&&n(e+1)&&i(e+3)&&l(e+4)&&o(e+6)||t(e)&&n(e+1)&&i(e+5)&&o(e+6)||t(e)&&n(e+1)&&i(e+5)&&l(e+6)&&o(e+8)})(e);for(;n.value<e.length;)i(n.value)?t.push(tG(e,n)):o(n.value)?t.push(aG(e,n)):l(n.value)?t.push(lG(e,n)):r(n.value)?t.push(oG(e,n)):a(n.value)?t.push(rG(e,n)):n.value++;return t}const cG=e=>sG(function(e){const t=[];let n=0;const i=()=>n<e.length;for(;i();){let o=e[n];if(pX.whiteSpace(o))for(;i()&&pX.whiteSpace(o);)o=e[++n];else if(pX.leftParent(o))t.push({type:Ox,value:o}),n++;else if(pX.rightParent(o))t.push({type:$x,value:o}),n++;else if(pX.leftBracket(o))t.push({type:Ex,value:o}),n++;else if(pX.rightBracket(o))t.push({type:Ux,value:o}),n++;else if(pX.comma(o))t.push({type:Px,value:o}),n++;else if(pX.period(o))t.push({type:Ax,value:o}),n++;else if(pX.equal(o))t.push({type:Bx,value:o}),n++;else if(pX.semicolon(o))t.push({type:Qx,value:o}),n++;else if(pX.doubleQuote(o)){let l="";for(o=e[++n];i()&&!pX.doubleQuote(o);)l+=o,o=e[++n];t.push({type:Fx,value:l}),n++}else if(pX.singleQuote(o)){let l="";for(o=e[++n];i()&&!pX.singleQuote(o);)l+=o,o=e[++n];t.push({type:Fx,value:l}),n++}else if(pX.backtick(o)){let l="";for(o=e[++n];i()&&!pX.backtick(o);)l+=o,o=e[++n];t.push({type:Fx,value:l}),n++}else if(pX.string(o)){let l="";for(;i()&&pX.string(o)&&!pX.breakString(o);)l+=o,o=e[++n];t.push({type:Fx,value:l})}else n++}return t}(e));function uG(e,t){for(const n of e)if(n.name.toUpperCase()===t.toUpperCase())return n;return null}function dG(e,t,n){const i=Er({}),o=function(e){const t={tables:[],indexes:[],primaryKeys:[],foreignKeys:[],uniques:[]};for(const n of e)switch(n.type){case qX.createTable:n.name&&t.tables.push(n);break;case qX.createIndex:n.tableName&&n.columns.length&&t.indexes.push(n);break;case qX.alterTableAddPrimaryKey:n.name&&n.columnNames.length&&t.primaryKeys.push(n);break;case qX.alterTableAddForeignKey:n.name&&n.columnNames.length&&n.refTableName&&n.refColumnNames.length&&n.columnNames.length===n.refColumnNames.length&&t.foreignKeys.push(n);break;case qX.alterTableAddUnique:n.name&&n.columnNames.length&&t.uniques.push(n)}return t}(cG(e)),l=function({tables:e,indexes:t,primaryKeys:n,foreignKeys:i,uniques:o}){return t.forEach((t=>{const n=uG(e,t.tableName);n&&n.indexes.push({name:t.name,unique:t.unique,columns:t.columns})})),n.forEach((t=>{const n=uG(e,t.name);n&&t.columnNames.forEach((e=>{const t=uG(n.columns,e);t&&(t.primaryKey=!0)}))})),o.forEach((t=>{const n=uG(e,t.name);n&&t.columnNames.forEach((e=>{const t=uG(n.columns,e);t&&(t.unique=!0)}))})),i.forEach((t=>{const n=uG(e,t.name);n&&n.foreignKeys.push({columnNames:t.columnNames,refTableName:t.refTableName,refColumnNames:t.refColumnNames})})),e}(o),r=Pf(100*l.length);return i.settings.width=r,i.settings.height=r,l.forEach((e=>function({doc:e,collections:t},n,{toWidth:i}){const o=VZ({name:n.name,comment:n.comment,ui:{widthName:oy(i(n.name)),widthComment:oy(i(n.comment))}});n.columns.forEach((e=>{const n=_Z({tableId:o.id,name:e.name,comment:e.comment,dataType:e.dataType,default:e.default,options:(e.autoIncrement?rf.autoIncrement:0)|(e.primaryKey?rf.primaryKey:0)|(e.unique?rf.unique:0)|(e.nullable?0:rf.notNull),ui:{widthName:oy(i(e.name)),widthComment:oy(i(e.comment)),widthDataType:oy(i(e.dataType)),widthDefault:oy(i(e.default)),keys:e.primaryKey?af.primaryKey:0}});o.columnIds.push(n.id),o.seqColumnIds.push(n.id),Dr(t).collection("tableColumnEntities").setOne(n)})),e.tableIds.push(o.id),Dr(t).collection("tableEntities").setOne(o)}(i,e,t))),function({doc:e,collections:t},n){const i=Dr(t).collection("tableEntities").selectByIds(e.tableIds),o=Dr(t).collection("tableColumnEntities");n.forEach((n=>{if(!n.foreignKeys.length)return;const l=uG(i,n.name);if(!l)return;const r=o.selectByIds(l.columnIds);n.foreignKeys.forEach((n=>{const a=uG(i,n.refTableName);if(!a)return;const s=o.selectByIds(a.columnIds),c=[],u=[];n.refColumnNames.forEach((e=>{const t=uG(s,e);t&&c.push(t)})),n.columnNames.forEach((e=>{const t=uG(r,e);t&&(u.push(t),Zf(t.ui.keys,af.primaryKey)?t.ui.keys|=af.foreignKey:t.ui.keys=af.foreignKey)}));const d=xv({identification:!u.some((e=>!(Zf(e.ui.keys,af.primaryKey)&&Zf(e.ui.keys,af.foreignKey)))),relationshipType:nf.ZeroN,start:{tableId:a.id,columnIds:c.map((e=>e.id))},end:{tableId:l.id,columnIds:u.map((e=>e.id))}});e.relationshipIds.push(d.id),Dr(t).collection("relationshipEntities").setOne(d)}))}))}(i,l),function({doc:e,collections:t},n){const i=Dr(t).collection("tableEntities").selectByIds(e.tableIds);n.forEach((n=>{n.indexes.forEach((o=>{const l=uG(i,n.name);if(!l)return;const r=Dr(t).collection("tableColumnEntities").selectByIds(l.columnIds),a=[],s=Sg({name:o.name,tableId:l.id,unique:o.unique});o.columns.forEach((e=>{const t=uG(r,e.name);if(!t)return;const n=jg({indexId:s.id,columnId:t.id,orderType:e.sort===eG.asc?sf.ASC:sf.DESC});a.push(n)})),0!==a.length&&(a.forEach((e=>{s.indexColumnIds.push(e.id),s.seqIndexColumnIds.push(e.id),Dr(t).collection("indexColumnEntities").setOne(e)})),e.indexIds.push(s.id),Dr(t).collection("indexEntities").setOne(s))}))}))}(i,l),Ra(n?n(i):i)}function pG(e,t,n=[]){const{doc:{relationshipIds:i},collections:o}=t,l=e.pop();return l&&(n.some((({columnId:e})=>e===l.columnId))||(n.push(l),Dr(o).collection("relationshipEntities").selectByIds(i).forEach((({id:t,start:n,end:i})=>{const o=n.columnIds.indexOf(l.columnId);if(-1!==o){const n=i.columnIds[o];e.push({columnId:n,relationshipIds:[t]})}else{const o=i.columnIds.indexOf(l.columnId);if(-1!==o){const i=n.columnIds[o];e.push({columnId:i,relationshipIds:[t]})}}}))),pG(e,t,n)),n}const hG=15;function mG(e){return Object.entries(e).reduce(((e,[t,n])=>(n===ay?e.tableIds.push(t):n===sy&&e.memoIds.push(t),e)),{tableIds:[],memoIds:[]})}const bG=e=>function*(){yield $y(),yield Ey({value:e})},fG=e=>function*(){yield Uy(),yield Py({value:e})},yG=(e,t)=>function*({editor:{selectedMap:n},settings:{zoomLevel:i}}){const{tableIds:o,memoIds:l}=mG(n),r=e/i,a=t/i;o.length&&(yield SZ({ids:o,movementX:r,movementY:a})),l.length&&(yield av({ids:l,movementX:r,movementY:a}))},gG=()=>function*(){yield kx(),yield vx()},vG=e=>function*(t){const{doc:{tableIds:n,memoIds:i},collections:o}=t,l={...Dr(o).collection("tableEntities").selectByIds(n).reduce(((n,i)=>{const o=GZ(i,t).width,l=WZ(i),r=i.ui.x+o/2-hG,a=i.ui.y+l/2-hG;return xf(e,{x:r,y:a,w:hG,h:hG})&&(n[i.id]=ay),n}),{}),...Dr(o).collection("memoEntities").selectByIds(i).reduce(((t,n)=>{const i=Jx(n),o=jx(n),l=n.ui.x+i/2-hG,r=n.ui.y+o/2-hG;return xf(e,{x:l,y:r,w:hG,h:hG})&&(t[n.id]=sy),t}),{})};yield ZG(),Vl(l)||(yield Fy(l))},ZG=()=>function*(){yield jy(),yield Qy()},xG=(e,t)=>function*(n){const{editor:{focusTable:i}}=n;i&&(e===uy.Tab&&!t&&(wy(i.focusType)&&Yy(n)&&!Iy(n)||!wy(i.focusType)&&Wy(n)&&Vy(n))?yield Tx(i.tableId):yield Dy({moveKey:e,shiftKey:t}))},XG=e=>function*({editor:t}){var n;(null==(n=t.drawRelationship)?void 0:n.relationshipType)===e?yield ig():yield tg({relationshipType:e})},GG=e=>function*({collections:t}){const n=Dr(t).collection("tableEntities").selectById(e);if(n){if(!Dr(t).collection("tableColumnEntities").selectByIds(n.columnIds).some((e=>Zf(e.options,rf.primaryKey)))){const t=nr();yield qZ({tableId:e,id:t}),yield rx({tableId:e,id:t,value:!0}),yield By({tableId:e,columnId:t,focusType:cy.columnName,$mod:!1,shiftKey:!1})}yield ng({tableId:e})}},IG=e=>function*({editor:{selectedMap:t},collections:n}){const{tableIds:i,memoIds:o}=mG(t),l=Dr(n).collection("tableEntities").selectByIds(i),r=Dr(n).collection("memoEntities").selectByIds(o);yield l.map((t=>wZ({id:t.id,color:e,prevColor:t.ui.color}))),yield r.map((t=>dv({id:t.id,color:e,prevColor:t.ui.color})))},WG=e=>function*({settings:t},n){yield bG(dG(e,n,(e=>(e.settings={...e.settings,...Rl(Xo(t),["width","height","scrollTop","scrollLeft","zoomLevel"])},e)))),yield KZ()},kG=e=>function*({editor:{focusTable:t}}){!t||!t.columnId||(yield sg({tableId:t.tableId,columnIds:e?[...t.selectColumnIds]:[t.columnId]}))},VG=(e,t)=>function*({editor:{draggableColumn:n},collections:i}){if(!n||0===n.columnIds.length)return;const{tableId:o,columnIds:l}=n,r=Dr(i).collection("tableEntities"),a=r.selectById(o);if(!a)return;if(t===o){const t=a.columnIds.indexOf(l[0]);if(-1===t)return;const n=a.columnIds.indexOf(e);if(-1===n)return;const i=l.map((t=>cx({tableId:o,id:t,targetId:e})));return t<n&&i.reverse(),void(yield i)}if(!r.selectById(t))return;const s=Dr(i).collection("tableColumnEntities").selectByIds(l);if(0===s.length)return;yield wx(o,l);const c=s.map((()=>nr()));for(let n=0;n<s.length;n++){const i=s[n],o=c[n],l={id:o,tableId:t};yield[qZ(l),tx({...l,value:i.name}),ix({...l,value:i.dataType}),ox({...l,value:i.default}),nx({...l,value:i.comment}),rx({...l,value:Zf(i.options,rf.primaryKey)}),sx({...l,value:Zf(i.options,rf.notNull)}),ax({...l,value:Zf(i.options,rf.unique)}),lx({...l,value:Zf(i.options,rf.autoIncrement)}),cx({...l,targetId:e}),By({tableId:t,columnId:o,focusType:cy.columnName,$mod:!0,shiftKey:!1})]}yield sg({tableId:t,columnIds:c})},CG=e=>function*(t){const{columnIds:n,relationshipIds:i}=pG([{columnId:e,relationshipIds:[]}],t).reduce(((e,{columnId:t,relationshipIds:n})=>(e.columnIds.push(t),e.relationshipIds.push(...n),e)),{columnIds:[],relationshipIds:[]});yield lg({columnIds:Jl(n)}),yield rg({relationshipIds:Jl(i)})},SG=()=>function*(){yield lg({columnIds:[]}),yield rg({relationshipIds:[]})},RG={loadJsonAction$:bG,initialLoadJsonAction$:fG,moveAllAction$:yG,removeSelectedAction$:gG,dragSelectAction$:vG,unselectAllAction$:ZG,focusMoveTableAction$:xG,drawStartRelationshipAction$:XG,drawStartAddRelationshipAction$:GG,changeColorAllAction$:IG,loadSchemaSQLAction$:WG,dragstartColumnAction$:kG,dragoverColumnAction$:VG,columnKeyHoverStartAction$:CG,columnKeyHoverEndAction$:SG},LG=e=>function*(){yield Rg({id:nr(),tableId:e})},YG=e=>function*({collections:t}){const n=Dr(t).collection("indexEntities").selectById(e);n&&(yield Tg({id:e,tableId:n.tableId,value:!n.unique}))},TG={addIndexAction$:LG,changeIndexUniqueAction$:YG},wG=(e,t)=>function*({collections:n}){const i=Dr(n).collection("indexEntities").selectById(e);if(!i)return;const o=Dr(n).collection("indexColumnEntities").selectByIds(i.seqIndexColumnIds).find((e=>e.columnId===t));o?yield Og({id:o.id,indexId:e,tableId:i.tableId,columnId:t}):yield Og({id:nr(),indexId:e,tableId:i.tableId,columnId:t})},NG=(e,t)=>function*({collections:n}){const i=Dr(n).collection("indexEntities").selectById(e);if(!i)return;const o=Dr(n).collection("indexColumnEntities").selectByIds(i.indexColumnIds).filter((e=>e.columnId===t));for(const t of o)yield Eg({id:t.id,indexId:e,tableId:i.tableId})},KG=e=>function*({collections:t}){const n=Dr(t).collection("indexColumnEntities").selectById(e);n&&(yield Pg({id:e,indexId:n.indexId,columnId:n.columnId,value:n.orderType===sf.ASC?sf.DESC:sf.ASC}))},HG=(e,t)=>function*({collections:n}){if(e===t)return;const i=Dr(n).collection("indexColumnEntities").selectById(e);if(!i)return;const o=Dr(n).collection("indexEntities").selectById(i.indexId);o&&(yield Ug({id:e,indexId:i.indexId,tableId:o.tableId,targetId:t}))},MG={addIndexColumnAction$:wG,removeIndexColumnAction$:NG,changeIndexColumnOrderTypeAction$:KG,moveIndexColumnAction$:HG};function zG({editor:{viewport:e},settings:{scrollLeft:t,scrollTop:n,zoomLevel:i,width:o,height:l}},r){const a=Xf(o,l,i),s=Xf(o,l,r),c=(a.w-s.w)/2,u=(a.h-s.h)/2,d=o/2,p=l/2,h=-1*t+e.width/2,m=(p-(-1*n+e.height/2))/p;return{movementX:Hl(-1*c*((d-h)/d),4),movementY:Hl(-1*u*m,4)}}const JG=e=>function*(t){const{settings:{scrollLeft:n,scrollTop:i}}=t,o=Af(e),{movementX:l,movementY:r}=zG(t,o);yield Av({value:e}),yield Qv({scrollLeft:n+l,scrollTop:i+r})},jG=e=>function*(t){const{settings:{zoomLevel:n}}=t,i=Af(n+e),{movementX:o,movementY:l}=zG(t,i);yield Bv({value:e}),yield Dv({movementX:o,movementY:l})},FG={changeZoomLevelAction$:JG,streamZoomLevelAction$:jG},OG=Object.freeze({...hg,...RG,...Ng,...TG,...Bg,...MG,...bv,...xx,...kv,...dZ,...FG,...MZ,...Sx,...dx,...zx}),$G=["table.add","table.move","table.moveTo","table.remove","table.changeName","table.changeComment","table.changeColor","table.sort","column.add","column.remove","column.changeName","column.changeComment","column.changeDataType","column.changeDefault","column.changeAutoIncrement","column.changePrimaryKey","column.changeUnique","column.changeNotNull","column.move","relationship.add","relationship.remove","relationship.changeType","index.add","index.remove","index.changeName","index.changeUnique","indexColumn.add","indexColumn.remove","indexColumn.move","indexColumn.changeOrderType","memo.add","memo.move","memo.moveTo","memo.remove","memo.changeValue","memo.changeColor","memo.resize","settings.changeDatabaseName","settings.resize","settings.changeZoomLevel","settings.streamZoomLevel","settings.scrollTo","settings.streamScrollTo","settings.changeShow","settings.changeDatabase","settings.changeCanvasType","settings.changeLanguage","settings.changeTableNameCase","settings.changeColumnNameCase","settings.changeBracketType","settings.changeRelationshipDataTypeSync","settings.changeRelationshipOptimization","settings.changeColumnOrder","settings.changeMaxWidthComment","settings.changeIgnoreSaveSettings","editor.loadJson","editor.clear"],EG=jl(["settings.changeZoomLevel","settings.streamZoomLevel","settings.scrollTo","settings.streamScrollTo","settings.changeDatabase","settings.changeCanvasType","settings.changeLanguage","settings.changeTableNameCase","settings.changeColumnNameCase","settings.changeBracketType"]),UG=[...$G.filter((e=>!EG(e)))],PG=["editor.sharedMouseTracker"],AG=[...$G,...PG],BG=["table.move","memo.move"],QG=["table.changeColor","memo.changeColor"],DG=["settings.streamZoomLevel","settings.streamScrollTo"],_G=[...Object.keys(mx)],qG=[...Object.keys(hx),..._G],eI=ub((e=>!!e.length)),tI=e=>{const t=jl(e);return e=>new Lm((n=>e.subscribe({next:e=>n.next(e.filter((e=>t(e.type)))),error:e=>n.error(e),complete:()=>n.complete()}))).pipe(eI)},nI="@@none-stream",iI=(e,t=[],n=pb(200))=>{const i=((e,t)=>n=>{const i=t.find((([,e])=>e(n)));return i?i[0]:e(n)?n:nI})(jl(e),t.map((([e,t])=>[e,jl(t)])));return e=>new Lm((t=>e.subscribe({next:e=>{const n=e.reduce(((e,t)=>{const n=i(t.type);return e[n]||(e[n]=[]),e[n].push(t),e}),{});Object.values(n).forEach((e=>t.next(e)))},error:e=>t.error(e),complete:()=>t.complete()}))).pipe(eI,hb((e=>i(e[0].type))),sb((e=>e.key===nI?e:e.pipe(db(e.pipe(n)),ab((e=>e.flat()))))))},oI=jl(_G),lI=jl(PG),rI=e=>e.pipe(iI(PG,[],mb(100)),ab((e=>{var t;return lI(null==(t=e[0])?void 0:t.type)?[Zl(e)]:e})),iI(_G,[["@@move",BG],["@@scroll",DG],["@@color",QG]]),ab((e=>{var t;if(!oI(null==(t=e[0])?void 0:t.type))return e;const n=[];for(const t of Object.keys(mx))mx[t]([],n,e);return n.length?n:e})));function aI(e,t){return function({context:e,state:t,reducers:n,enableObservable:i=!0}){const o=i?Bs(t):t,l=Da(),r=Da();let a=Uh(Ph);const s=t=>{Ka(Reflect.get(n,t.type,n),o,t,e)},c=(...t)=>{const n=Eh(o,e,t);l.next(n)},u=l.subscribe((e=>{const t=a(function*(e){yield e}(e));for(const e of t)r.next(e)})),d=r.subscribe((e=>e.forEach(s)));return{context:e,state:o,dispatch:(...e)=>{Ha((()=>c(...e)))},dispatchSync:c,subscribe:r.subscribe,pipe:(...e)=>(a=Uh(...e,Ph),()=>{a=Uh(Ph)}),destroy:()=>{u(),d()}}}({context:e,state:{...Er({}),editor:py()},reducers:{...pg,...HZ,...ux,...mv,...Wv,...uZ,...wg,...Ag},enableObservable:t??!0})}
/*!
 * @dineug/go
 * @version 0.1.8 | Sun Dec 24 2023
 * @author SeungHwan-Lee <dineug2@gmail.com>
 * @license MIT
 */function sI(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)}function cI(e,t,n,i,o){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?o.call(e,n):o?o.value=n:t.set(e,n),n}var uI,dI,pI,hI;const mI={limit:-1,leading:!1,trailing:!1};class bI{constructor(e){uI.add(this),dI.set(this,[]),pI.set(this,void 0),cI(this,pI,Object.assign({},mI,{...e}),"f")}isEmpty(){return!sI(this,dI,"f").length}put(e){sI(this,dI,"f").push(e),sI(this,uI,"m",hI).call(this)}take(){return sI(this,dI,"f").shift()}flush(){const e=sI(this,dI,"f");return cI(this,dI,[],"f"),e}drop(e){const t=sI(this,dI,"f").findIndex(e);if(-1===t)return!1;const n=sI(this,dI,"f").slice();return n.splice(t,1),cI(this,dI,n,"f"),!0}}dI=new WeakMap,pI=new WeakMap,uI=new WeakSet,hI=function(){-1!==sI(this,pI,"f").limit&&sI(this,pI,"f").limit<sI(this,dI,"f").length&&(sI(this,pI,"f").trailing?sI(this,dI,"f").pop():sI(this,pI,"f").leading?sI(this,dI,"f").shift():sI(this,dI,"f").pop())};const fI=e=>new bI(e);var yI,gI,vI,ZI,xI;const XI=Symbol.for("https://github.com/dineug/go.git#closed");class GI{get closed(){return sI(this,ZI,"f")}constructor(e=fI()){yI.add(this),gI.set(this,void 0),vI.set(this,fI()),ZI.set(this,!1),cI(this,gI,e,"f")}put(e){sI(this,ZI,"f")||(sI(this,gI,"f").put(e),sI(this,yI,"m",xI).call(this))}take(e,t){return sI(this,ZI,"f")?(null==t||t(XI),()=>!1):(sI(this,vI,"f").put([e,t]),sI(this,yI,"m",xI).call(this),()=>sI(this,vI,"f").drop((([t])=>t===e)))}flush(e,t){sI(this,ZI,"f")?null==t||t(XI):e(sI(this,gI,"f").flush())}close(){cI(this,ZI,!0,"f"),sI(this,vI,"f").flush().forEach((([e,t])=>null==t?void 0:t(XI)))}}gI=new WeakMap,vI=new WeakMap,ZI=new WeakMap,yI=new WeakSet,xI=function(){if(sI(this,vI,"f").isEmpty()||sI(this,gI,"f").isEmpty())return;const[e]=sI(this,vI,"f").take(),t=sI(this,gI,"f").take();null==e||e(t)};const II=e=>new GI(e),WI=e=>t=>typeof t===e,kI=WI("object"),VI=WI("function"),{isArray:CI}=Array,SI=e=>kI(e)&&!(e=>null===e)(e)&&!CI(e),RI=e=>SI(e)&&VI(e.then),LI=e=>SI(e)&&VI(e.next),YI=e=>SI(e)&&VI(e.next)&&VI(e.throw)&&VI(e.return),TI=Symbol.for("https://github.com/dineug/go.git#cancel"),wI=Symbol.for("https://github.com/dineug/go.git#attachCancel"),NI=(e,t)=>(Reflect.set(e,wI,t),e),KI=e=>e===TI,HI=e=>{if(SI(e)){const t=Reflect.get(e,wI);null==t||t()}return UI((()=>new Promise(((e,t)=>t(TI)))))},MI=e=>UI((function*(){let t=()=>!1;const n=new Promise(((n,i)=>{t=e.take(n,i)}));return NI(n,(()=>{t()})),yield n})),zI=e=>UI((()=>new Promise((t=>setTimeout(t,e))))),JI=Symbol.for("https://github.com/dineug/go.git#kill"),jI=e=>e===JI,FI=(e,t)=>{e.put(t)},OI=(e,t)=>UI((function*(){for(;;){const n=yield MI(e);UI(t,n)}})),$I={leading:!0,trailing:!1},EI=(e,t,n,i)=>UI((function*(){const o=Object.assign({},$I,{...i});let l,r,a=-1;for(;;){const i=yield MI(e);r=i,-1===a&&(o.leading&&(l=i,UI(t,i)),a=setTimeout((()=>{o.trailing&&(!o.leading||l!==r)&&UI(t,r),a=-1}),n))}}));function UI(e,...t){let n=!1,i=null;const o=new Promise((async(o,l)=>{let r=null;i=()=>{l(TI),null==r||r.forEach(HI),r=null};try{const i=e(...t);if(RI(i))return r=[i],o(await i);if(!LI(i))return o(i);let l,a=await i.next();for(;!n&&!a.done;){try{const e=PI(a.value);r=CI(e)?e:[e],l=await(CI(e)?Promise.all(e):e),a=await i.next(l)}catch(e){if(jI(e))throw e;YI(i)&&(a=await i.throw(e))}l=void 0,r=null}o(a.value)}catch(e){KI(e)&&(n=!0),l(e)}}));return o.catch((()=>{})),NI(o,(()=>{n=!0,null==i||i()})),o}function PI(e){return RI(e)?e:LI(e)?UI((()=>e)):VI(e)?UI(e):CI(e)?e.map((e=>UI((()=>e)))):Promise.resolve()}const AI={left:"left",right:"right",top:"top",bottom:"bottom"},BI=Object.values(AI);jl([AI.top,AI.bottom,AI.left,AI.right]);const QI=50,DI=35,_I=10,qI=16,eW=26;function tW(e,t){const n=GZ(t,e).width,i=WZ(t),{x:o,y:l}=t.ui;return{width:n,height:i,top:{x:o+n/2,y:l},bottom:{x:o+n/2,y:l+i},left:{x:o,y:l+i/2},right:{x:o+n,y:l+i/2},lt:{x:o,y:l},rt:{x:o+n,y:l},lb:{x:o,y:l+i},rb:{x:o+n,y:l+i}}}function nW(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}const iW={[AI.top]:lf.top,[AI.bottom]:lf.bottom,[AI.left]:lf.left,[AI.right]:lf.right};function oW(e){const{doc:{tableIds:t,relationshipIds:n},collections:i}=e,o=jl(t),l=Dr(i).collection("tableEntities"),r=Dr(i).collection("relationshipEntities").selectByIds(n).filter((({start:e,end:t})=>o(e.tableId)&&o(t.tableId))),a=new Map,s=new Map;for(const t of r){const n=rW(t),{start:i,end:o}=n,r=l.selectById(i.tableId),c=l.selectById(o.tableId);if(r&&c)if(s.set(t,n),i.tableId===o.tableId){i.direction=lf.top,o.direction=lf.right;const t=lW(e,a,r);i.x=t.objectPoint.rt.x-20,i.y=t.objectPoint.rt.y,o.x=t.objectPoint.rt.x,o.y=t.objectPoint.rt.y+20,t.top.set(n.id,n),t.right.set(n.id,n)}else{const t=lW(e,a,r),i=lW(e,a,c),[o,l]=aW(t.objectPoint,i.objectPoint,n);t[o].set(n.id,n),i[l].set(n.id,n)}}for(const e of a.values())for(const t of BI){const n=t;e[n].size<2||sW(n,e)}for(const[e,t]of s.entries())e.start.direction=t.start.direction,e.start.x=t.start.x,e.start.y=t.start.y,e.end.direction=t.end.direction,e.end.x=t.end.x,e.end.y=t.end.y}function lW(e,t,n){let i=t.get(n.id);return i||(i={tableId:n.id,objectPoint:tW(e,n),top:new Map,bottom:new Map,left:new Map,right:new Map},t.set(n.id,i)),i}function rW(e){return{id:e.id,start:{tableId:e.start.tableId,x:e.start.x,y:e.start.y,direction:e.start.direction},end:{tableId:e.end.tableId,x:e.end.x,y:e.end.y,direction:e.end.direction}}}function aW(e,t,n){const i=[AI.bottom,AI.bottom];let o=nW(e.bottom,t.bottom);n.start.x=e.bottom.x,n.start.y=e.bottom.y,n.end.x=t.bottom.x,n.end.y=t.bottom.y,n.start.direction=lf.bottom,n.end.direction=lf.bottom;for(const l of BI)for(const r of BI){const a=l,s=r,c=nW(e[a],t[s]);o<=c||(o=c,i[0]=a,i[1]=s,n.start.x=e[a].x,n.start.y=e[a].y,n.start.direction=iW[a],n.end.x=t[s].x,n.end.y=t[s].y,n.end.direction=iW[s])}return i}function sW(e,t){const n=function(e,t){const n=t[e].size,i={x:t.objectPoint.width/n,y:t.objectPoint.height/n},o={x:i.x/2,y:i.y/2},l=[],r=[];if(e===AI.left||e===AI.right){let e=t.objectPoint.lt.y-o.y;for(let t=0;t<n;t++)e+=i.y,r.push(e)}else if(e===AI.top||e===AI.bottom){let e=t.objectPoint.lt.x-o.x;for(let t=0;t<n;t++)e+=i.x,l.push(e)}return{xArray:l,yArray:r}}(e,t),i=function(e,t){const n=[],i=[],o=[],l=e===AI.top||e===AI.bottom;for(const o of t[e].values()){const{start:l,end:r}=o;l.tableId===r.tableId?e===AI.top?(n.push(o.start),i.push(o.end)):e===AI.right&&(n.push(o.end),i.push(o.start)):o.start.tableId===t.tableId?(n.push(o.start),i.push(o.end)):(n.push(o.end),i.push(o.start))}return i.forEach(((e,t)=>{o.push({start:n[t],end:i[t],distance:l?e.x:e.y})})),o.sort(((e,t)=>e.distance-t.distance))}(e,t);e===AI.left||e===AI.right?n.yArray.forEach(((e,t)=>{i[t].start.y=e})):(e===AI.top||e===AI.bottom)&&n.xArray.forEach(((e,t)=>{i[t].start.x=e}))}const cW=[[[ex,rx,Ey,Py],function*(e,t){yield EI(e,(function*(){const{doc:e,collections:n}=t,i=Dr(n).collection("relationshipEntities").selectByIds(e.relationshipIds);for(const e of i){const{end:t,identification:i}=e,o=Dr(n).collection("tableEntities").selectById(t.tableId);if(!o)continue;const l=jl(o.columnIds),r=Dr(n).collection("tableColumnEntities").selectByIds(t.columnIds).filter((e=>l(e.id)));if(!r.length)continue;const a=r.every((e=>Zf(e.options,rf.primaryKey)));a!==i&&(e.identification=a)}}),10,{leading:!1,trailing:!0})}],[[ex,sx,Ey,Py],function*(e,t){yield EI(e,(function*(){const{doc:e,collections:n}=t,i=Dr(n).collection("relationshipEntities").selectByIds(e.relationshipIds);for(const e of i){const{end:t,startRelationshipType:i}=e,o=Dr(n).collection("tableEntities").selectById(t.tableId);if(!o)continue;const l=jl(o.columnIds),r=Dr(n).collection("tableColumnEntities").selectByIds(t.columnIds).filter((e=>l(e.id)));if(!r.length)continue;const a=r.every((e=>Zf(e.options,rf.notNull)))?of.dash:of.ring;a!==i&&(e.startRelationshipType=a)}}),10,{leading:!1,trailing:!0})}],[[_v,sZ,Xv,av,SZ,RZ,YZ,TZ,qZ,ex,tx,nx,ix,ox,KZ],function*(e,t){yield EI(e,(function*(){oW(t)}),5,{leading:!1,trailing:!0})}]],uW=[[[Ey,Py],function*(e,t,n){yield EI(e,(function*(){kZ(t,n),oW(t)}),5,{leading:!1,trailing:!0})}]],dW=[[[rx],function*(e,t){yield OI(e,(function*({payload:{id:e}}){const{collections:n}=t,i=Dr(n).collection("tableColumnEntities").selectById(e);!i||!Zf(i.options,rf.primaryKey)||Zf(i.options,rf.notNull)||(i.options=i.options|rf.notNull)}))}],[[Xv],function*(e,t){yield OI(e,(function*({payload:{id:e,end:n}}){const{doc:{relationshipIds:i},collections:o}=t;if(!i.includes(e))return;const l=Dr(o).collection("tableColumnEntities").selectByIds(n.columnIds);for(const e of l)e.ui.keys=e.ui.keys|af.foreignKey}))}],[[Gv],function*(e,t){yield OI(e,(function*({payload:{id:e}}){const{doc:{relationshipIds:n},collections:i}=t;if(n.includes(e))return;const o=Dr(i).collection("relationshipEntities").selectById(e);if(!o)return;const l=Dr(i).collection("tableColumnEntities").selectByIds(o.end.columnIds);for(const e of l)e.ui.keys=e.ui.keys&~af.foreignKey}))}],[[Ey,Py],function*(e,t){yield OI(e,(function*(){const{doc:e,collections:n}=t,i=Dr(n).collection("relationshipEntities").selectByIds(e.relationshipIds),o=Dr(n).collection("tableEntities").selectByIds(e.tableIds),l=new Set,r=Dr(n).collection("tableColumnEntities");for(const{end:e}of i){const t=r.selectByIds(e.columnIds);for(const e of t)e.ui.keys=e.ui.keys|af.foreignKey,l.add(e.id)}for(const e of o){const t=r.selectByIds(e.columnIds);for(const e of t)Zf(e.ui.keys,af.foreignKey)&&!l.has(e.id)&&(e.ui.keys=e.ui.keys&~af.foreignKey)}}))}]],pW=[...uW,...dW,...cW];class hW extends Error{}class mW extends hW{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class bW extends hW{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class fW extends hW{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class yW extends hW{}class gW extends hW{constructor(e){super(`Invalid unit ${e}`)}}class vW extends hW{}class ZW extends hW{constructor(){super("Zone is an abstract class")}}const xW="numeric",XW="short",GW="long",IW={year:xW,month:xW,day:xW},WW={year:xW,month:XW,day:xW},kW={year:xW,month:XW,day:xW,weekday:XW},VW={year:xW,month:GW,day:xW},CW={year:xW,month:GW,day:xW,weekday:GW},SW={hour:xW,minute:xW},RW={hour:xW,minute:xW,second:xW},LW={hour:xW,minute:xW,second:xW,timeZoneName:XW},YW={hour:xW,minute:xW,second:xW,timeZoneName:GW},TW={hour:xW,minute:xW,hourCycle:"h23"},wW={hour:xW,minute:xW,second:xW,hourCycle:"h23"},NW={hour:xW,minute:xW,second:xW,hourCycle:"h23",timeZoneName:XW},KW={hour:xW,minute:xW,second:xW,hourCycle:"h23",timeZoneName:GW},HW={year:xW,month:xW,day:xW,hour:xW,minute:xW},MW={year:xW,month:xW,day:xW,hour:xW,minute:xW,second:xW},zW={year:xW,month:XW,day:xW,hour:xW,minute:xW},JW={year:xW,month:XW,day:xW,hour:xW,minute:xW,second:xW},jW={year:xW,month:XW,day:xW,weekday:XW,hour:xW,minute:xW},FW={year:xW,month:GW,day:xW,hour:xW,minute:xW,timeZoneName:XW},OW={year:xW,month:GW,day:xW,hour:xW,minute:xW,second:xW,timeZoneName:XW},$W={year:xW,month:GW,day:xW,weekday:GW,hour:xW,minute:xW,timeZoneName:GW},EW={year:xW,month:GW,day:xW,weekday:GW,hour:xW,minute:xW,second:xW,timeZoneName:GW};class UW{get type(){throw new ZW}get name(){throw new ZW}get ianaName(){return this.name}get isUniversal(){throw new ZW}offsetName(e,t){throw new ZW}formatOffset(e,t){throw new ZW}offset(e){throw new ZW}equals(e){throw new ZW}get isValid(){throw new ZW}}let PW=null;class AW extends UW{static get instance(){return null===PW&&(PW=new AW),PW}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:t,locale:n}){return aV(e,t,n)}formatOffset(e,t){return dV(this.offset(e),t)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return"system"===e.type}get isValid(){return!0}}let BW={};const QW={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};let DW={};class _W extends UW{static create(e){return DW[e]||(DW[e]=new _W(e)),DW[e]}static resetCache(){DW={},BW={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=_W.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:t,locale:n}){return aV(e,t,n,this.name)}formatOffset(e,t){return dV(this.offset(e),t)}offset(e){const t=new Date(e);if(isNaN(t))return NaN;const n=function(e){return BW[e]||(BW[e]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),BW[e]}(this.name);let[i,o,l,r,a,s,c]=n.formatToParts?function(e,t){const n=e.formatToParts(t),i=[];for(let e=0;e<n.length;e++){const{type:t,value:o}=n[e],l=QW[t];"era"===t?i[l]=o:Jk(l)||(i[l]=parseInt(o,10))}return i}(n,t):function(e,t){const n=e.format(t).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(n),[,o,l,r,a,s,c,u]=i;return[r,o,l,a,s,c,u]}(n,t);"BC"===r&&(i=1-Math.abs(i));let u=+t;const d=u%1e3;return u-=d>=0?d:1e3+d,(iV({year:i,month:o,day:l,hour:24===a?0:a,minute:s,second:c,millisecond:0})-u)/6e4}equals(e){return"iana"===e.type&&e.name===this.name}get isValid(){return this.valid}}let qW={};let ek={};function tk(e,t={}){const n=JSON.stringify([e,t]);let i=ek[n];return i||(i=new Intl.DateTimeFormat(e,t),ek[n]=i),i}let nk={};let ik={};let ok=null;let lk={};function rk(e,t,n,i){const o=e.listingMode();return"error"===o?null:"en"===o?n(t):i(t)}class ak{constructor(e,t,n){this.padTo=n.padTo||0,this.floor=n.floor||!1;const{padTo:i,floor:o,...l}=n;if(!t||Object.keys(l).length>0){const t={useGrouping:!1,...n};n.padTo>0&&(t.minimumIntegerDigits=n.padTo),this.inf=function(e,t={}){const n=JSON.stringify([e,t]);let i=nk[n];return i||(i=new Intl.NumberFormat(e,t),nk[n]=i),i}(e,t)}}format(e){if(this.inf){const t=this.floor?Math.floor(e):e;return this.inf.format(t)}return Bk(this.floor?Math.floor(e):qk(e,3),this.padTo)}}class sk{constructor(e,t,n){let i;if(this.opts=n,this.originalZone=void 0,this.opts.timeZone)this.dt=e;else if("fixed"===e.zone.type){const t=e.offset/60*-1,n=t>=0?`Etc/GMT+${t}`:`Etc/GMT${t}`;0!==e.offset&&_W.create(n).valid?(i=n,this.dt=e):(i="UTC",this.dt=0===e.offset?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else"system"===e.zone.type?this.dt=e:"iana"===e.zone.type?(this.dt=e,i=e.zone.name):(i="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const o={...this.opts};o.timeZone=o.timeZone||i,this.dtf=tk(t,o)}format(){return this.originalZone?this.formatToParts().map((({value:e})=>e)).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map((e=>{if("timeZoneName"===e.type){const t=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...e,value:t}}return e})):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class ck{constructor(e,t,n){this.opts={style:"long",...n},!t&&Ok()&&(this.rtf=function(e,t={}){const{base:n,...i}=t,o=JSON.stringify([e,i]);let l=ik[o];return l||(l=new Intl.RelativeTimeFormat(e,t),ik[o]=l),l}(e,n))}format(e,t){return this.rtf?this.rtf.format(e,t):function(e,t,n="always",i=!1){const o={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},l=-1===["hours","minutes","seconds"].indexOf(e);if("auto"===n&&l){const n="days"===e;switch(t){case 1:return n?"tomorrow":`next ${o[e][0]}`;case-1:return n?"yesterday":`last ${o[e][0]}`;case 0:return n?"today":`this ${o[e][0]}`}}const r=Object.is(t,-0)||t<0,a=Math.abs(t),s=1===a,c=o[e],u=i?s?c[1]:c[2]||c[1]:s?o[e][0]:e;return r?`${a} ${u} ago`:`in ${a} ${u}`}(t,e,this.opts.numeric,"long"!==this.opts.style)}formatToParts(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]}}const uk={firstDay:1,minimalDays:4,weekend:[6,7]};class dk{static fromOpts(e){return dk.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,t,n,i,o=!1){const l=e||Ik.defaultLocale,r=l||(o?"en-US":ok||(ok=(new Intl.DateTimeFormat).resolvedOptions().locale,ok)),a=t||Ik.defaultNumberingSystem,s=n||Ik.defaultOutputCalendar,c=Pk(i)||Ik.defaultWeekSettings;return new dk(r,a,s,c,l)}static resetCache(){ok=null,ek={},nk={},ik={}}static fromObject({locale:e,numberingSystem:t,outputCalendar:n,weekSettings:i}={}){return dk.create(e,t,n,i)}constructor(e,t,n,i,o){const[l,r,a]=function(e){const t=e.indexOf("-x-");-1!==t&&(e=e.substring(0,t));const n=e.indexOf("-u-");if(-1===n)return[e];{let t,i;try{t=tk(e).resolvedOptions(),i=e}catch{const o=e.substring(0,n);t=tk(o).resolvedOptions(),i=o}const{numberingSystem:o,calendar:l}=t;return[i,o,l]}}(e);this.locale=l,this.numberingSystem=t||r||null,this.outputCalendar=n||a||null,this.weekSettings=i,this.intl=function(e,t,n){return(n||t)&&(e.includes("-u-")||(e+="-u"),n&&(e+=`-ca-${n}`),t&&(e+=`-nu-${t}`)),e}(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=o,this.fastNumbersCached=null}get fastNumbers(){return null==this.fastNumbersCached&&(this.fastNumbersCached=function(e){return(!e.numberingSystem||"latn"===e.numberingSystem)&&("latn"===e.numberingSystem||!e.locale||e.locale.startsWith("en")||"latn"===new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem)}(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),t=!(null!==this.numberingSystem&&"latn"!==this.numberingSystem||null!==this.outputCalendar&&"gregory"!==this.outputCalendar);return e&&t?"en":"intl"}clone(e){return e&&0!==Object.getOwnPropertyNames(e).length?dk.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,Pk(e.weekSettings)||this.weekSettings,e.defaultToEN||!1):this}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,t=!1){return rk(this,e,fV,(()=>{const n=t?{month:e,day:"numeric"}:{month:e},i=t?"format":"standalone";return this.monthsCache[i][e]||(this.monthsCache[i][e]=function(e){const t=[];for(let n=1;n<=12;n++){const i=XS.utc(2009,n,1);t.push(e(i))}return t}((e=>this.extract(e,n,"month")))),this.monthsCache[i][e]}))}weekdays(e,t=!1){return rk(this,e,ZV,(()=>{const n=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},i=t?"format":"standalone";return this.weekdaysCache[i][e]||(this.weekdaysCache[i][e]=function(e){const t=[];for(let n=1;n<=7;n++){const i=XS.utc(2016,11,13+n);t.push(e(i))}return t}((e=>this.extract(e,n,"weekday")))),this.weekdaysCache[i][e]}))}meridiems(){return rk(this,void 0,(()=>xV),(()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[XS.utc(2016,11,13,9),XS.utc(2016,11,13,19)].map((t=>this.extract(t,e,"dayperiod")))}return this.meridiemCache}))}eras(e){return rk(this,e,WV,(()=>{const t={era:e};return this.eraCache[e]||(this.eraCache[e]=[XS.utc(-40,1,1),XS.utc(2017,1,1)].map((e=>this.extract(e,t,"era")))),this.eraCache[e]}))}extract(e,t,n){const i=this.dtFormatter(e,t).formatToParts().find((e=>e.type.toLowerCase()===n));return i?i.value:null}numberFormatter(e={}){return new ak(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,t={}){return new sk(e,this.intl,t)}relFormatter(e={}){return new ck(this.intl,this.isEnglish(),e)}listFormatter(e={}){return function(e,t={}){const n=JSON.stringify([e,t]);let i=qW[n];return i||(i=new Intl.ListFormat(e,t),qW[n]=i),i}(this.intl,e)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:$k()?function(e){let t=lk[e];if(!t){const n=new Intl.Locale(e);t="getWeekInfo"in n?n.getWeekInfo():n.weekInfo,lk[e]=t}return t}(this.locale):uk}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}}let pk=null;class hk extends UW{static get utcInstance(){return null===pk&&(pk=new hk(0)),pk}static instance(e){return 0===e?hk.utcInstance:new hk(e)}static parseSpecifier(e){if(e){const t=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(t)return new hk(sV(t[1],t[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":`UTC${dV(this.fixed,"narrow")}`}get ianaName(){return 0===this.fixed?"Etc/UTC":`Etc/GMT${dV(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,t){return dV(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return"fixed"===e.type&&e.fixed===this.fixed}get isValid(){return!0}}class mk extends UW{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function bk(e,t){if(Jk(e)||null===e)return t;if(e instanceof UW)return e;if(function(e){return"string"==typeof e}(e)){const n=e.toLowerCase();return"default"===n?t:"local"===n||"system"===n?AW.instance:"utc"===n||"gmt"===n?hk.utcInstance:hk.parseSpecifier(n)||_W.create(e)}return jk(e)?hk.instance(e):"object"==typeof e&&"offset"in e&&"function"==typeof e.offset?e:new mk(e)}let fk,yk=()=>Date.now(),gk="system",vk=null,Zk=null,xk=null,Xk=60,Gk=null;class Ik{static get now(){return yk}static set now(e){yk=e}static set defaultZone(e){gk=e}static get defaultZone(){return bk(gk,AW.instance)}static get defaultLocale(){return vk}static set defaultLocale(e){vk=e}static get defaultNumberingSystem(){return Zk}static set defaultNumberingSystem(e){Zk=e}static get defaultOutputCalendar(){return xk}static set defaultOutputCalendar(e){xk=e}static get defaultWeekSettings(){return Gk}static set defaultWeekSettings(e){Gk=Pk(e)}static get twoDigitCutoffYear(){return Xk}static set twoDigitCutoffYear(e){Xk=e%100}static get throwOnInvalid(){return fk}static set throwOnInvalid(e){fk=e}static resetCaches(){dk.resetCache(),_W.resetCache()}}class Wk{constructor(e,t){this.reason=e,this.explanation=t}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const kk=[0,31,59,90,120,151,181,212,243,273,304,334],Vk=[0,31,60,91,121,152,182,213,244,274,305,335];function Ck(e,t){return new Wk("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function Sk(e,t,n){const i=new Date(Date.UTC(e,t-1,n));e<100&&e>=0&&i.setUTCFullYear(i.getUTCFullYear()-1900);const o=i.getUTCDay();return 0===o?7:o}function Rk(e,t,n){return n+(eV(e)?Vk:kk)[t-1]}function Lk(e,t){const n=eV(e)?Vk:kk,i=n.findIndex((e=>e<t));return{month:i+1,day:t-n[i]}}function Yk(e,t){return(e-t+7)%7+1}function Tk(e,t=4,n=1){const{year:i,month:o,day:l}=e,r=Rk(i,o,l),a=Yk(Sk(i,o,l),n);let s,c=Math.floor((r-a+14-t)/7);return c<1?(s=i-1,c=lV(s,t,n)):c>lV(i,t,n)?(s=i+1,c=1):s=i,{weekYear:s,weekNumber:c,weekday:a,...pV(e)}}function wk(e,t=4,n=1){const{weekYear:i,weekNumber:o,weekday:l}=e,r=Yk(Sk(i,1,t),n),a=tV(i);let s,c=7*o+l-r-7+t;c<1?(s=i-1,c+=tV(s)):c>a?(s=i+1,c-=tV(i)):s=i;const{month:u,day:d}=Lk(s,c);return{year:s,month:u,day:d,...pV(e)}}function Nk(e){const{year:t,month:n,day:i}=e;return{year:t,ordinal:Rk(t,n,i),...pV(e)}}function Kk(e){const{year:t,ordinal:n}=e,{month:i,day:o}=Lk(t,n);return{year:t,month:i,day:o,...pV(e)}}function Hk(e,t){if(Jk(e.localWeekday)&&Jk(e.localWeekNumber)&&Jk(e.localWeekYear))return{minDaysInFirstWeek:4,startOfWeek:1};if(!Jk(e.weekday)||!Jk(e.weekNumber)||!Jk(e.weekYear))throw new yW("Cannot mix locale-based week fields with ISO-based week fields");return Jk(e.localWeekday)||(e.weekday=e.localWeekday),Jk(e.localWeekNumber)||(e.weekNumber=e.localWeekNumber),Jk(e.localWeekYear)||(e.weekYear=e.localWeekYear),delete e.localWeekday,delete e.localWeekNumber,delete e.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}function Mk(e){const t=Fk(e.year),n=Ak(e.month,1,12),i=Ak(e.day,1,nV(e.year,e.month));return t?n?!i&&Ck("day",e.day):Ck("month",e.month):Ck("year",e.year)}function zk(e){const{hour:t,minute:n,second:i,millisecond:o}=e,l=Ak(t,0,23)||24===t&&0===n&&0===i&&0===o,r=Ak(n,0,59),a=Ak(i,0,59),s=Ak(o,0,999);return l?r?a?!s&&Ck("millisecond",o):Ck("second",i):Ck("minute",n):Ck("hour",t)}function Jk(e){return typeof e>"u"}function jk(e){return"number"==typeof e}function Fk(e){return"number"==typeof e&&e%1==0}function Ok(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function $k(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function Ek(e,t,n){if(0!==e.length)return e.reduce(((e,i)=>{const o=[t(i),i];return e&&n(e[0],o[0])===e[0]?e:o}),null)[1]}function Uk(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Pk(e){if(null==e)return null;if("object"!=typeof e)throw new vW("Week settings must be an object");if(!Ak(e.firstDay,1,7)||!Ak(e.minimalDays,1,7)||!Array.isArray(e.weekend)||e.weekend.some((e=>!Ak(e,1,7))))throw new vW("Invalid week settings");return{firstDay:e.firstDay,minimalDays:e.minimalDays,weekend:Array.from(e.weekend)}}function Ak(e,t,n){return Fk(e)&&e>=t&&e<=n}function Bk(e,t=2){let n;return n=e<0?"-"+(""+-e).padStart(t,"0"):(""+e).padStart(t,"0"),n}function Qk(e){if(!Jk(e)&&null!==e&&""!==e)return parseInt(e,10)}function Dk(e){if(!Jk(e)&&null!==e&&""!==e)return parseFloat(e)}function _k(e){if(!Jk(e)&&null!==e&&""!==e){const t=1e3*parseFloat("0."+e);return Math.floor(t)}}function qk(e,t,n=!1){const i=10**t;return(n?Math.trunc:Math.round)(e*i)/i}function eV(e){return e%4==0&&(e%100!=0||e%400==0)}function tV(e){return eV(e)?366:365}function nV(e,t){const n=function(e,t){return e-t*Math.floor(e/t)}(t-1,12)+1;return 2===n?eV(e+(t-n)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][n-1]}function iV(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function oV(e,t,n){return-Yk(Sk(e,1,t),n)+t-1}function lV(e,t=4,n=1){const i=oV(e,t,n),o=oV(e+1,t,n);return(tV(e)-i+o)/7}function rV(e){return e>99?e:e>Ik.twoDigitCutoffYear?1900+e:2e3+e}function aV(e,t,n,i=null){const o=new Date(e),l={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};i&&(l.timeZone=i);const r={timeZoneName:t,...l},a=new Intl.DateTimeFormat(n,r).formatToParts(o).find((e=>"timezonename"===e.type.toLowerCase()));return a?a.value:null}function sV(e,t){let n=parseInt(e,10);Number.isNaN(n)&&(n=0);const i=parseInt(t,10)||0;return 60*n+(n<0||Object.is(n,-0)?-i:i)}function cV(e){const t=Number(e);if("boolean"==typeof e||""===e||Number.isNaN(t))throw new vW(`Invalid unit value ${e}`);return t}function uV(e,t){const n={};for(const i in e)if(Uk(e,i)){const o=e[i];if(null==o)continue;n[t(i)]=cV(o)}return n}function dV(e,t){const n=Math.trunc(Math.abs(e/60)),i=Math.trunc(Math.abs(e%60)),o=e>=0?"+":"-";switch(t){case"short":return`${o}${Bk(n,2)}:${Bk(i,2)}`;case"narrow":return`${o}${n}${i>0?`:${i}`:""}`;case"techie":return`${o}${Bk(n,2)}${Bk(i,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function pV(e){return function(e,t){return t.reduce(((t,n)=>(t[n]=e[n],t)),{})}(e,["hour","minute","second","millisecond"])}const hV=["January","February","March","April","May","June","July","August","September","October","November","December"],mV=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],bV=["J","F","M","A","M","J","J","A","S","O","N","D"];function fV(e){switch(e){case"narrow":return[...bV];case"short":return[...mV];case"long":return[...hV];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const yV=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],gV=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],vV=["M","T","W","T","F","S","S"];function ZV(e){switch(e){case"narrow":return[...vV];case"short":return[...gV];case"long":return[...yV];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const xV=["AM","PM"],XV=["Before Christ","Anno Domini"],GV=["BC","AD"],IV=["B","A"];function WV(e){switch(e){case"narrow":return[...IV];case"short":return[...GV];case"long":return[...XV];default:return null}}function kV(e,t){let n="";for(const i of e)i.literal?n+=i.val:n+=t(i.val);return n}const VV={D:IW,DD:WW,DDD:VW,DDDD:CW,t:SW,tt:RW,ttt:LW,tttt:YW,T:TW,TT:wW,TTT:NW,TTTT:KW,f:HW,ff:zW,fff:FW,ffff:$W,F:MW,FF:JW,FFF:OW,FFFF:EW};class CV{static create(e,t={}){return new CV(e,t)}static parseFormat(e){let t=null,n="",i=!1;const o=[];for(let l=0;l<e.length;l++){const r=e.charAt(l);"'"===r?(n.length>0&&o.push({literal:i||/^\s+$/.test(n),val:n}),t=null,n="",i=!i):i||r===t?n+=r:(n.length>0&&o.push({literal:/^\s+$/.test(n),val:n}),n=r,t=r)}return n.length>0&&o.push({literal:i||/^\s+$/.test(n),val:n}),o}static macroTokenToFormatOpts(e){return VV[e]}constructor(e,t){this.opts=t,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,t){return null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...t}).format()}dtFormatter(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t})}formatDateTime(e,t){return this.dtFormatter(e,t).format()}formatDateTimeParts(e,t){return this.dtFormatter(e,t).formatToParts()}formatInterval(e,t){return this.dtFormatter(e.start,t).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,t){return this.dtFormatter(e,t).resolvedOptions()}num(e,t=0){if(this.opts.forceSimple)return Bk(e,t);const n={...this.opts};return t>0&&(n.padTo=t),this.loc.numberFormatter(n).format(e)}formatDateTimeFromString(e,t){const n="en"===this.loc.listingMode(),i=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,o=(t,n)=>this.loc.extract(e,t,n),l=t=>e.isOffsetFixed&&0===e.offset&&t.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,t.format):"",r=()=>n?function(e){return xV[e.hour<12?0:1]}(e):o({hour:"numeric",hourCycle:"h12"},"dayperiod"),a=(t,i)=>n?function(e,t){return fV(t)[e.month-1]}(e,t):o(i?{month:t}:{month:t,day:"numeric"},"month"),s=(t,i)=>n?function(e,t){return ZV(t)[e.weekday-1]}(e,t):o(i?{weekday:t}:{weekday:t,month:"long",day:"numeric"},"weekday"),c=t=>{const n=CV.macroTokenToFormatOpts(t);return n?this.formatWithSystemDefault(e,n):t},u=t=>n?function(e,t){return WV(t)[e.year<0?0:1]}(e,t):o({era:t},"era");return kV(CV.parseFormat(t),(t=>{switch(t){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12==0?12:e.hour%12);case"hh":return this.num(e.hour%12==0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return l({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return l({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return l({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return r();case"d":return i?o({day:"numeric"},"day"):this.num(e.day);case"dd":return i?o({day:"2-digit"},"day"):this.num(e.day,2);case"c":case"E":return this.num(e.weekday);case"ccc":return s("short",!0);case"cccc":return s("long",!0);case"ccccc":return s("narrow",!0);case"EEE":return s("short",!1);case"EEEE":return s("long",!1);case"EEEEE":return s("narrow",!1);case"L":return i?o({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return i?o({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return a("short",!0);case"LLLL":return a("long",!0);case"LLLLL":return a("narrow",!0);case"M":return i?o({month:"numeric"},"month"):this.num(e.month);case"MM":return i?o({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return a("short",!1);case"MMMM":return a("long",!1);case"MMMMM":return a("narrow",!1);case"y":return i?o({year:"numeric"},"year"):this.num(e.year);case"yy":return i?o({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return i?o({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return i?o({year:"numeric"},"year"):this.num(e.year,6);case"G":return u("short");case"GG":return u("long");case"GGGGG":return u("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return c(t)}}))}formatDurationFromString(e,t){const n=e=>{switch(e[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},i=CV.parseFormat(t),o=i.reduce(((e,{literal:t,val:n})=>t?e:e.concat(n)),[]);return kV(i,(e=>t=>{const i=n(t);return i?this.num(e.get(i),t.length):t})(e.shiftTo(...o.map(n).filter((e=>e)))))}}const SV=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function RV(...e){const t=e.reduce(((e,t)=>e+t.source),"");return RegExp(`^${t}$`)}function LV(...e){return t=>e.reduce((([e,n,i],o)=>{const[l,r,a]=o(t,i);return[{...e,...l},r||n,a]}),[{},null,1]).slice(0,2)}function YV(e,...t){if(null==e)return[null,null];for(const[n,i]of t){const t=n.exec(e);if(t)return i(t)}return[null,null]}function TV(...e){return(t,n)=>{const i={};let o;for(o=0;o<e.length;o++)i[e[o]]=Qk(t[n+o]);return[i,null,n+o]}}const wV=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,NV=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,KV=RegExp(`${NV.source}${`(?:${wV.source}?(?:\\[(${SV.source})\\])?)?`}`),HV=RegExp(`(?:T${KV.source})?`),MV=TV("weekYear","weekNumber","weekDay"),zV=TV("year","ordinal"),JV=RegExp(`${NV.source} ?(?:${wV.source}|(${SV.source}))?`),jV=RegExp(`(?: ${JV.source})?`);function FV(e,t,n){const i=e[t];return Jk(i)?n:Qk(i)}function OV(e,t){return[{hours:FV(e,t,0),minutes:FV(e,t+1,0),seconds:FV(e,t+2,0),milliseconds:_k(e[t+3])},null,t+4]}function $V(e,t){const n=!e[t]&&!e[t+1],i=sV(e[t+1],e[t+2]);return[{},n?null:hk.instance(i),t+3]}function EV(e,t){return[{},e[t]?_W.create(e[t]):null,t+1]}const UV=RegExp(`^T?${NV.source}$`),PV=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function AV(e){const[t,n,i,o,l,r,a,s,c]=e,u="-"===t[0],d=s&&"-"===s[0],p=(e,t=!1)=>void 0!==e&&(t||e&&u)?-e:e;return[{years:p(Dk(n)),months:p(Dk(i)),weeks:p(Dk(o)),days:p(Dk(l)),hours:p(Dk(r)),minutes:p(Dk(a)),seconds:p(Dk(s),"-0"===s),milliseconds:p(_k(c),d)}]}const BV={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function QV(e,t,n,i,o,l,r){const a={year:2===t.length?rV(Qk(t)):Qk(t),month:mV.indexOf(n)+1,day:Qk(i),hour:Qk(o),minute:Qk(l)};return r&&(a.second=Qk(r)),e&&(a.weekday=e.length>3?yV.indexOf(e)+1:gV.indexOf(e)+1),a}const DV=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function _V(e){const[,t,n,i,o,l,r,a,s,c,u,d]=e,p=QV(t,o,i,n,l,r,a);let h;return h=s?BV[s]:c?0:sV(u,d),[p,new hk(h)]}const qV=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,eC=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,tC=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function nC(e){const[,t,n,i,o,l,r,a]=e;return[QV(t,o,i,n,l,r,a),hk.utcInstance]}function iC(e){const[,t,n,i,o,l,r,a]=e;return[QV(t,a,n,i,o,l,r),hk.utcInstance]}const oC=RV(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,HV),lC=RV(/(\d{4})-?W(\d\d)(?:-?(\d))?/,HV),rC=RV(/(\d{4})-?(\d{3})/,HV),aC=RV(KV),sC=LV((function(e,t){return[{year:FV(e,t),month:FV(e,t+1,1),day:FV(e,t+2,1)},null,t+3]}),OV,$V,EV),cC=LV(MV,OV,$V,EV),uC=LV(zV,OV,$V,EV),dC=LV(OV,$V,EV);const pC=LV(OV);const hC=RV(/(\d{4})-(\d\d)-(\d\d)/,jV),mC=RV(JV),bC=LV(OV,$V,EV);const fC="Invalid Duration",yC={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048e5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864e5},hours:{minutes:60,seconds:3600,milliseconds:36e5},minutes:{seconds:60,milliseconds:6e4},seconds:{milliseconds:1e3}},gC={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536e3,milliseconds:31536e6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624e5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592e3,milliseconds:2592e6},...yC},vC=365.2425,ZC=30.436875,xC={years:{quarters:4,months:12,weeks:vC/7,days:vC,hours:24*vC,minutes:525949.2,seconds:525949.2*60,milliseconds:525949.2*60*1e3},quarters:{months:3,weeks:vC/28,days:vC/4,hours:24*vC/4,minutes:131487.3,seconds:525949.2*60/4,milliseconds:7889237999.999999},months:{weeks:ZC/7,days:ZC,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746e3},...yC},XC=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],GC=XC.slice(0).reverse();function IC(e,t,n=!1){const i={values:n?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new VC(i)}function WC(e,t){let n=t.milliseconds??0;for(const i of GC.slice(1))t[i]&&(n+=t[i]*e[i].milliseconds);return n}function kC(e,t){const n=WC(e,t)<0?-1:1;XC.reduceRight(((i,o)=>{if(Jk(t[o]))return i;if(i){const l=t[i]*n,r=e[o][i],a=Math.floor(l/r);t[o]+=a*n,t[i]-=a*r*n}return o}),null),XC.reduce(((n,i)=>{if(Jk(t[i]))return n;if(n){const o=t[n]%1;t[n]-=o,t[i]+=o*e[n][i]}return i}),null)}class VC{constructor(e){const t="longterm"===e.conversionAccuracy||!1;let n=t?xC:gC;e.matrix&&(n=e.matrix),this.values=e.values,this.loc=e.loc||dk.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=n,this.isLuxonDuration=!0}static fromMillis(e,t){return VC.fromObject({milliseconds:e},t)}static fromObject(e,t={}){if(null==e||"object"!=typeof e)throw new vW("Duration.fromObject: argument expected to be an object, got "+(null===e?"null":typeof e));return new VC({values:uV(e,VC.normalizeUnit),loc:dk.fromObject(t),conversionAccuracy:t.conversionAccuracy,matrix:t.matrix})}static fromDurationLike(e){if(jk(e))return VC.fromMillis(e);if(VC.isDuration(e))return e;if("object"==typeof e)return VC.fromObject(e);throw new vW(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,t){const[n]=function(e){return YV(e,[PV,AV])}(e);return n?VC.fromObject(n,t):VC.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,t){const[n]=function(e){return YV(e,[UV,pC])}(e);return n?VC.fromObject(n,t):VC.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,t=null){if(!e)throw new vW("need to specify a reason the Duration is invalid");const n=e instanceof Wk?e:new Wk(e,t);if(Ik.throwOnInvalid)throw new fW(n);return new VC({invalid:n})}static normalizeUnit(e){const t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!t)throw new gW(e);return t}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,t={}){const n={...t,floor:!1!==t.round&&!1!==t.floor};return this.isValid?CV.create(this.loc,n).formatDurationFromString(this,e):fC}toHuman(e={}){if(!this.isValid)return fC;const t=XC.map((t=>{const n=this.values[t];return Jk(n)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:t.slice(0,-1)}).format(n)})).filter((e=>e));return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(t)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return 0!==this.years&&(e+=this.years+"Y"),(0!==this.months||0!==this.quarters)&&(e+=this.months+3*this.quarters+"M"),0!==this.weeks&&(e+=this.weeks+"W"),0!==this.days&&(e+=this.days+"D"),(0!==this.hours||0!==this.minutes||0!==this.seconds||0!==this.milliseconds)&&(e+="T"),0!==this.hours&&(e+=this.hours+"H"),0!==this.minutes&&(e+=this.minutes+"M"),(0!==this.seconds||0!==this.milliseconds)&&(e+=qk(this.seconds+this.milliseconds/1e3,3)+"S"),"P"===e&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const t=this.toMillis();return t<0||t>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},XS.fromMillis(t,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?WC(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const t=VC.fromDurationLike(e),n={};for(const e of XC)(Uk(t.values,e)||Uk(this.values,e))&&(n[e]=t.get(e)+this.get(e));return IC(this,{values:n},!0)}minus(e){if(!this.isValid)return this;const t=VC.fromDurationLike(e);return this.plus(t.negate())}mapUnits(e){if(!this.isValid)return this;const t={};for(const n of Object.keys(this.values))t[n]=cV(e(this.values[n],n));return IC(this,{values:t},!0)}get(e){return this[VC.normalizeUnit(e)]}set(e){if(!this.isValid)return this;return IC(this,{values:{...this.values,...uV(e,VC.normalizeUnit)}})}reconfigure({locale:e,numberingSystem:t,conversionAccuracy:n,matrix:i}={}){return IC(this,{loc:this.loc.clone({locale:e,numberingSystem:t}),matrix:i,conversionAccuracy:n})}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return kC(this.matrix,e),IC(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=function(e){const t={};for(const[n,i]of Object.entries(e))0!==i&&(t[n]=i);return t}(this.normalize().shiftToAll().toObject());return IC(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(0===e.length)return this;e=e.map((e=>VC.normalizeUnit(e)));const t={},n={},i=this.toObject();let o;for(const l of XC)if(e.indexOf(l)>=0){o=l;let e=0;for(const t in n)e+=this.matrix[t][l]*n[t],n[t]=0;jk(i[l])&&(e+=i[l]);const r=Math.trunc(e);t[l]=r,n[l]=(1e3*e-1e3*r)/1e3}else jk(i[l])&&(n[l]=i[l]);for(const e in n)0!==n[e]&&(t[o]+=e===o?n[e]:n[e]/this.matrix[o][e]);return kC(this.matrix,t),IC(this,{values:t},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const t of Object.keys(this.values))e[t]=0===this.values[t]?0:-this.values[t];return IC(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function t(e,t){return void 0===e||0===e?void 0===t||0===t:e===t}for(const n of XC)if(!t(this.values[n],e.values[n]))return!1;return!0}}const CC="Invalid Interval";class SC{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,t=null){if(!e)throw new vW("need to specify a reason the Interval is invalid");const n=e instanceof Wk?e:new Wk(e,t);if(Ik.throwOnInvalid)throw new bW(n);return new SC({invalid:n})}static fromDateTimes(e,t){const n=GS(e),i=GS(t),o=function(e,t){return e&&e.isValid?t&&t.isValid?t<e?SC.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null:SC.invalid("missing or invalid end"):SC.invalid("missing or invalid start")}(n,i);return o??new SC({start:n,end:i})}static after(e,t){const n=VC.fromDurationLike(t),i=GS(e);return SC.fromDateTimes(i,i.plus(n))}static before(e,t){const n=VC.fromDurationLike(t),i=GS(e);return SC.fromDateTimes(i.minus(n),i)}static fromISO(e,t){const[n,i]=(e||"").split("/",2);if(n&&i){let e,o,l,r;try{e=XS.fromISO(n,t),o=e.isValid}catch{o=!1}try{l=XS.fromISO(i,t),r=l.isValid}catch{r=!1}if(o&&r)return SC.fromDateTimes(e,l);if(o){const n=VC.fromISO(i,t);if(n.isValid)return SC.after(e,n)}else if(r){const e=VC.fromISO(n,t);if(e.isValid)return SC.before(l,e)}}return SC.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",t){if(!this.isValid)return NaN;const n=this.start.startOf(e,t);let i;return i=null!=t&&t.useLocaleWeeks?this.end.reconfigure({locale:n.locale}):this.end,i=i.startOf(e,t),Math.floor(i.diff(n,e).get(e))+(i.valueOf()!==this.end.valueOf())}hasSame(e){return!!this.isValid&&(this.isEmpty()||this.e.minus(1).hasSame(this.s,e))}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return!!this.isValid&&this.s>e}isBefore(e){return!!this.isValid&&this.e<=e}contains(e){return!!this.isValid&&(this.s<=e&&this.e>e)}set({start:e,end:t}={}){return this.isValid?SC.fromDateTimes(e||this.s,t||this.e):this}splitAt(...e){if(!this.isValid)return[];const t=e.map(GS).filter((e=>this.contains(e))).sort(((e,t)=>e.toMillis()-t.toMillis())),n=[];let{s:i}=this,o=0;for(;i<this.e;){const e=t[o]||this.e,l=+e>+this.e?this.e:e;n.push(SC.fromDateTimes(i,l)),i=l,o+=1}return n}splitBy(e){const t=VC.fromDurationLike(e);if(!this.isValid||!t.isValid||0===t.as("milliseconds"))return[];let n,{s:i}=this,o=1;const l=[];for(;i<this.e;){const e=this.start.plus(t.mapUnits((e=>e*o)));n=+e>+this.e?this.e:e,l.push(SC.fromDateTimes(i,n)),i=n,o+=1}return l}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return!!this.isValid&&+this.e==+e.s}abutsEnd(e){return!!this.isValid&&+e.e==+this.s}engulfs(e){return!!this.isValid&&(this.s<=e.s&&this.e>=e.e)}equals(e){return!(!this.isValid||!e.isValid)&&(this.s.equals(e.s)&&this.e.equals(e.e))}intersection(e){if(!this.isValid)return this;const t=this.s>e.s?this.s:e.s,n=this.e<e.e?this.e:e.e;return t>=n?null:SC.fromDateTimes(t,n)}union(e){if(!this.isValid)return this;const t=this.s<e.s?this.s:e.s,n=this.e>e.e?this.e:e.e;return SC.fromDateTimes(t,n)}static merge(e){const[t,n]=e.sort(((e,t)=>e.s-t.s)).reduce((([e,t],n)=>t?t.overlaps(n)||t.abutsStart(n)?[e,t.union(n)]:[e.concat([t]),n]:[e,n]),[[],null]);return n&&t.push(n),t}static xor(e){let t=null,n=0;const i=[],o=e.map((e=>[{time:e.s,type:"s"},{time:e.e,type:"e"}])),l=Array.prototype.concat(...o).sort(((e,t)=>e.time-t.time));for(const e of l)n+="s"===e.type?1:-1,1===n?t=e.time:(t&&+t!=+e.time&&i.push(SC.fromDateTimes(t,e.time)),t=null);return SC.merge(i)}difference(...e){return SC.xor([this].concat(e)).map((e=>this.intersection(e))).filter((e=>e&&!e.isEmpty()))}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:CC}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=IW,t={}){return this.isValid?CV.create(this.s.loc.clone(t),e).formatInterval(this):CC}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:CC}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:CC}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:CC}toFormat(e,{separator:t=" – "}={}){return this.isValid?`${this.s.toFormat(e)}${t}${this.e.toFormat(e)}`:CC}toDuration(e,t){return this.isValid?this.e.diff(this.s,e,t):VC.invalid(this.invalidReason)}mapEndpoints(e){return SC.fromDateTimes(e(this.s),e(this.e))}}class RC{static hasDST(e=Ik.defaultZone){const t=XS.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(e){return _W.isValidZone(e)}static normalizeZone(e){return bk(e,Ik.defaultZone)}static getStartOfWeek({locale:e=null,locObj:t=null}={}){return(t||dk.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:t=null}={}){return(t||dk.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:t=null}={}){return(t||dk.create(e)).getWeekendDays().slice()}static months(e="long",{locale:t=null,numberingSystem:n=null,locObj:i=null,outputCalendar:o="gregory"}={}){return(i||dk.create(t,n,o)).months(e)}static monthsFormat(e="long",{locale:t=null,numberingSystem:n=null,locObj:i=null,outputCalendar:o="gregory"}={}){return(i||dk.create(t,n,o)).months(e,!0)}static weekdays(e="long",{locale:t=null,numberingSystem:n=null,locObj:i=null}={}){return(i||dk.create(t,n,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:t=null,numberingSystem:n=null,locObj:i=null}={}){return(i||dk.create(t,n,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return dk.create(e).meridiems()}static eras(e="short",{locale:t=null}={}){return dk.create(t,null,"gregory").eras(e)}static features(){return{relative:Ok(),localeWeek:$k()}}}function LC(e,t){const n=e=>e.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),i=n(t)-n(e);return Math.floor(VC.fromMillis(i).as("days"))}function YC(e,t,n,i){let[o,l,r,a]=function(e,t,n){const i=[["years",(e,t)=>t.year-e.year],["quarters",(e,t)=>t.quarter-e.quarter+4*(t.year-e.year)],["months",(e,t)=>t.month-e.month+12*(t.year-e.year)],["weeks",(e,t)=>{const n=LC(e,t);return(n-n%7)/7}],["days",LC]],o={},l=e;let r,a;for(const[s,c]of i)n.indexOf(s)>=0&&(r=s,o[s]=c(e,t),a=l.plus(o),a>t?(o[s]--,(e=l.plus(o))>t&&(a=e,o[s]--,e=l.plus(o))):e=a);return[e,o,a,r]}(e,t,n);const s=t-o,c=n.filter((e=>["hours","minutes","seconds","milliseconds"].indexOf(e)>=0));0===c.length&&(r<t&&(r=o.plus({[a]:1})),r!==o&&(l[a]=(l[a]||0)+s/(r-o)));const u=VC.fromObject(l,i);return c.length>0?VC.fromMillis(s,i).shiftTo(...c).plus(u):u}const TC={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},wC={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},NC=TC.hanidec.replace(/[\[|\]]/g,"").split("");function KC({numberingSystem:e},t=""){return new RegExp(`${TC[e||"latn"]}${t}`)}const HC="missing Intl.DateTimeFormat.formatToParts support";function MC(e,t=(e=>e)){return{regex:e,deser:([e])=>t(function(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let n=0;n<e.length;n++){const i=e.charCodeAt(n);if(-1!==e[n].search(TC.hanidec))t+=NC.indexOf(e[n]);else for(const e in wC){const[n,o]=wC[e];i>=n&&i<=o&&(t+=i-n)}}return parseInt(t,10)}return t}(e))}}const zC="[  ]",JC=new RegExp(zC,"g");function jC(e){return e.replace(/\./g,"\\.?").replace(JC,zC)}function FC(e){return e.replace(/\./g,"").replace(JC," ").toLowerCase()}function OC(e,t){return null===e?null:{regex:RegExp(e.map(jC).join("|")),deser:([n])=>e.findIndex((e=>FC(n)===FC(e)))+t}}function $C(e,t){return{regex:e,deser:([,e,t])=>sV(e,t),groups:t}}function EC(e){return{regex:e,deser:([e])=>e}}function UC(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}const PC={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};let AC=null;function BC(e,t){return Array.prototype.concat(...e.map((e=>function(e,t){if(e.literal)return e;const n=DC(CV.macroTokenToFormatOpts(e.val),t);return null==n||n.includes(void 0)?e:n}(e,t))))}function QC(e,t,n){const i=BC(CV.parseFormat(n),e),o=i.map((t=>function(e,t){const n=KC(t),i=KC(t,"{2}"),o=KC(t,"{3}"),l=KC(t,"{4}"),r=KC(t,"{6}"),a=KC(t,"{1,2}"),s=KC(t,"{1,3}"),c=KC(t,"{1,6}"),u=KC(t,"{1,9}"),d=KC(t,"{2,4}"),p=KC(t,"{4,6}"),h=e=>({regex:RegExp(UC(e.val)),deser:([e])=>e,literal:!0}),m=(m=>{if(e.literal)return h(m);switch(m.val){case"G":return OC(t.eras("short"),0);case"GG":return OC(t.eras("long"),0);case"y":return MC(c);case"yy":case"kk":return MC(d,rV);case"yyyy":case"kkkk":return MC(l);case"yyyyy":return MC(p);case"yyyyyy":return MC(r);case"M":case"L":case"d":case"H":case"h":case"m":case"q":case"s":case"W":return MC(a);case"MM":case"LL":case"dd":case"HH":case"hh":case"mm":case"qq":case"ss":case"WW":return MC(i);case"MMM":return OC(t.months("short",!0),1);case"MMMM":return OC(t.months("long",!0),1);case"LLL":return OC(t.months("short",!1),1);case"LLLL":return OC(t.months("long",!1),1);case"o":case"S":return MC(s);case"ooo":case"SSS":return MC(o);case"u":return EC(u);case"uu":return EC(a);case"uuu":case"E":case"c":return MC(n);case"a":return OC(t.meridiems(),0);case"EEE":return OC(t.weekdays("short",!1),1);case"EEEE":return OC(t.weekdays("long",!1),1);case"ccc":return OC(t.weekdays("short",!0),1);case"cccc":return OC(t.weekdays("long",!0),1);case"Z":case"ZZ":return $C(new RegExp(`([+-]${a.source})(?::(${i.source}))?`),2);case"ZZZ":return $C(new RegExp(`([+-]${a.source})(${i.source})?`),2);case"z":return EC(/[a-z_+-/]{1,256}?/i);case" ":return EC(/[^\S\n\r]/);default:return h(m)}})(e)||{invalidReason:HC};return m.token=e,m}(t,e))),l=o.find((e=>e.invalidReason));if(l)return{input:t,tokens:i,invalidReason:l.invalidReason};{const[e,n]=function(e){return[`^${e.map((e=>e.regex)).reduce(((e,t)=>`${e}(${t.source})`),"")}$`,e]}(o),l=RegExp(e,"i"),[r,a]=function(e,t,n){const i=e.match(t);if(i){const e={};let t=1;for(const o in n)if(Uk(n,o)){const l=n[o],r=l.groups?l.groups+1:1;!l.literal&&l.token&&(e[l.token.val[0]]=l.deser(i.slice(t,t+r))),t+=r}return[i,e]}return[i,{}]}(t,l,n),[s,c,u]=a?function(e){let t,n=null;return Jk(e.z)||(n=_W.create(e.z)),Jk(e.Z)||(n||(n=new hk(e.Z)),t=e.Z),Jk(e.q)||(e.M=3*(e.q-1)+1),Jk(e.h)||(e.h<12&&1===e.a?e.h+=12:12===e.h&&0===e.a&&(e.h=0)),0===e.G&&e.y&&(e.y=-e.y),Jk(e.u)||(e.S=_k(e.u)),[Object.keys(e).reduce(((t,n)=>{const i=(e=>{switch(e){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}})(n);return i&&(t[i]=e[n]),t}),{}),n,t]}(a):[null,null,void 0];if(Uk(a,"a")&&Uk(a,"H"))throw new yW("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:i,regex:l,rawMatches:r,matches:a,result:s,zone:c,specificOffset:u}}}function DC(e,t){if(!e)return null;const n=CV.create(t,e).dtFormatter((AC||(AC=XS.fromMillis(1555555555555)),AC)),i=n.formatToParts(),o=n.resolvedOptions();return i.map((t=>function(e,t,n){const{type:i,value:o}=e;if("literal"===i){const e=/^\s+$/.test(o);return{literal:!e,val:e?" ":o}}const l=t[i];let r=i;"hour"===i&&(r=null!=t.hour12?t.hour12?"hour12":"hour24":null!=t.hourCycle?"h11"===t.hourCycle||"h12"===t.hourCycle?"hour12":"hour24":n.hour12?"hour12":"hour24");let a=PC[r];if("object"==typeof a&&(a=a[l]),a)return{literal:!1,val:a}}(t,e,o)))}const _C="Invalid DateTime",qC=864e13;function eS(e){return new Wk("unsupported zone",`the zone "${e.name}" is not supported`)}function tS(e){return null===e.weekData&&(e.weekData=Tk(e.c)),e.weekData}function nS(e){return null===e.localWeekData&&(e.localWeekData=Tk(e.c,e.loc.getMinDaysInFirstWeek(),e.loc.getStartOfWeek())),e.localWeekData}function iS(e,t){const n={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new XS({...n,...t,old:n})}function oS(e,t,n){let i=e-60*t*1e3;const o=n.offset(i);if(t===o)return[i,t];i-=60*(o-t)*1e3;const l=n.offset(i);return o===l?[i,o]:[e-60*Math.min(o,l)*1e3,Math.max(o,l)]}function lS(e,t){const n=new Date(e+=60*t*1e3);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function rS(e,t,n){return oS(iV(e),t,n)}function aS(e,t){const n=e.o,i=e.c.year+Math.trunc(t.years),o=e.c.month+Math.trunc(t.months)+3*Math.trunc(t.quarters),l={...e.c,year:i,month:o,day:Math.min(e.c.day,nV(i,o))+Math.trunc(t.days)+7*Math.trunc(t.weeks)},r=VC.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),a=iV(l);let[s,c]=oS(a,n,e.zone);return 0!==r&&(s+=r,c=e.zone.offset(s)),{ts:s,o:c}}function sS(e,t,n,i,o,l){const{setZone:r,zone:a}=n;if(e&&0!==Object.keys(e).length||t){const i=t||a,o=XS.fromObject(e,{...n,zone:i,specificOffset:l});return r?o:o.setZone(a)}return XS.invalid(new Wk("unparsable",`the input "${o}" can't be parsed as ${i}`))}function cS(e,t,n=!0){return e.isValid?CV.create(dk.create("en-US"),{allowZ:n,forceSimple:!0}).formatDateTimeFromString(e,t):null}function uS(e,t){const n=e.c.year>9999||e.c.year<0;let i="";return n&&e.c.year>=0&&(i+="+"),i+=Bk(e.c.year,n?6:4),t?(i+="-",i+=Bk(e.c.month),i+="-",i+=Bk(e.c.day)):(i+=Bk(e.c.month),i+=Bk(e.c.day)),i}function dS(e,t,n,i,o,l){let r=Bk(e.c.hour);return t?(r+=":",r+=Bk(e.c.minute),(0!==e.c.millisecond||0!==e.c.second||!n)&&(r+=":")):r+=Bk(e.c.minute),(0!==e.c.millisecond||0!==e.c.second||!n)&&(r+=Bk(e.c.second),(0!==e.c.millisecond||!i)&&(r+=".",r+=Bk(e.c.millisecond,3))),o&&(e.isOffsetFixed&&0===e.offset&&!l?r+="Z":e.o<0?(r+="-",r+=Bk(Math.trunc(-e.o/60)),r+=":",r+=Bk(Math.trunc(-e.o%60))):(r+="+",r+=Bk(Math.trunc(e.o/60)),r+=":",r+=Bk(Math.trunc(e.o%60)))),l&&(r+="["+e.zone.ianaName+"]"),r}const pS={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},hS={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},mS={ordinal:1,hour:0,minute:0,second:0,millisecond:0},bS=["year","month","day","hour","minute","second","millisecond"],fS=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],yS=["year","ordinal","hour","minute","second","millisecond"];function gS(e){switch(e.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return function(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new gW(e);return t}(e)}}function vS(e,t){const n=bk(t.zone,Ik.defaultZone),i=dk.fromObject(t),o=Ik.now();let l,r;if(Jk(e.year))l=o;else{for(const t of bS)Jk(e[t])&&(e[t]=pS[t]);const t=Mk(e)||zk(e);if(t)return XS.invalid(t);const i=n.offset(o);[l,r]=rS(e,i,n)}return new XS({ts:l,zone:n,loc:i,o:r})}function ZS(e,t,n){const i=!!Jk(n.round)||n.round,o=(e,o)=>(e=qk(e,i||n.calendary?0:2,!0),t.loc.clone(n).relFormatter(n).format(e,o)),l=i=>n.calendary?t.hasSame(e,i)?0:t.startOf(i).diff(e.startOf(i),i).get(i):t.diff(e,i).get(i);if(n.unit)return o(l(n.unit),n.unit);for(const e of n.units){const t=l(e);if(Math.abs(t)>=1)return o(t,e)}return o(e>t?-0:0,n.units[n.units.length-1])}function xS(e){let t,n={};return e.length>0&&"object"==typeof e[e.length-1]?(n=e[e.length-1],t=Array.from(e).slice(0,e.length-1)):t=Array.from(e),[n,t]}class XS{constructor(e){const t=e.zone||Ik.defaultZone;let n=e.invalid||(Number.isNaN(e.ts)?new Wk("invalid input"):null)||(t.isValid?null:eS(t));this.ts=Jk(e.ts)?Ik.now():e.ts;let i=null,o=null;if(!n)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(t))[i,o]=[e.old.c,e.old.o];else{const e=t.offset(this.ts);i=lS(this.ts,e),n=Number.isNaN(i.year)?new Wk("invalid input"):null,i=n?null:i,o=n?null:e}this._zone=t,this.loc=e.loc||dk.create(),this.invalid=n,this.weekData=null,this.localWeekData=null,this.c=i,this.o=o,this.isLuxonDateTime=!0}static now(){return new XS({})}static local(){const[e,t]=xS(arguments),[n,i,o,l,r,a,s]=t;return vS({year:n,month:i,day:o,hour:l,minute:r,second:a,millisecond:s},e)}static utc(){const[e,t]=xS(arguments),[n,i,o,l,r,a,s]=t;return e.zone=hk.utcInstance,vS({year:n,month:i,day:o,hour:l,minute:r,second:a,millisecond:s},e)}static fromJSDate(e,t={}){const n=function(e){return"[object Date]"===Object.prototype.toString.call(e)}(e)?e.valueOf():NaN;if(Number.isNaN(n))return XS.invalid("invalid input");const i=bk(t.zone,Ik.defaultZone);return i.isValid?new XS({ts:n,zone:i,loc:dk.fromObject(t)}):XS.invalid(eS(i))}static fromMillis(e,t={}){if(jk(e))return e<-qC||e>qC?XS.invalid("Timestamp out of range"):new XS({ts:e,zone:bk(t.zone,Ik.defaultZone),loc:dk.fromObject(t)});throw new vW(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,t={}){if(jk(e))return new XS({ts:1e3*e,zone:bk(t.zone,Ik.defaultZone),loc:dk.fromObject(t)});throw new vW("fromSeconds requires a numerical input")}static fromObject(e,t={}){e=e||{};const n=bk(t.zone,Ik.defaultZone);if(!n.isValid)return XS.invalid(eS(n));const i=dk.fromObject(t),o=uV(e,gS),{minDaysInFirstWeek:l,startOfWeek:r}=Hk(o,i),a=Ik.now(),s=Jk(t.specificOffset)?n.offset(a):t.specificOffset,c=!Jk(o.ordinal),u=!Jk(o.year),d=!Jk(o.month)||!Jk(o.day),p=u||d,h=o.weekYear||o.weekNumber;if((p||c)&&h)throw new yW("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(d&&c)throw new yW("Can't mix ordinal dates with month/day");const m=h||o.weekday&&!p;let b,f,y=lS(a,s);m?(b=fS,f=hS,y=Tk(y,l,r)):c?(b=yS,f=mS,y=Nk(y)):(b=bS,f=pS);let g=!1;for(const e of b){Jk(o[e])?o[e]=g?f[e]:y[e]:g=!0}const v=m?function(e,t=4,n=1){const i=Fk(e.weekYear),o=Ak(e.weekNumber,1,lV(e.weekYear,t,n)),l=Ak(e.weekday,1,7);return i?o?!l&&Ck("weekday",e.weekday):Ck("week",e.weekNumber):Ck("weekYear",e.weekYear)}(o,l,r):c?function(e){const t=Fk(e.year),n=Ak(e.ordinal,1,tV(e.year));return t?!n&&Ck("ordinal",e.ordinal):Ck("year",e.year)}(o):Mk(o),Z=v||zk(o);if(Z)return XS.invalid(Z);const x=m?wk(o,l,r):c?Kk(o):o,[X,G]=rS(x,s,n),I=new XS({ts:X,zone:n,o:G,loc:i});return o.weekday&&p&&e.weekday!==I.weekday?XS.invalid("mismatched weekday",`you can't specify both a weekday of ${o.weekday} and a date of ${I.toISO()}`):I}static fromISO(e,t={}){const[n,i]=function(e){return YV(e,[oC,sC],[lC,cC],[rC,uC],[aC,dC])}(e);return sS(n,i,t,"ISO 8601",e)}static fromRFC2822(e,t={}){const[n,i]=function(e){return YV(function(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}(e),[DV,_V])}(e);return sS(n,i,t,"RFC 2822",e)}static fromHTTP(e,t={}){const[n,i]=function(e){return YV(e,[qV,nC],[eC,nC],[tC,iC])}(e);return sS(n,i,t,"HTTP",t)}static fromFormat(e,t,n={}){if(Jk(e)||Jk(t))throw new vW("fromFormat requires an input string and a format");const{locale:i=null,numberingSystem:o=null}=n,l=dk.fromOpts({locale:i,numberingSystem:o,defaultToEN:!0}),[r,a,s,c]=function(e,t,n){const{result:i,zone:o,specificOffset:l,invalidReason:r}=QC(e,t,n);return[i,o,l,r]}(l,e,t);return c?XS.invalid(c):sS(r,a,n,`format ${t}`,e,s)}static fromString(e,t,n={}){return XS.fromFormat(e,t,n)}static fromSQL(e,t={}){const[n,i]=function(e){return YV(e,[hC,sC],[mC,bC])}(e);return sS(n,i,t,"SQL",e)}static invalid(e,t=null){if(!e)throw new vW("need to specify a reason the DateTime is invalid");const n=e instanceof Wk?e:new Wk(e,t);if(Ik.throwOnInvalid)throw new mW(n);return new XS({invalid:n})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,t={}){const n=DC(e,dk.fromObject(t));return n?n.map((e=>e?e.val:null)).join(""):null}static expandFormat(e,t={}){return BC(CV.parseFormat(e),dk.fromObject(t)).map((e=>e.val)).join("")}get(e){return this[e]}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?tS(this).weekYear:NaN}get weekNumber(){return this.isValid?tS(this).weekNumber:NaN}get weekday(){return this.isValid?tS(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?nS(this).weekday:NaN}get localWeekNumber(){return this.isValid?nS(this).weekNumber:NaN}get localWeekYear(){return this.isValid?nS(this).weekYear:NaN}get ordinal(){return this.isValid?Nk(this.c).ordinal:NaN}get monthShort(){return this.isValid?RC.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?RC.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?RC.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?RC.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return!this.isOffsetFixed&&(this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset)}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,t=6e4,n=iV(this.c),i=this.zone.offset(n-e),o=this.zone.offset(n+e),l=this.zone.offset(n-i*t),r=this.zone.offset(n-o*t);if(l===r)return[this];const a=n-l*t,s=n-r*t,c=lS(a,l),u=lS(s,r);return c.hour===u.hour&&c.minute===u.minute&&c.second===u.second&&c.millisecond===u.millisecond?[iS(this,{ts:a}),iS(this,{ts:s})]:[this]}get isInLeapYear(){return eV(this.year)}get daysInMonth(){return nV(this.year,this.month)}get daysInYear(){return this.isValid?tV(this.year):NaN}get weeksInWeekYear(){return this.isValid?lV(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?lV(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:t,numberingSystem:n,calendar:i}=CV.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t,numberingSystem:n,outputCalendar:i}}toUTC(e=0,t={}){return this.setZone(hk.instance(e),t)}toLocal(){return this.setZone(Ik.defaultZone)}setZone(e,{keepLocalTime:t=!1,keepCalendarTime:n=!1}={}){if((e=bk(e,Ik.defaultZone)).equals(this.zone))return this;if(e.isValid){let i=this.ts;if(t||n){const t=e.offset(this.ts),n=this.toObject();[i]=rS(n,t,e)}return iS(this,{ts:i,zone:e})}return XS.invalid(eS(e))}reconfigure({locale:e,numberingSystem:t,outputCalendar:n}={}){return iS(this,{loc:this.loc.clone({locale:e,numberingSystem:t,outputCalendar:n})})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const t=uV(e,gS),{minDaysInFirstWeek:n,startOfWeek:i}=Hk(t,this.loc),o=!Jk(t.weekYear)||!Jk(t.weekNumber)||!Jk(t.weekday),l=!Jk(t.ordinal),r=!Jk(t.year),a=!Jk(t.month)||!Jk(t.day),s=r||a,c=t.weekYear||t.weekNumber;if((s||l)&&c)throw new yW("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(a&&l)throw new yW("Can't mix ordinal dates with month/day");let u;o?u=wk({...Tk(this.c,n,i),...t},n,i):Jk(t.ordinal)?(u={...this.toObject(),...t},Jk(t.day)&&(u.day=Math.min(nV(u.year,u.month),u.day))):u=Kk({...Nk(this.c),...t});const[d,p]=rS(u,this.o,this.zone);return iS(this,{ts:d,o:p})}plus(e){if(!this.isValid)return this;return iS(this,aS(this,VC.fromDurationLike(e)))}minus(e){if(!this.isValid)return this;return iS(this,aS(this,VC.fromDurationLike(e).negate()))}startOf(e,{useLocaleWeeks:t=!1}={}){if(!this.isValid)return this;const n={},i=VC.normalizeUnit(e);switch(i){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0}if("weeks"===i)if(t){const e=this.loc.getStartOfWeek(),{weekday:t}=this;t<e&&(n.weekNumber=this.weekNumber-1),n.weekday=e}else n.weekday=1;if("quarters"===i){const e=Math.ceil(this.month/3);n.month=3*(e-1)+1}return this.set(n)}endOf(e,t){return this.isValid?this.plus({[e]:1}).startOf(e,t).minus(1):this}toFormat(e,t={}){return this.isValid?CV.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):_C}toLocaleString(e=IW,t={}){return this.isValid?CV.create(this.loc.clone(t),e).formatDateTime(this):_C}toLocaleParts(e={}){return this.isValid?CV.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:t=!1,suppressMilliseconds:n=!1,includeOffset:i=!0,extendedZone:o=!1}={}){if(!this.isValid)return null;const l="extended"===e;let r=uS(this,l);return r+="T",r+=dS(this,l,t,n,i,o),r}toISODate({format:e="extended"}={}){return this.isValid?uS(this,"extended"===e):null}toISOWeekDate(){return cS(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:t=!1,includeOffset:n=!0,includePrefix:i=!1,extendedZone:o=!1,format:l="extended"}={}){return this.isValid?(i?"T":"")+dS(this,"extended"===l,t,e,n,o):null}toRFC2822(){return cS(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return cS(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?uS(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:t=!1,includeOffsetSpace:n=!0}={}){let i="HH:mm:ss.SSS";return(t||e)&&(n&&(i+=" "),t?i+="z":e&&(i+="ZZ")),cS(this,i,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():_C}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const t={...this.c};return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,t="milliseconds",n={}){if(!this.isValid||!e.isValid)return VC.invalid("created by diffing an invalid DateTime");const i={locale:this.locale,numberingSystem:this.numberingSystem,...n},o=function(e){return Array.isArray(e)?e:[e]}(t).map(VC.normalizeUnit),l=e.valueOf()>this.valueOf(),r=YC(l?this:e,l?e:this,o,i);return l?r.negate():r}diffNow(e="milliseconds",t={}){return this.diff(XS.now(),e,t)}until(e){return this.isValid?SC.fromDateTimes(this,e):this}hasSame(e,t,n){if(!this.isValid)return!1;const i=e.valueOf(),o=this.setZone(e.zone,{keepLocalTime:!0});return o.startOf(t,n)<=i&&i<=o.endOf(t,n)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const t=e.base||XS.fromObject({},{zone:this.zone}),n=e.padding?this<t?-e.padding:e.padding:0;let i=["years","months","days","hours","minutes","seconds"],o=e.unit;return Array.isArray(e.unit)&&(i=e.unit,o=void 0),ZS(t,this.plus(n),{...e,numeric:"always",units:i,unit:o})}toRelativeCalendar(e={}){return this.isValid?ZS(e.base||XS.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(XS.isDateTime))throw new vW("min requires all arguments be DateTimes");return Ek(e,(e=>e.valueOf()),Math.min)}static max(...e){if(!e.every(XS.isDateTime))throw new vW("max requires all arguments be DateTimes");return Ek(e,(e=>e.valueOf()),Math.max)}static fromFormatExplain(e,t,n={}){const{locale:i=null,numberingSystem:o=null}=n;return QC(dk.fromOpts({locale:i,numberingSystem:o,defaultToEN:!0}),e,t)}static fromStringExplain(e,t,n={}){return XS.fromFormatExplain(e,t,n)}static get DATE_SHORT(){return IW}static get DATE_MED(){return WW}static get DATE_MED_WITH_WEEKDAY(){return kW}static get DATE_FULL(){return VW}static get DATE_HUGE(){return CW}static get TIME_SIMPLE(){return SW}static get TIME_WITH_SECONDS(){return RW}static get TIME_WITH_SHORT_OFFSET(){return LW}static get TIME_WITH_LONG_OFFSET(){return YW}static get TIME_24_SIMPLE(){return TW}static get TIME_24_WITH_SECONDS(){return wW}static get TIME_24_WITH_SHORT_OFFSET(){return NW}static get TIME_24_WITH_LONG_OFFSET(){return KW}static get DATETIME_SHORT(){return HW}static get DATETIME_SHORT_WITH_SECONDS(){return MW}static get DATETIME_MED(){return zW}static get DATETIME_MED_WITH_SECONDS(){return JW}static get DATETIME_MED_WITH_WEEKDAY(){return jW}static get DATETIME_FULL(){return FW}static get DATETIME_FULL_WITH_SECONDS(){return OW}static get DATETIME_HUGE(){return $W}static get DATETIME_HUGE_WITH_SECONDS(){return EW}}function GS(e){if(XS.isDateTime(e))return e;if(e&&e.valueOf&&jk(e.valueOf()))return XS.fromJSDate(e);if(e&&"object"==typeof e)return XS.fromObject(e);throw new vW(`Unknown datetime argument: ${e}, of type ${typeof e}`)}function IS({collections:e,lww:t},{tableIds:n,tableColumnIds:i,relationshipIds:o,indexIds:l,indexColumnIds:r,memoIds:a}){Dr(e).collection("tableEntities").removeMany(n),Dr(e).collection("tableColumnEntities").removeMany(i),Dr(e).collection("relationshipEntities").removeMany(o),Dr(e).collection("indexEntities").removeMany(l),Dr(e).collection("indexColumnEntities").removeMany(r),Dr(e).collection("memoEntities").removeMany(a),[...n,...i,...o,...l,...r,...a].forEach((e=>Reflect.deleteProperty(t,e)))}const WS=jl(["tableEntities","tableColumnEntities","relationshipEntities","indexEntities","indexColumnEntities","memoEntities"]);class kS{async run(e){const t=Er(JSON.parse(e)),{doc:{tableIds:n,memoIds:i,indexIds:o,relationshipIds:l},collections:r,lww:a}=t,s=jl(n),c=jl(i),u=jl(o),d=jl(l),p=VS(XS.now()),h=Dr(r).collection("tableEntities"),m=Dr(r).collection("tableColumnEntities"),b=Dr(r).collection("indexEntities"),f=Dr(r).collection("indexColumnEntities"),y=Dr(r).collection("relationshipEntities"),g=Dr(r).collection("memoEntities"),v=new Set(h.selectAll().filter(p(s)).map((({id:e})=>e))),Z=new Set,x=new Set(y.selectAll().filter(p(d)).map((({id:e})=>e))),X=new Set(b.selectAll().filter(p(u)).map((({id:e})=>e))),G=new Set,I=new Set(g.selectAll().filter(p(c)).map((({id:e})=>e)));m.selectAll().filter((({tableId:e})=>v.has(e))).forEach((({id:e})=>Z.add(e))),y.selectAll().filter((({id:e,start:t,end:n})=>!x.has(e)&&(v.has(t.tableId)||v.has(n.tableId)))).forEach((({id:e})=>x.add(e))),b.selectAll().filter((({id:e,tableId:t})=>!X.has(e)&&v.has(t))).forEach((({id:e})=>X.add(e))),f.selectAll().filter((({indexId:e})=>X.has(e))).forEach((({id:e})=>G.add(e))),IS(t,{tableIds:[...v],tableColumnIds:[...Z],relationshipIds:[...x],indexIds:[...X],indexColumnIds:[...G],memoIds:[...I]});const W=jl(h.selectAll().map((({id:e})=>e))),k=jl(m.selectAll().map((({id:e})=>e))),V=jl(b.selectAll().map((({id:e})=>e))),C=jl(f.selectAll().map((({id:e})=>e))),S=jl(y.selectAll().map((({id:e})=>e))),R=jl(g.selectAll().map((({id:e})=>e)));return m.selectAll().filter((({tableId:e,id:t,meta:n})=>!W(e)&&p((()=>!1))({id:t,meta:n}))).forEach((({id:e})=>Z.add(e))),f.selectAll().filter((({indexId:e,id:t,meta:n})=>!V(e)&&p((()=>!1))({id:t,meta:n}))).forEach((({id:e})=>G.add(e))),Object.entries(a).forEach((([e,[t]])=>{if(WS(t))switch(t){case"tableEntities":!W(e)&&v.add(e);break;case"tableColumnEntities":!k(e)&&Z.add(e);break;case"relationshipEntities":!S(e)&&x.add(e);break;case"indexEntities":!V(e)&&X.add(e);break;case"indexColumnEntities":!C(e)&&G.add(e);break;case"memoEntities":!R(e)&&I.add(e)}})),{tableIds:[...v],tableColumnIds:[...Z],relationshipIds:[...x],indexIds:[...X],indexColumnIds:[...G],memoIds:[...I]}}}const VS=e=>t=>({id:n,meta:i})=>{if(t(n))return!1;return 3<Math.floor(e.diff(XS.fromMillis(i.updateAt),"days").toObject().days??0)}
    /*!
     * @dineug/erd-editor
     * @version 3.2.6 | Sat Nov 09 2024
     * @author SeungHwan-Lee <dineug2@gmail.com>
     * @license MIT
     */;var CS=ni((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}));function SS(e,t,n){return null==e?e:Ll(e,t,n)}var RS=ni((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()})),LS={now:function(){return(LS.delegate||performance).now()},delegate:void 0},YS={schedule:function(e){var t=requestAnimationFrame,n=cancelAnimationFrame,i=t((function(t){n=void 0,e(t)}));return new pm((function(){return null==n?void 0:n(i)}))},requestAnimationFrame:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return requestAnimationFrame.apply(void 0,im([],nm(e)))},cancelAnimationFrame:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=YS.delegate;return((null==n?void 0:n.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,im([],nm(e)))},delegate:void 0};function TS(e){return new Lm((function(t){var n=e||LS,i=n.now(),o=0,l=function(){t.closed||(o=YS.requestAnimationFrame((function(r){o=0;var a=n.now();t.next({timestamp:e?a:r,elapsed:a-i}),l()})))};return l(),function(){o&&YS.cancelAnimationFrame(o)}}))}var wS=TS(),NS=new Lm((function(e){return e.complete()}));function KS(e){return e[e.length-1]}function HS(e,t){return void 0===t&&(t=0),Tm((function(n,i){n.subscribe(wm(i,(function(n){return rb(i,e,(function(){return i.next(n)}),t)}),(function(){return rb(i,e,(function(){return i.complete()}),t)}),(function(n){return rb(i,e,(function(){return i.error(n)}),t)})))}))}function MS(e,t){return void 0===t&&(t=0),Tm((function(n,i){i.add(e.schedule((function(){return n.subscribe(i)}),t))}))}function zS(e,t){if(!e)throw new Error("Iterable cannot be null");return new Lm((function(n){rb(n,t,(function(){var i=e[Symbol.asyncIterator]();rb(n,t,(function(){i.next().then((function(e){e.done?n.complete():n.next(e.value)}))}),0,!0)}))}))}function JS(e,t){if(null!=e){if(Dm(e))return function(e,t){return ob(e).pipe(MS(t),HS(t))}(e,t);if(Bm(e))return function(e,t){return new Lm((function(n){var i=0;return t.schedule((function(){i===e.length?n.complete():(n.next(e[i++]),n.closed||this.schedule())}))}))}(e,t);if(Qm(e))return function(e,t){return ob(e).pipe(MS(t),HS(t))}(e,t);if(_m(e))return zS(e,t);if(tb(e))return function(e,t){return new Lm((function(n){var i;return rb(n,t,(function(){i=e[eb](),rb(n,t,(function(){var e,t,o;try{t=(e=i.next()).value,o=e.done}catch(e){return void n.error(e)}o?n.complete():n.next(t)}),0,!0)})),function(){return sm(null==i?void 0:i.return)&&i.return()}}))}(e,t);if(ib(e))return function(e,t){return zS(nb(e),t)}(e,t)}throw qm(e)}var jS=Array.isArray;function FS(e){return ab((function(t){return function(e,t){return jS(t)?e.apply(void 0,im([],nm(t))):e(t)}(e,t)}))}var OS=["addListener","removeListener"],$S=["addEventListener","removeEventListener"],ES=["on","off"];function US(e,t,n,i){if(sm(n)&&(i=n,n=void 0),i)return US(e,t,n).pipe(FS(i));var o=nm(function(e){return sm(e.addEventListener)&&sm(e.removeEventListener)}(e)?$S.map((function(i){return function(o){return e[i](t,o,n)}})):function(e){return sm(e.addListener)&&sm(e.removeListener)}(e)?OS.map(PS(e,t)):function(e){return sm(e.on)&&sm(e.off)}(e)?ES.map(PS(e,t)):[],2),l=o[0],r=o[1];if(!l&&Bm(e))return sb((function(e){return US(e,t,n)}))(ob(e));if(!l)throw new TypeError("Invalid event target");return new Lm((function(e){var t=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.next(1<t.length?t:t[0])};return l(t),function(){return r(t)}}))}function PS(e,t){return function(n){return function(i){return e[n](t,i)}}}function AS(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=function(e){return Am(KS(e))?e.pop():void 0}(e),i=function(e,t){return"number"==typeof KS(e)?e.pop():t}(e,1/0),o=e;return o.length?1===o.length?ob(o[0]):function(e){return void 0===e&&(e=1/0),sb(Rm,e)}(i)(function(e,t){return t?JS(e,t):ob(e)}(o,n)):NS}function BS(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!0!==t){if(!1!==t){var o=new km({next:function(){o.unsubscribe(),e()}});return ob(t.apply(void 0,im([],nm(n)))).subscribe(o)}}else e()}function QS(e){return Tm((function(t,n){ob(e).subscribe(wm(n,(function(){return n.complete()}),Zm)),!n.closed&&t.subscribe(n)}))}function DS({notify:e,dispatch:t},n){let i=(null==n?void 0:n.commands)??[],o=(null==n?void 0:n.cursor)??-1,l=(null==n?void 0:n.limit)??0,r=!0;const a=()=>-1!==o,s=()=>o<i.length-1,c=()=>({hasRedo:s(),hasUndo:a()}),u=(e,n)=>{r=!1,e[n](t),r=!0};return Object.freeze({get cursor(){return o},get size(){return i.length},hasUndo:a,hasRedo:s,push:t=>{r&&(i.splice(o+1,i.length-o),i.push(t),0!==l&&i.length>l&&(i=i.slice(i.length-l,i.length)),o=i.length-1,e(c()))},undo:()=>{if(!a())return;const t=i[o];u(t,"undo"),o--,e(c())},redo:()=>{if(!s())return;const t=i[o+1];u(t,"redo"),o++,e(c())},clear:()=>{const t=i.length;i=[],o=-1,t>0&&e(c())},setLimit:e=>l=e,clone:e=>DS(e,{commands:[...i],cursor:o,limit:l})})}const _S=(e,t)=>n=>n.pipe(db(new Lm((i=>{let o=!1;const l=n.subscribe((()=>{o&&i.next()}));return l.add(e.subscribe((()=>{o||(o=!0,i.next())}))),l.add(t.subscribe((()=>{o=!1}))),l}))),ab((e=>e.flat())),eI),qS=e=>{const t=t=>_l(t.tags)||!e.some((e=>Zf(t.tags,e)));return e=>new Lm((n=>e.subscribe({next:e=>n.next(e.filter(t)),error:e=>n.error(e),complete:()=>n.complete()}))).pipe(eI)},eR=(e,t=[])=>{const n=jl(UG),i=e=>!_l(e.tags)&&t.some((t=>Zf(e.tags,t)))||!n(e.type);return t=>new Lm((n=>t.subscribe({next:t=>{n.next(e()?t.filter(i):t)},error:e=>n.error(e),complete:()=>n.complete()}))).pipe(eI)},tR=2048;function nR(e,{getReadonly:t=(()=>!1),getHistory:n}={}){const i=new Set,o=aI(e),l=function(e){const t=pW.map((([t,n])=>{const i=II();return{pattern:jl(t.map(String)),channel:i,proc:UI(n,i,e.state,e.context)}})),n=e.subscribe((e=>{for(const n of e)for(const e of t)e.pattern(n.type)&&FI(e.channel,n)}));return{destroy:()=>{t.forEach((({proc:e})=>HI(e))),t.splice(0,t.length),n()}}}(o),r={notify:e=>o.dispatch(zy(e)),dispatch:o.dispatchSync},a=(null==n?void 0:n(r))??DS(r);a.setLimit(tR);const s=new Hm,c=s.pipe(tI(qG),qS([ff.changeOnly,ff.shared]),eR(t),iI(_G,[["@@move",BG],["@@scroll",DG],["@@color",QG]])),u=new Lm((e=>o.subscribe((t=>e.next(t))))).pipe(tI($G),eR(t,[ff.shared]),pb(200)),d=(...e)=>{s.next(Eh(o.state,o.context,e))};return i.add(c.subscribe(yx(o,a))).add(s.pipe(eR(t,[ff.shared])).subscribe(o.dispatchSync)),Object.freeze({...o,dispatch:(...e)=>{Ol((()=>d(e)))},dispatchSync:d,destroy:()=>{Array.from(i).forEach((e=>e.unsubscribe())),i.clear(),o.destroy(),l.destroy(),a.clear(),s.complete()},undo:()=>{t()||a.undo()},redo:()=>{t()||a.redo()},history:a,change$:u})}var iR;const oR="openColorPicker",lR="closeColorPicker",rR="openToast",aR="loadShikiService",sR="openTableProperties",cR="dragendColumnAll",uR="copy",dR="paste",pR="schemaGC",hR="toggleSearch",mR="openThemeBuilder",bR="setThemeOptions",fR="mouseTrackerStart",yR="mouseTrackerEnd",gR="openDiffViewer";class vR{constructor(){iR.set(this,new Set)}on(e){return am(this,iR,"f").has(e)||am(this,iR,"f").add(e),()=>{am(this,iR,"f").delete(e)}}emit(e){am(this,iR,"f").forEach((t=>{Fl(Reflect.get(t,e.type),e)}))}clear(){am(this,iR,"f").clear()}}iR=new WeakMap;const ZR=Oh(oR),xR=Oh(lR),XR=Oh(rR),GR=Oh(aR),IR=Oh(sR),WR=Oh(cR),kR=Oh(uR),VR=Oh(dR),CR=Oh(pR),SR=Oh(hR),RR=Oh(mR),LR=Oh(bR),YR=Oh(fR),TR=Oh(yR),wR=Oh(gR);function NR(e,t){for(var n=e.length,i=0;i<n;++i)if(t(e[i],i))return!0;return!1}function KR(e,t){for(var n=e.length,i=0;i<n;++i)if(t(e[i],i))return e[i];return null}function HR(e){var t=e;if(typeof t>"u"){if(typeof navigator>"u"||!navigator)return"";t=navigator.userAgent||""}return t.toLowerCase()}function MR(e,t){try{return new RegExp(e,"g").exec(t)}catch{return null}}function zR(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var e=navigator.userAgentData,t=e.brands||e.uaList;return!(!t||!t.length)}function JR(e){return e.replace(/_/g,".")}function jR(e,t){var n=null,i="-1";return NR(e,(function(e){var o=MR("("+e.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",t);return!(!o||e.brand)&&(n=e,i=o[3]||"-1",e.versionAlias?i=e.versionAlias:e.versionTest&&(i=function(e,t){var n=MR("("+e+")((?:\\/|\\s|:)([0-9|\\.|_]+))",t);return n?n[3]:""}(e.versionTest.toLowerCase(),t)||i),i=JR(i),!0)})),{preset:n,version:i}}function FR(e,t){var n={brand:"",version:"-1"};return NR(e,(function(e){var i=OR(t,e);return!!i&&(n.brand=e.id,n.version=e.versionAlias||i.version,"-1"!==n.version)})),n}function OR(e,t){return KR(e,(function(e){var n=e.brand;return MR(""+t.test,n.toLowerCase())}))}var $R=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],ER=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],UR=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],PR=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],AR=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function BR(e){return!!jR(PR,e).preset}function QR(e){var t=navigator.userAgentData,n=(t.uaList||t.brands).slice(),i=e&&e.fullVersionList,o=t.mobile||!1,l=n[0],r=(e&&e.platform||t.platform||navigator.platform).toLowerCase(),a={name:l.brand,version:l.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!FR(PR,n).brand||BR(HR())},s={name:"unknown",version:"-1",majorVersion:-1};a.webkit=!a.chromium&&NR(UR,(function(e){return OR(n,e)}));var c=FR(ER,n);if(a.chromium=!!c.brand,a.chromiumVersion=c.version,!a.chromium){var u=FR(UR,n);a.webkit=!!u.brand,a.webkitVersion=u.version}var d=KR(AR,(function(e){return new RegExp(""+e.test,"g").exec(r)}));if(s.name=d?d.id:"",e&&(s.version=e.platformVersion),i&&i.length){var p=FR($R,i);a.name=p.brand||a.name,a.version=p.version||a.version}else{var h=FR($R,n);a.name=h.brand||a.name,a.version=h.brand&&e?e.uaFullVersion:h.version}return a.webkit&&(s.name=o?"ios":"mac"),"ios"===s.name&&a.webview&&(a.version="-1"),s.version=JR(s.version),a.version=JR(a.version),s.majorVersion=parseInt(s.version,10),a.majorVersion=parseInt(a.version,10),{browser:a,os:s,isMobile:o,isHints:!0}}function DR(e){return typeof e>"u"&&zR()?QR():function(e){var t=HR(e),n=!!/mobi/g.exec(t),i={name:"unknown",version:"-1",majorVersion:-1,webview:BR(t),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},o={name:"unknown",version:"-1",majorVersion:-1},l=jR($R,t),r=l.preset,a=l.version,s=jR(AR,t),c=s.preset,u=s.version,d=jR(ER,t);if(i.chromium=!!d.preset,i.chromiumVersion=d.version,!i.chromium){var p=jR(UR,t);i.webkit=!!p.preset,i.webkitVersion=p.version}return c&&(o.name=c.id,o.version=u,o.majorVersion=parseInt(u,10)),r&&(i.name=r.id,i.version=a,i.webview&&"ios"===o.name&&"safari"!==i.name&&(i.webview=!1)),i.majorVersion=parseInt(i.version,10),{browser:i,os:o,isMobile:n,isHints:!1}}(e)}const _R=DR();let qR="mac"===_R.os.name,eL="ios"===_R.os.name;_R.os.name,_R.os.name,_R.browser.name,_R.browser.name,_R.browser.name,function(e){zR()?navigator.userAgentData.getHighEntropyValues(["architecture","model","platform","platformVersion","uaFullVersion","fullVersionList"]).then((function(t){var n=QR(t);return e&&e(n),n})):(e&&e(DR()),typeof Promise>"u"||!Promise||Promise.resolve(DR()))}((e=>{qR="mac"===e.os.name,eL="ios"===e.os.name,e.os.name,e.os.name,e.browser.name,e.browser.name,e.browser.name}));const tL=()=>qR||eL;const nL={edit:"edit",stop:"stop",search:"search",undo:"undo",redo:"redo",addTable:"addTable",addColumn:"addColumn",addMemo:"addMemo",removeTable:"removeTable",removeColumn:"removeColumn",primaryKey:"primaryKey",selectAllTable:"selectAllTable",selectAllColumn:"selectAllColumn",relationshipZeroOne:"relationshipZeroOne",relationshipZeroN:"relationshipZeroN",relationshipOneOnly:"relationshipOneOnly",relationshipOneN:"relationshipOneN",tableProperties:"tableProperties",zoomIn:"zoomIn",zoomOut:"zoomOut"},iL=Object.values(nL),oL="Shift",lL="Meta",rL="Alt",aL="Control",sL={[oL]:"⇧",[lL]:"⌘",[rL]:"⌥",[aL]:"⌃"},cL={[oL]:"Shift",[lL]:"Cmd",[rL]:"Alt",[aL]:"Ctrl"};function uL(e){return(tL()?sL:cL)[e]??e}function dL(e){return e.startsWith("Key")?e.slice(3):e.startsWith("Digit")?e.slice(5):"Backspace"===e?"⌫":"Escape"===e?"ESC":"Equal"===e?"Plus":e}function pL(e){return e?function(e){const t=tL()?"Meta":"Control";return e.trim().split(" ").map((e=>{let n=e.split(/\b\+/),i=n.pop();return n=n.map((e=>"$mod"===e?t:e)),[n,i]}))}(e).map((([e,t])=>[e.map(uL),dL(t)])):[]}function hL(e){return tL()?e.metaKey:e.ctrlKey}function mL(e){return pL(e).map((([e,t])=>[...e,t].join(" + "))).join(" ")}function bL(e,t){const n=function(e){return{...e}}(e),i=nR(n,t),o=Bs({[nL.edit]:[{shortcut:"Enter"}],[nL.stop]:[{shortcut:"Escape"}],[nL.search]:[{shortcut:"$mod+KeyK",preventDefault:!0,stopPropagation:!0}],[nL.undo]:[{shortcut:"$mod+KeyZ",preventDefault:!0,stopPropagation:!0}],[nL.redo]:[{shortcut:"$mod+Shift+KeyZ",preventDefault:!0,stopPropagation:!0}],[nL.addTable]:[{shortcut:"Alt+KeyN",preventDefault:!0}],[nL.addColumn]:[{shortcut:"Alt+Enter",preventDefault:!0}],[nL.addMemo]:[{shortcut:"Alt+KeyM",preventDefault:!0}],[nL.removeTable]:[{shortcut:"$mod+Backspace",preventDefault:!0},{shortcut:"$mod+Delete",preventDefault:!0}],[nL.removeColumn]:[{shortcut:"Alt+Backspace",preventDefault:!0},{shortcut:"Alt+Delete",preventDefault:!0}],[nL.primaryKey]:[{shortcut:"Alt+KeyK",preventDefault:!0}],[nL.selectAllTable]:[{shortcut:"$mod+Alt+KeyA",preventDefault:!0}],[nL.selectAllColumn]:[{shortcut:"Alt+KeyA",preventDefault:!0}],[nL.relationshipZeroOne]:[{shortcut:"$mod+Alt+Digit1",preventDefault:!0}],[nL.relationshipZeroN]:[{shortcut:"$mod+Alt+Digit2",preventDefault:!0}],[nL.relationshipOneOnly]:[{shortcut:"$mod+Alt+Digit3",preventDefault:!0}],[nL.relationshipOneN]:[{shortcut:"$mod+Alt+Digit4",preventDefault:!0}],[nL.tableProperties]:[{shortcut:"Alt+Space",preventDefault:!0}],[nL.zoomIn]:[{shortcut:"$mod+Equal",preventDefault:!0,stopPropagation:!0}],[nL.zoomOut]:[{shortcut:"$mod+Minus",preventDefault:!0,stopPropagation:!0}]},{shallow:!0}),l=new Hm,r=new Hm,a=new vR;return Object.freeze({...n,actions:OG,store:i,keyBindingMap:o,shortcut$:l,keydown$:r,emitter:a})}const fL=La({}),yL=(e,t)=>Ds(e,{...fL,value:t??fL.value});function gL(e){e.store.dispatchSync(Uy()),e.store.destroy(),e.keydown$.complete(),e.shortcut$.complete(),e.emitter.clear()}function vL(e,t){const n={start:{x1:e.x,y1:e.y,x2:e.x,y2:e.y},end:{x1:t.x,y1:t.y,x2:t.x,y2:t.y}},i={M:{x:0,y:0},L:{x:0,y:0},Q:{x:0,y:0},d(){if(e.tableId===t.tableId)return[[{x:this.M.x,y:this.M.y},{x:this.L.x,y:this.L.y}]];const n=this.M.x-this.L.x,i=this.M.y-this.L.y,o=n/2,l=i/2,r=Math.abs(i)<=Math.abs(n),a=function(e){return t=>n=>n<0?(t?-1:1)*e:(t?1:-1)*e}(Math.abs(r?l:o)),s=a(!0),c=a(!1),u=s(n),d=s(i),p=c(n),h=c(i),m=r?this.M.x-o+u:this.M.x,b=r?this.M.y:this.M.y-l+d,f=r?this.L.x+o+p:this.L.x,y=r?this.L.y:this.L.y+l+h;return[[{x:this.M.x,y:this.M.y},{x:m,y:b}],[{x:m,y:b},{x:f,y:y}],[{x:f,y:y},{x:this.L.x,y:this.L.y}]]}};let o=1;return e.direction===lf.left||e.direction===lf.right?(e.direction===lf.left&&(o*=-1),n.start.x2=e.x+o*QI,n.start.x1+=o*DI,i.M.x=n.start.x2,i.M.y=e.y):(e.direction===lf.top||e.direction===lf.bottom)&&(e.direction===lf.top&&(o*=-1),n.start.y2=e.y+o*QI,n.start.y1+=o*DI,i.M.x=e.x,i.M.y=n.start.y2),o=1,t.direction===lf.left||t.direction===lf.right?(t.direction===lf.left&&(o*=-1),n.end.x2=t.x+o*QI,n.end.x1+=o*DI,i.L.x=n.end.x2,i.L.y=t.y):(t.direction===lf.top||t.direction===lf.bottom)&&(t.direction===lf.top&&(o*=-1),n.end.y2=t.y+o*QI,n.end.y1+=o*DI,i.L.x=t.x,i.L.y=n.end.y2),{line:n,path:i}}function ZL(e,t){const n={start:{base:{x1:e.x,y1:e.y,x2:e.x,y2:e.y},base2:{x1:e.x,y1:e.y,x2:e.x,y2:e.y},center:{x1:e.x,y1:e.y,x2:e.x,y2:e.y},center2:{x1:e.x,y1:e.y,x2:e.x,y2:e.y}},end:{base:{x1:t.x,y1:t.y,x2:t.x,y2:t.y},base2:{x1:t.x,y1:t.y,x2:t.x,y2:t.y},left:{x1:t.x,y1:t.y,x2:t.x,y2:t.y},center:{x1:t.x,y1:t.y,x2:t.x,y2:t.y},center2:{x1:t.x,y1:t.y,x2:t.x,y2:t.y},right:{x1:t.x,y1:t.y,x2:t.x,y2:t.y}}},i={cx:t.x,cy:t.y},o={cx:e.x,cy:e.y};let l=1;return e.direction===lf.left||e.direction===lf.right?(e.direction===lf.left&&(l*=-1),n.start.base.x1=n.start.base.x2+=l*qI,n.start.base2.x1=n.start.base2.x2+=l*(_I+qI),n.start.center.x1=n.start.base.x1,n.start.base.y1-=_I,n.start.base.y2+=_I,n.start.base2.y1-=_I,n.start.base2.y2+=_I,n.start.center2.x1+=l*(qI+qI+3),o.cx+=l*eW):(e.direction===lf.top||e.direction===lf.bottom)&&(e.direction===lf.top&&(l*=-1),n.start.base.y1=n.start.base.y2+=l*qI,n.start.base2.y1=n.start.base2.y2+=l*(_I+qI),n.start.center.y1=n.start.base.y1,n.start.base.x1-=_I,n.start.base.x2+=_I,n.start.base2.x1-=_I,n.start.base2.x2+=_I,n.start.center2.y1+=l*(qI+qI+3),o.cy+=l*eW),l=1,t.direction===lf.left||t.direction===lf.right?(t.direction===lf.left&&(l*=-1),n.end.base.x1=n.end.base.x2+=l*qI,n.end.base2.x1=n.end.base2.x2+=l*(_I+qI),n.end.center.x1=n.end.left.x1=n.end.right.x1=n.end.base.x1,n.end.base.y1-=_I,n.end.base.y2+=_I,n.end.base2.y1-=_I,n.end.base2.y2+=_I,n.end.left.y2+=_I,n.end.right.y2-=_I,n.end.center2.x1+=l*(qI+qI+3),i.cx+=l*eW):(t.direction===lf.top||t.direction===lf.bottom)&&(t.direction===lf.top&&(l*=-1),n.end.base.y1=n.end.base.y2+=l*qI,n.end.base2.y1=n.end.base2.y2+=l*(_I+qI),n.end.center.y1=n.end.left.y1=n.end.right.y1=n.end.base.y1,n.end.base.x1-=_I,n.end.base.x2+=_I,n.end.base2.x1-=_I,n.end.base2.x2+=_I,n.end.left.x2+=_I,n.end.right.x2-=_I,n.end.center2.y1+=l*(qI+qI+3),i.cy+=l*eW),{line:n,circle:i,startCircle:o}}const xL={1:({path:e,line:t})=>Sh`
    <line
      x1=${e.line.end.x1} y1=${e.line.end.y1}
      x2=${e.line.end.x2} y2=${e.line.end.y2}
      stroke-width="3"
    ></line>
    <circle
      cx=${t.circle.cx} cy=${t.circle.cy} r="8"
      fill-opacity="0.0"
      stroke-width="3"
    ></circle>
    <line
      x1=${t.line.end.base.x1} y1=${t.line.end.base.y1}
      x2=${t.line.end.base.x2} y2=${t.line.end.base.y2}
      stroke-width="3"
    ></line>
    <line
      x1=${t.line.end.left.x1} y1=${t.line.end.left.y1}
      x2=${t.line.end.left.x2} y2=${t.line.end.left.y2}
      stroke-width="3"
    ></line>
    <line
      x1=${t.line.end.center.x1} y1=${t.line.end.center.y1}
      x2=${t.line.end.center.x2} y2=${t.line.end.center.y2}
      stroke-width="3"
    ></line>
    <line
      x1=${t.line.end.right.x1} y1=${t.line.end.right.y1}
      x2=${t.line.end.right.x2} y2=${t.line.end.right.y2}
      stroke-width="3"
    ></line>
  `,[nf.ZeroOne]:({path:e,line:t})=>Sh`
    <line
      x1=${e.line.end.x1} y1=${e.line.end.y1}
      x2=${e.line.end.x2} y2=${e.line.end.y2}
      stroke-width="3"
    ></line>
    <circle
      cx=${t.circle.cx} cy=${t.circle.cy} r="8"
      fill-opacity="0.0"
      stroke-width="3"
    ></circle>
    <line
      x1=${t.line.end.base.x1} y1=${t.line.end.base.y1}
      x2=${t.line.end.base.x2} y2=${t.line.end.base.y2}
      stroke-width="3"
    ></line>
    <line
      x1=${t.line.end.center.x1} y1=${t.line.end.center.y1}
      x2=${t.line.end.center.x2} y2=${t.line.end.center.y2}
      stroke-width="3"
    ></line>
  `,[nf.ZeroN]:({path:e,line:t})=>Sh`
    <line
      x1=${e.line.end.x1} y1=${e.line.end.y1}
      x2=${e.line.end.x2} y2=${e.line.end.y2}
      stroke-width="3"
    ></line>
    <circle
      cx=${t.circle.cx} cy=${t.circle.cy} r="8"
      fill-opacity="0.0"
      stroke-width="3"
    ></circle>
    <line
      x1=${t.line.end.left.x1} y1=${t.line.end.left.y1}
      x2=${t.line.end.left.x2} y2=${t.line.end.left.y2}
      stroke-width="3"
    ></line>
    <line
      x1=${t.line.end.center.x1} y1=${t.line.end.center.y1}
      x2=${t.line.end.center.x2} y2=${t.line.end.center.y2}
      stroke-width="3"
    ></line>
    <line
      x1=${t.line.end.right.x1} y1=${t.line.end.right.y1}
      x2=${t.line.end.right.x2} y2=${t.line.end.right.y2}
      stroke-width="3"
    ></line>
  `,[nf.OneOnly]:({path:e,line:t})=>Sh`
    <line
      x1=${e.line.end.x1} y1=${e.line.end.y1}
      x2=${e.line.end.x2} y2=${e.line.end.y2}
      stroke-width="3"
    ></line>
    <line
      x1=${t.line.end.base.x1} y1=${t.line.end.base.y1}
      x2=${t.line.end.base.x2} y2=${t.line.end.base.y2}
      stroke-width="3"
    ></line>
    <line
      x1=${t.line.end.base2.x1} y1=${t.line.end.base2.y1}
      x2=${t.line.end.base2.x2} y2=${t.line.end.base2.y2}
      stroke-width="3"
    ></line>
    <line
      x1=${t.line.end.center2.x1} y1=${t.line.end.center2.y1}
      x2=${t.line.end.center2.x2} y2=${t.line.end.center2.y2}
      stroke-width="3"
    ></line>
  `,[nf.OneN]:({path:e,line:t})=>Sh`
    <line
      x1=${e.line.end.x1} y1=${e.line.end.y1}
      x2=${e.line.end.x2} y2=${e.line.end.y2}
      stroke-width="3"
    ></line>
    <line
      x1=${t.line.end.base.x1} y1=${t.line.end.base.y1}
      x2=${t.line.end.base.x2} y2=${t.line.end.base.y2}
      stroke-width="3"
    ></line>
    <line
      x1=${t.line.end.left.x1} y1=${t.line.end.left.y1}
      x2=${t.line.end.left.x2} y2=${t.line.end.left.y2}
      stroke-width="3"
    ></line>
    <line
      x1=${t.line.end.center2.x1} y1=${t.line.end.center2.y1}
      x2=${t.line.end.center2.x2} y2=${t.line.end.center2.y2}
      stroke-width="3"
    ></line>
    <line
      x1=${t.line.end.right.x1} y1=${t.line.end.right.y1}
      x2=${t.line.end.right.x2} y2=${t.line.end.right.y2}
      stroke-width="3"
    ></line>
  `,32:({path:e,line:t})=>Sh`
    <line
      x1=${e.line.end.x1} y1=${e.line.end.y1}
      x2=${e.line.end.x2} y2=${e.line.end.y2}
      stroke-width="3"
    ></line>
    <line
      x1=${t.line.end.base.x1} y1=${t.line.end.base.y1}
      x2=${t.line.end.base.x2} y2=${t.line.end.base.y2}
      stroke-width="3"
    ></line>
    <line
      x1=${t.line.end.center2.x1} y1=${t.line.end.center2.y1}
      x2=${t.line.end.center2.x2} y2=${t.line.end.center2.y2}
      stroke-width="3"
    ></line>
  `,64:({path:e,line:t})=>Sh`
    <line
      x1=${e.line.end.x1} y1=${e.line.end.y1}
      x2=${e.line.end.x2} y2=${e.line.end.y2}
      stroke-width="3"
    ></line>
    <line
      x1=${t.line.end.left.x1} y1=${t.line.end.left.y1}
      x2=${t.line.end.left.x2} y2=${t.line.end.left.y2}
      stroke-width="3"
    ></line>
    <line
      x1=${t.line.end.center2.x1} y1=${t.line.end.center2.y1}
      x2=${t.line.end.center2.x2} y2=${t.line.end.center2.y2}
      stroke-width="3"
    ></line>
    <line
      x1=${t.line.end.right.x1} y1=${t.line.end.right.y1}
      x2=${t.line.end.right.x2} y2=${t.line.end.right.y2}
      stroke-width="3"
    ></line>
  `};const XL=(e,t)=>{const n=yL(t),i=()=>{const{store:e}=n.value;e.dispatch(lg({columnIds:[]}))};return()=>{const{store:t}=n.value,{editor:o}=t.state,{relationship:l,strokeWidth:r}=e,a=function(e){return{path:vL(e.start,e.end),line:ZL(e.start,e.end)}}(l),{path:s,line:c}=a,u=s.path.d(),d=function(e,t){const n=xL[e];return(null==n?void 0:n(t))??null}(l.relationshipType,a),p=!!o.hoverRelationshipMap[l.id];return Sh`
      <g
        class=${["relationship",{identification:l.identification}]}
        data-id=${l.id}
        ?data-hover=${p}
        @mouseenter=${()=>(e=>{const{store:t}=n.value;t.dispatch(lg({columnIds:[...e.start.columnIds,...e.end.columnIds]}))})(l)}
        @mouseleave=${i}
      >
        ${u.map((([e,t])=>Sh`
              <line
                x1=${e.x} y1=${e.y}
                x2=${t.x} y2=${t.y}
                stroke-dasharray=${l.identification?0:10}
                stroke-width=${r}
                fill="transparent"
              ></line>
            `))}
        <line
          x1=${s.line.start.x1} y1=${s.line.start.y1}
          x2=${s.line.start.x2} y2=${s.line.start.y2}
          stroke-width="3"
        ></line>
        <line
          x1=${c.line.start.base.x1} y1=${c.line.start.base.y1}
          x2=${c.line.start.base.x2} y2=${c.line.start.base.y2}
          stroke-width="3"
        ></line>
        ${l.startRelationshipType===of.ring?Sh`
              <circle
                cx=${c.startCircle.cx} cy=${c.startCircle.cy} r="8"
                fill-opacity="0.0"
                stroke-width="3"
              ></circle>
              <line
                x1=${c.line.start.center.x1} y1=${c.line.start.center.y1}
                x2=${c.line.start.center.x2} y2=${c.line.start.center.y2}
                stroke-width="3"
              ></line>
        `:Sh`
              <line
                x1=${c.line.start.base2.x1} y1=${c.line.start.base2.y1}
                x2=${c.line.start.base2.x2} y2=${c.line.start.base2.y2}
                stroke-width="3"
              ></line>
              <line
                x1=${c.line.start.center2.x1} y1=${c.line.start.center2.y1}
                x2=${c.line.start.center2.x2} y2=${c.line.start.center2.y2}
                stroke-width="3"
              ></line>
        `}
        ${d}
      </g>
    `}},GL=Qh`
  position: absolute;
  top: 0;
  left: 0;
  overflow: visible;

  .relationship {
    stroke: var(--key-fk);
  }

  .relationship.identification {
    stroke: var(--key-pfk);
  }

  .relationship:hover,
  .relationship[data-hover],
  .relationship.identification[data-hover] {
    stroke: var(--relationship-hover);
  }
`,IL=(e,t)=>{const n=yL(t);return()=>{const{store:t}=n.value,{settings:{width:i,height:o},doc:{relationshipIds:l},collections:r}=t.state,a=Dr(r).collection("relationshipEntities").selectByIds(l);return Sh`
      <svg
        class=${[GL,e.class]}
        style=${{width:`${i}px`,height:`${o}px`,"min-width":`${i}px`,"min-height":`${o}px`}}
      >
        ${ap(a,(e=>e.id),(t=>Sh`<${XL} relationship=${t} strokeWidth=${e.strokeWidth??3} />
          `))}
      </svg>
    `}};function WL(){const e=new Set;return ws((()=>{Array.from(e).forEach((e=>Pl(e)?e():e.unsubscribe())),e.clear()})),{addUnsubscribe:(...t)=>{t.forEach((t=>e.add(t)))}}}function kL(e,t){const n={path:{path:{M:{x:0,y:0},L:{x:0,y:0},Q:{x:0,y:0},d(){return`M ${this.M.x} ${this.M.y} L ${this.L.x} ${this.L.y}`}},line:{start:{x1:0,y1:0,x2:0,y2:0}}},line:{start:{base:{x1:0,y1:0,x2:0,y2:0},base2:{x1:0,y1:0,x2:0,y2:0},center:{x1:0,y1:0,x2:0,y2:0},center2:{x1:0,y1:0,x2:0,y2:0}}}};if(!t.start)return n;const i=function(e,t){let n=AI.bottom;if(!t.start)return n;const i=Dr(e.collections).collection("tableEntities").selectById(t.start.tableId);if(!i)return n;const o=tW(e,i);let l=nW(o.bottom,t.end);return t.start.x=o.bottom.x,t.start.y=o.bottom.y,BI.forEach((e=>{const i=e,r=nW(o[i],t.end);l<=r||(l=r,n=i,t.start&&(t.start.x=o[i].x,t.start.y=o[i].y))})),n}(e,t);return n.path=function(e,t){const n={start:{x1:0,y1:0,x2:0,y2:0}},i={M:{x:0,y:0},L:{x:0,y:0},Q:{x:0,y:0},d(){return`M ${this.M.x} ${this.M.y} L ${this.L.x} ${this.L.y}`}};if(t.start){n.start.x1=t.start.x,n.start.y1=t.start.y,n.start.x2=t.start.x,n.start.y2=t.start.y;let o=1;e===AI.left||e===AI.right?(e===AI.left&&(o*=-1),n.start.x2=t.start.x+o*QI,n.start.x1+=o*DI,i.M.x=n.start.x2,i.M.y=t.start.y):(e===AI.top||e===AI.bottom)&&(e===AI.top&&(o*=-1),n.start.y2=t.start.y+o*QI,n.start.y1+=o*DI,i.M.x=t.start.x,i.M.y=n.start.y2)}return i.L.x=t.end.x,i.L.y=t.end.y,{path:i,line:n}}(i,t),n.line=function(e,t){const n={start:{base:{x1:0,y1:0,x2:0,y2:0},base2:{x1:0,y1:0,x2:0,y2:0},center:{x1:0,y1:0,x2:0,y2:0},center2:{x1:0,y1:0,x2:0,y2:0}}};if(!t.start)return n;n.start.base.x1=n.start.base2.x1=n.start.center.x1=n.start.center2.x1=t.start.x,n.start.base.x2=n.start.base2.x2=n.start.center.x2=n.start.center2.x2=t.start.x,n.start.base.y1=n.start.base2.y1=n.start.center.y1=n.start.center2.y1=t.start.y,n.start.base.y2=n.start.base2.y2=n.start.center.y2=n.start.center2.y2=t.start.y;let i=1;return e===AI.left||e===AI.right?(e===AI.left&&(i*=-1),n.start.base.x1=n.start.base.x2+=i*qI,n.start.base2.x1=n.start.base2.x2+=i*(_I+qI),n.start.center.x1=n.start.base.x1,n.start.base.y1-=_I,n.start.base.y2+=_I,n.start.base2.y1-=_I,n.start.base2.y2+=_I,n.start.center2.x1+=i*(qI+qI+3)):(e===AI.top||e===AI.bottom)&&(e===AI.top&&(i*=-1),n.start.base.y1=n.start.base.y2+=i*qI,n.start.base2.y1=n.start.base2.y2+=i*(_I+qI),n.start.center.y1=n.start.base.y1,n.start.base.x1-=_I,n.start.base.x2+=_I,n.start.base2.x1-=_I,n.start.base2.x2+=_I,n.start.center2.y1+=i*(qI+qI+3)),n}(i,t),n}const VL=Qh`
  position: absolute;
  top: 0;
  left: 0;
  pointer-events: none;
  stroke: var(--key-fk);
  overflow: visible;
`,CL=(e,t)=>{const n=yL(t),{addUnsubscribe:i}=WL();return Ts((()=>{const t=e.root.value,{store:o}=n.value;i(US(t,"mousemove").subscribe((e=>{e.preventDefault();const{x:n,y:i}=t.getBoundingClientRect();o.dispatch(og({x:e.clientX-n,y:e.clientY-i}))})))})),()=>{const{store:t}=n.value,{settings:{width:i,height:o}}=t.state,{path:l,line:r}=kL(t.state,e.draw);return Sh`
      <svg
        class=${VL}
        style=${{width:`${i}px`,height:`${o}px`,"min-width":`${i}px`,"min-height":`${o}px`}}
      >
        <g>
          <path
            d=${l.path.d()}
            stroke-dasharray="10"
            stroke-width="3"
            fill="transparent"
          ></path>
          <line
            x1=${l.line.start.x1} y1=${l.line.start.y1}
            x2=${l.line.start.x2} y2=${l.line.start.y2}
            stroke-width="3"
          ></line>
          <line
            x1=${r.start.base.x1} y1=${r.start.base.y1}
            x2=${r.start.base.x2} y2=${r.start.base.y2}
            stroke-width="3"
          ></line>
          <line
            x1=${r.start.base2.x1} y1=${r.start.base2.y1}
            x2=${r.start.base2.x2} y2=${r.start.base2.y2}
            stroke-width="3"
          ></line>
          <line
            x1=${r.start.center2.x1} y1=${r.start.center2.y1}
            x2=${r.start.center2.x2} y2=${r.start.center2.y2}
            stroke-width="3"
          ></line>
        </g>
      </svg>
    `}},SL=e=>Qh`
  font-size: var(--font-size-${e});
  letter-spacing: var(--letter-spacing-${e});
  line-height: var(--line-height-${e});
`,RL=SL(1),LL=SL(2),YL=SL(3);SL(4);const TL=SL(5),wL=SL(6),NL=SL(7),KL=SL(8),HL=SL(9),ML=Qh`
  ${LL};
  font-weight: var(--font-weight-regular);
`,zL=Qh`
  ${RL};
  font-weight: var(--font-weight-regular);
`;const JL=Qh`
  position: absolute;
  background-color: var(--table-background);
  padding: ${Sf}px 0;
  border-radius: 6px;
  border: 1px solid var(--table-border);
  fill: transparent;
  color: transparent;
  ${zL};

  &:hover {
    fill: var(--foreground);
    color: var(--foreground);
  }

  &[data-selected] {
    border: 1px solid var(--table-select);
  }

  .column-row-move {
    transition: transform 0.3s;
  }
`,jL=Qh`
  display: flex;
  flex-direction: column;
  position: relative;
  padding: 0 ${Sf}px;
`,FL=Qh`
  position: absolute;
  top: -${Sf+1}px;
  left: 0;
  width: 100%;
  min-height: 4px;
  border-radius: 6px 6px 0 0;
  cursor: pointer;
`,OL=Qh`
  display: flex;
  height: ${12}px;
  justify-content: flex-end;
  margin-bottom: ${2}px;
  cursor: move;

  & > .icon {
    cursor: pointer;
  }

  & > .icon:last-child {
    margin-left: ${4}px;
  }

  & > .icon:hover {
    fill: var(--active);
    color: var(--active);
  }
`,$L=Qh`
  display: flex;
  height: ${24}px;
  align-items: center;

  & > .input-padding {
    padding: ${2}px ${Vf}px
      ${2}px 0;
  }
`;function EL(e){const t=e.target;t&&(t.value=Of(t.value))}function UL(e){e.preventDefault()}function PL(e){e.stopPropagation()}function AL(e){return e instanceof MouseEvent}const BL="@dineug/erd-editor/internal-force-focus",QL="@dineug/erd-editor/internal-forward-move-start";function DL(e,t){function n(n,i){return new CustomEvent(e,{detail:n,...t,...i})}return n.toString=()=>`${e}`,n.type=e,n}const _L=DL("@dineug/erd-editor/internal-focus"),qL=DL(BL),eY=DL(QL,{bubbles:!0,composed:!0}),tY=US(window,"keyup"),nY=US(window,"mousedown"),iY=US(window,"mousemove"),oY=US(window,"mouseup"),lY=US(window,"touchstart"),rY=US(window,"touchmove"),aY=US(window,"touchend"),sY=function(e){return e?TS(e):wS}().pipe(function(e){void 0===e&&(e={});var t=e.connector,n=void 0===t?function(){return new Hm}:t,i=e.resetOnError,o=void 0===i||i,l=e.resetOnComplete,r=void 0===l||l,a=e.resetOnRefCountZero,s=void 0===a||a;return function(e){var t,i,l,a=0,c=!1,u=!1,d=function(){null==i||i.unsubscribe(),i=void 0},p=function(){d(),t=l=void 0,c=u=!1},h=function(){var e=t;p(),null==e||e.unsubscribe()};return Tm((function(e,m){a++,!u&&!c&&d();var b=l=l??n();m.add((function(){0===--a&&!u&&!c&&(i=BS(h,s))})),b.subscribe(m),!t&&a>0&&(t=new km({next:function(e){return b.next(e)},error:function(e){u=!0,d(),i=BS(p,o,e),b.error(e)},complete:function(){c=!0,d(),i=BS(p,r),b.complete()}}),ob(e).subscribe(t))}))(e)}}()),cY=US(window,eY.type).pipe(ab((e=>e.detail.originEvent))),uY=AS(nY,lY,cY),dY=AS(oY,aY);let pY=0,hY=0;uY.subscribe((e=>{AL(e)?(pY=e.clientX,hY=e.clientY):(pY=e.touches[0].clientX,hY=e.touches[0].clientY)}));const mY=AS(iY.pipe(ab((e=>{const t=e.clientX,n=e.clientY,i=t-pY,o=n-hY;return pY=t,hY=n,{event:e,movementX:i,movementY:o,x:t,y:n}}))),rY.pipe(ub((e=>1===e.touches.length)),ab((e=>{const t=e.touches[0].clientX,n=e.touches[0].clientY,i=t-pY,o=n-hY;return pY=t,hY=n,{event:e,movementX:i,movementY:o,x:t,y:n}})))),bY=mY.pipe(QS(dY));function fY(e,t){const n=yL(e),i=({event:e,movementX:t,movementY:i})=>{"mousemove"===e.type&&e.preventDefault();const{store:o}=n.value;o.dispatch(yG(t,i))};return{onMoveStart:e=>{const o=e.target;if(!o)return;const{store:l}=n.value;l.dispatch(Vx(t.table.id,hL(e))),!o.closest(".table-header-color")&&!o.closest(".column-row")&&!o.closest(".icon")&&!o.closest(".input-padding")&&bY.subscribe(i)}}}const yY=Qh`
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: auto;
  word-break: break-all;
  color: var(--active);
  font-weight: var(--font-weight-bold);

  &.isEmptyName {
    color: var(--placeholder);
  }
`,gY=(e,t)=>{const n=yL(t),{onMoveStart:i}=fY(t,e),o=()=>{const{store:e}=n.value,{settings:{zoomLevel:t}}=e.state;let i=TL.toString();return i=t>.6?TL.toString():t>.5?wL.toString():t>.4?NL.toString():t>.3?KL.toString():HL.toString(),i},l=t=>{const{emitter:i}=n.value;i.emit(ZR({x:t.clientX,y:t.clientY,color:e.table.ui.color}))};return()=>{const{store:t}=n.value,{editor:r}=t.state,{table:a}=e,s=!!r.selectedMap[a.id],c=GZ(a,t.state),u=WZ(a),d=Vl(a.name.trim());return Ch`
      <div
        class=${["table",JL]}
        style=${{top:`${a.ui.y}px`,left:`${a.ui.x}px`,"z-index":`${a.ui.zIndex}`,width:`${c.width}px`,height:`${u}px`}}
        ?data-selected=${s}
        data-id=${a.id}
        @mousedown=${i}
        @touchstart=${i}
      >
        <div class=${jL}>
          <div
            class=${["table-header-color",FL]}
            style=${{"background-color":a.ui.color}}
            @click=${l}
          ></div>
        </div>
        <div
          class=${["scrollbar",yY,o(),{isEmptyName:d}]}
        >
          ${d?"unnamed":a.name}
        </div>
      </div>
    `}},vY=Qh`
  position: absolute;

  &.vertical {
    width: ${5}px;
    height: 100%;
    cursor: ew-resize;
  }

  &.horizontal {
    width: 100%;
    height: ${5}px;
    cursor: ns-resize;
  }

  &.edge {
    width: ${5}px;
    height: ${5}px;
  }
`,ZY="vertical",xY="horizontal",XY="edge",GY=(e,t)=>{const n=()=>{const t=e.top??0;return 0===t&&e.type===ZY?t:t-2.5},i=()=>{const t=e.left??0;return 0===t&&e.type===xY?t:t-2.5},o=t=>{var n;null==(n=e.onMousedown)||n.call(e,t),bY.subscribe((t=>{var n;"mousemove"===t.event.type&&t.event.preventDefault(),null==(n=e.onMove)||n.call(e,t)}))};return()=>{const t=e.type===ZY,l=e.type===xY,r=e.type===XY;return Ch`
      <div
        class=${["sash",vY,{vertical:t,horizontal:l,edge:r}]}
        style=${{top:`${n()}px`,left:`${i()}px`,cursor:r?e.cursor:""}}
        @mousedown=${o}
      ></div>
    `}},IY="left",WY="right",kY="top",VY="bottom",CY="lt",SY="rt",RY="lb",LY="rb",YY=(e,t)=>{const n=yL(t);let i=0,o=0;const l=({movementX:t,x:n},o)=>{const l=Object.assign({change:!1},e.memo.ui),r=t<0?AI.left:AI.right,a=o===AI.left?l.width-t:l.width+t;switch(r){case AI.left:116<a&&n<i&&(o===AI.left&&(l.x+=t),i+=t,l.width=a,l.change=!0);break;case AI.right:116<a&&n>i&&(o===AI.left&&(l.x+=t),i+=t,l.width=a,l.change=!0)}return l},r=({movementY:t,y:n},i)=>{const l=Object.assign({change:!1},e.memo.ui),r=t<0?AI.top:AI.bottom,a=i===AI.top?l.height-t:l.height+t;switch(r){case AI.top:100<a&&n<o&&(i===AI.top&&(l.y+=t),o+=t,l.height=a,l.change=!0);break;case AI.bottom:100<a&&n>o&&(i===AI.top&&(l.y+=t),o+=t,l.height=a,l.change=!0)}return l},a=(t,a)=>{i=t.clientX,o=t.clientY,bY.subscribe((t=>((t,i)=>{t.event.preventDefault();const{store:o}=n.value;let a=null,s=null;switch(i){case IY:case WY:a=l(t,i);break;case kY:case VY:s=r(t,i);break;case CY:a=l(t,AI.left),s=r(t,AI.top);break;case SY:a=l(t,AI.right),s=r(t,AI.top);break;case RY:a=l(t,AI.left),s=r(t,AI.bottom);break;case LY:a=l(t,AI.right),s=r(t,AI.bottom)}null!=a&&a.change&&null!=s&&s.change?o.dispatch(pv({id:e.memo.id,x:a.x,y:s.y,width:a.width,height:s.height})):null!=a&&a.change?o.dispatch(pv({id:e.memo.id,x:a.x,y:a.y,width:a.width,height:a.height})):null!=s&&s.change&&o.dispatch(pv({id:e.memo.id,x:s.x,y:s.y,width:s.width,height:s.height}))})(t,a)))};return()=>Ch`${((e,t)=>[{type:ZY,position:IY},{type:ZY,position:WY,left:t},{type:xY,position:VY,top:e},{type:XY,position:CY,cursor:"nwse-resize"},{type:XY,position:SY,cursor:"nesw-resize",left:t},{type:XY,position:RY,cursor:"nesw-resize",top:e},{type:XY,position:LY,cursor:"nwse-resize",top:e,left:t}])(e.top,e.left).map((e=>Ch`
        <${GY}
          ...${e}
          .onMousedown=${t=>{a(t,e.position)}}
        />
      `))}`};function TY(e){return Object.keys(e).reduce(((t,n)=>{const i=Reflect.get(e,n);return!_l(i)&&""!==i&&Reflect.set(t,n,i),t}),{})}const wY=Qh`
  display: inline-flex;
  height: 100%;
  align-items: center;
`,NY=Qh`
  transition: fill 0.15s;
`;const KY=(e,t)=>({prefix:"mdi",iconName:e,icon:[24,24,,,t]}),HY=[{prefix:"fas",iconName:"key",icon:[512,512,[128273],"f084","M336 352c97.2 0 176-78.8 176-176S433.2 0 336 0S160 78.8 160 176c0 18.7 2.9 36.8 8.3 53.7L7 391c-4.5 4.5-7 10.6-7 17v80c0 13.3 10.7 24 24 24h80c13.3 0 24-10.7 24-24V448h40c13.3 0 24-10.7 24-24V384h40c6.4 0 12.5-2.5 17-7l33.3-33.3c16.9 5.4 35 8.3 53.7 8.3zM376 96a40 40 0 1 1 0 80 40 40 0 1 1 0-80z"]},{prefix:"fas",iconName:"table",icon:[512,512,[],"f0ce","M64 256V160H224v96H64zm0 64H224v96H64V320zm224 96V320H448v96H288zM448 256H288V160H448v96zM64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64z"]},{prefix:"fas",iconName:"note-sticky",icon:[448,512,[62026,"sticky-note"],"f249","M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H288V368c0-26.5 21.5-48 48-48H448V96c0-35.3-28.7-64-64-64H64zM448 352H402.7 336c-8.8 0-16 7.2-16 16v66.7V480l32-32 64-64 32-32z"]},{prefix:"fas",iconName:"plus",icon:[448,512,[10133,61543,"add"],"2b","M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z"]},{prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},{prefix:"fas",iconName:"chevron-right",icon:[320,512,[9002],"f054","M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"]},{prefix:"fas",iconName:"check",icon:[448,512,[10003,10004],"f00c","M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"]},{prefix:"fas",iconName:"rotate-right",icon:[512,512,["redo-alt","rotate-forward"],"f2f9","M463.5 224H472c13.3 0 24-10.7 24-24V72c0-9.7-5.8-18.5-14.8-22.2s-19.3-1.7-26.2 5.2L413.4 96.6c-87.6-86.5-228.7-86.2-315.8 1c-87.5 87.5-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3c62.2-62.2 162.7-62.5 225.3-1L327 183c-6.9 6.9-8.9 17.2-5.2 26.2s12.5 14.8 22.2 14.8H463.5z"]},{prefix:"fas",iconName:"rotate-left",icon:[512,512,["rotate-back","rotate-backward","undo-alt"],"f2ea","M48.5 224H40c-13.3 0-24-10.7-24-24V72c0-9.7 5.8-18.5 14.8-22.2s19.3-1.7 26.2 5.2L98.6 96.6c87.6-86.5 228.7-86.2 315.8 1c87.5 87.5 87.5 229.3 0 316.8s-229.3 87.5-316.8 0c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0c62.5 62.5 163.8 62.5 226.3 0s62.5-163.8 0-226.3c-62.2-62.2-162.7-62.5-225.3-1L185 183c6.9 6.9 8.9 17.2 5.2 26.2s-12.5 14.8-22.2 14.8H48.5z"]},{prefix:"fas",iconName:"magnifying-glass",icon:[512,512,[128269,"search"],"f002","M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"]},{prefix:"fas",iconName:"question",icon:[320,512,[10067,10068,61736],"3f","M80 160c0-35.3 28.7-64 64-64h32c35.3 0 64 28.7 64 64v3.6c0 21.8-11.1 42.1-29.4 53.8l-42.2 27.1c-25.2 16.2-40.4 44.1-40.4 74V320c0 17.7 14.3 32 32 32s32-14.3 32-32v-1.4c0-8.2 4.2-15.8 11-20.2l42.2-27.1c36.6-23.6 58.8-64.1 58.8-107.7V160c0-70.7-57.3-128-128-128H144C73.3 32 16 89.3 16 160c0 17.7 14.3 32 32 32s32-14.3 32-32zm80 320a40 40 0 1 0 0-80 40 40 0 1 0 0 80z"]},{prefix:"fas",iconName:"diagram-project",icon:[576,512,["project-diagram"],"f542","M0 80C0 53.5 21.5 32 48 32h96c26.5 0 48 21.5 48 48V96H384V80c0-26.5 21.5-48 48-48h96c26.5 0 48 21.5 48 48v96c0 26.5-21.5 48-48 48H432c-26.5 0-48-21.5-48-48V160H192v16c0 1.7-.1 3.4-.3 5L272 288h96c26.5 0 48 21.5 48 48v96c0 26.5-21.5 48-48 48H272c-26.5 0-48-21.5-48-48V336c0-1.7 .1-3.4 .3-5L144 224H48c-26.5 0-48-21.5-48-48V80z"]},{prefix:"fas",iconName:"file-image",icon:[384,512,[128443],"f1c5","M64 0C28.7 0 0 28.7 0 64V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V160H256c-17.7 0-32-14.3-32-32V0H64zM256 0V128H384L256 0zM64 256a32 32 0 1 1 64 0 32 32 0 1 1 -64 0zm152 32c5.3 0 10.2 2.6 13.2 6.9l88 128c3.4 4.9 3.7 11.3 1 16.5s-8.2 8.6-14.2 8.6H216 176 128 80c-5.8 0-11.1-3.1-13.9-8.1s-2.8-11.2 .2-16.1l48-80c2.9-4.8 8.1-7.8 13.7-7.8s10.8 2.9 13.7 7.8l12.8 21.4 48.3-70.2c3-4.3 7.9-6.9 13.2-6.9z"]},{prefix:"fas",iconName:"file-export",icon:[576,512,["arrow-right-from-file"],"f56e","M0 64C0 28.7 28.7 0 64 0H224V128c0 17.7 14.3 32 32 32H384V288H216c-13.3 0-24 10.7-24 24s10.7 24 24 24H384V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V64zM384 336V288H494.1l-39-39c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l80 80c9.4 9.4 9.4 24.6 0 33.9l-80 80c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l39-39H384zm0-208H256V0L384 128z"]},{prefix:"fas",iconName:"eye",icon:[576,512,[128065],"f06e","M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"]},{prefix:"fas",iconName:"file-import",icon:[512,512,["arrow-right-to-file"],"f56f","M128 64c0-35.3 28.7-64 64-64H352V128c0 17.7 14.3 32 32 32H512V448c0 35.3-28.7 64-64 64H192c-35.3 0-64-28.7-64-64V336H302.1l-39 39c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l80-80c9.4-9.4 9.4-24.6 0-33.9l-80-80c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l39 39H128V64zm0 224v48H24c-13.3 0-24-10.7-24-24s10.7-24 24-24H128zM512 128H384V0L512 128z"]},{prefix:"fas",iconName:"file-code",icon:[384,512,[],"f1c9","M64 0C28.7 0 0 28.7 0 64V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V160H256c-17.7 0-32-14.3-32-32V0H64zM256 0V128H384L256 0zM153 289l-31 31 31 31c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0L71 337c-9.4-9.4-9.4-24.6 0-33.9l48-48c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9zM265 255l48 48c9.4 9.4 9.4 24.6 0 33.9l-48 48c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l31-31-31-31c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0z"]},{prefix:"fas",iconName:"gear",icon:[512,512,[9881,"cog"],"f013","M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L83.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C64.6 273.1 64 264.6 64 256s.6-17.1 1.7-25.4L22.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9-16.3 18.2-17.8C227.3 1.2 241.5 0 256 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"]},{prefix:"fas",iconName:"arrow-pointer",icon:[320,512,["mouse-pointer"],"f245","M0 55.2V426c0 12.2 9.9 22 22 22c6.3 0 12.4-2.7 16.6-7.5L121.2 346l58.1 116.3c7.9 15.8 27.1 22.2 42.9 14.3s22.2-27.1 14.3-42.9L179.8 320H297.9c12.2 0 22.1-9.9 22.1-22.1c0-6.3-2.7-12.3-7.4-16.5L38.6 37.9C34.3 34.1 28.9 32 23.2 32C10.4 32 0 42.4 0 55.2z"]},{prefix:"fas",iconName:"code",icon:[640,512,[],"f121","M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6zm80.6 120.1c-12.5 12.5-12.5 32.8 0 45.3L562.7 256l-89.4 89.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3 0zm-306.7 0c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l112 112c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8 0-45.3z"]},{prefix:"fas",iconName:"rotate",icon:[512,512,[128260,"sync-alt"],"f2f1","M142.9 142.9c62.2-62.2 162.7-62.5 225.3-1L327 183c-6.9 6.9-8.9 17.2-5.2 26.2s12.5 14.8 22.2 14.8H463.5c0 0 0 0 0 0H472c13.3 0 24-10.7 24-24V72c0-9.7-5.8-18.5-14.8-22.2s-19.3-1.7-26.2 5.2L413.4 96.6c-87.6-86.5-228.7-86.2-315.8 1C73.2 122 55.6 150.7 44.8 181.4c-5.9 16.7 2.9 34.9 19.5 40.8s34.9-2.9 40.8-19.5c7.7-21.8 20.2-42.3 37.8-59.8zM16 312v7.6 .7V440c0 9.7 5.8 18.5 14.8 22.2s19.3 1.7 26.2-5.2l41.6-41.6c87.6 86.5 228.7 86.2 315.8-1c24.4-24.4 42.1-53.1 52.9-83.7c5.9-16.7-2.9-34.9-19.5-40.8s-34.9 2.9-40.8 19.5c-7.7 21.8-20.2 42.3-37.8 59.8c-62.2 62.2-162.7 62.5-225.3 1L185 329c6.9-6.9 8.9-17.2 5.2-26.2s-12.5-14.8-22.2-14.8H48.4h-.7H40c-13.3 0-24 10.7-24 24z"]},{prefix:"fas",iconName:"palette",icon:[512,512,[127912],"f53f","M512 256c0 .9 0 1.8 0 2.7c-.4 36.5-33.6 61.3-70.1 61.3H344c-26.5 0-48 21.5-48 48c0 3.4 .4 6.7 1 9.9c2.1 10.2 6.5 20 10.8 29.9c6.1 13.8 12.1 27.5 12.1 42c0 31.8-21.6 60.7-53.4 62c-3.5 .1-7 .2-10.6 .2C114.6 512 0 397.4 0 256S114.6 0 256 0S512 114.6 512 256zM128 288a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm0-96a32 32 0 1 0 0-64 32 32 0 1 0 0 64zM288 96a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm96 96a32 32 0 1 0 0-64 32 32 0 1 0 0 64z"]},{prefix:"fas",iconName:"table-columns",icon:[512,512,["columns"],"f0db","M0 96C0 60.7 28.7 32 64 32H448c35.3 0 64 28.7 64 64V416c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V96zm64 64V416H224V160H64zm384 0H288V416H448V160z"]},{prefix:"far",iconName:"copy",icon:[448,512,[],"f0c5","M384 336H192c-8.8 0-16-7.2-16-16V64c0-8.8 7.2-16 16-16l140.1 0L400 115.9V320c0 8.8-7.2 16-16 16zM192 384H384c35.3 0 64-28.7 64-64V115.9c0-12.7-5.1-24.9-14.1-33.9L366.1 14.1c-9-9-21.2-14.1-33.9-14.1H192c-35.3 0-64 28.7-64 64V320c0 35.3 28.7 64 64 64zM64 128c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H256c35.3 0 64-28.7 64-64V416H272v32c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V192c0-8.8 7.2-16 16-16H96V128H64z"]},{prefix:"fas",iconName:"bars",icon:[448,512,["navicon"],"f0c9","M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"]},{prefix:"fas",iconName:"location-dot",icon:[384,512,["map-marker-alt"],"f3c5","M215.7 499.2C267 435 384 279.4 384 192C384 86 298 0 192 0S0 86 0 192c0 87.4 117 243 168.3 307.2c12.3 15.3 35.1 15.3 47.4 0zM192 128a64 64 0 1 1 0 128 64 64 0 1 1 0-128z"]},{prefix:"fas",iconName:"circle-half-stroke",icon:[512,512,[9680,"adjust"],"f042","M448 256c0-106-86-192-192-192V448c106 0 192-86 192-192zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256z"]},KY("code-json","M5,3H7V5H5V10A2,2 0 0,1 3,12A2,2 0 0,1 5,14V19H7V21H5C3.93,20.73 3,20.1 3,19V15A2,2 0 0,0 1,13H0V11H1A2,2 0 0,0 3,9V5A2,2 0 0,1 5,3M19,3A2,2 0 0,1 21,5V9A2,2 0 0,0 23,11H24V13H23A2,2 0 0,0 21,15V19A2,2 0 0,1 19,21H17V19H19V14A2,2 0 0,1 21,12A2,2 0 0,1 19,10V5H17V3H19M12,15A1,1 0 0,1 13,16A1,1 0 0,1 12,17A1,1 0 0,1 11,16A1,1 0 0,1 12,15M8,15A1,1 0 0,1 9,16A1,1 0 0,1 8,17A1,1 0 0,1 7,16A1,1 0 0,1 8,15M16,15A1,1 0 0,1 17,16A1,1 0 0,1 16,17A1,1 0 0,1 15,16A1,1 0 0,1 16,15Z"),KY("database","M12,3C7.58,3 4,4.79 4,7C4,9.21 7.58,11 12,11C16.42,11 20,9.21 20,7C20,4.79 16.42,3 12,3M4,9V12C4,14.21 7.58,16 12,16C16.42,16 20,14.21 20,12V9C20,11.21 16.42,13 12,13C7.58,13 4,11.21 4,9M4,14V17C4,19.21 7.58,21 12,21C16.42,21 20,19.21 20,17V14C20,16.21 16.42,18 12,18C7.58,18 4,16.21 4,14Z"),KY("database-import","M12,3C8.59,3 5.69,4.07 4.54,5.57L9.79,10.82C10.5,10.93 11.22,11 12,11C16.42,11 20,9.21 20,7C20,4.79 16.42,3 12,3M3.92,7.08L2.5,8.5L5,11H0V13H5L2.5,15.5L3.92,16.92L8.84,12M20,9C20,11.21 16.42,13 12,13C11.34,13 10.7,12.95 10.09,12.87L7.62,15.34C8.88,15.75 10.38,16 12,16C16.42,16 20,14.21 20,12M20,14C20,16.21 16.42,18 12,18C9.72,18 7.67,17.5 6.21,16.75L4.53,18.43C5.68,19.93 8.59,21 12,21C16.42,21 20,19.21 20,17"),KY("database-export","M12,3C7.58,3 4,4.79 4,7C4,9.21 7.58,11 12,11C12.5,11 13,10.97 13.5,10.92V9.5H16.39L15.39,8.5L18.9,5C17.5,3.8 14.94,3 12,3M18.92,7.08L17.5,8.5L20,11H15V13H20L17.5,15.5L18.92,16.92L23.84,12M4,9V12C4,14.21 7.58,16 12,16C13.17,16 14.26,15.85 15.25,15.63L16.38,14.5H13.5V12.92C13,12.97 12.5,13 12,13C7.58,13 4,11.21 4,9M4,14V17C4,19.21 7.58,21 12,21C14.94,21 17.5,20.2 18.9,19L17,17.1C15.61,17.66 13.9,18 12,18C7.58,18 4,16.21 4,14Z"),KY("format-letter-case","M20.06,18C20,17.83 19.91,17.54 19.86,17.11C19.19,17.81 18.38,18.16 17.45,18.16C16.62,18.16 15.93,17.92 15.4,17.45C14.87,17 14.6,16.39 14.6,15.66C14.6,14.78 14.93,14.1 15.6,13.61C16.27,13.12 17.21,12.88 18.43,12.88H19.83V12.24C19.83,11.75 19.68,11.36 19.38,11.07C19.08,10.78 18.63,10.64 18.05,10.64C17.53,10.64 17.1,10.76 16.75,11C16.4,11.25 16.23,11.54 16.23,11.89H14.77C14.77,11.46 14.92,11.05 15.22,10.65C15.5,10.25 15.93,9.94 16.44,9.71C16.95,9.5 17.5,9.36 18.13,9.36C19.11,9.36 19.87,9.6 20.42,10.09C20.97,10.58 21.26,11.25 21.28,12.11V16C21.28,16.8 21.38,17.42 21.58,17.88V18H20.06M17.66,16.88C18.11,16.88 18.54,16.77 18.95,16.56C19.35,16.35 19.65,16.07 19.83,15.73V14.16H18.7C16.93,14.16 16.04,14.63 16.04,15.57C16.04,16 16.19,16.3 16.5,16.53C16.8,16.76 17.18,16.88 17.66,16.88M5.46,13.71H9.53L7.5,8.29L5.46,13.71M6.64,6H8.36L13.07,18H11.14L10.17,15.43H4.82L3.86,18H1.93L6.64,6Z"),KY("table-cog","M3 3H17C18.11 3 19 3.9 19 5V12.08C17.45 11.82 15.92 12.18 14.68 13H11V17H12.08C11.97 17.68 11.97 18.35 12.08 19H3C1.9 19 1 18.11 1 17V5C1 3.9 1.9 3 3 3M3 7V11H9V7H3M11 7V11H17V7H11M3 13V17H9V13H3M22.78 19.32L21.71 18.5C21.73 18.33 21.75 18.17 21.75 18S21.74 17.67 21.71 17.5L22.77 16.68C22.86 16.6 22.89 16.47 22.83 16.36L21.83 14.63C21.77 14.5 21.64 14.5 21.5 14.5L20.28 15C20 14.82 19.74 14.65 19.43 14.53L19.24 13.21C19.23 13.09 19.12 13 19 13H17C16.88 13 16.77 13.09 16.75 13.21L16.56 14.53C16.26 14.66 15.97 14.82 15.71 15L14.47 14.5C14.36 14.5 14.23 14.5 14.16 14.63L13.16 16.36C13.1 16.47 13.12 16.6 13.22 16.68L14.28 17.5C14.26 17.67 14.25 17.83 14.25 18S14.26 18.33 14.28 18.5L13.22 19.32C13.13 19.4 13.1 19.53 13.16 19.64L14.16 21.37C14.22 21.5 14.35 21.5 14.47 21.5L15.71 21C15.97 21.18 16.25 21.35 16.56 21.47L16.75 22.79C16.77 22.91 16.87 23 17 23H19C19.12 23 19.23 22.91 19.25 22.79L19.44 21.47C19.74 21.34 20 21.18 20.28 21L21.5 21.5C21.64 21.5 21.77 21.5 21.84 21.37L22.84 19.64C22.9 19.53 22.87 19.4 22.78 19.32M18 19.5C17.17 19.5 16.5 18.83 16.5 18S17.18 16.5 18 16.5 19.5 17.17 19.5 18 18.84 19.5 18 19.5Z"),KY("code-brackets","M15,4V6H18V18H15V20H20V4M4,4V20H9V18H6V6H9V4H4Z"),KY("vector-line","M15,3V7.59L7.59,15H3V21H9V16.42L16.42,9H21V3M17,5H19V7H17M5,17H7V19H5"),KY("atom","M12,11A1,1 0 0,1 13,12A1,1 0 0,1 12,13A1,1 0 0,1 11,12A1,1 0 0,1 12,11M4.22,4.22C5.65,2.79 8.75,3.43 12,5.56C15.25,3.43 18.35,2.79 19.78,4.22C21.21,5.65 20.57,8.75 18.44,12C20.57,15.25 21.21,18.35 19.78,19.78C18.35,21.21 15.25,20.57 12,18.44C8.75,20.57 5.65,21.21 4.22,19.78C2.79,18.35 3.43,15.25 5.56,12C3.43,8.75 2.79,5.65 4.22,4.22M15.54,8.46C16.15,9.08 16.71,9.71 17.23,10.34C18.61,8.21 19.11,6.38 18.36,5.64C17.62,4.89 15.79,5.39 13.66,6.77C14.29,7.29 14.92,7.85 15.54,8.46M8.46,15.54C7.85,14.92 7.29,14.29 6.77,13.66C5.39,15.79 4.89,17.62 5.64,18.36C6.38,19.11 8.21,18.61 10.34,17.23C9.71,16.71 9.08,16.15 8.46,15.54M5.64,5.64C4.89,6.38 5.39,8.21 6.77,10.34C7.29,9.71 7.85,9.08 8.46,8.46C9.08,7.85 9.71,7.29 10.34,6.77C8.21,5.39 6.38,4.89 5.64,5.64M9.88,14.12C10.58,14.82 11.3,15.46 12,16.03C12.7,15.46 13.42,14.82 14.12,14.12C14.82,13.42 15.46,12.7 16.03,12C15.46,11.3 14.82,10.58 14.12,9.88C13.42,9.18 12.7,8.54 12,7.97C11.3,8.54 10.58,9.18 9.88,9.88C9.18,10.58 8.54,11.3 7.97,12C8.54,12.7 9.18,13.42 9.88,14.12M18.36,18.36C19.11,17.62 18.61,15.79 17.23,13.66C16.71,14.29 16.15,14.92 15.54,15.54C14.92,16.15 14.29,16.71 13.66,17.23C15.79,18.61 17.62,19.11 18.36,18.36Z"),KY("chart-scatter-plot","M2,2H4V20H22V22H2V2M9,10A3,3 0 0,1 12,13A3,3 0 0,1 9,16A3,3 0 0,1 6,13A3,3 0 0,1 9,10M13,2A3,3 0 0,1 16,5A3,3 0 0,1 13,8A3,3 0 0,1 10,5A3,3 0 0,1 13,2M18,12A3,3 0 0,1 21,15A3,3 0 0,1 18,18A3,3 0 0,1 15,15A3,3 0 0,1 18,12Z"),KY("white-balance-sunny","M3.55 19.09L4.96 20.5L6.76 18.71L5.34 17.29M12 6C8.69 6 6 8.69 6 12S8.69 18 12 18 18 15.31 18 12C18 8.68 15.31 6 12 6M20 13H23V11H20M17.24 18.71L19.04 20.5L20.45 19.09L18.66 17.29M20.45 5L19.04 3.6L17.24 5.39L18.66 6.81M13 1H11V4H13M6.76 5.39L4.96 3.6L3.55 5L5.34 6.81L6.76 5.39M1 13H4V11H1M13 20H11V23H13"),KY("weather-might","M17.75,4.09L15.22,6.03L16.13,9.09L13.5,7.28L10.87,9.09L11.78,6.03L9.25,4.09L12.44,4L13.5,1L14.56,4L17.75,4.09M21.25,11L19.61,12.25L20.2,14.23L18.5,13.06L16.8,14.23L17.39,12.25L15.75,11L17.81,10.95L18.5,9L19.19,10.95L21.25,11M18.97,15.95C19.8,15.87 20.69,17.05 20.16,17.8C19.84,18.25 19.5,18.67 19.08,19.07C15.17,23 8.84,23 4.94,19.07C1.03,15.17 1.03,8.83 4.94,4.93C5.34,4.53 5.76,4.17 6.21,3.85C6.96,3.32 8.14,4.21 8.06,5.04C7.79,7.9 8.75,10.87 10.95,13.06C13.14,15.26 16.1,16.22 18.97,15.95M17.33,17.97C14.5,17.81 11.7,16.64 9.53,14.5C7.36,12.31 6.2,9.5 6.04,6.68C3.23,9.82 3.34,14.64 6.35,17.66C9.37,20.67 14.19,20.78 17.33,17.97Z"),KY("plus-minus-box","M5,3C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3H5M11,6H13V9H16V11H13V14H11V11H8V9H11V6M8,16H16V18H8V16Z"),KY("plus-minus","M11,4V9H6V11H11V16H13V11H18V9H13V4H11M6,18V20H18V18H6Z"),KY("plus","M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"),KY("minus","M19,13H5V11H19V13Z"),KY("av-timer","M11,17A1,1 0 0,0 12,18A1,1 0 0,0 13,17A1,1 0 0,0 12,16A1,1 0 0,0 11,17M11,3V7H13V5.08C16.39,5.57 19,8.47 19,12A7,7 0 0,1 12,19A7,7 0 0,1 5,12C5,10.32 5.59,8.78 6.58,7.58L12,13L13.41,11.59L6.61,4.79V4.81C4.42,6.45 3,9.05 3,12A9,9 0 0,0 12,21A9,9 0 0,0 21,12A9,9 0 0,0 12,3M18,12A1,1 0 0,0 17,11A1,1 0 0,0 16,12A1,1 0 0,0 17,13A1,1 0 0,0 18,12M6,12A1,1 0 0,0 7,13A1,1 0 0,0 8,12A1,1 0 0,0 7,11A1,1 0 0,0 6,12Z"),((e,t)=>({prefix:"radix",iconName:e,icon:[15,15,,,t]}))("timer","M7.49998 0.849976C7.22383 0.849976 6.99998 1.07383 6.99998 1.34998V3.52234C6.99998 3.79848 7.22383 4.02234 7.49998 4.02234C7.77612 4.02234 7.99998 3.79848 7.99998 3.52234V1.8718C10.8862 2.12488 13.15 4.54806 13.15 7.49998C13.15 10.6204 10.6204 13.15 7.49998 13.15C4.37957 13.15 1.84998 10.6204 1.84998 7.49998C1.84998 6.10612 2.35407 4.83128 3.19049 3.8459C3.36919 3.63538 3.34339 3.31985 3.13286 3.14115C2.92234 2.96245 2.60681 2.98825 2.42811 3.19877C1.44405 4.35808 0.849976 5.86029 0.849976 7.49998C0.849976 11.1727 3.82728 14.15 7.49998 14.15C11.1727 14.15 14.15 11.1727 14.15 7.49998C14.15 3.82728 11.1727 0.849976 7.49998 0.849976ZM6.74049 8.08072L4.22363 4.57237C4.15231 4.47295 4.16346 4.33652 4.24998 4.25C4.33649 4.16348 4.47293 4.15233 4.57234 4.22365L8.08069 6.74051C8.56227 7.08599 8.61906 7.78091 8.19998 8.2C7.78089 8.61909 7.08597 8.56229 6.74049 8.08072Z"),...Object.entries({ZeroOneN:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6Q0RFRDI1RjI0ODY0MTFFN0JEQTA4NTA5QjY4NEI4MzAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6Q0RFRDI1RjM0ODY0MTFFN0JEQTA4NTA5QjY4NEI4MzAiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpCQTE2QzQzRDQ4NjQxMUU3QkRBMDg1MDlCNjg0QjgzMCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpCQTE2QzQzRTQ4NjQxMUU3QkRBMDg1MDlCNjg0QjgzMCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PnTT5ywAAAJMSURBVHja7Fc9T2JBFB3MZq1IqLSgsRM6G6TcAmK7VNoRK4yBxE6XP/CsNxBohc6G5w+AoCU0aEWpBfAD4AeM55AZMjvvg2dClsRwkxOeb+7ce+6dmTPPmJRSbNP2xJZtR2DrBH6k0+ndEkSxBHAD9AGpMAJc4Lfh1zDGn4GLgHglNb8kqANhSKVSTiaTkY7jyMFgILWNx2PZ7XZluVyW8BkBJWA1PhwO+f7ZinUO9DmH8xl3XfIGnefzuQwzBsvlcjKIAH4PWAh9zCLq9Xp48mq16knGwASTmkaShULBQ0B1ZlSr1TyFtFqtwOS3xWLxH2eyZctUUOKVFTGRtslk4iHAODZZ/k2yLDKIwLsZjJ2gM3Bo+V0wieu6vsvCCu0ucS+RPHC1vId8kp+YrWRwvHsIWaosO7Nun3DDqn1yD+zr+RQiz3WYz+dXz6iCP82g84lKB4jxF0Rv0G7P+Gw2E6ha9Ho9/eoPsRJAucbUzl53Wi79NmwU25QSJuLx+ObugkqlInD+l8+oTsAny1aHxDlKJpOBgzhBot1ui8Vi4R3cwCY8jbIJeap4JOHvAmd6flDQj+l06ncMD/yktdPp+AoW59nEeBqUnjjAzyACd7YQUcnUxL7CyJZWk7QWIs6xdcLQg6cvSzETEl+Q4iyXkAWZBHU3/stlpLvKpaWkm0sb5Tq+19exqfvWdbyU1gjX8SGLIlnKNJ9jPGYRP0gugQLwS717Az6AB+DJ+CC5Vs8vSkEffeIdK79mVALf95swtvvXbEdg2wQ+BRgAvLABcxKvek4AAAAASUVORK5CYII=",ZeroOne:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QkExNkM0M0I0ODY0MTFFN0JEQTA4NTA5QjY4NEI4MzAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QkExNkM0M0M0ODY0MTFFN0JEQTA4NTA5QjY4NEI4MzAiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpCQTE2QzQzOTQ4NjQxMUU3QkRBMDg1MDlCNjg0QjgzMCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpCQTE2QzQzQTQ4NjQxMUU3QkRBMDg1MDlCNjg0QjgzMCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PomEhhsAAAKSSURBVHja7FexbhpBED0ipFRI7ixBQwlV0nCUWKJIydEkFSRpHCGQ0iXgBqfBbQrAShXzA4BLJJCdEip3UDoSUFvwAZv30B5a1ncHBiSk2CONdrU3O/N2dt6w+IQQxiHllXFgeQFwcAD+aDT6zDPwBNsjaAoaVtbuoNcee46hOSi5/hd6pRv41vUBXJFJJ4FA4FMymTRCodDy22g0Mnq93gOml8Ph8Mxhb71QKOQYYzqdGq1W6zPsVkHwo5tGIpFvsVhMNJtN4Saz2UwUi0UB299QU9u/tBsMBrS51WN4BrcsS4zHY7GJEKQOYmsAMIzz5GrwyWQiSqWSwDXQkchms6LRaCwyoIPYB4Ar3NdyM+cEhPXv0LC0OYH+ZJZUEASG9fdbA2AAnlI9uQwedwF7waC29Pt92t5sCoCN6FzSZCmsdluq1aoxn8+LqN6+E0uwXoKPKNiQ4j7TNA0w5gRLZRdWraz7QZOyTkU6saXb7XL4taZH3IGSKRs4asVA5s5Vg2AwaOTz+QSmCZ2GniLTuI6uFpyLbcRfq9UeHYcZwL0v5mw8SFsYqb73yMBb9Tel3W4zA4s5gC1G2Yget2Lc8Q99MZ1Ol20AmLMOTjE9c7nT1xgstW4qlQrrhn7LNgACgp8/mN56dkKk84hVb1OLo+T+qUv66wi4QlnSeNc+cAG0y81IvyDfZaf7CE1Av5JubE6qSLDxXQEc05ib9HbLvp/JZARPTc6rQjDMyL5+Cz7wKkDDjapZD74zAOngHbRN57wGJyFAmfa6w/71ndCruyBoB0MHlf4FxZUDJd+o7wF8Z7Vfy/dAx8HFJWies1ng+CABqqe8oMIOL6KHDV5ElPt9APj/HqW+l/+Gzx7APwEGACfjkeXK58xsAAAAAElFTkSuQmCC",ZeroN:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NDc5MkNFMEM0ODY0MTFFN0JEQTA4NTA5QjY4NEI4MzAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NDc5MkNFMEQ0ODY0MTFFN0JEQTA4NTA5QjY4NEI4MzAiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo0NzkyQ0UwQTQ4NjQxMUU3QkRBMDg1MDlCNjg0QjgzMCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo0NzkyQ0UwQjQ4NjQxMUU3QkRBMDg1MDlCNjg0QjgzMCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PpR0ImIAAALlSURBVHja7Fe/jxJBGF0MyVUk2HgJFJ6NQqUNWEoCkfKWxusozxBI7Eiw8ardKy/hxyVWQqcF8AdA9Eqg8DqwuwJI7Aj8AeN7OEuGhd09tCBRvuTLzA4z37z53rxvF58QQtunPdD2bAcA/mg0+p9nYMf5Qfhz5fnmbwH47iND0PQaTS4QCOiRSGQ1PhgMZmja8OvhcNi/z4aIdc5Ycs1HjQCcHJu9hH/KZrOi0+kIu83nc9FsNkUymRSYZ3jEegqv6bousLHI5/NcU3RbkIa3W62W8DICKZVKDFhziFWMxWKiXq+v1ozHY8Exv0OajpmmSqVyitOtxrvdrjYajZZ90KGlUiktFAot+4ZhcDiHtTOc8L1KHWLoAKiFw+FVrOl0+rvjgNjA5msnJA3MCPxC+hX8DhuvzZN0kDqDfTt1nCPT/w1+tm3zIFPDidYC8oZxc8vcI6ZdBUHKMPadY1YMy0gBY6uxfHhIMBEKAw+BvIUMLB+q1aqG/iXSWnKg6wjND9DzmHQsFgttMploqlpIm2maWr/fv8bj5zUZMrV2KWYymaXTyDMCPgGAOxdpXRQKhQ9I7cZv2FSzDrPVvG44TiLc5CWp0Mnrn5gfxWQDFG8r02nddpwwiAzMXOrLC6d3CtNPWhxLMSjYKKcYe0XZ0OLxOOVHOX1xA6Bybj8MKWg0GjdOFNjTeUL5WNbr9UjDV3jcIf3nVIllrHK8V2xVYxypphr8kbXeidO2ql+WWwnijQrU0rq6mdT4W/gta4ldiuVy2ZJi0Q1AmoHVxTyBDL50/m7XOkETvIxxTL1zHpSwBoJlWBa2mtvNNpky+wmcjJvIk6Vtcc5Y9QjeHovxveRlbiun9tLKVFul1S2W+kJiywx4fg9AXmm+UDD5lIqg3HizwftSYgBHmV1izhXGfnrEeobmHeLkuB7rIj4n+WyTGjwh2xP4rXR+kMx2/BBKyLWzXQD8mx+lvsNfswOAfQP4JcAAK/At0HQvwB8AAAAASUVORK5CYII=",OneOnly:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QUJCNTBCRDA0ODY0MTFFN0JEQTA4NTA5QjY4NEI4MzAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QkExNkM0MzQ0ODY0MTFFN0JEQTA4NTA5QjY4NEI4MzAiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpBQkI1MEJDRTQ4NjQxMUU3QkRBMDg1MDlCNjg0QjgzMCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBQkI1MEJDRjQ4NjQxMUU3QkRBMDg1MDlCNjg0QjgzMCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pur5d4QAAAE1SURBVHjaYvz//z/DQAImhgEGow4YcAewaGpqjvAQoJI5CUAsD2VPB+JXULY4EGcCMSivPwTiBRgOuH79OkU2A6MwITAwcL6UlBSYP3XqVHGgmVlQufqcnJxMUFnz7NkzhvXr1zMA5VAdAZKkBGtoaBw4derUfxgA8v8jycHFQWpAatH1j2bDUQeACqIGaDahGgClfmLlWIDZpJ7SKhmWBUEgOzsbRDVgUwOUswcy7ZHFGf8PcIOABVhwUGwIsCBiQCqIUOSgIQIviNABI7BwaKDQfodFixbZm5qawuIYRDVC5ephJe3p06cZ4uLiDgKZB0ZLwtGCaNg1SBYAs5c9MJExIDVI4GxgtgQ1SBiePn3KgK1BAsqG1GoRKSA54CVaiwgEHtDSAUM3DTCO9g1HvAMAAgwAvvwYPnW1JuQAAAAASUVORK5CYII=",OneN:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QkExNkM0Mzc0ODY0MTFFN0JEQTA4NTA5QjY4NEI4MzAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QkExNkM0Mzg0ODY0MTFFN0JEQTA4NTA5QjY4NEI4MzAiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpCQTE2QzQzNTQ4NjQxMUU3QkRBMDg1MDlCNjg0QjgzMCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpCQTE2QzQzNjQ4NjQxMUU3QkRBMDg1MDlCNjg0QjgzMCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pt+BFx8AAAIISURBVHja7Fc9TwJBEF0MLYkdBgot4QdwLSaQSAmNdkCrR61CI9Ud1oCUIB0NYElBtJU/QIkmQKIVgcpqfXPekQNBYu7WM4FJJvs1x87Ovnk7uDjnzEnZYw7LzgHHHXAFAoHtjoDbpt9JQw/1fgX6vsH+CDohdVnlgWAwmE4kElWfz6eNy+Vypd/vX6yx9aK58fv959PplM1mswNGDlhRYOip1+txQzDma+wuoYNSqaTZUYvxnXAHMJag1WQyyYfDITdLJBLhbpEAQ8gVj8eThTBc03weoWeqqrLRaFQREgHoKfQRG3Pc9cKpW60WD4VCZKPS90IiAJA1FEVhkiTN58bjMaNIwNl7yhQA9VlLQ4Qpj9a2J1GWZZbJZBbmkBkMoHtFt6pPxbBvTGNCHZWWNqX7xalXriHkdNfrqZg7XBC4KTxWhSJgENGy0Onb7faPj1He4v7H9Xo9DGRrg1QqpaWY2SEAj+Vyua+0W6ZpQWn4YjCeWYrFIq0NiBWN70U54CWajcfj3LxGQmxIrEjsSCwplIrRP6N1cMI3Qmo2mxohCa0HQDYNNCfASAG8z7rd7nwtGo3+TUECJz6gWfB/DAT1QCAlViSgYq5gBxXXQDZhQrqpIFnlSAdNBwx4BWwUsPk15m7tqgnTepVjOPC2wX5fr4hse4xqv7Sf/J+yfPffcOsd+BRgAOvawAWTC+PMAAAAAElFTkSuQmCC",One:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QUJCNTBCQ0M0ODY0MTFFN0JEQTA4NTA5QjY4NEI4MzAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QUJCNTBCQ0Q0ODY0MTFFN0JEQTA4NTA5QjY4NEI4MzAiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpBQkI1MEJDQTQ4NjQxMUU3QkRBMDg1MDlCNjg0QjgzMCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBQkI1MEJDQjQ4NjQxMUU3QkRBMDg1MDlCNjg0QjgzMCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PnOhfCQAAADcSURBVHjaYvz//z/DQAImhgEGow4YcAewaGpqjvAQoJI5CUAsD2VPB+JXxGpkpLQcAEZhQmBg4HwpKSkwf+rUqdOvX7+eRbQBIAdQgjU0NA6cOnXqPwwA+f9J0T+aDUcdACqIGkBpkZqGAs2sJzobTpky5T+lWRGYDRmkpaXBbKB5JOll/D/ADQIWYMFBsSGgEEAqiEgLAWDB0UCh/Q6LFi2yNzU1hcU/iGocLQlHC6IR1SBZsH79entgQmRAapCQlA2p1SJSQHLAS3o3yRYM2TTAONo3HPEOAAgwAJh583IRUllDAAAAAElFTkSuQmCC",N:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NDc5MkNFMDg0ODY0MTFFN0JEQTA4NTA5QjY4NEI4MzAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NDc5MkNFMDk0ODY0MTFFN0JEQTA4NTA5QjY4NEI4MzAiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozNDQwRjc3NTQ4M0MxMUU3QkRBMDg1MDlCNjg0QjgzMCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozNDQwRjc3NjQ4M0MxMUU3QkRBMDg1MDlCNjg0QjgzMCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PkbQDKwAAAGjSURBVHja7Jcxb4JQEMefLl272cjSUbYu0g+gSVemdpPZwKzRRSf4AGg70k8AfACTdqx+ibYJLp2MfoDr/wg0vJp2Al6TeskFeQ+4e/fufvdsEJFQKU2hWE4OKHeg0el0TlugQi6h5+kW1MkBXddbuMw0TRvu93txOBwumjUaH+Hy4jjOcLVaCcuyeHgmOAJVKpLcgAaDwYCSJKGi9Hq9yo273W6XwjCUDCP8NJlMCPP3VRm+hT6xETZWlCiKiJ3CvJfmX8mGW7wqDu16vZYMb7db4m3A/CP0On+HQTRHMpRVCiaS7Mq2bWlwuVyKxWLxjp/BEQkxQWWVYr/fF9/JipALrP5nFJPiA0EagbI+BsAI0zSlMV59HMe/NqN5mYg1DMPyPE+02+2vwc1mI6bTKTvzgNsP6Y0KSnAMfctySxLf97kKXqGj/PmqOJCWI7aDsHrJCaZhVo4BU7JqEt5Bn13XPQIS05GBVEcvOGPqsTE0IQnHtThQcOQGGnP4mYpZL/Bqc6CYpFkvGOcoVsEfPg3tVB7Jdn/nWH76b/jvHfgUYADeZNmzPgOYQQAAAABJRU5ErkJggg=="}).map((([e,t])=>((e,t)=>({prefix:"base64",iconName:e,icon:[24,24,,,t]}))(e,t)))],MY={};function zY(e,t){return MY[`${e}-${t}`]}!function(e){e.reduce(((e,t)=>(e[`${t.prefix}-${t.iconName}`]=t,e)),MY)}(HY);const JY=(e,t)=>()=>{const t=e.prefix??"fas",n=e.name??"",i=e.size??18,o=zY(t,n);if(!o)return Sh``;const[l,r,,,a]=o.icon,s=i/24*1.5;return Ch`
    <div
      class=${["icon",wY,e.class]}
      style=${{transform:`rotate(${e.rotate??0}deg)`}}
      ...${TY({title:e.title})}
      @click=${e.onClick}
      @mouseenter=${e.onMouseenter}
      @mouseleave=${e.onMouseleave}
    >
      ${"base64"===t?Ch`
            <img
              style=${{width:`${i}px`,height:`${i}px`}}
              src=${a}
            />
          `:Sh`
            <svg
              class=${e.useTransition?NY:null}
              style=${{width:"fas"===t?`${s}rem`:`${i}px`,height:"fas"===t?`${s}rem`:`${i}px`}}
              viewBox="0 0 ${l} ${r}"
            >
              ${e.color?Sh`<path d=${a} fill=${e.color}></path>`:Sh`<path d=${a}></path>`}
            </svg>
    `}
    </div>
  `},jY=Qh`
  position: absolute;
  background-color: var(--memo-background);
  border-radius: 6px;
  border: 1px solid var(--memo-border);
  fill: transparent;
  color: transparent;

  &:hover {
    fill: var(--foreground);
    color: var(--foreground);
  }

  &[data-selected] {
    border: 1px solid var(--memo-select);
  }
`,FY=Qh`
  position: relative;
  display: flex;
  flex-direction: column;
  padding: ${8}px;
  width: 100%;
  height: 100%;
`,OY=Qh`
  display: flex;
  flex-direction: column;
  position: relative;
`,$Y=Qh`
  position: absolute;
  top: -${9}px;
  left: -${8}px;
  width: calc(100% + ${16}px);
  min-height: 4px;
  border-radius: 6px 6px 0 0;
  cursor: pointer;
`,EY=Qh`
  display: flex;
  height: ${12}px;
  justify-content: flex-end;
  margin-bottom: ${4}px;
  cursor: move;

  & > .icon {
    margin-left: 4px;
    cursor: pointer;
  }

  & > .icon:hover {
    fill: var(--active);
    color: var(--active);
  }
`,UY=Qh`
  resize: none;
  background-color: transparent;
  ${zL};
  line-height: normal;
`,PY=(e,t)=>{const n=yL(t),i=({event:e,movementX:t,movementY:i})=>{"mousemove"===e.type&&e.preventDefault();const{store:o}=n.value;o.dispatch(yG(t,i))},o=t=>{const o=t.target;if(!o)return;const{store:l}=n.value;l.dispatch(Zx(e.memo.id,hL(t))),!o.closest(".memo-header-color")&&!o.closest(".memo-textarea")&&!o.closest(".icon")&&!o.closest(".sash")&&bY.subscribe(i)},l=()=>{const{store:t}=n.value;t.dispatch(vx(e.memo.id))},r=t=>{const i=t.target;if(!i)return;const{store:o}=n.value;o.dispatch(uv({id:e.memo.id,value:i.value}))},a=()=>{t.host.dispatchEvent(_L())},s=t=>{const{emitter:i}=n.value;i.emit(ZR({x:t.clientX,y:t.clientY,color:e.memo.ui.color}))};return()=>{var t;const{store:i,keyBindingMap:c}=n.value,{editor:u}=i.state,{memo:d}=e,p=!!u.selectedMap[d.id],h=Jx(d),m=jx(d);return Ch`
      <div
        class=${["memo",jY]}
        style=${{top:`${d.ui.y}px`,left:`${d.ui.x}px`,"z-index":`${d.ui.zIndex}`,width:`${h}px`,height:`${m}px`}}
        ?data-selected=${p}
        ?data-focus-border=${p}
        @mousedown=${o}
        @touchstart=${o}
      >
        <div class=${FY}>
          <div class=${OY}>
            <div
              class=${["memo-header-color",$Y]}
              style=${{"background-color":d.ui.color}}
              @click=${s}
            ></div>
            <div class=${EY}>
              <${JY}
                size=${12}
                name="xmark"
                title=${mL(null==(t=c.removeTable[0])?void 0:t.shortcut)}
                useTransition=${!0}
                .onClick=${l}
              />
            </div>
          </div>
          <textarea
            class=${["memo-textarea","scrollbar",UY]}
            style=${{width:`${d.ui.width}px`,height:`${d.ui.height}px`}}
            spellcheck="false"
            .value=${d.value}
            @input=${r}
            @wheel=${PL}
            @blur=${a}
          ></textarea>
          <${YY} memo=${d} top=${m} left=${h} />
        </div>
      </div>
    `}},AY=Qh`
  position: absolute;
  max-width: 100px;
  overflow: hidden;
  display: flex;
  pointer-events: none;
  z-index: 2147483647;

  & > span {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
`,BY=(e,t)=>{const n=Bs({x:e.tracker.x,y:e.tracker.y}),{addUnsubscribe:i}=WL();return Ts((()=>{i(sY.subscribe((()=>{const{tracker:t}=e;n.x+=.05*(t.x-n.x),n.y+=.05*(t.y-n.y)})))})),()=>{const{tracker:{nickname:t}}=e;return Ch`
      <div
        class=${AY}
        style=${{left:`${n.x}px`,top:`${n.y}px`}}
      >
        <${JY} name="arrow-pointer" size=${16} />
        <span>${t}</span>
      </div>
    `}},QY=(e,t)=>{const n=yL(t),{addUnsubscribe:i}=WL(),o=Bs({force:!1}),l=()=>{o.force=!o.force};return Ts((()=>{const{store:e}=n.value,{editor:{sharedMouseTrackerMap:t}}=e.state;i(Qs(t).subscribe(l))})),()=>{const{store:e}=n.value,{editor:{sharedMouseTrackerMap:t}}=e.state;return o.force,Ch`
      ${ap(Object.values(t),(e=>e.id),(e=>Ch`<${BY} tracker=${e} />`))}
    `}};function DY(e){return Array.isArray?Array.isArray(e):"[object Array]"===rT(e)}const _Y=1/0;function qY(e){return null==e?"":function(e){if("string"==typeof e)return e;let t=e+"";return"0"==t&&1/e==-_Y?"-0":t}(e)}function eT(e){return"string"==typeof e}function tT(e){return"number"==typeof e}function nT(e){return!0===e||!1===e||function(e){return iT(e)&&null!==e}(e)&&"[object Boolean]"==rT(e)}function iT(e){return"object"==typeof e}function oT(e){return null!=e}function lT(e){return!e.trim().length}function rT(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const aT=e=>`Missing ${e} property in key`,sT=e=>`Property 'weight' in key '${e}' must be a positive integer`,cT=Object.prototype.hasOwnProperty;class uT{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach((e=>{let n=dT(e);this._keys.push(n),this._keyMap[n.id]=n,t+=n.weight})),this._keys.forEach((e=>{e.weight/=t}))}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function dT(e){let t=null,n=null,i=null,o=1,l=null;if(eT(e)||DY(e))i=e,t=pT(e),n=hT(e);else{if(!cT.call(e,"name"))throw new Error(aT("name"));const r=e.name;if(i=r,cT.call(e,"weight")&&(o=e.weight,o<=0))throw new Error(sT(r));t=pT(r),n=hT(r),l=e.getFn}return{path:t,id:n,weight:o,src:i,getFn:l}}function pT(e){return DY(e)?e:e.split(".")}function hT(e){return DY(e)?e.join("."):e}const mT={useExtendedSearch:!1,getFn:function(e,t){let n=[],i=!1;const o=(e,t,l)=>{if(oT(e))if(t[l]){const r=e[t[l]];if(!oT(r))return;if(l===t.length-1&&(eT(r)||tT(r)||nT(r)))n.push(qY(r));else if(DY(r)){i=!0;for(let e=0,n=r.length;e<n;e+=1)o(r[e],t,l+1)}else t.length&&o(r,t,l+1)}else n.push(e)};return o(e,eT(t)?t.split("."):t,0),i?n:n[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var bT={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,...mT};const fT=/[^ ]+/g;class yT{constructor({getFn:e=bT.getFn,fieldNormWeight:t=bT.fieldNormWeight}={}){this.norm=function(e=1,t=3){const n=new Map,i=Math.pow(10,t);return{get(t){const o=t.match(fT).length;if(n.has(o))return n.get(o);const l=1/Math.pow(o,.5*e),r=parseFloat(Math.round(l*i)/i);return n.set(o,r),r},clear(){n.clear()}}}(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach(((e,t)=>{this._keysMap[e.id]=t}))}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,eT(this.docs[0])?this.docs.forEach(((e,t)=>{this._addString(e,t)})):this.docs.forEach(((e,t)=>{this._addObject(e,t)})),this.norm.clear())}add(e){const t=this.size();eT(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,n=this.size();t<n;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!oT(e)||lT(e))return;let n={v:e,i:t,n:this.norm.get(e)};this.records.push(n)}_addObject(e,t){let n={i:t,$:{}};this.keys.forEach(((t,i)=>{let o=t.getFn?t.getFn(e):this.getFn(e,t.path);if(oT(o))if(DY(o)){let e=[];const t=[{nestedArrIndex:-1,value:o}];for(;t.length;){const{nestedArrIndex:n,value:i}=t.pop();if(oT(i))if(eT(i)&&!lT(i)){let t={v:i,i:n,n:this.norm.get(i)};e.push(t)}else DY(i)&&i.forEach(((e,n)=>{t.push({nestedArrIndex:n,value:e})}))}n.$[i]=e}else if(eT(o)&&!lT(o)){let e={v:o,n:this.norm.get(o)};n.$[i]=e}})),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function gT(e,t,{getFn:n=bT.getFn,fieldNormWeight:i=bT.fieldNormWeight}={}){const o=new yT({getFn:n,fieldNormWeight:i});return o.setKeys(e.map(dT)),o.setSources(t),o.create(),o}function vT(e,{errors:t=0,currentLocation:n=0,expectedLocation:i=0,distance:o=bT.distance,ignoreLocation:l=bT.ignoreLocation}={}){const r=t/e.length;if(l)return r;const a=Math.abs(i-n);return o?r+a/o:a?1:r}const ZT=32;function xT(e,t,n,{location:i=bT.location,distance:o=bT.distance,threshold:l=bT.threshold,findAllMatches:r=bT.findAllMatches,minMatchCharLength:a=bT.minMatchCharLength,includeMatches:s=bT.includeMatches,ignoreLocation:c=bT.ignoreLocation}={}){if(t.length>ZT)throw new Error((e=>`Pattern length exceeds max of ${e}.`)(ZT));const u=t.length,d=e.length,p=Math.max(0,Math.min(i,d));let h=l,m=p;const b=a>1||s,f=b?Array(d):[];let y;for(;(y=e.indexOf(t,m))>-1;){let e=vT(t,{currentLocation:y,expectedLocation:p,distance:o,ignoreLocation:c});if(h=Math.min(e,h),m=y+u,b){let e=0;for(;e<u;)f[y+e]=1,e+=1}}m=-1;let g=[],v=1,Z=u+d;const x=1<<u-1;for(let i=0;i<u;i+=1){let l=0,a=Z;for(;l<a;)vT(t,{errors:i,currentLocation:p+a,expectedLocation:p,distance:o,ignoreLocation:c})<=h?l=a:Z=a,a=Math.floor((Z-l)/2+l);Z=a;let s=Math.max(1,p-a+1),y=r?d:Math.min(p+a,d)+u,X=Array(y+2);X[y+1]=(1<<i)-1;for(let l=y;l>=s;l-=1){let r=l-1,a=n[e.charAt(r)];if(b&&(f[r]=+!!a),X[l]=(X[l+1]<<1|1)&a,i&&(X[l]|=(g[l+1]|g[l])<<1|1|g[l+1]),X[l]&x&&(v=vT(t,{errors:i,currentLocation:r,expectedLocation:p,distance:o,ignoreLocation:c}),v<=h)){if(h=v,m=r,m<=p)break;s=Math.max(1,2*p-m)}}if(vT(t,{errors:i+1,currentLocation:p,expectedLocation:p,distance:o,ignoreLocation:c})>h)break;g=X}const X={isMatch:m>=0,score:Math.max(.001,v)};if(b){const e=function(e=[],t=bT.minMatchCharLength){let n=[],i=-1,o=-1,l=0;for(let r=e.length;l<r;l+=1){let r=e[l];r&&-1===i?i=l:!r&&-1!==i&&(o=l-1,o-i+1>=t&&n.push([i,o]),i=-1)}return e[l-1]&&l-i>=t&&n.push([i,l-1]),n}(f,a);e.length?s&&(X.indices=e):X.isMatch=!1}return X}function XT(e){let t={};for(let n=0,i=e.length;n<i;n+=1){const o=e.charAt(n);t[o]=(t[o]||0)|1<<i-n-1}return t}class GT{constructor(e,{location:t=bT.location,threshold:n=bT.threshold,distance:i=bT.distance,includeMatches:o=bT.includeMatches,findAllMatches:l=bT.findAllMatches,minMatchCharLength:r=bT.minMatchCharLength,isCaseSensitive:a=bT.isCaseSensitive,ignoreLocation:s=bT.ignoreLocation}={}){if(this.options={location:t,threshold:n,distance:i,includeMatches:o,findAllMatches:l,minMatchCharLength:r,isCaseSensitive:a,ignoreLocation:s},this.pattern=a?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const c=(e,t)=>{this.chunks.push({pattern:e,alphabet:XT(e),startIndex:t})},u=this.pattern.length;if(u>ZT){let e=0;const t=u%ZT,n=u-t;for(;e<n;)c(this.pattern.substr(e,ZT),e),e+=ZT;if(t){const e=u-ZT;c(this.pattern.substr(e),e)}}else c(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,includeMatches:n}=this.options;if(t||(e=e.toLowerCase()),this.pattern===e){let t={isMatch:!0,score:0};return n&&(t.indices=[[0,e.length-1]]),t}const{location:i,distance:o,threshold:l,findAllMatches:r,minMatchCharLength:a,ignoreLocation:s}=this.options;let c=[],u=0,d=!1;this.chunks.forEach((({pattern:t,alphabet:p,startIndex:h})=>{const{isMatch:m,score:b,indices:f}=xT(e,t,p,{location:i+h,distance:o,threshold:l,findAllMatches:r,minMatchCharLength:a,includeMatches:n,ignoreLocation:s});m&&(d=!0),u+=b,m&&f&&(c=[...c,...f])}));let p={isMatch:d,score:d?u/this.chunks.length:1};return d&&n&&(p.indices=c),p}}class IT{constructor(e){this.pattern=e}static isMultiMatch(e){return WT(e,this.multiRegex)}static isSingleMatch(e){return WT(e,this.singleRegex)}search(){}}function WT(e,t){const n=e.match(t);return n?n[1]:null}class kT extends IT{constructor(e,{location:t=bT.location,threshold:n=bT.threshold,distance:i=bT.distance,includeMatches:o=bT.includeMatches,findAllMatches:l=bT.findAllMatches,minMatchCharLength:r=bT.minMatchCharLength,isCaseSensitive:a=bT.isCaseSensitive,ignoreLocation:s=bT.ignoreLocation}={}){super(e),this._bitapSearch=new GT(e,{location:t,threshold:n,distance:i,includeMatches:o,findAllMatches:l,minMatchCharLength:r,isCaseSensitive:a,ignoreLocation:s})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class VT extends IT{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t,n=0;const i=[],o=this.pattern.length;for(;(t=e.indexOf(this.pattern,n))>-1;)n=t+o,i.push([t,n-1]);const l=!!i.length;return{isMatch:l,score:l?0:1,indices:i}}}const CT=[class extends IT{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},VT,class extends IT{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},class extends IT{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends IT{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends IT{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}},class extends IT{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const t=-1===e.indexOf(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},kT],ST=CT.length,RT=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/;const LT=new Set([kT.type,VT.type]);const YT=[];function TT(e,t){for(let n=0,i=YT.length;n<i;n+=1){let i=YT[n];if(i.condition(e,t))return new i(e,t)}return new GT(e,t)}const wT="$and",NT="$or",KT="$path",HT="$val",MT=e=>!(!e[wT]&&!e[NT]),zT=e=>({[wT]:Object.keys(e).map((t=>({[t]:e[t]})))});function JT(e,t,{auto:n=!0}={}){const i=e=>{let o=Object.keys(e);const l=(e=>!!e[KT])(e);if(!l&&o.length>1&&!MT(e))return i(zT(e));if((e=>!DY(e)&&iT(e)&&!MT(e))(e)){const i=l?e[KT]:o[0],r=l?e[HT]:e[i];if(!eT(r))throw new Error((e=>`Invalid value for key ${e}`)(i));const a={keyId:hT(i),pattern:r};return n&&(a.searcher=TT(r,t)),a}let r={children:[],operator:o[0]};return o.forEach((t=>{const n=e[t];DY(n)&&n.forEach((e=>{r.children.push(i(e))}))})),r};return MT(e)||(e=zT(e)),i(e)}function jT(e,t){const n=e.matches;t.matches=[],oT(n)&&n.forEach((e=>{if(!oT(e.indices)||!e.indices.length)return;const{indices:n,value:i}=e;let o={indices:n,value:i};e.key&&(o.key=e.key.src),e.idx>-1&&(o.refIndex=e.idx),t.matches.push(o)}))}function FT(e,t){t.score=e.score}class OT{constructor(e,t={},n){this.options={...bT,...t},this.options.useExtendedSearch,this._keyStore=new uT(this.options.keys),this.setCollection(e,n)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof yT))throw new Error("Incorrect 'index' type");this._myIndex=t||gT(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){oT(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=(()=>!1)){const t=[];for(let n=0,i=this._docs.length;n<i;n+=1){const o=this._docs[n];e(o,n)&&(this.removeAt(n),n-=1,i-=1,t.push(o))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){const{includeMatches:n,includeScore:i,shouldSort:o,sortFn:l,ignoreFieldNorm:r}=this.options;let a=eT(e)?eT(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return function(e,{ignoreFieldNorm:t=bT.ignoreFieldNorm}){e.forEach((e=>{let n=1;e.matches.forEach((({key:e,norm:i,score:o})=>{const l=e?e.weight:null;n*=Math.pow(0===o&&l?Number.EPSILON:o,(l||1)*(t?1:i))})),e.score=n}))}(a,{ignoreFieldNorm:r}),o&&a.sort(l),tT(t)&&t>-1&&(a=a.slice(0,t)),function(e,t,{includeMatches:n=bT.includeMatches,includeScore:i=bT.includeScore}={}){const o=[];return n&&o.push(jT),i&&o.push(FT),e.map((e=>{const{idx:n}=e,i={item:t[n],refIndex:n};return o.length&&o.forEach((t=>{t(e,i)})),i}))}(a,this._docs,{includeMatches:n,includeScore:i})}_searchStringList(e){const t=TT(e,this.options),{records:n}=this._myIndex,i=[];return n.forEach((({v:e,i:n,n:o})=>{if(!oT(e))return;const{isMatch:l,score:r,indices:a}=t.searchIn(e);l&&i.push({item:e,idx:n,matches:[{score:r,value:e,norm:o,indices:a}]})})),i}_searchLogical(e){const t=JT(e,this.options),n=(e,t,i)=>{if(!e.children){const{keyId:n,searcher:o}=e,l=this._findMatches({key:this._keyStore.get(n),value:this._myIndex.getValueForItemAtKeyId(t,n),searcher:o});return l&&l.length?[{idx:i,item:t,matches:l}]:[]}const o=[];for(let l=0,r=e.children.length;l<r;l+=1){const r=e.children[l],a=n(r,t,i);if(a.length)o.push(...a);else if(e.operator===wT)return[]}return o},i=this._myIndex.records,o={},l=[];return i.forEach((({$:e,i:i})=>{if(oT(e)){let r=n(t,e,i);r.length&&(o[i]||(o[i]={idx:i,item:e,matches:[]},l.push(o[i])),r.forEach((({matches:e})=>{o[i].matches.push(...e)})))}})),l}_searchObjectList(e){const t=TT(e,this.options),{keys:n,records:i}=this._myIndex,o=[];return i.forEach((({$:e,i:i})=>{if(!oT(e))return;let l=[];n.forEach(((n,i)=>{l.push(...this._findMatches({key:n,value:e[i],searcher:t}))})),l.length&&o.push({idx:i,item:e,matches:l})})),o}_findMatches({key:e,value:t,searcher:n}){if(!oT(t))return[];let i=[];if(DY(t))t.forEach((({v:t,i:o,n:l})=>{if(!oT(t))return;const{isMatch:r,score:a,indices:s}=n.searchIn(t);r&&i.push({score:a,key:e,value:t,idx:o,norm:l,indices:s})}));else{const{v:o,n:l}=t,{isMatch:r,score:a,indices:s}=n.searchIn(o);r&&i.push({score:a,key:e,value:o,norm:l,indices:s})}return i}}OT.version="7.0.0",OT.createIndex=gT,OT.parseIndex=function(e,{getFn:t=bT.getFn,fieldNormWeight:n=bT.fieldNormWeight}={}){const{keys:i,records:o}=e,l=new yT({getFn:t,fieldNormWeight:n});return l.setKeys(i),l.setIndexRecords(o),l},OT.config=bT,OT.parseQuery=JT,function(...e){YT.push(...e)}(class{constructor(e,{isCaseSensitive:t=bT.isCaseSensitive,includeMatches:n=bT.includeMatches,minMatchCharLength:i=bT.minMatchCharLength,ignoreLocation:o=bT.ignoreLocation,findAllMatches:l=bT.findAllMatches,location:r=bT.location,threshold:a=bT.threshold,distance:s=bT.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:n,minMatchCharLength:i,findAllMatches:l,ignoreLocation:o,location:r,threshold:a,distance:s},this.pattern=t?e:e.toLowerCase(),this.query=function(e,t={}){return e.split("|").map((e=>{let n=e.trim().split(RT).filter((e=>e&&!!e.trim())),i=[];for(let e=0,o=n.length;e<o;e+=1){const o=n[e];let l=!1,r=-1;for(;!l&&++r<ST;){const e=CT[r];let n=e.isMultiMatch(o);n&&(i.push(new e(n,t)),l=!0)}if(!l)for(r=-1;++r<ST;){const e=CT[r];let n=e.isSingleMatch(o);if(n){i.push(new e(n,t));break}}}return i}))}(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:i}=this.options;e=i?e:e.toLowerCase();let o=0,l=[],r=0;for(let i=0,a=t.length;i<a;i+=1){const a=t[i];l.length=0,o=0;for(let t=0,i=a.length;t<i;t+=1){const i=a[t],{isMatch:s,indices:c,score:u}=i.search(e);if(!s){r=0,o=0,l.length=0;break}if(o+=1,r+=u,n){const e=i.constructor.type;LT.has(e)?l=[...l,...c]:l.push(c)}}if(o){let e={isMatch:!0,score:r/o};return n&&(e.indices=l),e}}return{isMatch:!1,score:1}}});function $T(e){const t=e.value.length;e.selectionStart=t,e.selectionEnd=t,e.focus()}const ET=Qh`
  display: inline-flex;
  height: 20px;
  box-sizing: border-box;
  align-items: center;
  vertical-align: middle;
  color: var(--active);
  background-color: transparent;
  border-bottom: solid transparent 1.5px;
  ${zL};
  line-height: normal;

  &.placeholder {
    color: var(--placeholder);
  }

  &.focus {
    border-bottom: solid var(--focus) 1.5px;
  }

  &.edit {
    border-bottom: solid var(--input-active) 1.5px;
  }
`,UT=Qh`
  cursor: default;
`,PT=Qh`
  user-select: none;
`,AT=Qh`
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
`,BT=(e,t)=>{const n=tp(),{addUnsubscribe:i}=WL(),o=()=>{const t=!e.edit;return{placeholder:t&&!e.value.trim(),focus:t&&e.focus,edit:e.edit}},l=n=>{var i;null==(i=e.onBlur)||i.call(e,n),t.host.dispatchEvent(_L())};return Ys((()=>{i(Qs(e).subscribe((t=>{const i=n.value;"edit"!==t||!e.edit||!i||$T(i)})),Qs(e).subscribe((n=>{"edit"===n&&(e.edit||t.host.dispatchEvent(_L()))})))})),Ts((()=>{const t=n.value;!e.autofocus||!t||$T(t)})),()=>{const t=e.focus||e.edit;return e.edit?Ch`
          <input
            ${np(n)}
            class=${["edit-input",ET,o(),e.class]}
            style=${{width:`${e.width}px`,"min-width":`${e.width}px`}}
            ...${TY({title:e.title,placeholder:e.placeholder})}
            type="text"
            spellcheck="false"
            ?data-focus-border-bottom=${t}
            .value=${e.value??""}
            @input=${e.onInput}
            @blur=${l}
            @keydown=${e.onKeydown}
          />
        `:Ch`
          <div
            class=${["edit-input",ET,UT,PT,o(),e.class]}
            style=${{width:`${e.width}px`,"min-width":`${e.width}px`}}
            ...${TY({title:e.title})}
            ?data-focus-border-bottom=${t}
          >
            <span class=${AT}>
              ${e.value.trim()?e.value:e.placeholder}
            </span>
          </div>
        `}};var QT={exports:{}};QT.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}return n.m=e,n.c=t,n.p="",n(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(2);Object.defineProperty(t,"combineChunks",{enumerable:!0,get:function(){return i.combineChunks}}),Object.defineProperty(t,"fillInChunks",{enumerable:!0,get:function(){return i.fillInChunks}}),Object.defineProperty(t,"findAll",{enumerable:!0,get:function(){return i.findAll}}),Object.defineProperty(t,"findChunks",{enumerable:!0,get:function(){return i.findChunks}})},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.findAll=function(e){var t=e.autoEscape,l=e.caseSensitive,r=void 0!==l&&l,a=e.findChunks,s=void 0===a?i:a,c=e.sanitize,u=e.searchWords,d=e.textToHighlight;return o({chunksToHighlight:n({chunks:s({autoEscape:t,caseSensitive:r,sanitize:c,searchWords:u,textToHighlight:d})}),totalLength:d?d.length:0})};var n=t.combineChunks=function(e){var t=e.chunks;return t=t.sort((function(e,t){return e.start-t.start})).reduce((function(e,t){if(0===e.length)return[t];var n=e.pop();if(t.start<=n.end){var i=Math.max(n.end,t.end);e.push({highlight:!1,start:n.start,end:i})}else e.push(n,t);return e}),[]),t},i=function(e){var t=e.autoEscape,n=e.caseSensitive,i=e.sanitize,o=void 0===i?l:i,r=e.searchWords,a=e.textToHighlight;return a=o(a),r.filter((function(e){return e})).reduce((function(e,i){i=o(i),t&&(i=i.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"));for(var l=new RegExp(i,n?"g":"gi"),r=void 0;r=l.exec(a);){var s=r.index,c=l.lastIndex;c>s&&e.push({highlight:!1,start:s,end:c}),r.index===l.lastIndex&&l.lastIndex++}return e}),[])};t.findChunks=i;var o=t.fillInChunks=function(e){var t=e.chunksToHighlight,n=e.totalLength,i=[],o=function(e,t,n){t-e>0&&i.push({start:e,end:t,highlight:n})};if(0===t.length)o(0,n,!1);else{var l=0;t.forEach((function(e){o(l,e.start,!1),o(e.start,e.end,!0),l=e.end})),o(l,n,!1)}return i};function l(e){return e}}]);var DT=QT.exports;const _T=Qh`
  color: var(--active);
`,qT=(e,t)=>()=>DT.findAll({...e,autoEscape:!0}).map((({end:t,highlight:n,start:i})=>{const o=e.textToHighlight.substring(i,t);return n?Ch`<span class=${_T}>${o}</span>`:o})),ew=Qh`
  display: flex;
`,tw=Qh`
  display: inline-flex;
  align-items: center;

  padding-left: 0.5em;
  padding-right: 0.5em;
  padding-bottom: 0.05em;
  margin-right: 4px;
  ${zL};

  white-space: nowrap;
  color: var(--foreground);
  border: 1px solid var(--foreground);
  border-radius: 3px;

  &:last-child {
    margin-right: 0;
  }
`,nw=Qh`
  padding-left: 0.25em;
  padding-right: 0.25em;
  padding-bottom: 0.05em;
  margin-right: 2px;
  font-size: 10px;

  white-space: nowrap;
  color: var(--placeholder);
  border: 1px solid var(--placeholder);
  border-radius: 3px;

  &:last-child {
    margin-right: 0;
  }
`,iw=(e,t)=>()=>{const t=pL(e.shortcut).map((([e,t])=>[...e,t].join(" + ")));return Ch`
      <div class=${["kbd",ew]}>
        ${t.map((t=>Ch`<div class=${e.mini?nw:tw}>
              ${t}
            </div>`))}
      </div>
    `},ow={[Ab.MariaDB]:[{name:"BIGINT",primitiveType:"long"},{name:"BINARY",primitiveType:"string"},{name:"BIT",primitiveType:"int"},{name:"BLOB",primitiveType:"lob"},{name:"BOOL",primitiveType:"boolean"},{name:"BOOLEAN",primitiveType:"boolean"},{name:"CHAR",primitiveType:"string"},{name:"DATE",primitiveType:"date"},{name:"DATETIME",primitiveType:"dateTime"},{name:"DEC",primitiveType:"decimal"},{name:"DECIMAL",primitiveType:"decimal"},{name:"DOUBLE PRECISION",primitiveType:"double"},{name:"DOUBLE",primitiveType:"double"},{name:"ENUM",primitiveType:"string"},{name:"FIXED",primitiveType:"decimal"},{name:"FLOAT",primitiveType:"float"},{name:"GEOMETRY",primitiveType:"string"},{name:"GEOMETRYCOLLECTION",primitiveType:"string"},{name:"INT",primitiveType:"int"},{name:"INTEGER",primitiveType:"int"},{name:"JSON",primitiveType:"lob"},{name:"LINESTRING",primitiveType:"string"},{name:"LONGBLOB",primitiveType:"lob"},{name:"LONGTEXT",primitiveType:"lob"},{name:"MEDIUMBLOB",primitiveType:"lob"},{name:"MEDIUMINT",primitiveType:"int"},{name:"MEDIUMTEXT",primitiveType:"lob"},{name:"MULTILINESTRING",primitiveType:"string"},{name:"MULTIPOINT",primitiveType:"string"},{name:"MULTIPOLYGON",primitiveType:"string"},{name:"NUMERIC",primitiveType:"decimal"},{name:"POINT",primitiveType:"string"},{name:"POLYGON",primitiveType:"string"},{name:"REAL",primitiveType:"double"},{name:"SET",primitiveType:"string"},{name:"SMALLINT",primitiveType:"int"},{name:"TEXT",primitiveType:"lob"},{name:"TIME",primitiveType:"time"},{name:"TIMESTAMP",primitiveType:"dateTime"},{name:"TINYBLOB",primitiveType:"lob"},{name:"TINYINT",primitiveType:"int"},{name:"TINYTEXT",primitiveType:"lob"},{name:"VARBINARY",primitiveType:"string"},{name:"VARCHAR",primitiveType:"string"},{name:"YEAR",primitiveType:"int"}],[Ab.MSSQL]:[{name:"bigint",primitiveType:"long"},{name:"binary",primitiveType:"lob"},{name:"bit",primitiveType:"int"},{name:"char",primitiveType:"string"},{name:"date",primitiveType:"date"},{name:"datetime",primitiveType:"dateTime"},{name:"datetime2",primitiveType:"dateTime"},{name:"datetimeoffset",primitiveType:"dateTime"},{name:"decimal",primitiveType:"decimal"},{name:"float",primitiveType:"double"},{name:"geography",primitiveType:"string"},{name:"geometry",primitiveType:"string"},{name:"image",primitiveType:"lob"},{name:"int",primitiveType:"int"},{name:"money",primitiveType:"double"},{name:"nchar",primitiveType:"string"},{name:"ntext",primitiveType:"lob"},{name:"numeric",primitiveType:"float"},{name:"nvarchar",primitiveType:"string"},{name:"real",primitiveType:"float"},{name:"smalldatetime",primitiveType:"dateTime"},{name:"smallint",primitiveType:"int"},{name:"smallmoney",primitiveType:"float"},{name:"sql_variant",primitiveType:"string"},{name:"text",primitiveType:"lob"},{name:"time",primitiveType:"time"},{name:"tinyint",primitiveType:"int"},{name:"uniqueidentifier",primitiveType:"string"},{name:"varbinary",primitiveType:"string"},{name:"varchar",primitiveType:"string"},{name:"xml",primitiveType:"lob"}],[Ab.MySQL]:[{name:"BIGINT",primitiveType:"long"},{name:"BINARY",primitiveType:"string"},{name:"BIT",primitiveType:"int"},{name:"BLOB",primitiveType:"lob"},{name:"BOOL",primitiveType:"boolean"},{name:"BOOLEAN",primitiveType:"boolean"},{name:"CHAR",primitiveType:"string"},{name:"DATE",primitiveType:"date"},{name:"DATETIME",primitiveType:"dateTime"},{name:"DEC",primitiveType:"decimal"},{name:"DECIMAL",primitiveType:"decimal"},{name:"DOUBLE PRECISION",primitiveType:"double"},{name:"DOUBLE",primitiveType:"double"},{name:"ENUM",primitiveType:"string"},{name:"FLOAT",primitiveType:"float"},{name:"GEOMETRY",primitiveType:"string"},{name:"GEOMETRYCOLLECTION",primitiveType:"string"},{name:"INT",primitiveType:"int"},{name:"INTEGER",primitiveType:"int"},{name:"JSON",primitiveType:"lob"},{name:"LINESTRING",primitiveType:"string"},{name:"LONGBLOB",primitiveType:"lob"},{name:"LONGTEXT",primitiveType:"lob"},{name:"MEDIUMBLOB",primitiveType:"lob"},{name:"MEDIUMINT",primitiveType:"int"},{name:"MEDIUMTEXT",primitiveType:"lob"},{name:"MULTILINESTRING",primitiveType:"string"},{name:"MULTIPOINT",primitiveType:"string"},{name:"MULTIPOLYGON",primitiveType:"string"},{name:"NUMERIC",primitiveType:"decimal"},{name:"POINT",primitiveType:"string"},{name:"POLYGON",primitiveType:"string"},{name:"SET",primitiveType:"string"},{name:"SMALLINT",primitiveType:"int"},{name:"TEXT",primitiveType:"lob"},{name:"TIME",primitiveType:"time"},{name:"TIMESTAMP",primitiveType:"dateTime"},{name:"TINYBLOB",primitiveType:"lob"},{name:"TINYINT",primitiveType:"int"},{name:"TINYTEXT",primitiveType:"lob"},{name:"VARBINARY",primitiveType:"string"},{name:"VARCHAR",primitiveType:"string"},{name:"YEAR",primitiveType:"int"}],[Ab.Oracle]:[{name:"BFILE",primitiveType:"lob"},{name:"BINARY_DOUBLE",primitiveType:"double"},{name:"BINARY_FLOAT",primitiveType:"float"},{name:"BLOB",primitiveType:"lob"},{name:"CHAR",primitiveType:"string"},{name:"CLOB",primitiveType:"lob"},{name:"DATE",primitiveType:"date"},{name:"DATETIME",primitiveType:"dateTime"},{name:"LONG RAW",primitiveType:"lob"},{name:"LONG",primitiveType:"lob"},{name:"NCHAR",primitiveType:"string"},{name:"NCLOB",primitiveType:"lob"},{name:"NUMBER",primitiveType:"long"},{name:"NVARCHAR2",primitiveType:"string"},{name:"RAW",primitiveType:"lob"},{name:"TIMESTAMP WITH LOCAL TIME ZONE",primitiveType:"dateTime"},{name:"TIMESTAMP WITH TIME ZONE",primitiveType:"dateTime"},{name:"TIMESTAMP",primitiveType:"dateTime"},{name:"UriType",primitiveType:"string"},{name:"VARCHAR",primitiveType:"string"},{name:"VARCHAR2",primitiveType:"string"},{name:"XMLType",primitiveType:"string"}],[Ab.PostgreSQL]:[{name:"bigint",primitiveType:"long"},{name:"bigserial",primitiveType:"long"},{name:"bit varying",primitiveType:"int"},{name:"bit",primitiveType:"int"},{name:"bool",primitiveType:"boolean"},{name:"boolean",primitiveType:"boolean"},{name:"box",primitiveType:"string"},{name:"bytea",primitiveType:"string"},{name:"char",primitiveType:"string"},{name:"character varying",primitiveType:"string"},{name:"character",primitiveType:"string"},{name:"cidr",primitiveType:"string"},{name:"circle",primitiveType:"string"},{name:"date",primitiveType:"date"},{name:"decimal",primitiveType:"decimal"},{name:"double precision",primitiveType:"double"},{name:"float4",primitiveType:"float"},{name:"float8",primitiveType:"double"},{name:"inet",primitiveType:"string"},{name:"int",primitiveType:"int"},{name:"int2",primitiveType:"int"},{name:"int4",primitiveType:"int"},{name:"int8",primitiveType:"long"},{name:"integer",primitiveType:"int"},{name:"interval",primitiveType:"time"},{name:"json",primitiveType:"lob"},{name:"jsonb",primitiveType:"lob"},{name:"line",primitiveType:"string"},{name:"lseg",primitiveType:"string"},{name:"macaddr",primitiveType:"string"},{name:"macaddr8",primitiveType:"string"},{name:"money",primitiveType:"double"},{name:"numeric",primitiveType:"decimal"},{name:"path",primitiveType:"string"},{name:"pg_lsn",primitiveType:"int"},{name:"point",primitiveType:"string"},{name:"polygon",primitiveType:"string"},{name:"real",primitiveType:"float"},{name:"serial",primitiveType:"int"},{name:"serial2",primitiveType:"int"},{name:"serial4",primitiveType:"int"},{name:"serial8",primitiveType:"long"},{name:"smallint",primitiveType:"int"},{name:"smallserial",primitiveType:"int"},{name:"text",primitiveType:"string"},{name:"time with time zone",primitiveType:"time"},{name:"time",primitiveType:"time"},{name:"timestamp with time zone",primitiveType:"dateTime"},{name:"timestamp",primitiveType:"dateTime"},{name:"timestamptz",primitiveType:"dateTime"},{name:"timetz",primitiveType:"time"},{name:"tsquery",primitiveType:"string"},{name:"tsvector",primitiveType:"string"},{name:"txid_snapshot",primitiveType:"string"},{name:"uuid",primitiveType:"string"},{name:"varbit",primitiveType:"int"},{name:"varchar",primitiveType:"string"},{name:"xml",primitiveType:"lob"}],[Ab.SQLite]:[{name:"BLOB",primitiveType:"lob"},{name:"INTEGER",primitiveType:"int"},{name:"NUMERIC",primitiveType:"decimal"},{name:"REAL",primitiveType:"double"},{name:"TEXT",primitiveType:"string"}]},lw=Qh`
  position: relative;
  outline: none;
`,rw=Qh`
  position: absolute;
  z-index: 1;
  top: ${20}px;
  left: 0;
  color: var(--foreground);
  background-color: var(--table-background);
  border: 1px solid var(--table-border);
  white-space: nowrap;
  ${zL};
`,aw=Qh`
  display: flex;
  align-items: center;
  padding: 0 4px;
  height: 20px;
  cursor: pointer;

  &:hover {
    background-color: var(--column-hover);
  }

  &.selected {
    background-color: var(--column-select);

    .kbd {
      visibility: visible;
    }
  }

  & > .kbd {
    margin-left: auto;
    padding-left: 6px;
    visibility: hidden;
  }
`,sw=jl(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Tab","Enter"]),cw=(e,t)=>{var n;const i=yL(t,null==(n=e.app)?void 0:n.value),o=Bs({hints:[],index:-1}),l=tp(),{addUnsubscribe:r}=WL(),a=e=>{const{store:t}=i.value,{settings:n}=t.state,l=ow[n.database]??[],r=e.trim();o.index=-1,o.hints=Vl(r)?[]:new OT(l,{keys:["name"]}).search(r).map((e=>e.item))},s=t=>{const n=o.hints[t];if(!n)return;const{store:l}=i.value;l.dispatch(Kx({id:e.columnId,tableId:e.tableId,value:n.name})),a("")},c={ArrowUp:e=>{if(!o.hints.length)return;e.preventDefault();const t=o.index-1;o.index=t<0?o.hints.length-1:t},ArrowDown:e=>{if(!o.hints.length)return;e.preventDefault();const t=o.index+1;o.index=t>o.hints.length-1?0:t},ArrowLeft:e=>{o.index=-1},ArrowRight:e=>{-1!==o.index&&(e.preventDefault(),s(o.index))},Tab:e=>{-1!==o.index&&(e.preventDefault(),e.stopPropagation(),s(o.index))},Enter:t=>{var n;-1!==o.index&&(t.stopPropagation(),s(o.index),null==(n=e.onEditEnd)||n.call(e))}},u=e=>{var t;sw(e.key)&&(null==(t=c[e.key])||t.call(c,e))};let d=!1,p=-1;const h=()=>{d=!0},m=t=>{e.edit&&(d=!1,clearTimeout(p),p=setTimeout((()=>{var n,i;const o=null==(n=l.value)?void 0:n.querySelector("input");d&&o&&e.edit?$T(o):null==(i=e.onBlur)||i.call(e,t)}),1))},b=t=>{var n;const i=t.target;i&&a(i.value),null==(n=e.onInput)||n.call(e,t)};return Ts((()=>{const{store:t}=i.value,{settings:n}=t.state;r(Qs(e).subscribe((t=>{"edit"===t&&!e.edit&&a("")})),Qs(n).subscribe((t=>{"database"===t&&a(e.value)})))})),()=>Ch`
    <div
      class=${lw}
      ${np(l)}
      tabindex="-1"
      @focus=${h}
      @focusin=${h}
      @focusout=${m}
    >
      <${BT}
        placeholder="dataType"
        width=${e.width}
        value=${e.value}
        focus=${e.focus}
        edit=${e.edit}
        autofocus=${!0}
        .onInput=${b}
        .onKeydown=${u}
      />
      ${e.edit?Ch`
            <div class=${rw}>
              ${ap(o.hints,(e=>e.name),((t,n)=>Ch`
                  <div
                    class=${[aw,{selected:n===o.index}]}
                    @click=${()=>s(n)}
                  >
                    <${qT}
                      searchWords=${[e.value]}
                      textToHighlight=${t.name}
                    />
                    <${iw} mini=${!0} shortcut="Tab" />
                  </div>
                `))}
            </div>
          `:null}
    </div>
  `},uw=Qh`
  fill: transparent;

  &.pk {
    fill: var(--key-pk);
  }

  &.fk {
    fill: var(--key-fk);
  }

  &.pfk {
    fill: var(--key-pfk);
  }
`,dw=(e,t)=>{const n=()=>{const t=Zf(e.keys,af.primaryKey),n=Zf(e.keys,af.foreignKey);return{pk:t&&!n,fk:!t&&n,pfk:t&&n}};return()=>Ch`
    <${JY}
      class=${["column-col",uw,n()]}
      size=${12}
      name="key"
      .onMouseenter=${e.onMouseenter}
      .onMouseleave=${e.onMouseleave}
    />
  `},pw=Qh`
  display: inline-flex;
  height: 20px;
  box-sizing: border-box;
  align-items: center;
  color: var(--active);
  background-color: transparent;
  border-bottom: solid transparent 1.5px;
  ${zL};
  line-height: normal;
  cursor: default;
  user-select: none;

  &.focus {
    border-bottom: solid var(--focus) 1.5px;
  }
`,hw=(e,t)=>()=>Ch`
    <div
      class=${[pw,{focus:e.focus}]}
      style=${{width:`${wf}px`,"min-width":`${wf}px`}}
      title="Not Null"
      ?data-focus-border-bottom=${e.focus}
    >
      ${Zf(e.options,rf.notNull)?"N-N":"NULL"}
    </div>
  `,mw=Qh`
  display: inline-flex;
  height: 20px;
  box-sizing: border-box;
  align-items: center;
  color: var(--placeholder);
  background-color: transparent;
  border-bottom: solid transparent 1.5px;
  ${zL};
  line-height: normal;
  cursor: default;
  user-select: none;

  &.focus {
    border-bottom: solid var(--focus) 1.5px;
  }

  &.checked {
    color: var(--active);
  }
`,bw=(e,t)=>()=>Ch`
    <div
      class=${[mw,{focus:e.focus,checked:e.checked},e.class]}
      style=${{width:`${e.width}px`,"min-width":`${e.width}px`}}
      title=${e.title}
      ?data-focus-border-bottom=${e.focus}
    >
      ${e.text}
    </div>
  `,fw=Qh`
  display: flex;
  width: 100%;
  height: ${Hf}px;
  align-items: center;
  fill: transparent;
  color: transparent;
  padding: 0 ${Sf}px;

  &:hover {
    fill: var(--foreground);
    color: var(--foreground);
    background-color: var(--column-hover);
  }

  &[data-hover] {
    background-color: var(--column-hover);
  }

  &[data-selected] {
    background-color: var(--column-select);
  }

  & > .column-col {
    padding: ${2}px ${Vf}px ${2}px 0;
  }

  &.none-hover {
    background-color: transparent;
  }

  &[data-dragging] {
    opacity: 0.5;
  }

  &[data-ghost] {
    visibility: hidden;
  }
`,yw=Qh`
  cursor: pointer;
  margin-left: auto;

  &:hover {
    fill: var(--active);
    color: var(--active);
  }
`,gw=(e,t)=>{var n;const i=yL(t,null==(n=e.app)?void 0:n.value),o=()=>{const{store:t}=i.value;t.dispatch(wx(e.column.tableId,[e.column.id]))},l=(t,n)=>{const{store:o}=i.value;o.dispatch(By({tableId:e.column.tableId,columnId:e.column.id,focusType:n,$mod:hL(t),shiftKey:t.shiftKey}))},r=t=>{const{store:n}=i.value;n.dispatch(Lx(t)?Nx(t,e.column.tableId,e.column.id):_y())},a=()=>{const{store:e}=i.value;e.dispatch(qy())},s=(t,n)=>{const{store:o}=i.value,l=t.target;l&&o.dispatch(Hx(n,e.column.tableId,e.column.id,l.value))},c=()=>{const{column:t}=e;if(0===t.ui.keys)return;const{store:n}=i.value;n.dispatch(CG(t.id))},u=()=>{const{store:e}=i.value;e.dispatch(SG())},d=()=>{const{store:t}=i.value,{settings:n}=t.state,{column:o,widthName:c,widthDataType:u,widthDefault:d,widthComment:p}=e;return n.columnOrder.map((t=>{let h=null;switch(t){case Ub.columnName:h=Ch`
              <div
                class="column-col"
                data-type="columnName"
                @mousedown=${e=>{l(e,cy.columnName)}}
                @dblclick=${()=>{r(cy.columnName)}}
              >
                <${BT}
                  placeholder="column"
                  width=${c}
                  value=${o.name}
                  focus=${e.focusName}
                  edit=${e.editName}
                  autofocus=${!0}
                  .onBlur=${a}
                  .onInput=${e=>{s(e,cy.columnName)}}
                />
              </div>
            `;break;case Ub.columnDefault:h=Zf(n.show,Eb.columnDefault)?Ch`
                  <div
                    class="column-col"
                    data-type="columnDefault"
                    @mousedown=${e=>{l(e,cy.columnDefault)}}
                    @dblclick=${()=>{r(cy.columnDefault)}}
                  >
                    <${BT}
                      placeholder="default"
                      width=${d}
                      value=${o.default}
                      focus=${e.focusDefault}
                      edit=${e.editDefault}
                      autofocus=${!0}
                      .onBlur=${a}
                      .onInput=${e=>{s(e,cy.columnDefault)}}
                    />
                  </div>
                `:null;break;case Ub.columnComment:h=Zf(n.show,Eb.columnComment)?Ch`
                  <div
                    class="column-col"
                    data-type="columnComment"
                    @mousedown=${e=>{l(e,cy.columnComment)}}
                    @dblclick=${()=>{r(cy.columnComment)}}
                  >
                    <${BT}
                      title=${o.comment}
                      placeholder="comment"
                      width=${p}
                      value=${o.comment}
                      focus=${e.focusComment}
                      edit=${e.editComment}
                      autofocus=${!0}
                      .onBlur=${a}
                      .onInput=${e=>{s(e,cy.columnComment)}}
                    />
                  </div>
                `:null;break;case Ub.columnDataType:h=Zf(n.show,Eb.columnDataType)?Ch`
                  <div
                    class="column-col"
                    data-type="columnDataType"
                    @mousedown=${e=>{l(e,cy.columnDataType)}}
                    @dblclick=${()=>{r(cy.columnDataType)}}
                  >
                    <${cw}
                      app=${i}
                      tableId=${o.tableId}
                      columnId=${o.id}
                      width=${u}
                      value=${o.dataType}
                      focus=${e.focusDataType}
                      edit=${e.editDataType}
                      .onBlur=${a}
                      .onEditEnd=${a}
                      .onInput=${e=>{s(e,cy.columnDataType)}}
                    />
                  </div>
                `:null;break;case Ub.columnNotNull:h=Zf(n.show,Eb.columnNotNull)?Ch`
                  <div
                    class="column-col"
                    data-type="columnNotNull"
                    @mousedown=${e=>{l(e,cy.columnNotNull)}}
                    @dblclick=${()=>{r(cy.columnNotNull)}}
                  >
                    <${hw}
                      options=${o.options}
                      focus=${e.focusNotNull}
                    />
                  </div>
                `:null;break;case Ub.columnUnique:h=Zf(n.show,Eb.columnUnique)?Ch`
                  <div
                    class="column-col"
                    data-type="columnUnique"
                    @mousedown=${e=>{l(e,cy.columnUnique)}}
                    @dblclick=${()=>{r(cy.columnUnique)}}
                  >
                    <${bw}
                      checked=${Zf(o.options,rf.unique)}
                      width=${Nf}
                      text="UQ"
                      title="Unique"
                      focus=${e.focusUnique}
                    />
                  </div>
                `:null;break;case Ub.columnAutoIncrement:h=Zf(n.show,Eb.columnAutoIncrement)?Ch`
                  <div
                    class="column-col"
                    data-type="columnAutoIncrement"
                    @mousedown=${e=>{l(e,cy.columnAutoIncrement)}}
                    @dblclick=${()=>{r(cy.columnAutoIncrement)}}
                  >
                    <${bw}
                      checked=${Zf(o.options,rf.autoIncrement)}
                      width=${Kf}
                      text="AI"
                      title="Auto Increment"
                      focus=${e.focusAutoIncrement}
                    />
                  </div>
                `:null}return{columnType:t,template:h}})).filter((({template:e})=>!!e))};return()=>{var t;const{store:n,keyBindingMap:l}=i.value,{editor:r}=n.state,{column:a,selected:s}=e,p=!!r.hoverColumnMap[a.id],h=r.draggingColumnMap[a.id];return Ch`
      <div
        class=${["column-row",fw]}
        data-id=${a.id}
        data-table-id=${a.tableId}
        ?data-selected=${s}
        ?data-hover=${p}
        ?data-dragging=${h}
        ?data-ghost=${e.ghost}
        draggable=${e.draggable?"true":"false"}
        @dragstart=${e.onDragstart}
        @dragend=${e.onDragend}
      >
        <${dw}
          keys=${a.ui.keys}
          .onMouseenter=${c}
          .onMouseleave=${u}
        />
        ${ap(d(),(({columnType:e})=>e),(({template:e})=>e))}
        <${JY}
          class=${yw}
          size=${12}
          name="xmark"
          title=${mL(null==(t=l.removeColumn[0])?void 0:t.shortcut)}
          .onClick=${o}
        />
      </div>
    `}};class vw{constructor(e,t,n){Object.defineProperty(this,"flipSnapshots",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"root",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"selector",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"animationName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.root=e,this.selector=t,this.animationName=n}snapshot(){var e;this.flipSnapshots=[],null==(e=this.root.value)||e.querySelectorAll(this.selector).forEach((e=>{if(e instanceof HTMLElement){const{top:t,left:n}=e.getBoundingClientRect();this.flipSnapshots.push({el:e,top:t,left:n})}}))}play(){this.flipSnapshots.length&&(this.flipSnapshots.forEach((e=>{const t=e.el,{top:n,left:i}=t.getBoundingClientRect(),o=e.left-i,l=e.top-n;(o||l)&&(t.style.transform=`translate(${o}px,${l}px)`,t.style.transitionDuration="0s",requestAnimationFrame((()=>{t.classList.add(this.animationName),t.style.transform="",t.style.transitionDuration="";const e=()=>{t.classList.remove(this.animationName),t.removeEventListener("transitionend",e)};t.addEventListener("transitionend",e)})))})),this.flipSnapshots=[])}}const Zw=(e,t)=>AS(...e.map((e=>US(e,"dragover").pipe(mb(300),ab((()=>t(e))))))).pipe(pb(50),QS(AS(...e.map((e=>US(e,"dragend"))))));function xw(e,t){const n=yL(e),i=()=>n.value.store.state.editor.focusTable;return{hasFocus:(e,n)=>function(e,t,n,i=null){if(!e||n!==e.tableId)return!1;switch(t){case"tableName":case"tableComment":return t===e.focusType}return i===e.columnId&&t===e.focusType}(i(),e,t,n),hasEdit:(e,n)=>function(e,t,n,i=null){if((null==e?void 0:e.tableId)!==n)return!1;switch(t){case cy.tableName:case cy.tableComment:return t===e.focusType&&e.edit}return i===e.columnId&&t===e.focusType&&e.edit}(i(),e,t,n),hasSelectColumn:e=>((e,t,n)=>(null==e?void 0:e.tableId)===t&&e.selectColumnIds.includes(n))(i(),t,e)}}const Xw=(e,t)=>{const n=yL(t),i=tp(),{hasEdit:o,hasFocus:l,hasSelectColumn:r}=xw(t,e.table.id),{onMoveStart:a}=fY(t,e),{addUnsubscribe:s}=WL(),c=Bs({dragstartId:null}),u=new vw(i,".column-row","column-row-move"),d=()=>{const{store:t}=n.value;t.dispatch(Tx(e.table.id))},p=()=>{const{store:t}=n.value;t.dispatch(kx(e.table.id))},h=t=>{const{store:i}=n.value;i.dispatch(Ay({tableId:e.table.id,focusType:t}))},m=()=>{const{store:e}=n.value;e.dispatch(_y())},b=()=>{const{store:e}=n.value;e.dispatch(qy())},f=(t,i)=>{const{store:o}=n.value,l=t.target;if(l)switch(i){case cy.tableName:o.dispatch(YZ({id:e.table.id,value:l.value}));break;case cy.tableComment:o.dispatch(TZ({id:e.table.id,value:l.value}))}},y=t=>{const{emitter:i}=n.value;i.emit(ZR({x:t.clientX,y:t.clientY,color:e.table.ui.color}))};let g=null;const v=()=>{const e=i.value;if(!e||g)return;const t=Array.from(e.querySelectorAll(".column-row"));t.forEach((e=>e.classList.add("none-hover")));const o=()=>{t.forEach((e=>e.classList.remove("none-hover"))),g=null,c.dragstartId=null};g=Zw(t,(e=>({targetId:e.dataset.id,targetTableId:e.dataset.tableId}))).pipe((e=>t=>new Lm((n=>{const i=t.subscribe({next:e=>n.next(e),error:e=>n.error(e),complete:()=>n.complete()});return()=>{i.unsubscribe(),e()}})))(o)).subscribe({next:({targetId:e,targetTableId:t})=>{((e,t)=>{const{store:i}=n.value,{editor:{draggableColumn:o}}=i.state;!o||o.columnIds.includes(e)||(u.snapshot(),i.dispatch(VG(e,t)))})(e,t)},complete:o})},Z=e=>{var t;const{store:i}=n.value,{editor:{focusTable:o}}=i.state,l=e.target;if(!l||!o||!o.columnId)return;const r=null==(t=l.dataset)?void 0:t.id;r&&(c.dragstartId=r,i.dispatch(kG(hL(e))),v())},x=()=>{const{store:e,emitter:t}=n.value;e.dispatch(cg()),t.emit(WR())},X=()=>{const{store:e}=n.value,{editor:{draggableColumn:t}}=e.state;t&&v()};return Ks((()=>u.play())),Ts((()=>{const{emitter:e}=n.value;s(e.on({dragendColumnAll:()=>{null==g||g.unsubscribe()}}))})),()=>{var t,s;const{store:u,keyBindingMap:g}=n.value,{editor:v,settings:G,collections:I}=u.state,{table:W}=e,k=!!v.selectedMap[W.id],V=GZ(W,u.state),C=WZ(W),S=null!==c.dragstartId&&!W.columnIds.includes(c.dragstartId),R=Dr(I).collection("tableColumnEntities").selectByIds(S?[...W.columnIds,c.dragstartId]:W.columnIds);return Ch`
      <div
        class=${["table",JL]}
        style=${{top:`${W.ui.y}px`,left:`${W.ui.x}px`,"z-index":`${W.ui.zIndex}`,width:`${V.width}px`,height:`${C}px`}}
        ${np(i)}
        ?data-selected=${k}
        ?data-focus-border=${k}
        data-id=${W.id}
        @mousedown=${a}
        @touchstart=${a}
      >
        <div class=${jL}>
          <div
            class=${["table-header-color",FL]}
            style=${{"background-color":W.ui.color}}
            @click=${y}
          ></div>
          <div class=${OL}>
            <${JY}
              size=${12}
              name="plus"
              title=${mL(null==(t=g.addColumn[0])?void 0:t.shortcut)}
              useTransition=${!0}
              .onClick=${d}
            />
            <${JY}
              size=${12}
              name="xmark"
              title=${mL(null==(s=g.removeTable[0])?void 0:s.shortcut)}
              useTransition=${!0}
              .onClick=${p}
            />
          </div>
          <div class=${$L}>
            <div
              class="input-padding"
              data-type="tableName"
              @mousedown=${()=>{h(cy.tableName)}}
              @dblclick=${m}
            >
              <${BT}
                placeholder="table"
                width=${W.ui.widthName}
                value=${W.name}
                focus=${l(cy.tableName)}
                edit=${o(cy.tableName)}
                autofocus=${!0}
                .onBlur=${b}
                .onInput=${e=>{f(e,cy.tableName)}}
              />
            </div>
            ${Zf(G.show,Eb.tableComment)?Ch`
                  <div
                    class="input-padding"
                    data-type="tableComment"
                    @mousedown=${()=>{h(cy.tableComment)}}
                    @dblclick=${m}
                  >
                    <${BT}
                      placeholder="comment"
                      width=${-1===G.maxWidthComment?W.ui.widthComment:G.maxWidthComment<W.ui.widthComment?G.maxWidthComment:W.ui.widthComment}
                      value=${W.comment}
                      focus=${l(cy.tableComment)}
                      edit=${o(cy.tableComment)}
                      autofocus=${!0}
                      .onBlur=${b}
                      .onInput=${e=>{f(e,cy.tableComment)}}
                    />
                  </div>
                `:null}
          </div>
        </div>
        <div
          @dragenter=${X}
          @dragenter=${UL}
          @dragover=${UL}
        >
          ${ap(R,(e=>e.id),(e=>Ch`
              <${gw}
                app=${n}
                column=${e}
                selected=${r(e.id)}
                widthName=${V.name}
                widthDataType=${V.dataType}
                widthDefault=${V.default}
                widthComment=${V.comment}
                focusName=${l(cy.columnName,e.id)}
                focusDataType=${l(cy.columnDataType,e.id)}
                focusNotNull=${l(cy.columnNotNull,e.id)}
                focusDefault=${l(cy.columnDefault,e.id)}
                focusComment=${l(cy.columnComment,e.id)}
                focusUnique=${l(cy.columnUnique,e.id)}
                focusAutoIncrement=${l(cy.columnAutoIncrement,e.id)}
                editName=${o(cy.columnName,e.id)}
                editDataType=${o(cy.columnDataType,e.id)}
                editDefault=${o(cy.columnDefault,e.id)}
                editComment=${o(cy.columnComment,e.id)}
                draggable=${!0}
                ghost=${S&&e.id===c.dragstartId}
                .onDragstart=${Z}
                .onDragend=${x}
              />
            `))}
        </div>
      </div>
    `}},Gw=Qh`
  position: relative;
  background-color: var(--canvas-background);
  top: 0;
  left: 0;
  will-change: transform;
`,Iw=Qh`
  will-change: transform;
`,Ww=(e,t)=>{const n=yL(t);return()=>{const{store:t}=n.value,{settings:{width:i,height:o,scrollTop:l,scrollLeft:r,zoomLevel:a,show:s},doc:{tableIds:c,memoIds:u},editor:{drawRelationship:d},collections:p}=t.state,h=Dr(p).collection("tableEntities").selectByIds(c),m=Dr(p).collection("memoEntities").selectByIds(u);return Ch`
      <div
        class=${Iw}
        style=${{width:`${i}px`,height:`${o}px`,"min-width":`${i}px`,"min-height":`${o}px`,transform:`translate(${r}px, ${l}px) scale(${a})`,"pointer-events":e.grabMove?"none":"auto"}}
      >
        <div
          class=${Gw}
          ${np(e.canvas)}
          style=${{width:`${i}px`,height:`${o}px`,"min-width":`${i}px`,"min-height":`${o}px`}}
        >
          ${op(ry(a)?Ch`${ap(h,(e=>e.id),(e=>Ch`<${gY} table=${e} />`))}`:Ch`${ap(h,(e=>e.id),(e=>Ch`<${Xw} table=${e} />`))}`)}
          ${ap(m,(e=>e.id),(e=>Ch`<${PY} memo=${e} />`))}
          ${Zf(s,Eb.relationship)?Ch`<${IL} />`:null}
          ${null!=d&&d.start?Ch`
                <${CL}
                  root=${e.root}
                  draw=${d}
                />
              `:null}
          <${QY} />
        </div>
      </div>
    `}},kw=(e,t)=>()=>{const{memo:t}=e,n=Jx(t),i=jx(t);return Ch`
      <div
        class=${["memo",jY]}
        style=${{top:`${t.ui.y}px`,left:`${t.ui.x}px`,"z-index":`${t.ui.zIndex}`,width:`${n}px`,height:`${i}px`}}
      ></div>
    `},Vw=(e,t)=>{const n=yL(t);return()=>{const{store:t}=n.value,{table:i}=e,o=GZ(i,t.state),l=WZ(i);return Ch`
      <div
        class=${["table",JL]}
        style=${{top:`${i.ui.y}px`,left:`${i.ui.x}px`,"z-index":`${i.ui.zIndex}`,width:`${o.width}px`,height:`${l}px`}}
      ></div>
    `}};function Cw(e){const t=yL(e),n=Bs({selected:!1});let i=0,o=0;const l=e=>{const n=(()=>{const{store:e}=t.value,{settings:{width:n}}=e.state;return Mf/n})();return e/n*-1},r=e=>{const{event:n}=e;"mousemove"===n.type&&n.preventDefault();const r=(({movementX:e,x:n})=>{const{store:o}=t.value,{settings:r,editor:{viewport:a}}=o.state,s=r.scrollLeft+l(e),c=a.width-r.width;let u=!1;switch(e<0?AI.left:AI.right){case AI.left:s<0&&n<i&&(i+=e,u=!0);break;case AI.right:s>c&&n>i&&(i+=e,u=!0)}return u?e:0})(e),a=(({movementY:e,y:n})=>{const{store:i}=t.value,{settings:r,editor:{viewport:a}}=i.state,s=r.scrollTop+l(e),c=a.height-r.height;let u=!1;switch(e<0?AI.top:AI.bottom){case AI.top:s<0&&n<o&&(o+=e,u=!0);break;case AI.bottom:s>c&&n>o&&(o+=e,u=!0)}return u?e:0})(e);if(0===r&&0===a)return;const{store:s}=t.value;s.dispatch(Dv({movementX:l(r),movementY:l(a)}))};return{state:n,onScrollStart:e=>{n.selected=!0,i=AL(e)?e.clientX:e.touches[0].clientX,o=AL(e)?e.clientY:e.touches[0].clientY,bY.subscribe({next:r,complete:()=>{n.selected=!1}})}}}const Sw=Qh`
  position: absolute;
  border: solid 1.5px var(--minimap-viewport-border);
  cursor: pointer;

  &:hover {
    border-color: var(--minimap-viewport-border-hover);
  }

  &.selected {
    border-color: var(--minimap-viewport-border-hover);
  }
`,Rw=(e,t)=>{const n=yL(t),{state:i,onScrollStart:o}=Cw(t),l=()=>{const{store:e}=n.value,{settings:{scrollTop:t,scrollLeft:i},editor:{viewport:o}}=e.state,l=(()=>{const{store:e}=n.value,{settings:{width:t}}=e.state;return Mf/t})(),r=i*l,a=t*l,s=o.width*l;return{width:`${s}px`,height:`${o.height*l}px`,right:`${r-s+Mf+20}px`,top:`${20-a}px`}};return()=>Ch`
    <div
      class=${["minimap-viewport",Sw,{selected:i.selected||e.selected}]}
      style=${l()}
      data-focus-border
      @mousedown=${o}
      @touchstart=${o}
    ></div>
  `},Lw=Qh`
  position: absolute;
  overflow: hidden;
  background-color: var(--canvas-boundary-background);
`,Yw=Qh`
  position: absolute;
  box-sizing: content-box;
  pointer-events: none;
  border: 1px solid var(--minimap-border);
  box-shadow: 0 1px 6px var(--minimap-shadow);
  background-color: transparent;
`,Tw=Qh`
  pointer-events: none;
`,ww=(e,t)=>{const n=yL(t),i=tp(),{state:o,onScrollStart:l}=Cw(t),r=()=>{const{store:e}=n.value,{settings:{width:t}}=e.state;return Mf/t},a=e=>{const{store:t}=n.value,{editor:{viewport:o}}=t.state,a=r(),s=i.value.getBoundingClientRect(),c=AL(e)?e.clientX:e.touches[0].clientX,u=AL(e)?e.clientY:e.touches[0].clientY,d=c-s.x,p=(u-s.y)/a,h=d/a-o.width/2,m=p-o.height/2;t.dispatch(Qv({scrollLeft:-1*h,scrollTop:-1*m})),l(e)};return()=>{const{store:e}=n.value,{settings:{width:t,height:l,zoomLevel:s,show:c},doc:{tableIds:u,memoIds:d},collections:p}=e.state,h=Dr(p).collection("tableEntities").selectByIds(u),m=Dr(p).collection("memoEntities").selectByIds(d);return Ch`
      <div
        class=${["minimap",Lw]}
        style=${(()=>{const{store:e}=n.value,{settings:{width:t,height:i}}=e.state,o=r();return{transform:`scale(${o})`,width:`${t}px`,height:`${i}px`,right:-1*t/2+t*o/2+20+"px",top:-1*i/2+i*o/2+20+"px"}})()}
        ${np(i)}
        @mousedown=${a}
        @touchstart=${a}
      >
        <div
          class=${Gw}
          style=${{width:`${t}px`,height:`${l}px`,"min-width":`${t}px`,"min-height":`${l}px`,transform:`scale(${s})`}}
        >
          ${ap(h,(e=>e.id),(e=>Ch`<${Vw} table=${e} />`))}
          ${ap(m,(e=>e.id),(e=>Ch`<${kw} memo=${e} />`))}
          ${Zf(c,Eb.relationship)?Ch`<${IL} class=${Tw} strokeWidth=${12} />`:null}
        </div>
      </div>
      <div class=${Yw} style=${{width:"150px",height:"150px",right:"19px",top:"19px"}}></div>
      <${Rw} selected=${o.selected} />
    `}},Nw=Qh`
  display: inline-flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  border-radius: 6px;
  cursor: pointer;
`,Kw=Qh`
  background-color: var(--accent-color-3);
  color: var(--accent-color-11);
  fill: var(--accent-color-11);

  &:hover {
    background-color: var(--accent-color-4);
  }

  &:active {
    background-color: var(--accent-color-5);
  }
`,Hw=Qh`
  background-color: var(--accent-color-9);
  color: #fff;
  fill: #fff;

  &:hover {
    background-color: var(--accent-color-10);
  }

  &:active {
    background-color: var(--accent-color-10);
  }
`,Mw=Qh`
  font-weight: var(--font-weight-medium);
  padding: 0 8px;
  height: 24px;
  ${RL};
`,zw=Qh`
  font-weight: var(--font-weight-medium);
  padding: 0 12px;
  height: 32px;
  ${LL};
`,Jw=Qh`
  font-weight: var(--font-weight-medium);
  padding: 0 16px;
  height: 40px;
  ${YL};
`,jw=Object.freeze(Object.defineProperty({__proto__:null,button:Nw,size1:Mw,size2:zw,size3:Jw,soft:Kw,solid:Hw},Symbol.toStringTag,{value:"Module"})),Fw=(e,t)=>()=>Ch`
    <button
      class=${[Nw,Reflect.get(jw,e.variant??"solid"),Reflect.get(jw,`size${e.size??"2"}`)]}
      type="button"
      @click=${e.onClick}
    >
      ${e.text}
    </button>
  `,Ow=Qh`
  display: flex;
  align-items: center;
  border-radius: 6px;
  width: fit-content;
  padding: 15px;
  background-color: var(--toast-background);
  border: 1px solid var(--toast-border);
`,$w=Qh`
  word-break: break-all;

  & > div {
    margin-bottom: 5px;
  }

  & > div:last-child {
    margin-bottom: 0;
  }
`,Ew=Qh`
  color: var(--active);
  font-weight: var(--font-weight-medium);
  ${LL};
`,Uw=Qh`
  ${zL};
`,Pw=Qh`
  display: flex;
  margin-left: 15px;

  & > button {
    margin-left: 8px;
  }

  & > button:first-child {
    margin-left: 0;
  }
`,Aw=(e,t)=>()=>{const t=e.title||e.description,n=e.action;return Ch`
      <div class=${Ow}>
        ${t?Ch`
              <div class=${$w}>
                ${e.title?Ch`<div class=${Ew}>${e.title}</div>`:null}
                ${e.description?Ch`<div class=${Uw}>
                      ${e.description}
                    </div>`:null}
              </div>
            `:null}
        ${n?Ch`<div class=${Pw}>${e.action}</div>`:null}
      </div>
    `},Bw="automaticTablePlacement",Qw="tableProperties",Dw="search",_w="themeBuilder",qw="diffViewer",eN="timeTravel";function tN(){let e=()=>{};return[new Promise((t=>{e=t})),()=>e()]}const nN=Qh`
  display: flex;
  width: 100%;
  height: 100%;
  overflow: hidden;
  position: absolute;
  top: 0;
  left: 0;
  background-color: var(--canvas-boundary-background);
`,iN=Qh`
  display: flex;
  width: 100%;
  height: 100%;
  overflow: hidden;
  position: relative;
  pointer-events: none;
`;class oN extends Map{constructor(e,t=rN){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[t,n]of e)this.set(t,n)}get(e){return super.get(lN(this,e))}has(e){return super.has(lN(this,e))}set(e,t){return super.set(function({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}(this,e),t)}delete(e){return super.delete(function({_intern:e,_key:t},n){const i=t(n);return e.has(i)&&(n=e.get(i),e.delete(i)),n}(this,e))}}function lN({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function rN(e){return null!==e&&"object"==typeof e?e.valueOf():e}var aN={value:()=>{}};function sN(){for(var e,t=0,n=arguments.length,i={};t<n;++t){if(!(e=arguments[t]+"")||e in i||/[\s.]/.test(e))throw new Error("illegal type: "+e);i[e]=[]}return new cN(i)}function cN(e){this._=e}function uN(e,t){for(var n,i=0,o=e.length;i<o;++i)if((n=e[i]).name===t)return n.value}function dN(e,t,n){for(var i=0,o=e.length;i<o;++i)if(e[i].name===t){e[i]=aN,e=e.slice(0,i).concat(e.slice(i+1));break}return null!=n&&e.push({name:t,value:n}),e}cN.prototype=sN.prototype={constructor:cN,on:function(e,t){var n,i=this._,o=function(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",i=e.indexOf(".");if(i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}(e+"",i),l=-1,r=o.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++l<r;)if(n=(e=o[l]).type)i[n]=dN(i[n],e.name,t);else if(null==t)for(n in i)i[n]=dN(i[n],e.name,null);return this}for(;++l<r;)if((n=(e=o[l]).type)&&(n=uN(i[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new cN(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,i,o=new Array(n),l=0;l<n;++l)o[l]=arguments[l+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(l=0,n=(i=this._[e]).length;l<n;++l)i[l].value.apply(t,o)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],o=0,l=i.length;o<l;++o)i[o].value.apply(t,n)}};var pN="http://www.w3.org/1999/xhtml";const hN={svg:"http://www.w3.org/2000/svg",xhtml:pN,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function mN(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),hN.hasOwnProperty(t)?{space:hN[t],local:e}:e}function bN(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===pN&&t.documentElement.namespaceURI===pN?t.createElement(e):t.createElementNS(n,e)}}function fN(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function yN(e){var t=mN(e);return(t.local?fN:bN)(t)}function gN(){}function vN(e){return null==e?gN:function(){return this.querySelector(e)}}function ZN(){return[]}function xN(e){return null==e?ZN:function(){return this.querySelectorAll(e)}}function XN(e){return function(){return function(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}(e.apply(this,arguments))}}function GN(e){return function(){return this.matches(e)}}function IN(e){return function(t){return t.matches(e)}}var WN=Array.prototype.find;function kN(){return this.firstElementChild}var VN=Array.prototype.filter;function CN(){return Array.from(this.children)}function SN(e){return new Array(e.length)}function RN(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function LN(e,t,n,i,o,l){for(var r,a=0,s=t.length,c=l.length;a<c;++a)(r=t[a])?(r.__data__=l[a],i[a]=r):n[a]=new RN(e,l[a]);for(;a<s;++a)(r=t[a])&&(o[a]=r)}function YN(e,t,n,i,o,l,r){var a,s,c,u=new Map,d=t.length,p=l.length,h=new Array(d);for(a=0;a<d;++a)(s=t[a])&&(h[a]=c=r.call(s,s.__data__,a,t)+"",u.has(c)?o[a]=s:u.set(c,s));for(a=0;a<p;++a)c=r.call(e,l[a],a,l)+"",(s=u.get(c))?(i[a]=s,s.__data__=l[a],u.delete(c)):n[a]=new RN(e,l[a]);for(a=0;a<d;++a)(s=t[a])&&u.get(h[a])===s&&(o[a]=s)}function TN(e){return e.__data__}function wN(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function NN(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function KN(e){return function(){this.removeAttribute(e)}}function HN(e){return function(){this.removeAttributeNS(e.space,e.local)}}function MN(e,t){return function(){this.setAttribute(e,t)}}function zN(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function JN(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function jN(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function FN(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function ON(e){return function(){this.style.removeProperty(e)}}function $N(e,t,n){return function(){this.style.setProperty(e,t,n)}}function EN(e,t,n){return function(){var i=t.apply(this,arguments);null==i?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function UN(e,t){return e.style.getPropertyValue(t)||FN(e).getComputedStyle(e,null).getPropertyValue(t)}function PN(e){return function(){delete this[e]}}function AN(e,t){return function(){this[e]=t}}function BN(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function QN(e){return e.trim().split(/^|\s+/)}function DN(e){return e.classList||new _N(e)}function _N(e){this._node=e,this._names=QN(e.getAttribute("class")||"")}function qN(e,t){for(var n=DN(e),i=-1,o=t.length;++i<o;)n.add(t[i])}function eK(e,t){for(var n=DN(e),i=-1,o=t.length;++i<o;)n.remove(t[i])}function tK(e){return function(){qN(this,e)}}function nK(e){return function(){eK(this,e)}}function iK(e,t){return function(){(t.apply(this,arguments)?qN:eK)(this,e)}}function oK(){this.textContent=""}function lK(e){return function(){this.textContent=e}}function rK(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function aK(){this.innerHTML=""}function sK(e){return function(){this.innerHTML=e}}function cK(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function uK(){this.nextSibling&&this.parentNode.appendChild(this)}function dK(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function pK(){return null}function hK(){var e=this.parentNode;e&&e.removeChild(this)}function mK(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function bK(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function fK(e){return function(){var t=this.__on;if(t){for(var n,i=0,o=-1,l=t.length;i<l;++i)n=t[i],e.type&&n.type!==e.type||n.name!==e.name?t[++o]=n:this.removeEventListener(n.type,n.listener,n.options);++o?t.length=o:delete this.__on}}}function yK(e,t,n){return function(){var i,o=this.__on,l=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(o)for(var r=0,a=o.length;r<a;++r)if((i=o[r]).type===e.type&&i.name===e.name)return this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=l,i.options=n),void(i.value=t);this.addEventListener(e.type,l,n),i={type:e.type,name:e.name,value:t,listener:l,options:n},o?o.push(i):this.__on=[i]}}function gK(e,t,n){var i=FN(e),o=i.CustomEvent;"function"==typeof o?o=new o(t,n):(o=i.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function vK(e,t){return function(){return gK(this,e,t)}}function ZK(e,t){return function(){return gK(this,e,t.apply(this,arguments))}}RN.prototype={constructor:RN,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},_N.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var xK=[null];function XK(e,t){this._groups=e,this._parents=t}function GK(){return new XK([[document.documentElement]],xK)}function IK(e){return"string"==typeof e?new XK([[document.querySelector(e)]],[document.documentElement]):new XK([[e]],xK)}function WK(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,[(i=i.matrixTransform(t.getScreenCTM().inverse())).x,i.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}XK.prototype=GK.prototype={constructor:XK,select:function(e){"function"!=typeof e&&(e=vN(e));for(var t=this._groups,n=t.length,i=new Array(n),o=0;o<n;++o)for(var l,r,a=t[o],s=a.length,c=i[o]=new Array(s),u=0;u<s;++u)(l=a[u])&&(r=e.call(l,l.__data__,u,a))&&("__data__"in l&&(r.__data__=l.__data__),c[u]=r);return new XK(i,this._parents)},selectAll:function(e){e="function"==typeof e?XN(e):xN(e);for(var t=this._groups,n=t.length,i=[],o=[],l=0;l<n;++l)for(var r,a=t[l],s=a.length,c=0;c<s;++c)(r=a[c])&&(i.push(e.call(r,r.__data__,c,a)),o.push(r));return new XK(i,o)},selectChild:function(e){return this.select(null==e?kN:function(e){return function(){return WN.call(this.children,e)}}("function"==typeof e?e:IN(e)))},selectChildren:function(e){return this.selectAll(null==e?CN:function(e){return function(){return VN.call(this.children,e)}}("function"==typeof e?e:IN(e)))},filter:function(e){"function"!=typeof e&&(e=GN(e));for(var t=this._groups,n=t.length,i=new Array(n),o=0;o<n;++o)for(var l,r=t[o],a=r.length,s=i[o]=[],c=0;c<a;++c)(l=r[c])&&e.call(l,l.__data__,c,r)&&s.push(l);return new XK(i,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,TN);var n=t?YN:LN,i=this._parents,o=this._groups;"function"!=typeof e&&(e=function(e){return function(){return e}}(e));for(var l=o.length,r=new Array(l),a=new Array(l),s=new Array(l),c=0;c<l;++c){var u=i[c],d=o[c],p=d.length,h=wN(e.call(u,u&&u.__data__,c,i)),m=h.length,b=a[c]=new Array(m),f=r[c]=new Array(m);n(u,d,b,f,s[c]=new Array(p),h,t);for(var y,g,v=0,Z=0;v<m;++v)if(y=b[v]){for(v>=Z&&(Z=v+1);!(g=f[Z])&&++Z<m;);y._next=g||null}}return(r=new XK(r,i))._enter=a,r._exit=s,r},enter:function(){return new XK(this._enter||this._groups.map(SN),this._parents)},exit:function(){return new XK(this._exit||this._groups.map(SN),this._parents)},join:function(e,t,n){var i=this.enter(),o=this,l=this.exit();return"function"==typeof e?(i=e(i))&&(i=i.selection()):i=i.append(e+""),null!=t&&((o=t(o))&&(o=o.selection())),null==n?l.remove():n(l),i&&o?i.merge(o).order():o},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,o=n.length,l=i.length,r=Math.min(o,l),a=new Array(o),s=0;s<r;++s)for(var c,u=n[s],d=i[s],p=u.length,h=a[s]=new Array(p),m=0;m<p;++m)(c=u[m]||d[m])&&(h[m]=c);for(;s<o;++s)a[s]=n[s];return new XK(a,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i,o=e[t],l=o.length-1,r=o[l];--l>=0;)(i=o[l])&&(r&&4^i.compareDocumentPosition(r)&&r.parentNode.insertBefore(i,r),r=i);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=NN);for(var n=this._groups,i=n.length,o=new Array(i),l=0;l<i;++l){for(var r,a=n[l],s=a.length,c=o[l]=new Array(s),u=0;u<s;++u)(r=a[u])&&(c[u]=r);c.sort(t)}return new XK(o,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],o=0,l=i.length;o<l;++o){var r=i[o];if(r)return r}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var o,l=t[n],r=0,a=l.length;r<a;++r)(o=l[r])&&e.call(o,o.__data__,r,l);return this},attr:function(e,t){var n=mN(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==t?n.local?HN:KN:"function"==typeof t?n.local?jN:JN:n.local?zN:MN)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?ON:"function"==typeof t?EN:$N)(e,t,n??"")):UN(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?PN:"function"==typeof t?BN:AN)(e,t)):this.node()[e]},classed:function(e,t){var n=QN(e+"");if(arguments.length<2){for(var i=DN(this.node()),o=-1,l=n.length;++o<l;)if(!i.contains(n[o]))return!1;return!0}return this.each(("function"==typeof t?iK:t?tK:nK)(n,t))},text:function(e){return arguments.length?this.each(null==e?oK:("function"==typeof e?rK:lK)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?aK:("function"==typeof e?cK:sK)(e)):this.node().innerHTML},raise:function(){return this.each(uK)},lower:function(){return this.each(dK)},append:function(e){var t="function"==typeof e?e:yN(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:yN(e),i=null==t?pK:"function"==typeof t?t:vN(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)}))},remove:function(){return this.each(hK)},clone:function(e){return this.select(e?bK:mK)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var i,o,l=function(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}(e+""),r=l.length;if(!(arguments.length<2)){for(a=t?yK:fK,i=0;i<r;++i)this.each(a(l[i],t,n));return this}var a=this.node().__on;if(a)for(var s,c=0,u=a.length;c<u;++c)for(i=0,s=a[c];i<r;++i)if((o=l[i]).type===s.type&&o.name===s.name)return s.value},dispatch:function(e,t){return this.each(("function"==typeof t?ZK:vK)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i,o=e[t],l=0,r=o.length;l<r;++l)(i=o[l])&&(yield i)}};const kK={passive:!1},VK={capture:!0,passive:!1};function CK(e){e.stopImmediatePropagation()}function SK(e){e.preventDefault(),e.stopImmediatePropagation()}const RK=e=>()=>e;function LK(e,{sourceEvent:t,subject:n,target:i,identifier:o,active:l,x:r,y:a,dx:s,dy:c,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:l,enumerable:!0,configurable:!0},x:{value:r,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:s,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:u}})}function YK(e){return!e.ctrlKey&&!e.button}function TK(){return this.parentNode}function wK(e,t){return t??{x:e.x,y:e.y}}function NK(){return navigator.maxTouchPoints||"ontouchstart"in this}function KK(){var e,t,n,i,o=YK,l=TK,r=wK,a=NK,s={},c=sN("start","drag","end"),u=0,d=0;function p(e){e.on("mousedown.drag",h).filter(a).on("touchstart.drag",f).on("touchmove.drag",y,kK).on("touchend.drag touchcancel.drag",g).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(r,a){if(!i&&o.call(this,r,a)){var s=v(this,l.call(this,r,a),r,a,"mouse");s&&(IK(r.view).on("mousemove.drag",m,VK).on("mouseup.drag",b,VK),function(e){var t=e.document.documentElement,n=IK(e).on("dragstart.drag",SK,VK);"onselectstart"in t?n.on("selectstart.drag",SK,VK):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}(r.view),CK(r),n=!1,e=r.clientX,t=r.clientY,s("start",r))}}function m(i){if(SK(i),!n){var o=i.clientX-e,l=i.clientY-t;n=o*o+l*l>d}s.mouse("drag",i)}function b(e){IK(e.view).on("mousemove.drag mouseup.drag",null),function(e,t){var n=e.document.documentElement,i=IK(e).on("dragstart.drag",null);t&&(i.on("click.drag",SK,VK),setTimeout((function(){i.on("click.drag",null)}),0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}(e.view,n),SK(e),s.mouse("end",e)}function f(e,t){if(o.call(this,e,t)){var n,i,r=e.changedTouches,a=l.call(this,e,t),s=r.length;for(n=0;n<s;++n)(i=v(this,a,e,t,r[n].identifier,r[n]))&&(CK(e),i("start",e,r[n]))}}function y(e){var t,n,i=e.changedTouches,o=i.length;for(t=0;t<o;++t)(n=s[i[t].identifier])&&(SK(e),n("drag",e,i[t]))}function g(e){var t,n,o=e.changedTouches,l=o.length;for(i&&clearTimeout(i),i=setTimeout((function(){i=null}),500),t=0;t<l;++t)(n=s[o[t].identifier])&&(CK(e),n("end",e,o[t]))}function v(e,t,n,i,o,l){var a,d,h,m=c.copy(),b=WK(l||n,t);if(null!=(h=r.call(e,new LK("beforestart",{sourceEvent:n,target:p,identifier:o,active:u,x:b[0],y:b[1],dx:0,dy:0,dispatch:m}),i)))return a=h.x-b[0]||0,d=h.y-b[1]||0,function n(l,r,c){var f,y=b;switch(l){case"start":s[o]=n,f=u++;break;case"end":delete s[o],--u;case"drag":b=WK(c||r,t),f=u}m.call(l,e,new LK(l,{sourceEvent:r,subject:h,target:p,identifier:o,active:f,x:b[0]+a,y:b[1]+d,dx:b[0]-y[0],dy:b[1]-y[1],dispatch:m}),i)}}return p.filter=function(e){return arguments.length?(o="function"==typeof e?e:RK(!!e),p):o},p.container=function(e){return arguments.length?(l="function"==typeof e?e:RK(e),p):l},p.subject=function(e){return arguments.length?(r="function"==typeof e?e:RK(e),p):r},p.touchable=function(e){return arguments.length?(a="function"==typeof e?e:RK(!!e),p):a},p.on=function(){var e=c.on.apply(c,arguments);return e===c?p:e},p.clickDistance=function(e){return arguments.length?(d=(e=+e)*e,p):Math.sqrt(d)},p}function HK(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function MK(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function zK(){}LK.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};var JK=.7,jK=1/JK,FK="\\s*([+-]?\\d+)\\s*",OK="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",$K="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",EK=/^#([0-9a-f]{3,8})$/,UK=new RegExp(`^rgb\\(${FK},${FK},${FK}\\)$`),PK=new RegExp(`^rgb\\(${$K},${$K},${$K}\\)$`),AK=new RegExp(`^rgba\\(${FK},${FK},${FK},${OK}\\)$`),BK=new RegExp(`^rgba\\(${$K},${$K},${$K},${OK}\\)$`),QK=new RegExp(`^hsl\\(${OK},${$K},${$K}\\)$`),DK=new RegExp(`^hsla\\(${OK},${$K},${$K},${OK}\\)$`),_K={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function qK(){return this.rgb().formatHex()}function eH(){return this.rgb().formatRgb()}function tH(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=EK.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?nH(t):3===n?new lH(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?iH(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?iH(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=UK.exec(e))?new lH(t[1],t[2],t[3],1):(t=PK.exec(e))?new lH(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=AK.exec(e))?iH(t[1],t[2],t[3],t[4]):(t=BK.exec(e))?iH(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=QK.exec(e))?dH(t[1],t[2]/100,t[3]/100,1):(t=DK.exec(e))?dH(t[1],t[2]/100,t[3]/100,t[4]):_K.hasOwnProperty(e)?nH(_K[e]):"transparent"===e?new lH(NaN,NaN,NaN,0):null}function nH(e){return new lH(e>>16&255,e>>8&255,255&e,1)}function iH(e,t,n,i){return i<=0&&(e=t=n=NaN),new lH(e,t,n,i)}function oH(e,t,n,i){return 1===arguments.length?function(e){return e instanceof zK||(e=tH(e)),e?new lH((e=e.rgb()).r,e.g,e.b,e.opacity):new lH}(e):new lH(e,t,n,i??1)}function lH(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}function rH(){return`#${uH(this.r)}${uH(this.g)}${uH(this.b)}`}function aH(){const e=sH(this.opacity);return`${1===e?"rgb(":"rgba("}${cH(this.r)}, ${cH(this.g)}, ${cH(this.b)}${1===e?")":`, ${e})`}`}function sH(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function cH(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function uH(e){return((e=cH(e))<16?"0":"")+e.toString(16)}function dH(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new hH(e,t,n,i)}function pH(e){if(e instanceof hH)return new hH(e.h,e.s,e.l,e.opacity);if(e instanceof zK||(e=tH(e)),!e)return new hH;if(e instanceof hH)return e;var t=(e=e.rgb()).r/255,n=e.g/255,i=e.b/255,o=Math.min(t,n,i),l=Math.max(t,n,i),r=NaN,a=l-o,s=(l+o)/2;return a?(r=t===l?(n-i)/a+6*(n<i):n===l?(i-t)/a+2:(t-n)/a+4,a/=s<.5?l+o:2-l-o,r*=60):a=s>0&&s<1?0:r,new hH(r,a,s,e.opacity)}function hH(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}function mH(e){return(e=(e||0)%360)<0?e+360:e}function bH(e){return Math.max(0,Math.min(1,e||0))}function fH(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}HK(zK,tH,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:qK,formatHex:qK,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return pH(this).formatHsl()},formatRgb:eH,toString:eH}),HK(lH,oH,MK(zK,{brighter(e){return e=null==e?jK:Math.pow(jK,e),new lH(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?JK:Math.pow(JK,e),new lH(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new lH(cH(this.r),cH(this.g),cH(this.b),sH(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rH,formatHex:rH,formatHex8:function(){return`#${uH(this.r)}${uH(this.g)}${uH(this.b)}${uH(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:aH,toString:aH})),HK(hH,(function(e,t,n,i){return 1===arguments.length?pH(e):new hH(e,t,n,i??1)}),MK(zK,{brighter(e){return e=null==e?jK:Math.pow(jK,e),new hH(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?JK:Math.pow(JK,e),new hH(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,o=2*n-i;return new lH(fH(e>=240?e-240:e+120,o,i),fH(e,o,i),fH(e<120?e+240:e-120,o,i),this.opacity)},clamp(){return new hH(mH(this.h),bH(this.s),bH(this.l),sH(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=sH(this.opacity);return`${1===e?"hsl(":"hsla("}${mH(this.h)}, ${100*bH(this.s)}%, ${100*bH(this.l)}%${1===e?")":`, ${e})`}`}}));const yH=e=>()=>e;function gH(e){return 1==(e=+e)?vH:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}(t,n,e):yH(isNaN(t)?n:t)}}function vH(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):yH(isNaN(e)?t:e)}const ZH=function e(t){var n=gH(t);function i(e,t){var i=n((e=oH(e)).r,(t=oH(t)).r),o=n(e.g,t.g),l=n(e.b,t.b),r=vH(e.opacity,t.opacity);return function(t){return e.r=i(t),e.g=o(t),e.b=l(t),e.opacity=r(t),e+""}}return i.gamma=e,i}(1);function xH(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var XH=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,GH=new RegExp(XH.source,"g");function IH(e,t){var n,i,o,l=XH.lastIndex=GH.lastIndex=0,r=-1,a=[],s=[];for(e+="",t+="";(n=XH.exec(e))&&(i=GH.exec(t));)(o=i.index)>l&&(o=t.slice(l,o),a[r]?a[r]+=o:a[++r]=o),(n=n[0])===(i=i[0])?a[r]?a[r]+=i:a[++r]=i:(a[++r]=null,s.push({i:r,x:xH(n,i)})),l=GH.lastIndex;return l<t.length&&(o=t.slice(l),a[r]?a[r]+=o:a[++r]=o),a.length<2?s[0]?function(e){return function(t){return e(t)+""}}(s[0].x):function(e){return function(){return e}}(t):(t=s.length,function(e){for(var n,i=0;i<t;++i)a[(n=s[i]).i]=n.x(e);return a.join("")})}var WH,kH=180/Math.PI,VH={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function CH(e,t,n,i,o,l){var r,a,s;return(r=Math.sqrt(e*e+t*t))&&(e/=r,t/=r),(s=e*n+t*i)&&(n-=e*s,i-=t*s),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,s/=a),e*i<t*n&&(e=-e,t=-t,s=-s,r=-r),{translateX:o,translateY:l,rotate:Math.atan2(t,e)*kH,skewX:Math.atan(s)*kH,scaleX:r,scaleY:a}}function SH(e,t,n,i){function o(e){return e.length?e.pop()+" ":""}return function(l,r){var a=[],s=[];return l=e(l),r=e(r),function(e,i,o,l,r,a){if(e!==o||i!==l){var s=r.push("translate(",null,t,null,n);a.push({i:s-4,x:xH(e,o)},{i:s-2,x:xH(i,l)})}else(o||l)&&r.push("translate("+o+t+l+n)}(l.translateX,l.translateY,r.translateX,r.translateY,a,s),function(e,t,n,l){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),l.push({i:n.push(o(n)+"rotate(",null,i)-2,x:xH(e,t)})):t&&n.push(o(n)+"rotate("+t+i)}(l.rotate,r.rotate,a,s),function(e,t,n,l){e!==t?l.push({i:n.push(o(n)+"skewX(",null,i)-2,x:xH(e,t)}):t&&n.push(o(n)+"skewX("+t+i)}(l.skewX,r.skewX,a,s),function(e,t,n,i,l,r){if(e!==n||t!==i){var a=l.push(o(l)+"scale(",null,",",null,")");r.push({i:a-4,x:xH(e,n)},{i:a-2,x:xH(t,i)})}else(1!==n||1!==i)&&l.push(o(l)+"scale("+n+","+i+")")}(l.scaleX,l.scaleY,r.scaleX,r.scaleY,a,s),l=r=null,function(e){for(var t,n=-1,i=s.length;++n<i;)a[(t=s[n]).i]=t.x(e);return a.join("")}}}var RH,LH,YH=SH((function(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?VH:CH(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),TH=SH((function(e){return null!=e&&(WH||(WH=document.createElementNS("http://www.w3.org/2000/svg","g")),WH.setAttribute("transform",e),e=WH.transform.baseVal.consolidate())?CH((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):VH}),", ",")",")"),wH=0,NH=0,KH=0,HH=1e3,MH=0,zH=0,JH=0,jH="object"==typeof performance&&performance.now?performance:Date,FH="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function OH(){return zH||(FH($H),zH=jH.now()+JH)}function $H(){zH=0}function EH(){this._call=this._time=this._next=null}function UH(e,t,n){var i=new EH;return i.restart(e,t,n),i}function PH(){zH=(MH=jH.now())+JH,wH=NH=0;try{!function(){OH(),++wH;for(var e,t=RH;t;)(e=zH-t._time)>=0&&t._call.call(void 0,e),t=t._next;--wH}()}finally{wH=0,function(){for(var e,t,n=RH,i=1/0;n;)n._call?(i>n._time&&(i=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:RH=t);LH=e,BH(i)}(),zH=0}}function AH(){var e=jH.now(),t=e-MH;t>HH&&(JH-=t,MH=e)}function BH(e){wH||(NH&&(NH=clearTimeout(NH)),e-zH>24?(e<1/0&&(NH=setTimeout(PH,e-jH.now()-JH)),KH&&(KH=clearInterval(KH))):(KH||(MH=jH.now(),KH=setInterval(AH,HH)),wH=1,FH(PH)))}function QH(e,t,n){var i=new EH;return t=null==t?0:+t,i.restart((n=>{i.stop(),e(n+t)}),t,n),i}EH.prototype=UH.prototype={constructor:EH,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?OH():+n)+(null==t?0:+t),!this._next&&LH!==this&&(LH?LH._next=this:RH=this,LH=this),this._call=e,this._time=n,BH()},stop:function(){this._call&&(this._call=null,this._time=1/0,BH())}};var DH=sN("start","end","cancel","interrupt"),_H=[],qH=0,eM=1,tM=2,nM=3,iM=4,oM=5,lM=6;function rM(e,t,n,i,o,l){var r=e.__transition;if(r){if(n in r)return}else e.__transition={};!function(e,t,n){var i,o=e.__transition;function l(e){n.state=eM,n.timer.restart(r,n.delay,n.time),n.delay<=e&&r(e-n.delay)}function r(l){var c,u,d,p;if(n.state!==eM)return s();for(c in o)if((p=o[c]).name===n.name){if(p.state===nM)return QH(r);p.state===iM?(p.state=lM,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete o[c]):+c<t&&(p.state=lM,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete o[c])}if(QH((function(){n.state===nM&&(n.state=iM,n.timer.restart(a,n.delay,n.time),a(l))})),n.state=tM,n.on.call("start",e,e.__data__,n.index,n.group),n.state===tM){for(n.state=nM,i=new Array(d=n.tween.length),c=0,u=-1;c<d;++c)(p=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++u]=p);i.length=u+1}}function a(t){for(var o=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(s),n.state=oM,1),l=-1,r=i.length;++l<r;)i[l].call(e,o);n.state===oM&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){for(var i in n.state=lM,n.timer.stop(),delete o[t],o)return;delete e.__transition}o[t]=n,n.timer=UH(l,0,n.time)}(e,n,{name:t,index:i,group:o,on:DH,tween:_H,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:qH})}function aM(e,t){var n=cM(e,t);if(n.state>qH)throw new Error("too late; already scheduled");return n}function sM(e,t){var n=cM(e,t);if(n.state>nM)throw new Error("too late; already running");return n}function cM(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function uM(e,t){var n,i;return function(){var o=sM(this,e),l=o.tween;if(l!==n)for(var r=0,a=(i=n=l).length;r<a;++r)if(i[r].name===t){(i=i.slice()).splice(r,1);break}o.tween=i}}function dM(e,t,n){var i,o;if("function"!=typeof n)throw new Error;return function(){var l=sM(this,e),r=l.tween;if(r!==i){o=(i=r).slice();for(var a={name:t,value:n},s=0,c=o.length;s<c;++s)if(o[s].name===t){o[s]=a;break}s===c&&o.push(a)}l.tween=o}}function pM(e,t,n){var i=e._id;return e.each((function(){var e=sM(this,i);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return cM(e,i).value[t]}}function hM(e,t){var n;return("number"==typeof t?xH:t instanceof tH?ZH:(n=tH(t))?(t=n,ZH):IH)(e,t)}function mM(e){return function(){this.removeAttribute(e)}}function bM(e){return function(){this.removeAttributeNS(e.space,e.local)}}function fM(e,t,n){var i,o,l=n+"";return function(){var r=this.getAttribute(e);return r===l?null:r===i?o:o=t(i=r,n)}}function yM(e,t,n){var i,o,l=n+"";return function(){var r=this.getAttributeNS(e.space,e.local);return r===l?null:r===i?o:o=t(i=r,n)}}function gM(e,t,n){var i,o,l;return function(){var r,a,s=n(this);return null==s?void this.removeAttribute(e):(r=this.getAttribute(e))===(a=s+"")?null:r===i&&a===o?l:(o=a,l=t(i=r,s))}}function vM(e,t,n){var i,o,l;return function(){var r,a,s=n(this);return null==s?void this.removeAttributeNS(e.space,e.local):(r=this.getAttributeNS(e.space,e.local))===(a=s+"")?null:r===i&&a===o?l:(o=a,l=t(i=r,s))}}function ZM(e,t){var n,i;function o(){var o=t.apply(this,arguments);return o!==i&&(n=(i=o)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,o)),n}return o._value=t,o}function xM(e,t){var n,i;function o(){var o=t.apply(this,arguments);return o!==i&&(n=(i=o)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,o)),n}return o._value=t,o}function XM(e,t){return function(){aM(this,e).delay=+t.apply(this,arguments)}}function GM(e,t){return t=+t,function(){aM(this,e).delay=t}}function IM(e,t){return function(){sM(this,e).duration=+t.apply(this,arguments)}}function WM(e,t){return t=+t,function(){sM(this,e).duration=t}}var kM=GK.prototype.constructor;function VM(e){return function(){this.style.removeProperty(e)}}var CM=0;function SM(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function RM(){return++CM}var LM=GK.prototype;SM.prototype={constructor:SM,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=vN(e));for(var i=this._groups,o=i.length,l=new Array(o),r=0;r<o;++r)for(var a,s,c=i[r],u=c.length,d=l[r]=new Array(u),p=0;p<u;++p)(a=c[p])&&(s=e.call(a,a.__data__,p,c))&&("__data__"in a&&(s.__data__=a.__data__),d[p]=s,rM(d[p],t,n,p,d,cM(a,n)));return new SM(l,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=xN(e));for(var i=this._groups,o=i.length,l=[],r=[],a=0;a<o;++a)for(var s,c=i[a],u=c.length,d=0;d<u;++d)if(s=c[d]){for(var p,h=e.call(s,s.__data__,d,c),m=cM(s,n),b=0,f=h.length;b<f;++b)(p=h[b])&&rM(p,t,n,b,h,m);l.push(h),r.push(s)}return new SM(l,r,t,n)},selectChild:LM.selectChild,selectChildren:LM.selectChildren,filter:function(e){"function"!=typeof e&&(e=GN(e));for(var t=this._groups,n=t.length,i=new Array(n),o=0;o<n;++o)for(var l,r=t[o],a=r.length,s=i[o]=[],c=0;c<a;++c)(l=r[c])&&e.call(l,l.__data__,c,r)&&s.push(l);return new SM(i,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,o=n.length,l=Math.min(i,o),r=new Array(i),a=0;a<l;++a)for(var s,c=t[a],u=n[a],d=c.length,p=r[a]=new Array(d),h=0;h<d;++h)(s=c[h]||u[h])&&(p[h]=s);for(;a<i;++a)r[a]=t[a];return new SM(r,this._parents,this._name,this._id)},selection:function(){return new kM(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=RM(),i=this._groups,o=i.length,l=0;l<o;++l)for(var r,a=i[l],s=a.length,c=0;c<s;++c)if(r=a[c]){var u=cM(r,t);rM(r,e,n,c,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new SM(i,this._parents,e,n)},call:LM.call,nodes:LM.nodes,node:LM.node,size:LM.size,empty:LM.empty,each:LM.each,on:function(e,t){var n=this._id;return arguments.length<2?cM(this.node(),n).on.on(e):this.each(function(e,t,n){var i,o,l=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?aM:sM;return function(){var r=l(this,e),a=r.on;a!==i&&(o=(i=a).copy()).on(t,n),r.on=o}}(n,e,t))},attr:function(e,t){var n=mN(e),i="transform"===n?TH:hM;return this.attrTween(e,"function"==typeof t?(n.local?vM:gM)(n,i,pM(this,"attr."+e,t)):null==t?(n.local?bM:mM)(n):(n.local?yM:fM)(n,i,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var i=mN(e);return this.tween(n,(i.local?ZM:xM)(i,t))},style:function(e,t,n){var i="transform"==(e+="")?YH:hM;return null==t?this.styleTween(e,function(e,t){var n,i,o;return function(){var l=UN(this,e),r=(this.style.removeProperty(e),UN(this,e));return l===r?null:l===n&&r===i?o:o=t(n=l,i=r)}}(e,i)).on("end.style."+e,VM(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var i,o,l;return function(){var r=UN(this,e),a=n(this),s=a+"";return null==a&&(this.style.removeProperty(e),s=a=UN(this,e)),r===s?null:r===i&&s===o?l:(o=s,l=t(i=r,a))}}(e,i,pM(this,"style."+e,t))).each(function(e,t){var n,i,o,l,r="style."+t,a="end."+r;return function(){var s=sM(this,e),c=s.on,u=null==s.value[r]?l||(l=VM(t)):void 0;(c!==n||o!==u)&&(i=(n=c).copy()).on(a,o=u),s.on=i}}(this._id,e)):this.styleTween(e,function(e,t,n){var i,o,l=n+"";return function(){var r=UN(this,e);return r===l?null:r===i?o:o=t(i=r,n)}}(e,i,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==t)return this.tween(i,null);if("function"!=typeof t)throw new Error;return this.tween(i,function(e,t,n){var i,o;function l(){var l=t.apply(this,arguments);return l!==o&&(i=(o=l)&&function(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}(e,l,n)),i}return l._value=t,l}(e,t,n??""))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=t??""}}(pM(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,function(e){var t,n;function i(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&function(e){return function(t){this.textContent=e.call(this,t)}}(i)),t}return i._value=e,i}(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i,o=cM(this.node(),n).tween,l=0,r=o.length;l<r;++l)if((i=o[l]).name===e)return i.value;return null}return this.each((null==t?uM:dM)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?XM:GM)(t,e)):cM(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?IM:WM)(t,e)):cM(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){sM(this,e).ease=t}}(t,e)):cM(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;sM(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,i=n._id,o=n.size();return new Promise((function(l,r){var a={value:r},s={value:function(){0==--o&&l()}};n.each((function(){var n=sM(this,i),o=n.on;o!==e&&((t=(e=o).copy())._.cancel.push(a),t._.interrupt.push(a),t._.end.push(s)),n.on=t})),0===o&&l()}))},[Symbol.iterator]:LM[Symbol.iterator]};var YM={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function TM(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function wM(e,t,n,i){if(isNaN(t)||isNaN(n))return e;var o,l,r,a,s,c,u,d,p,h=e._root,m={data:i},b=e._x0,f=e._y0,y=e._x1,g=e._y1;if(!h)return e._root=m,e;for(;h.length;)if((c=t>=(l=(b+y)/2))?b=l:y=l,(u=n>=(r=(f+g)/2))?f=r:g=r,o=h,!(h=h[d=u<<1|c]))return o[d]=m,e;if(a=+e._x.call(null,h.data),s=+e._y.call(null,h.data),t===a&&n===s)return m.next=h,o?o[d]=m:e._root=m,e;do{o=o?o[d]=new Array(4):e._root=new Array(4),(c=t>=(l=(b+y)/2))?b=l:y=l,(u=n>=(r=(f+g)/2))?f=r:g=r}while((d=u<<1|c)==(p=(s>=r)<<1|a>=l));return o[p]=h,o[d]=m,e}function NM(e,t,n,i,o){this.node=e,this.x0=t,this.y0=n,this.x1=i,this.y1=o}function KM(e){return e[0]}function HM(e){return e[1]}function MM(e,t,n){var i=new zM(t??KM,n??HM,NaN,NaN,NaN,NaN);return null==e?i:i.addAll(e)}function zM(e,t,n,i,o,l){this._x=e,this._y=t,this._x0=n,this._y0=i,this._x1=o,this._y1=l,this._root=void 0}function JM(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}GK.prototype.interrupt=function(e){return this.each((function(){!function(e,t){var n,i,o,l=e.__transition,r=!0;if(l){for(o in t=null==t?null:t+"",l)(n=l[o]).name===t?(i=n.state>tM&&n.state<oM,n.state=lM,n.timer.stop(),n.on.call(i?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete l[o]):r=!1;r&&delete e.__transition}}(this,e)}))},GK.prototype.transition=function(e){var t,n;e instanceof SM?(t=e._id,e=e._name):(t=RM(),(n=YM).time=OH(),e=null==e?null:e+"");for(var i=this._groups,o=i.length,l=0;l<o;++l)for(var r,a=i[l],s=a.length,c=0;c<s;++c)(r=a[c])&&rM(r,e,t,c,a,n||TM(r,t));return new SM(i,this._parents,e,t)};var jM=MM.prototype=zM.prototype;function FM(e){return function(){return e}}function OM(e){return 1e-6*(e()-.5)}function $M(e){return e.x+e.vx}function EM(e){return e.y+e.vy}function UM(e){return e.index}function PM(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function AM(e){var t,n,i,o,l,r,a=UM,s=function(e){return 1/Math.min(o[e.source.index],o[e.target.index])},c=FM(30),u=1;function d(i){for(var o=0,a=e.length;o<u;++o)for(var s,c,d,p,h,m,b,f=0;f<a;++f)c=(s=e[f]).source,p=(d=s.target).x+d.vx-c.x-c.vx||OM(r),h=d.y+d.vy-c.y-c.vy||OM(r),p*=m=((m=Math.sqrt(p*p+h*h))-n[f])/m*i*t[f],h*=m,d.vx-=p*(b=l[f]),d.vy-=h*b,c.vx+=p*(b=1-b),c.vy+=h*b}function p(){if(i){var r,s,c=i.length,u=e.length,d=new Map(i.map(((e,t)=>[a(e,t,i),e])));for(r=0,o=new Array(c);r<u;++r)(s=e[r]).index=r,"object"!=typeof s.source&&(s.source=PM(d,s.source)),"object"!=typeof s.target&&(s.target=PM(d,s.target)),o[s.source.index]=(o[s.source.index]||0)+1,o[s.target.index]=(o[s.target.index]||0)+1;for(r=0,l=new Array(u);r<u;++r)s=e[r],l[r]=o[s.source.index]/(o[s.source.index]+o[s.target.index]);t=new Array(u),h(),n=new Array(u),m()}}function h(){if(i)for(var n=0,o=e.length;n<o;++n)t[n]=+s(e[n],n,e)}function m(){if(i)for(var t=0,o=e.length;t<o;++t)n[t]=+c(e[t],t,e)}return null==e&&(e=[]),d.initialize=function(e,t){i=e,r=t,p()},d.links=function(t){return arguments.length?(e=t,p(),d):e},d.id=function(e){return arguments.length?(a=e,d):a},d.iterations=function(e){return arguments.length?(u=+e,d):u},d.strength=function(e){return arguments.length?(s="function"==typeof e?e:FM(+e),h(),d):s},d.distance=function(e){return arguments.length?(c="function"==typeof e?e:FM(+e),m(),d):c},d}jM.copy=function(){var e,t,n=new zM(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root;if(!i)return n;if(!i.length)return n._root=JM(i),n;for(e=[{source:i,target:n._root=new Array(4)}];i=e.pop();)for(var o=0;o<4;++o)(t=i.source[o])&&(t.length?e.push({source:t,target:i.target[o]=new Array(4)}):i.target[o]=JM(t));return n},jM.add=function(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return wM(this.cover(t,n),t,n,e)},jM.addAll=function(e){var t,n,i,o,l=e.length,r=new Array(l),a=new Array(l),s=1/0,c=1/0,u=-1/0,d=-1/0;for(n=0;n<l;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(o=+this._y.call(null,t))||(r[n]=i,a[n]=o,i<s&&(s=i),i>u&&(u=i),o<c&&(c=o),o>d&&(d=o));if(s>u||c>d)return this;for(this.cover(s,c).cover(u,d),n=0;n<l;++n)wM(this,r[n],a[n],e[n]);return this},jM.cover=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,i=this._y0,o=this._x1,l=this._y1;if(isNaN(n))o=(n=Math.floor(e))+1,l=(i=Math.floor(t))+1;else{for(var r,a,s=o-n||1,c=this._root;n>e||e>=o||i>t||t>=l;)switch(a=(t<i)<<1|e<n,r=new Array(4),r[a]=c,c=r,s*=2,a){case 0:o=n+s,l=i+s;break;case 1:n=o-s,l=i+s;break;case 2:o=n+s,i=l-s;break;case 3:n=o-s,i=l-s}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=i,this._x1=o,this._y1=l,this},jM.data=function(){var e=[];return this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)})),e},jM.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},jM.find=function(e,t,n){var i,o,l,r,a,s,c,u=this._x0,d=this._y0,p=this._x1,h=this._y1,m=[],b=this._root;for(b&&m.push(new NM(b,u,d,p,h)),null==n?n=1/0:(u=e-n,d=t-n,p=e+n,h=t+n,n*=n);s=m.pop();)if(!(!(b=s.node)||(o=s.x0)>p||(l=s.y0)>h||(r=s.x1)<u||(a=s.y1)<d))if(b.length){var f=(o+r)/2,y=(l+a)/2;m.push(new NM(b[3],f,y,r,a),new NM(b[2],o,y,f,a),new NM(b[1],f,l,r,y),new NM(b[0],o,l,f,y)),(c=(t>=y)<<1|e>=f)&&(s=m[m.length-1],m[m.length-1]=m[m.length-1-c],m[m.length-1-c]=s)}else{var g=e-+this._x.call(null,b.data),v=t-+this._y.call(null,b.data),Z=g*g+v*v;if(Z<n){var x=Math.sqrt(n=Z);u=e-x,d=t-x,p=e+x,h=t+x,i=b.data}}return i},jM.remove=function(e){if(isNaN(l=+this._x.call(null,e))||isNaN(r=+this._y.call(null,e)))return this;var t,n,i,o,l,r,a,s,c,u,d,p,h=this._root,m=this._x0,b=this._y0,f=this._x1,y=this._y1;if(!h)return this;if(h.length)for(;;){if((c=l>=(a=(m+f)/2))?m=a:f=a,(u=r>=(s=(b+y)/2))?b=s:y=s,t=h,!(h=h[d=u<<1|c]))return this;if(!h.length)break;(t[d+1&3]||t[d+2&3]||t[d+3&3])&&(n=t,p=d)}for(;h.data!==e;)if(i=h,!(h=h.next))return this;return(o=h.next)&&delete h.next,i?(o?i.next=o:delete i.next,this):t?(o?t[d]=o:delete t[d],(h=t[0]||t[1]||t[2]||t[3])&&h===(t[3]||t[2]||t[1]||t[0])&&!h.length&&(n?n[p]=h:this._root=h),this):(this._root=o,this)},jM.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},jM.root=function(){return this._root},jM.size=function(){var e=0;return this.visit((function(t){if(!t.length)do{++e}while(t=t.next)})),e},jM.visit=function(e){var t,n,i,o,l,r,a=[],s=this._root;for(s&&a.push(new NM(s,this._x0,this._y0,this._x1,this._y1));t=a.pop();)if(!e(s=t.node,i=t.x0,o=t.y0,l=t.x1,r=t.y1)&&s.length){var c=(i+l)/2,u=(o+r)/2;(n=s[3])&&a.push(new NM(n,c,u,l,r)),(n=s[2])&&a.push(new NM(n,i,u,c,r)),(n=s[1])&&a.push(new NM(n,c,o,l,u)),(n=s[0])&&a.push(new NM(n,i,o,c,u))}return this},jM.visitAfter=function(e){var t,n=[],i=[];for(this._root&&n.push(new NM(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var o=t.node;if(o.length){var l,r=t.x0,a=t.y0,s=t.x1,c=t.y1,u=(r+s)/2,d=(a+c)/2;(l=o[0])&&n.push(new NM(l,r,a,u,d)),(l=o[1])&&n.push(new NM(l,u,a,s,d)),(l=o[2])&&n.push(new NM(l,r,d,u,c)),(l=o[3])&&n.push(new NM(l,u,d,s,c))}i.push(t)}for(;t=i.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},jM.x=function(e){return arguments.length?(this._x=e,this):this._x},jM.y=function(e){return arguments.length?(this._y=e,this):this._y};const BM=1664525,QM=1013904223,DM=4294967296;function _M(e){return e.x}function qM(e){return e.y}var ez=10,tz=Math.PI*(3-Math.sqrt(5));function nz(e){var t,n=1,i=.001,o=1-Math.pow(i,1/300),l=0,r=.6,a=new Map,s=UH(d),c=sN("tick","end"),u=function(){let e=1;return()=>(e=(BM*e+QM)%DM)/DM}();function d(){p(),c.call("tick",t),n<i&&(s.stop(),c.call("end",t))}function p(i){var s,c,u=e.length;void 0===i&&(i=1);for(var d=0;d<i;++d)for(n+=(l-n)*o,a.forEach((function(e){e(n)})),s=0;s<u;++s)null==(c=e[s]).fx?c.x+=c.vx*=r:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=r:(c.y=c.fy,c.vy=0);return t}function h(){for(var t,n=0,i=e.length;n<i;++n){if((t=e[n]).index=n,null!=t.fx&&(t.x=t.fx),null!=t.fy&&(t.y=t.fy),isNaN(t.x)||isNaN(t.y)){var o=ez*Math.sqrt(.5+n),l=n*tz;t.x=o*Math.cos(l),t.y=o*Math.sin(l)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function m(t){return t.initialize&&t.initialize(e,u),t}return null==e&&(e=[]),h(),t={tick:p,restart:function(){return s.restart(d),t},stop:function(){return s.stop(),t},nodes:function(n){return arguments.length?(e=n,h(),a.forEach(m),t):e},alpha:function(e){return arguments.length?(n=+e,t):n},alphaMin:function(e){return arguments.length?(i=+e,t):i},alphaDecay:function(e){return arguments.length?(o=+e,t):+o},alphaTarget:function(e){return arguments.length?(l=+e,t):l},velocityDecay:function(e){return arguments.length?(r=1-e,t):1-r},randomSource:function(e){return arguments.length?(u=e,a.forEach(m),t):u},force:function(e,n){return arguments.length>1?(null==n?a.delete(e):a.set(e,m(n)),t):a.get(e)},find:function(t,n,i){var o,l,r,a,s,c=0,u=e.length;for(null==i?i=1/0:i*=i,c=0;c<u;++c)(r=(o=t-(a=e[c]).x)*o+(l=n-a.y)*l)<i&&(s=a,i=r);return s},on:function(e,n){return arguments.length>1?(c.on(e,n),t):c.on(e)}}}function iz(){var e,t,n,i,o,l=FM(-30),r=1,a=1/0,s=.81;function c(n){var o,l=e.length,r=MM(e,_M,qM).visitAfter(d);for(i=n,o=0;o<l;++o)t=e[o],r.visit(p)}function u(){if(e){var t,n,i=e.length;for(o=new Array(i),t=0;t<i;++t)n=e[t],o[n.index]=+l(n,t,e)}}function d(e){var t,n,i,l,r,a=0,s=0;if(e.length){for(i=l=r=0;r<4;++r)(t=e[r])&&(n=Math.abs(t.value))&&(a+=t.value,s+=n,i+=n*t.x,l+=n*t.y);e.x=i/s,e.y=l/s}else{(t=e).x=t.data.x,t.y=t.data.y;do{a+=o[t.data.index]}while(t=t.next)}e.value=a}function p(e,l,c,u){if(!e.value)return!0;var d=e.x-t.x,p=e.y-t.y,h=u-l,m=d*d+p*p;if(h*h/s<m)return m<a&&(0===d&&(m+=(d=OM(n))*d),0===p&&(m+=(p=OM(n))*p),m<r&&(m=Math.sqrt(r*m)),t.vx+=d*e.value*i/m,t.vy+=p*e.value*i/m),!0;if(!(e.length||m>=a)){(e.data!==t||e.next)&&(0===d&&(m+=(d=OM(n))*d),0===p&&(m+=(p=OM(n))*p),m<r&&(m=Math.sqrt(r*m)));do{e.data!==t&&(h=o[e.data.index]*i/m,t.vx+=d*h,t.vy+=p*h)}while(e=e.next)}}return c.initialize=function(t,i){e=t,n=i,u()},c.strength=function(e){return arguments.length?(l="function"==typeof e?e:FM(+e),u(),c):l},c.distanceMin=function(e){return arguments.length?(r=e*e,c):Math.sqrt(r)},c.distanceMax=function(e){return arguments.length?(a=e*e,c):Math.sqrt(a)},c.theta=function(e){return arguments.length?(s=e*e,c):Math.sqrt(s)},c}function oz(e){var t,n,i,o=FM(.1);function l(e){for(var o,l=0,r=t.length;l<r;++l)(o=t[l]).vx+=(i[l]-o.x)*n[l]*e}function r(){if(t){var l,r=t.length;for(n=new Array(r),i=new Array(r),l=0;l<r;++l)n[l]=isNaN(i[l]=+e(t[l],l,t))?0:+o(t[l],l,t)}}return"function"!=typeof e&&(e=FM(null==e?0:+e)),l.initialize=function(e){t=e,r()},l.strength=function(e){return arguments.length?(o="function"==typeof e?e:FM(+e),r(),l):o},l.x=function(t){return arguments.length?(e="function"==typeof t?t:FM(+t),r(),l):e},l}function lz(e){var t,n,i,o=FM(.1);function l(e){for(var o,l=0,r=t.length;l<r;++l)(o=t[l]).vy+=(i[l]-o.y)*n[l]*e}function r(){if(t){var l,r=t.length;for(n=new Array(r),i=new Array(r),l=0;l<r;++l)n[l]=isNaN(i[l]=+e(t[l],l,t))?0:+o(t[l],l,t)}}return"function"!=typeof e&&(e=FM(null==e?0:+e)),l.initialize=function(e){t=e,r()},l.strength=function(e){return arguments.length?(o="function"==typeof e?e:FM(+e),r(),l):o},l.y=function(t){return arguments.length?(e="function"==typeof t?t:FM(+t),r(),l):e},l}function rz(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}const az=Symbol("implicit");const sz=function(e){for(var t=e.length/6|0,n=new Array(t),i=0;i<t;)n[i]="#"+e.slice(6*i,6*++i);return n}("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");function cz(e,t,n){this.k=e,this.x=t,this.y=n}function uz(e){const{settings:t}=e,n=t.width/2,i=t.height/2,[o,l]=function(e,t,n){const{doc:{tableIds:i,relationshipIds:o},collections:l}=e,r=Dr(l).collection("tableEntities").selectByIds(i),a=Dr(l).collection("relationshipEntities").selectByIds(o),s=[],c=[],u=new Set;return r.forEach((i=>{const o=GZ(i,e).width,l=WZ(i);s.push({id:i.id,r:(o+l)/4,x:t,y:n,ref:i})})),a.forEach((e=>{const{start:t,end:n}=e,i=`${t.tableId}-${n.tableId}`;t.tableId!==n.tableId&&!u.has(i)&&(c.push({source:t.tableId,target:n.tableId}),u.add(i))})),[s,c]}(e,n,i);return nz(o).force("link",AM(l).id((e=>e.id))).force("collide",function(e){var t,n,i,o=1,l=1;function r(){for(var e,r,s,c,u,d,p,h=t.length,m=0;m<l;++m)for(r=MM(t,$M,EM).visitAfter(a),e=0;e<h;++e)s=t[e],d=n[s.index],p=d*d,c=s.x+s.vx,u=s.y+s.vy,r.visit(b);function b(e,t,n,l,r){var a=e.data,h=e.r,m=d+h;if(!a)return t>c+m||l<c-m||n>u+m||r<u-m;if(a.index>s.index){var b=c-a.x-a.vx,f=u-a.y-a.vy,y=b*b+f*f;y<m*m&&(0===b&&(y+=(b=OM(i))*b),0===f&&(y+=(f=OM(i))*f),y=(m-(y=Math.sqrt(y)))/y*o,s.vx+=(b*=y)*(m=(h*=h)/(p+h)),s.vy+=(f*=y)*m,a.vx-=b*(m=1-m),a.vy-=f*m)}}}function a(e){if(e.data)return e.r=n[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function s(){if(t){var i,o,l=t.length;for(n=new Array(l),i=0;i<l;++i)o=t[i],n[o.index]=+e(o,i,t)}}return"function"!=typeof e&&(e=FM(null==e?1:+e)),r.initialize=function(e,n){t=e,i=n,s()},r.iterations=function(e){return arguments.length?(l=+e,r):l},r.strength=function(e){return arguments.length?(o=+e,r):o},r.radius=function(t){return arguments.length?(e="function"==typeof t?t:FM(+t),s(),r):e},r}().radius((e=>100+e.r))).force("charge",iz()).force("x",oz(n)).force("y",lz(i)).on("tick",(()=>{o.forEach((({r:e,x:t,y:n,ref:i})=>{i.ui.x=t-e,i.ui.y=n-e})),oW(e)}))}cz.prototype={constructor:cz,scale:function(e){return 1===e?this:new cz(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new cz(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},cz.prototype;const dz=(e,t)=>{const n=tp(),i=tp(),o=e.app.value,l=bL({toWidth:o.toWidth}),{addUnsubscribe:r}=WL(),a=_s(t,fL,l),{store:{state:s}}=o,{store:c}=l,u=()=>({...o.store.state.editor.viewport});r(Qs(o.store.state.editor.viewport).subscribe((()=>{l.store.dispatch(Oy(u()))})),(()=>{a.destroy(),gL(l)}));const d=ir(hf,.7);var p;c.dispatchSync(fG(Ra(s)),Oy(u()),Av({value:(p=s.editor.viewport.width/s.settings.width,Hl(d(p),2))}),Qv({scrollLeft:-1*(s.settings.width/2-s.editor.viewport.width/2),scrollTop:-1*(s.settings.height/2-s.editor.viewport.height/2)}));const{doc:{tableIds:h},collections:m}=c.state,b=Dr(m).collection("tableEntities").selectByIds(h),[f,y]=tN();let g=!1;const v=()=>{g=!0,y(),o.store.dispatch(ag({[Bw]:!1}))};if(!b.length)return v(),o.emitter.emit(XR({message:Ch`<${Aw} description="Not found tables" />`})),()=>null;try{const t=uz(c.state),n=()=>{g||(t.stop(),e.onChange(b.map((e=>({id:e.id,x:e.ui.x,y:e.ui.y})))),v())},i=()=>{t.stop(),v()};o.emitter.emit(XR({close:f,message:Ch`
          <${Aw}
            description="Automatic Table Placement..."
            action=${Ch`
              <${Fw}
                variant="soft"
                size="1"
                text="Stop"
                .onClick=${n}
              />
              <${Fw} size="1" text="Cancel" .onClick=${i} />
            `}
          />
        `})),t.on("end",n),r(o.shortcut$.subscribe((({type:e})=>{e===nL.stop&&i()})))}catch{return v(),()=>null}return()=>Ch`
    <div class=${nN}>
      <div class=${iN} ${np(n)}>
        <${Ww} root=${n} canvas=${i} grabMove=${!0} />
        <${ww} />
      </div>
    </div>
  `},pz=1,hz=2;function mz({doc:{tableIds:e},collections:t}){const n=new Map;return Dr(t).collection("tableEntities").selectByIds(e).forEach((e=>{const i=new Map;n.set(e.name,{table:e,nameToColumnMap:i}),Dr(t).collection("tableColumnEntities").selectByIds(e.columnIds).forEach((e=>{i.set(e.name,e)}))})),n}function bz({doc:{tableIds:e},collections:t},n,i){const o=new Map;return Dr(t).collection("tableEntities").selectByIds(e).forEach((e=>{const l=n.get(e.name),r=new Map;o.set(e.id,["tableEntities",r]),r.set("tableName",fz(i,e.name,null==l?void 0:l.table.name)),r.set("tableComment",fz(i,e.comment,null==l?void 0:l.table.comment)),Dr(t).collection("tableColumnEntities").selectByIds(e.columnIds).forEach((e=>{const t=null==l?void 0:l.nameToColumnMap.get(e.name),n=new Map;o.set(e.id,["tableColumnEntities",n]),n.set("columnName",fz(i,e.name,null==t?void 0:t.name)),n.set("columnComment",fz(i,e.comment,null==t?void 0:t.comment)),n.set("columnDataType",fz(i,e.dataType,null==t?void 0:t.dataType)),n.set("columnDefault",fz(i,e.default,null==t?void 0:t.default)),n.set("columnAutoIncrement",t?fz(i,Zf(e.options,rf.autoIncrement),Zf(t.options,rf.autoIncrement)):i),n.set("columnPrimaryKey",t?fz(i,Zf(e.options,rf.primaryKey),Zf(t.options,rf.primaryKey)):i),n.set("columnUnique",t?fz(i,Zf(e.options,rf.unique),Zf(t.options,rf.unique)):i),n.set("columnNotNull",t?fz(i,Zf(e.options,rf.notNull),Zf(t.options,rf.notNull)):i)}))})),Array.from(o).forEach((([e,[t,n]])=>{Array.from(n).forEach((([e,t])=>{0===t&&n.delete(e)})),0===n.size&&o.delete(e)})),o}function fz(e,t,n){return t===n?0:e}function yz(e){const t=yL(e),n=Bs({selected:null});let i=0,o=0;const l=()=>{const{store:e}=t.value,{editor:{viewport:n},settings:{width:i}}=e.state;return n.width/i},r=()=>{const{store:e}=t.value,{editor:{viewport:n},settings:{height:i}}=e.state;return n.height/i},a=(e,t)=>e/t*-1,s=e=>{const{event:s}=e;"mousemove"===s.type&&s.preventDefault();const c="vertical"===n.selected,u="horizontal"===n.selected,d=(({movementX:e,x:n})=>{const{store:o}=t.value,{settings:r,editor:{viewport:s}}=o.state,c=r.scrollLeft+a(e,l()),u=s.width-r.width;let d=!1;switch(e<0?AI.left:AI.right){case AI.left:c<0&&n<i&&(i+=e,d=!0);break;case AI.right:c>u&&n>i&&(i+=e,d=!0)}return d?e:0})(e),p=(({movementY:e,y:n})=>{const{store:i}=t.value,{settings:l,editor:{viewport:s}}=i.state,c=l.scrollTop+a(e,r()),u=s.height-l.height;let d=!1;switch(e<0?AI.top:AI.bottom){case AI.top:c<0&&n<o&&(o+=e,d=!0);break;case AI.bottom:c>u&&n>o&&(o+=e,d=!0)}return d?e:0})(e),{store:h}=t.value;c&&0!==p?h.dispatch(Dv({movementX:0,movementY:a(p,r())})):u&&0!==d&&h.dispatch(Dv({movementX:a(d,l()),movementY:0}))};return{state:n,onScrollLeftStart:e=>{n.selected="horizontal",i=e.clientX,bY.subscribe({next:s,complete:()=>{n.selected=null}})},onScrollTopStart:e=>{n.selected="vertical",o=e.clientY,bY.subscribe({next:s,complete:()=>{n.selected=null}})},getWidthRatio:l,getHeightRatio:r}}const gz=Qh`
  position: absolute;
  top: 0;
  right: 0;
  width: 8px;
  height: calc(100% - 8px);
  overflow: hidden;
  padding-top: 4px;
`,vz=Qh`
  position: absolute;
  left: 0;
  bottom: 0;
  width: calc(100% - 8px);
  height: 8px;
  overflow: hidden;
  padding-left: 4px;
`,Zz=Qh`
  will-change: transform;
  cursor: pointer;

  &:hover > div {
    background-color: var(--scrollbar-thumb-hover);
  }

  &[data-selected] > div {
    background-color: var(--scrollbar-thumb-hover);
  }
`,xz=Qh`
  background-color: var(--scrollbar-thumb);
  border-radius: 4px;
`,Xz=Qh`
  width: 4px;
  height: 100%;
  ${xz};
`,Gz=Qh`
  width: 100%;
  height: 4px;
  ${xz};
`,Iz=(e,t)=>{const n=yL(t),{state:i,getWidthRatio:o,getHeightRatio:l,onScrollLeftStart:r,onScrollTopStart:a}=yz(t),s=tp(),c=tp(),u=e=>{const t=e.target;if(!t||t.closest(".virtual-scroll-ghost-thumb"))return;const{store:i}=n.value,{editor:{viewport:l},settings:a}=i.state,c=o(),u=s.value.getBoundingClientRect(),d=(e.clientX-u.x)/c-l.width/2;i.dispatch(Qv({scrollLeft:-1*d,scrollTop:a.scrollTop})),r(e)},d=e=>{const t=e.target;if(!t||t.closest(".virtual-scroll-ghost-thumb"))return;const{store:i}=n.value,{editor:{viewport:o}}=i.state,r=l(),s=c.value.getBoundingClientRect(),u=(e.clientY-s.y)/r-o.height/2;i.dispatch(Qv({scrollLeft:i.state.settings.scrollLeft,scrollTop:-1*u})),a(e)};return()=>{const{store:e}=n.value,{editor:{viewport:t},settings:{width:p,height:h,scrollLeft:m,scrollTop:b}}=e.state,f=o(),y=l(),g=t.width*f,v=t.height*y,Z=-1*m*f,x=-1*b*y,X=t.width<p,G=t.height<h;return Ch`
      ${X?Ch`
            <div
              class=${["virtual-scroll",vz]}
              ${np(s)}
              @mousedown=${u}
            >
              <div
                class=${["virtual-scroll-ghost-thumb",Zz]}
                style=${{width:`${g}px`,height:"100%",transform:`translate(${Z}px, 0px)`}}
                ?data-selected=${"horizontal"===i.selected}
                @mousedown=${r}
              >
                <div class=${Gz}></div>
              </div>
            </div>
          `:null}
      ${G?Ch`
            <div
              class=${["virtual-scroll",gz]}
              ${np(c)}
              @mousedown=${d}
            >
              <div
                class=${["virtual-scroll-ghost-thumb",Zz]}
                style=${{width:"100%",height:`${v}px`,transform:`translate(0px, ${x}px)`}}
                ?data-selected=${"vertical"===i.selected}
                @mousedown=${a}
              >
                <div class=${Xz}></div>
              </div>
            </div>
          `:null}
    `}},Wz=Qh`
  display: flex;
  width: 100%;
  height: 100%;
  overflow: hidden;
  position: relative;
`,kz=(e,t)=>{const n=tp(),i=tp(),o=e.app,l=_s(t,fL,o),r=Bs({grabCursor:"grab"}),{addUnsubscribe:a}=WL(),s=function(e,t){const n=document.createElement("style"),i=e===pz?".diff-viewer-insert":".diff-viewer-delete",o=Array.from(t).map((([e,[t,n]])=>{const o=`${i} [data-id="${e}"]`;return Array.from(n).map((([e,t])=>0!==t?`\n              ${o} [data-type="${e}"] {\n                background-color: ${t===pz?"var(--diff-insert-background)":"var(--diff-delete-background)"};\n              }\n            `:"")).join("\n")})).join("\n");return n.textContent=o,n}(e.diff,e.diffMap);a((()=>{l.destroy()}));const c=e=>{e.preventDefault();const t=hL(e),{store:n}=o;n.dispatch(t?jG(e.deltaY<0?.1:-.1):Dv({movementX:-1*e.deltaX,movementY:-1*e.deltaY}))},u=({event:e,movementX:t,movementY:i})=>{const{store:l}=o;"mousemove"===e.type&&e.preventDefault(),(0!==t||0!==i)&&(l.dispatch(Dv({movementX:t,movementY:i})),0===n.value.scrollTop&&0===n.value.scrollLeft||(n.value.scrollTop=0,n.value.scrollLeft=0))},d=e=>{const t=e.target;if(!t)return;const n=!t.closest(".color-picker"),i=!t.closest(".table")&&!t.closest(".memo")&&!t.closest(".edit-input")&&!t.closest(".context-menu-content")&&!t.closest(".hide-sign")&&n,l=i&&n&&!t.closest(".minimap")&&!t.closest(".minimap-viewport")&&!t.closest(".virtual-scroll");if(i){const{store:e}=o;e.dispatch(ZG())}if(n){const{emitter:e}=o;e.emit(xR())}l&&(r.grabCursor="grabbing",bY.subscribe({next:u,complete:()=>{r.grabCursor="grab"}}))};return()=>Ch`
    <div
      class=${[Wz,e.diff===pz?"diff-viewer-insert":"diff-viewer-delete"]}
      style=${{cursor:r.grabCursor}}
      ${np(n)}
      @contextmenu=${UL}
      @mousedown=${d}
      @touchstart=${d}
      @wheel=${c}
    >
      ${s}
      <${Ww} root=${n} canvas=${i} grabMove=${!0} />
      <${Iz} />
      <${ww} />
    </div>
  `};function Vz(e,t,n){const i=[];return e.forEach(((o,l)=>{t?n?i.push(`${t}${o.name}${n}`):i.push(`${t}${o.name}${t}`):i.push(o.name),e.length!==l+1&&i.push(", ")})),i.join("")}function Cz(e){let t=0,n=0;return e.forEach((e=>{t<e.name.length&&(t=e.name.length),n<e.dataType.length&&(n=e.dataType.length)})),{name:t,dataType:n}}function Sz(e){const t=[];for(let n=0;n<e;n++)t.push(" ");return t.join("")}function Rz(e){return e.some((({options:e})=>Zf(e,rf.primaryKey)))}function Lz(e){return e.filter((({options:e})=>Zf(e,rf.primaryKey)))}function Yz(e){return e.some((({options:e})=>Zf(e,rf.unique)))}function Tz(e){return e.filter((({options:e})=>Zf(e,rf.unique)))}function wz(e){return mf[e]??""}function Nz(e,t){const n=e.name.toLowerCase(),i=t.name.toLowerCase();return n<i?-1:n>i?1:0}function Kz(e,t,n,i=1){let o=!0;for(const i of e)if(n===i.name&&i.id!==t&&""!==n){o=!1;break}return o?n:Kz(e,t,n.replace(/[0-9]/g,"")+i,i+1)}function Hz(e){switch(e){case sf.ASC:return"ASC";case sf.DESC:return"DESC";default:return""}}const Mz=Qh`
  display: flex;
  flex-direction: column;
  width: ${200}px;
  min-width: ${200}px;
  height: 100%;
  overflow-x: hidden;
  overflow-y: auto;
  background-color: var(--context-menu-background);
  padding: 14px 0;
`,zz=Qh`
  display: flex;
  align-items: center;
  cursor: pointer;

  &:hover {
    background-color: var(--context-menu-hover);
    color: var(--active);
    fill: var(--active);
  }
`,Jz=Qh`
  display: flex;
  align-items: center;
  min-width: 14px;
  margin-right: 8px;

  &.diff-insert {
    fill: var(--diff-insert-foreground);
  }

  &.diff-delete {
    fill: var(--diff-delete-foreground);
  }

  &.diff-cross {
    fill: var(--diff-cross-foreground);
  }
`,jz=Qh`
  ${zz};
  height: 36px;
  min-height: 36px;
  padding: 0 12px;
`,Fz=Qh`
  ${zz};
  height: 24px;
  min-height: 24px;
  padding: 0 12px 0 24px;
`,Oz=Qh`
  width: 100%;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
`,$z=(e,t)=>{const{prevApp:n,prevDiffMap:i,app:o,diffMap:l}=e,r=mz(n.store.state),a=mz(o.store.state),s=Dr(n.store.state.collections).collection("tableEntities"),c=Dr(n.store.state.collections).collection("tableColumnEntities"),u=Dr(o.store.state.collections).collection("tableEntities"),d=Dr(o.store.state.collections).collection("tableColumnEntities"),p=[],h=[],m=[],b=[];Array.from(i).forEach((([e,[t,n]])=>{"tableEntities"===t?p.push(e):m.push(e)})),Array.from(l).forEach((([e,[t,n]])=>{"tableEntities"===t?h.push(e):b.push(e)}));const f=jl(p),y=jl(h),g=jl(m),v=jl(b);c.selectByIds(m).forEach((e=>{f(e.tableId)||p.push(e.tableId)})),d.selectByIds(b).forEach((e=>{y(e.tableId)||h.push(e.tableId)}));const Z=s.selectByIds(p),x=u.selectByIds(h),X=[];Z.forEach((e=>{const t=i.get(e.id),n=r.get(e.name),o=a.get(e.name),l={diff:0,prevId:e.id,id:null==o?void 0:o.table.id,name:e.name,columns:[]};X.push(l),t&&(l.diff|=hz,o&&(l.diff|=pz)),c.selectByIds(e.columnIds.filter(g)).forEach((e=>{const t=null==o?void 0:o.nameToColumnMap.get(e.name),n={diff:hz,prevId:e.id,id:null==t?void 0:t.id,name:e.name};l.columns.push(n),t&&(n.diff|=pz)})),o&&d.selectByIds(o.table.columnIds.filter(v)).forEach((e=>{if(null==n?void 0:n.nameToColumnMap.get(e.name))return;const t={diff:pz,id:e.id,name:e.name};l.columns.push(t)}))})),x.forEach((e=>{if(r.get(e.name))return;const t={diff:pz,id:e.id,name:e.name,columns:[]};X.push(t),d.selectByIds(e.columnIds.filter(v)).forEach((e=>{const n={diff:pz,id:e.id,name:e.name};t.columns.push(n)}))})),X.sort(Nz);const G=({store:e},t)=>{const{settings:{width:n,height:i,zoomLevel:o},collections:l}=e.state,r=Dr(l).collection("tableEntities").selectById(t);if(!r)return;const{x:a,y:s}=Gf({x:r.ui.x-Wf,y:r.ui.y-kf},n,i,o);e.dispatch(Qv({scrollLeft:-1*a,scrollTop:-1*s}),Vx(r.id,!1))},I=e=>{e.prevId&&G(n,e.prevId),e.id&&G(o,e.id)};return()=>Ch`
    <div class=${Mz}>
      ${X.map((e=>{const t=e.name.trim()?e.name:"unnamed",n=Zf(e.diff,pz),i=Zf(e.diff,hz);return Ch`
          <div class=${jz} @click=${()=>I(e)}>
            <div class=${[Jz,{"diff-cross":n&&i,"diff-insert":n&&!i,"diff-delete":!n&&i}]}>
              ${n&&i?Ch`<${JY} prefix="mdi" name="plus-minus" size=${14} />`:n?Ch`<${JY} prefix="mdi" name="plus" size=${14} />`:i?Ch`<${JY} prefix="mdi" name="minus" size=${14} />`:Ch`<${JY} name="table" size=${14} />`}
            </div>
            <span class=${Oz}>${t}</span>
          </div>
          ${e.columns.map((t=>{const n=t.name.trim()?t.name:"unnamed",i=Zf(t.diff,pz),o=Zf(t.diff,hz);return Ch`
              <div class=${Fz} @click=${()=>I(e)}>
                <div class=${[Jz,{"diff-cross":i&&o,"diff-insert":i&&!o,"diff-delete":!i&&o}]}>
                  ${i&&o?Ch`<${JY}
                        prefix="mdi"
                        name="plus-minus"
                        size=${14}
                      />`:i?Ch`<${JY} prefix="mdi" name="plus" size=${14} />`:o?Ch`<${JY} prefix="mdi" name="minus" size=${14} />`:null}
                </div>
                <span class=${Oz}>${n}</span>
              </div>
            `}))}
        `}))}
    </div>
  `},Ez=Qh`
  display: flex;
  width: 100%;
  height: 100%;
  overflow: hidden;
  position: absolute;
  top: 0;
  left: 0;
  background-color: var(--canvas-boundary-background);
`,Uz=Qh`
  display: flex;
  width: 100%;
  height: 100%;
  overflow: hidden;
  position: relative;
`,Pz=Qh`
  display: flex;
  width: 50%;
  height: 100%;
  overflow: hidden;
  border-left: 1px solid var(--context-menu-border);
`,Az=(e,t)=>{const n=e.app.value,i=()=>!0,o=bL({toWidth:n.toWidth},{getReadonly:i}),l=bL({toWidth:n.toWidth},{getReadonly:i}),{addUnsubscribe:r}=WL(),a=()=>{const{store:e}=n,{editor:{viewport:t}}=e.state;return{width:(t.width-200)/2-1,height:t.height}};o.store.dispatchSync(fG(e.initialValue),Oy(a())),l.store.dispatchSync(fG(Ra(n.store.state)),Oy(a()));const[s,c]=function(e,t){const n=mz(e);return[bz(e,mz(t),hz),bz(t,n,pz)]}(o.store.state,l.store.state),[u,d]=tN(),p=()=>{d(),e.onClose()};return n.emitter.emit(XR({close:u,message:Ch`
        <${Aw}
          description="Diff Viewer..."
          action=${Ch`
            <${Fw} size="1" text="Close" .onClick=${p} />
          `}
        />
      `})),Ts((()=>{r(n.shortcut$.subscribe((({type:e})=>{e===nL.stop&&p()})),Qs(n.store.state.editor.viewport).subscribe((()=>{const e=a();o.store.dispatch(Oy(e)),l.store.dispatch(Oy(e))})),(()=>{gL(o),gL(l)}))})),()=>Ch`
    <div class=${Ez}>
      <div class=${Uz}>
        <${$z}
          prevApp=${o}
          prevDiffMap=${s}
          app=${l}
          diffMap=${c}
        />
        <div class=${Pz}>
          <${kz}
            app=${o}
            diff=${hz}
            diffMap=${s}
          />
        </div>
        <div class=${Pz}>
          <${kz} app=${l} diff=${pz} diffMap=${c} />
        </div>
      </div>
    </div>
  `},Bz=Qh`
  position: absolute;
  stroke: var(--darg-select-border);
  fill: var(--darg-select-background);
  pointer-events: none;
`,Qz=(e,t)=>{const n=yL(t),i=Bs({width:0,height:0,top:0,left:0}),{addUnsubscribe:o}=WL();return Ys((()=>{const{store:t}=n.value,l=e.root.value;o(oY.subscribe(e.onDragSelectEnd),US(l,"mousemove").subscribe((n=>{n.preventDefault();const{settings:{width:o,height:r,zoomLevel:a,scrollLeft:s,scrollTop:c}}=t.state,u=l.getBoundingClientRect(),d=n.clientX-u.x,p=n.clientY-u.y,h={x:e.x<d?e.x:d,y:e.y<p?e.y:p},m={x:e.x>d?e.x:d,y:e.y>p?e.y:p};i.left=h.x,i.width=m.x-h.x,i.width<0&&(i.width=0),i.top=h.y,i.height=m.y-h.y,i.height<0&&(i.height=0);const b=Object.assign({},h),f=Object.assign({},m);b.x-=s,b.y-=c,f.x-=s,f.y-=c;const y=If(b,o,r,a),g=If(f,o,r,a);t.dispatch(vG({...y,w:g.x-y.x,h:g.y-y.y}))})))})),()=>Sh`
    <svg
      class=${Bz}
      style=${{top:`${i.top}px`,left:`${i.left}px`,width:`${i.width}px`,height:`${i.height}px`}}
    >
      <rect
        width=${i.width}
        height=${i.height}
        stroke-width="1"
        stroke-opacity="1"
        stroke-dasharray="3"
        fill-opacity="0.3"
      >
      </rect>
    </svg>
  `},Dz=Qh`
  position: fixed;
  display: flex;
  flex-direction: column;
  border-radius: 6px;
  min-width: max-content;
  padding: 8px;
  background-color: var(--context-menu-background);
  border: 1px solid var(--context-menu-border);
`,_z=(e,t)=>()=>Ch`
    <div
      class=${["context-menu-content",Dz]}
      style=${{left:`${e.x}px`,top:`${e.y}px`}}
      data-id=${e.id}
    >
      ${e.children}
    </div>
  `,qz=La({show:!1,x:0,y:0,change$:new Hm}),eJ=e=>Ds(e,qz);function tJ(e){const t=Bs({show:!1,x:0,y:0,change$:new Hm});return{provider:_s(e,qz,t),state:t,onContextmenu:e=>{e.preventDefault(),t.x=e.clientX,t.y=e.clientY,t.show=!1,rs((()=>{t.show=!0}))},onMousedown:e=>{const n=e.target;n&&(n.closest(".context-menu-content")||(t.show=!1))}}}const nJ=Qh`
  display: flex;
  align-items: center;
  padding: 0 12px;
  height: 32px;
  cursor: default;
  border-radius: 4px;

  &:hover {
    background-color: var(--context-menu-hover);
    color: var(--active);
    fill: var(--active);
  }

  &.selected {
    background-color: var(--context-menu-select);
  }
`,iJ=Qh`
  display: flex;
  align-items: center;
  width: 100%;
`,oJ=Qh`
  display: flex;
  align-items: center;
  min-width: 14px;
  margin-right: 8px;
`,lJ=Qh`
  display: flex;
  align-items: center;
  margin-left: auto;
  padding-left: 24px;
`,rJ=(e,t)=>()=>Ch`
  <div class=${iJ}>
    <div class=${oJ}>${e.icon}</div>
    <div>${e.name}</div>
    ${e.right?Ch`<div class=${lJ}>${e.right}</div>`:null}
  </div>
`,aJ=(e,t)=>{const n=eJ(t);return()=>n.value.show?Ch`
          <${_z}
            id="root"
            x=${n.value.x}
            y=${n.value.y}
            children=${e.children}
          />
        `:null},sJ=(e,t)=>{const n=eJ(t),i=nr(),o=tp(),l=Bs({selected:!1,show:!1,x:0,y:0}),{addUnsubscribe:r}=WL(),a=()=>{var e;const{width:t,x:r,y:a}=o.value.getBoundingClientRect();l.x=t+r,l.y=a-8,l.show=!0;const s=null==(e=o.value.parentElement)?void 0:e.dataset.id;s&&n.value.change$.next({parentId:s,id:i})};return Ts((()=>{e.subChildren&&r(n.value.change$.subscribe((e=>{var t;(null==(t=o.value.parentElement)?void 0:t.dataset.id)===e.parentId&&i!==e.id&&(l.show=!1),l.selected=i===e.parentId})))})),()=>Ch`
    <div
      ${np(o)}
      class=${[nJ,{selected:l.selected}]}
      data-id=${i}
      @mouseenter=${a}
      @click=${e.onClick}
    >
      ${e.children}
    </div>
    ${e.subChildren&&l.show?Ch`
          <${_z}
            id=${i}
            x=${l.x}
            y=${l.y}
            children=${e.subChildren}
          />
        `:null}
  `},cJ=rJ,uJ=/\.(json|erd|vuerd)$/i,dJ=/\.sql$/i;let pJ=null;function hJ(e){pJ=e}function mJ({store:e,emitter:t}){if(pJ)return void pJ({type:"json",op:"set",accept:".json,.erd,.vuerd"});const n=document.createElement("input");n.setAttribute("type","file"),n.setAttribute("accept",".json,.erd,.vuerd"),n.addEventListener("change",(()=>{var i;const o=null==(i=n.files)?void 0:i[0];if(!o)return;if(!uJ.test(o.name))return void t.emit(XR({message:Ch`<${Aw} description="Just import the json file" />`}));const l=new FileReader;l.readAsText(o),l.onload=()=>{const t=l.result;Bl(t)&&e.dispatch(bG(t))}})),n.click()}function bJ({store:e,emitter:t}){if(pJ)return void pJ({type:"sql",op:"set",accept:".sql"});const n=document.createElement("input");n.setAttribute("type","file"),n.setAttribute("accept",".sql"),n.addEventListener("change",(()=>{var i;const o=null==(i=n.files)?void 0:i[0];if(!o)return;if(!dJ.test(o.name))return void t.emit(XR({message:Ch`<${Aw} description="Just import the sql file" />`}));const l=new FileReader;l.readAsText(o),l.onload=()=>{const t=l.result;Bl(t)&&e.dispatch(WG(t))}})),n.click()}const fJ=[{name:"MSSQL",value:Ab.MSSQL},{name:"MariaDB",value:Ab.MariaDB},{name:"MySQL",value:Ab.MySQL},{name:"Oracle",value:Ab.Oracle},{name:"PostgreSQL",value:Ab.PostgreSQL},{name:"SQLite",value:Ab.SQLite}];function yJ({store:e}){const{settings:t}=e.state;return fJ.map((n=>({checked:n.value===t.database,name:n.name,onClick:()=>{e.dispatch(qv({value:n.value}))}})))}const gJ=[{iconName:"ZeroOne",name:"Zero One",keyBindingName:nL.relationshipZeroOne,relationshipType:nf.ZeroOne},{iconName:"ZeroN",name:"Zero N",keyBindingName:nL.relationshipZeroN,relationshipType:nf.ZeroN},{iconName:"OneOnly",name:"One Only",keyBindingName:nL.relationshipOneOnly,relationshipType:nf.OneOnly},{iconName:"OneN",name:"One N",keyBindingName:nL.relationshipOneN,relationshipType:nf.OneN}];const vJ=(()=>{let e=0;return()=>(e+=1,`u${`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4)}${e}`)})();function ZJ(e){const t=[];for(let n=0,i=e.length;n<i;n++)t.push(e[n]);return t}function xJ(e,t){const n=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return n?parseFloat(n.replace("px","")):0}function XJ(e,t={}){const n=t.width||function(e){const t=xJ(e,"border-left-width"),n=xJ(e,"border-right-width");return e.clientWidth+t+n}(e),i=t.height||function(e){const t=xJ(e,"border-top-width"),n=xJ(e,"border-bottom-width");return e.clientHeight+t+n}(e);return{width:n,height:i}}const GJ=16384;function IJ(e){return new Promise(((t,n)=>{const i=new Image;i.decode=()=>t(i),i.onload=()=>t(i),i.onerror=n,i.crossOrigin="anonymous",i.decoding="async",i.src=e}))}async function WJ(e,t,n){const i="http://www.w3.org/2000/svg",o=document.createElementNS(i,"svg"),l=document.createElementNS(i,"foreignObject");return o.setAttribute("width",`${t}`),o.setAttribute("height",`${n}`),o.setAttribute("viewBox",`0 0 ${t} ${n}`),l.setAttribute("width","100%"),l.setAttribute("height","100%"),l.setAttribute("x","0"),l.setAttribute("y","0"),l.setAttribute("externalResourcesRequired","true"),o.appendChild(l),l.appendChild(e),async function(e){return Promise.resolve().then((()=>(new XMLSerializer).serializeToString(e))).then(encodeURIComponent).then((e=>`data:image/svg+xml;charset=utf-8,${e}`))}(o)}const kJ=(e,t)=>{if(e instanceof t)return!0;const n=Object.getPrototypeOf(e);return null!==n&&(n.constructor.name===t.name||kJ(n,t))};function VJ(e,t,n){const i=`.${e}:${t}`,o=n.cssText?function(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}(n):function(e){return ZJ(e).map((t=>`${t}: ${e.getPropertyValue(t)}${e.getPropertyPriority(t)?" !important":""};`)).join(" ")}(n);return document.createTextNode(`${i}{${o}}`)}function CJ(e,t,n){const i=window.getComputedStyle(e,n),o=i.getPropertyValue("content");if(""===o||"none"===o)return;const l=vJ();try{t.className=`${t.className} ${l}`}catch{return}const r=document.createElement("style");r.appendChild(VJ(l,n,i)),t.appendChild(r)}const SJ="application/font-woff",RJ="image/jpeg",LJ={woff:SJ,woff2:SJ,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:RJ,jpeg:RJ,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function YJ(e){const t=function(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}(e).toLowerCase();return LJ[t]||""}function TJ(e){return-1!==e.search(/^(data:)/)}function wJ(e,t){return`data:${t};base64,${e}`}async function NJ(e,t,n){const i=await fetch(e,t);if(404===i.status)throw new Error(`Resource "${i.url}" not found`);const o=await i.blob();return new Promise(((e,t)=>{const l=new FileReader;l.onerror=t,l.onloadend=()=>{try{e(n({res:i,result:l.result}))}catch(e){t(e)}},l.readAsDataURL(o)}))}const KJ={};async function HJ(e,t,n){const i=function(e,t,n){let i=e.replace(/\?.*/,"");return n&&(i=e),/ttf|otf|eot|woff2?/i.test(i)&&(i=i.replace(/.*\//,"")),t?`[${t}]${i}`:i}(e,t,n.includeQueryParams);if(null!=KJ[i])return KJ[i];let o;n.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+(new Date).getTime());try{const i=await NJ(e,n.fetchRequestInit,(({res:e,result:n})=>(t||(t=e.headers.get("Content-Type")||""),function(e){return e.split(/,/)[1]}(n))));o=wJ(i,t)}catch(t){o=n.imagePlaceholder||"";let i=`Failed to fetch resource: ${e}`;t&&(i="string"==typeof t?t:t.message),i&&console.warn(i)}return KJ[i]=o,o}async function MJ(e,t){return kJ(e,HTMLCanvasElement)?async function(e){const t=e.toDataURL();return"data:,"===t?e.cloneNode(!1):IJ(t)}(e):kJ(e,HTMLVideoElement)?async function(e,t){if(e.currentSrc){const t=document.createElement("canvas"),n=t.getContext("2d");return t.width=e.clientWidth,t.height=e.clientHeight,null==n||n.drawImage(e,0,0,t.width,t.height),IJ(t.toDataURL())}const n=e.poster,i=YJ(n);return IJ(await HJ(n,i,t))}(e,t):kJ(e,HTMLIFrameElement)?async function(e){var t;try{if(null!==(t=null==e?void 0:e.contentDocument)&&void 0!==t&&t.body)return await jJ(e.contentDocument.body,{},!0)}catch{}return e.cloneNode(!1)}(e):e.cloneNode(!1)}const zJ=e=>null!=e.tagName&&"SLOT"===e.tagName.toUpperCase();function JJ(e,t){return kJ(t,Element)&&(function(e,t){const n=t.style;if(!n)return;const i=window.getComputedStyle(e);i.cssText?(n.cssText=i.cssText,n.transformOrigin=i.transformOrigin):ZJ(i).forEach((o=>{let l=i.getPropertyValue(o);"font-size"===o&&l.endsWith("px")&&(l=Math.floor(parseFloat(l.substring(0,l.length-2)))-.1+"px"),kJ(e,HTMLIFrameElement)&&"display"===o&&"inline"===l&&(l="block"),"d"===o&&t.getAttribute("d")&&(l=`path(${t.getAttribute("d")})`),n.setProperty(o,l,i.getPropertyPriority(o))}))}(e,t),function(e,t){CJ(e,t,":before"),CJ(e,t,":after")}(e,t),function(e,t){kJ(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),kJ(e,HTMLInputElement)&&t.setAttribute("value",e.value)}(e,t),function(e,t){if(kJ(e,HTMLSelectElement)){const n=t,i=Array.from(n.children).find((t=>e.value===t.getAttribute("value")));i&&i.setAttribute("selected","")}}(e,t)),t}async function jJ(e,t,n){return n||!t.filter||t.filter(e)?Promise.resolve(e).then((e=>MJ(e,t))).then((n=>async function(e,t,n){var i,o;let l=[];return l=zJ(e)&&e.assignedNodes?ZJ(e.assignedNodes()):kJ(e,HTMLIFrameElement)&&null!==(i=e.contentDocument)&&void 0!==i&&i.body?ZJ(e.contentDocument.body.childNodes):ZJ((null!==(o=e.shadowRoot)&&void 0!==o?o:e).childNodes),0===l.length||kJ(e,HTMLVideoElement)||await l.reduce(((e,i)=>e.then((()=>jJ(i,n))).then((e=>{e&&t.appendChild(e)}))),Promise.resolve()),t}(e,n,t))).then((t=>JJ(e,t))).then((e=>async function(e,t){const n=e.querySelectorAll?e.querySelectorAll("use"):[];if(0===n.length)return e;const i={};for(let o=0;o<n.length;o++){const l=n[o].getAttribute("xlink:href");if(l){const n=e.querySelector(l),o=document.querySelector(l);!n&&o&&!i[l]&&(i[l]=await jJ(o,t,!0))}}const o=Object.values(i);if(o.length){const t="http://www.w3.org/1999/xhtml",n=document.createElementNS(t,"svg");n.setAttribute("xmlns",t),n.style.position="absolute",n.style.width="0",n.style.height="0",n.style.overflow="hidden",n.style.display="none";const i=document.createElementNS(t,"defs");n.appendChild(i);for(let e=0;e<o.length;e++)i.appendChild(o[e]);e.appendChild(n)}return e}(e,t))):null}const FJ=/url\((['"]?)([^'"]+?)\1\)/g,OJ=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,$J=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;async function EJ(e,t,n,i,o){try{const l=n?function(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const n=document.implementation.createHTMLDocument(),i=n.createElement("base"),o=n.createElement("a");return n.head.appendChild(i),n.body.appendChild(o),t&&(i.href=t),o.href=e,o.href}(t,n):t,r=YJ(t);let a;if(o){a=wJ(await o(l),r)}else a=await HJ(l,r,i);return e.replace(function(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}(t),`$1${a}$3`)}catch{}return e}function UJ(e){return-1!==e.search(FJ)}async function PJ(e,t,n){if(!UJ(e))return e;const i=function(e,{preferredFontFormat:t}){return t?e.replace($J,(e=>{for(;;){const[n,,i]=OJ.exec(e)||[];if(!i)return"";if(i===t)return`src: ${n};`}})):e}(e,n);return function(e){const t=[];return e.replace(FJ,((e,n,i)=>(t.push(i),e))),t.filter((e=>!TJ(e)))}(i).reduce(((e,i)=>e.then((e=>EJ(e,i,t,n)))),Promise.resolve(i))}async function AJ(e,t,n){var i;const o=null===(i=t.style)||void 0===i?void 0:i.getPropertyValue(e);if(o){const i=await PJ(o,null,n);return t.style.setProperty(e,i,t.style.getPropertyPriority(e)),!0}return!1}async function BJ(e,t){kJ(e,Element)&&(await async function(e,t){await AJ("background",e,t)||await AJ("background-image",e,t),await AJ("mask",e,t)||await AJ("mask-image",e,t)}(e,t),await async function(e,t){const n=kJ(e,HTMLImageElement);if((!n||TJ(e.src))&&(!kJ(e,SVGImageElement)||TJ(e.href.baseVal)))return;const i=n?e.src:e.href.baseVal,o=await HJ(i,YJ(i),t);await new Promise(((t,i)=>{e.onload=t,e.onerror=i;const l=e;l.decode&&(l.decode=t),"lazy"===l.loading&&(l.loading="eager"),n?(e.srcset="",e.src=o):e.href.baseVal=o}))}(e,t),await async function(e,t){const n=ZJ(e.childNodes).map((e=>BJ(e,t)));await Promise.all(n).then((()=>e))}(e,t))}const QJ={};async function DJ(e){let t=QJ[e];if(null!=t)return t;return t={url:e,cssText:await(await fetch(e)).text()},QJ[e]=t,t}async function _J(e,t){let n=e.cssText;const i=/url\(["']?([^"')]+)["']?\)/g,o=(n.match(/url\([^)]+\)/g)||[]).map((async o=>{let l=o.replace(i,"$1");return l.startsWith("https://")||(l=new URL(l,e.url).href),NJ(l,t.fetchRequestInit,(({result:e})=>(n=n.replace(o,`url(${e})`),[o,e])))}));return Promise.all(o).then((()=>n))}function qJ(e){if(null==e)return[];const t=[];let n=e.replace(/(\/\*[\s\S]*?\*\/)/gi,"");const i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const e=i.exec(n);if(null===e)break;t.push(e[0])}n=n.replace(i,"");const o=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,l=new RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");for(;;){let e=o.exec(n);if(null===e){if(e=l.exec(n),null===e)break;o.lastIndex=l.lastIndex}else l.lastIndex=o.lastIndex;t.push(e[0])}return t}async function ej(e,t){if(null==e.ownerDocument)throw new Error("Provided element is not within a Document");const n=ZJ(e.ownerDocument.styleSheets),i=await async function(e,t){const n=[],i=[];return e.forEach((n=>{if("cssRules"in n)try{ZJ(n.cssRules||[]).forEach(((e,o)=>{if(e.type===CSSRule.IMPORT_RULE){let l=o+1;const r=DJ(e.href).then((e=>_J(e,t))).then((e=>qJ(e).forEach((e=>{try{n.insertRule(e,e.startsWith("@import")?l+=1:n.cssRules.length)}catch(t){console.error("Error inserting rule from remote css",{rule:e,error:t})}})))).catch((e=>{console.error("Error loading remote css",e.toString())}));i.push(r)}}))}catch(o){const l=e.find((e=>null==e.href))||document.styleSheets[0];null!=n.href&&i.push(DJ(n.href).then((e=>_J(e,t))).then((e=>qJ(e).forEach((e=>{l.insertRule(e,n.cssRules.length)})))).catch((e=>{console.error("Error loading remote stylesheet",e)}))),console.error("Error inlining remote css file",o)}})),Promise.all(i).then((()=>(e.forEach((e=>{if("cssRules"in e)try{ZJ(e.cssRules||[]).forEach((e=>{n.push(e)}))}catch(t){console.error(`Error while reading CSS rules from ${e.href}`,t)}})),n)))}(n,t);return function(e){return e.filter((e=>e.type===CSSRule.FONT_FACE_RULE)).filter((e=>UJ(e.style.getPropertyValue("src"))))}(i)}async function tj(e,t){const n=null!=t.fontEmbedCSS?t.fontEmbedCSS:t.skipFonts?null:await async function(e,t){const n=await ej(e,t);return(await Promise.all(n.map((e=>{const n=e.parentStyleSheet?e.parentStyleSheet.href:null;return PJ(e.cssText,n,t)})))).join("\n")}(e,t);if(n){const t=document.createElement("style"),i=document.createTextNode(n);t.appendChild(i),e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}}async function nj(e,t={}){const{width:n,height:i}=XJ(e,t),o=await jJ(e,t,!0);return await tj(o,t),await BJ(o,t),function(e,t){const{style:n}=e;t.backgroundColor&&(n.backgroundColor=t.backgroundColor),t.width&&(n.width=`${t.width}px`),t.height&&(n.height=`${t.height}px`);const i=t.style;null!=i&&Object.keys(i).forEach((e=>{n[e]=i[e]}))}(o,t),await WJ(o,n,i)}async function ij(e,t={}){const{width:n,height:i}=XJ(e,t),o=await nj(e,t),l=await IJ(o),r=document.createElement("canvas"),a=r.getContext("2d"),s=t.pixelRatio||function(){let e,t;try{t=I}catch{}const n=t&&t.env?t.env.devicePixelRatio:null;return n&&(e=parseInt(n,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}(),c=t.canvasWidth||n,u=t.canvasHeight||i;return r.width=c*s,r.height=u*s,t.skipAutoScale||function(e){(e.width>GJ||e.height>GJ)&&(e.width>GJ&&e.height>GJ?e.width>e.height?(e.height*=GJ/e.width,e.width=GJ):(e.width*=GJ/e.height,e.height=GJ):e.width>GJ?(e.height*=GJ/e.width,e.width=GJ):(e.width*=GJ/e.height,e.height=GJ))}(r),r.style.width=`${c}`,r.style.height=`${u}`,t.backgroundColor&&(a.fillStyle=t.backgroundColor,a.fillRect(0,0,r.width,r.height)),a.drawImage(l,0,0,r.width,r.height),r}async function oj(e,t={}){const n=await ij(e,t);return await function(e,t={}){return e.toBlob?new Promise((n=>{e.toBlob(n,t.type?t.type:"image/png",t.quality?t.quality:1)})):new Promise((n=>{const i=window.atob(e.toDataURL(t.type?t.type:void 0,t.quality?t.quality:void 0).split(",")[1]),o=i.length,l=new Uint8Array(o);for(let e=0;e<o;e+=1)l[e]=i.charCodeAt(e);n(new Blob([l],{type:t.type?t.type:"image/png"}))}))}(n)}let lj=null;function rj(e){lj=e}function aj(e,t){(lj||sj)(e,t)}function sj(e,t){const n=document.createElement("a");n.href=URL.createObjectURL(e),n.download=t.fileName,n.click()}function cj(e,t){const n=XS.now().toFormat("yyyy-MM-dd'T'HH_mm_ss");return null!=t&&t.trim()?`${t}-${n}${e}`:`unnamed-${n}${e}`}function uj(e,t){aj(new Blob([e],{type:"application/json"}),{fileName:cj(".erd.json",t)})}function dj(e,t){aj(new Blob([e]),{fileName:cj(".sql",t)})}function pj(e,{buffer:t,table:n}){const{settings:{bracketType:i},collections:o}=e,l=wz(i),r=Dr(o).collection("tableColumnEntities").selectByIds(n.columnIds);t.push(`CREATE TABLE ${l}${n.name}${l}`),t.push("(");const a=Rz(r),s=Cz(r);if(r.forEach(((n,i)=>{hj(e,a?{column:n,isComma:!0,spaceSize:s,buffer:t}:{column:n,isComma:r.length!==i+1,spaceSize:s,buffer:t})})),a){const e=Lz(r);t.push(`  PRIMARY KEY (${Vz(e,l)})`)}""===n.comment.trim()?t.push(");"):t.push(`) COMMENT '${n.comment}';`)}function hj({settings:{bracketType:e}},{buffer:t,column:n,isComma:i,spaceSize:o}){const l=wz(e),r=[];r.push(`  ${l}${n.name}${l}`+Sz(o.name-n.name.length)),r.push(`${n.dataType}`+Sz(o.dataType-n.dataType.length)),r.push(""+(Zf(n.options,rf.notNull)?"NOT NULL":"NULL    ")),Zf(n.options,rf.autoIncrement)?r.push("AUTO_INCREMENT"):""!==n.default.trim()&&r.push(`DEFAULT ${n.default}`),""!==n.comment.trim()&&r.push(`COMMENT '${n.comment}'`),t.push(r.join(" ")+""+(i?",":""))}function mj({settings:{bracketType:e},collections:t},{buffer:n,relationship:i,fkNames:o}){const l=wz(e),r=Dr(t).collection("tableEntities"),a=Dr(t).collection("tableColumnEntities"),s=r.selectById(i.start.tableId),c=r.selectById(i.end.tableId);if(s&&c){n.push(`ALTER TABLE ${l}${c.name}${l}`);let e=`FK_${s.name}_TO_${c.name}`;e=Kz(o,"",e),o.push({id:nr(),name:e}),n.push(`  ADD CONSTRAINT ${l}${e}${l}`);const t={start:[],end:[]};i.end.columnIds.forEach((e=>{const n=a.selectById(e);n&&t.end.push(n)})),i.start.columnIds.forEach((e=>{const n=a.selectById(e);n&&t.start.push(n)})),n.push(`    FOREIGN KEY (${Vz(t.end,l)})`),n.push(`    REFERENCES ${l}${s.name}${l} (${Vz(t.start,l)});`)}}function bj({settings:{bracketType:e},collections:t},{buffer:n,index:i,indexNames:o}){const l=wz(e),r=Dr(t).collection("tableEntities").selectById(i.tableId);if(!r)return;const a=Dr(t).collection("indexColumnEntities").selectByIds(i.indexColumnIds).map((e=>{const n=Dr(t).collection("tableColumnEntities").selectById(e.columnId);return n?{name:`${l}${n.name}${l} ${Hz(e.orderType)}`}:null})).filter((e=>null!==e));if(0!==a.length){let e=i.name;""===i.name.trim()&&(e=`IDX_${r.name}`,e=Kz(o,"",e),o.push({id:nr(),name:e})),i.unique?n.push(`CREATE UNIQUE INDEX ${l}${e}${l}`):n.push(`CREATE INDEX ${l}${e}${l}`),n.push(`  ON ${l}${r.name}${l} (${Vz(a)});`)}}function fj(e){const{settings:{bracketType:t},doc:{tableIds:n,relationshipIds:i,indexIds:o},collections:l}=e,r=[],a=[],s=[""],c=wz(t),u=Dr(l).collection("tableEntities").selectByIds(n).sort(Nz),d=Dr(l).collection("relationshipEntities").selectByIds(i),p=Dr(l).collection("indexEntities").selectByIds(o);return u.forEach((t=>{yj(e,{table:t,buffer:s}),s.push("");const n=Dr(l).collection("tableColumnEntities").selectByIds(t.columnIds);Yz(n)&&Tz(n).forEach((e=>{s.push(`ALTER TABLE ${c}${t.name}${c}`),s.push(`  ADD CONSTRAINT ${c}UQ_${e.name}${c} UNIQUE (${c}${e.name}${c})\nGO`),s.push("")})),function({collections:e},{table:t,buffer:n}){""!==t.comment.trim()&&(n.push("EXECUTE sys.sp_addextendedproperty 'MS_Description',"),n.push(`  '${t.comment}', 'user', dbo, 'table', '${t.name}'\nGO`),n.push("")),Dr(e).collection("tableColumnEntities").selectByIds(t.columnIds).forEach((e=>{""!==e.comment.trim()&&(n.push("EXECUTE sys.sp_addextendedproperty 'MS_Description',"),n.push(`  '${e.comment}', 'user', dbo, 'table', '${t.name}', 'column', '${e.name}'\nGO`),n.push(""))}))}(e,{table:t,buffer:s})})),d.forEach((t=>{vj(e,{relationship:t,buffer:s,fkNames:r}),s.push("")})),p.forEach((t=>{Zj(e,{index:t,buffer:s,indexNames:a}),s.push("")})),s.join("\n")}function yj(e,{buffer:t,table:n}){const{settings:{bracketType:i},collections:o}=e,l=wz(i),r=Dr(o).collection("tableColumnEntities").selectByIds(n.columnIds);t.push(`CREATE TABLE ${l}${n.name}${l}`),t.push("(");const a=Rz(r),s=Cz(r);if(r.forEach(((n,i)=>{gj(e,a?{column:n,isComma:!0,spaceSize:s,buffer:t}:{column:n,isComma:r.length!==i+1,spaceSize:s,buffer:t})})),a){const e=Lz(r);t.push(`  CONSTRAINT ${l}PK_${n.name}${l} PRIMARY KEY (${Vz(e,l)})`)}t.push(")\nGO")}function gj({settings:{bracketType:e}},{buffer:t,column:n,isComma:i,spaceSize:o}){const l=wz(e),r=[];r.push(`  ${l}${n.name}${l}`+Sz(o.name-n.name.length)),r.push(`${n.dataType}`+Sz(o.dataType-n.dataType.length)),Zf(n.options,rf.notNull)&&r.push("NOT NULL"),Zf(n.options,rf.autoIncrement)?r.push("IDENTITY(1,1)"):""!==n.default.trim()&&r.push(`DEFAULT ${n.default}`),t.push(r.join(" ")+""+(i?",":""))}function vj({settings:{bracketType:e},collections:t},{buffer:n,relationship:i,fkNames:o}){const l=wz(e),r=Dr(t).collection("tableEntities"),a=Dr(t).collection("tableColumnEntities"),s=r.selectById(i.start.tableId),c=r.selectById(i.end.tableId);if(s&&c){n.push(`ALTER TABLE ${l}${c.name}${l}`);let e=`FK_${s.name}_TO_${c.name}`;e=Kz(o,"",e),o.push({id:nr(),name:e}),n.push(`  ADD CONSTRAINT ${l}${e}${l}`);const t={start:[],end:[]};i.end.columnIds.forEach((e=>{const n=a.selectById(e);n&&t.end.push(n)})),i.start.columnIds.forEach((e=>{const n=a.selectById(e);n&&t.start.push(n)})),n.push(`    FOREIGN KEY (${Vz(t.end,l)})`),n.push(`    REFERENCES ${l}${s.name}${l} (${Vz(t.start,l)})\nGO`)}}function Zj({settings:{bracketType:e},collections:t},{buffer:n,index:i,indexNames:o}){const l=wz(e),r=Dr(t).collection("tableEntities").selectById(i.tableId);if(!r)return;const a=Dr(t).collection("indexColumnEntities").selectByIds(i.indexColumnIds).map((e=>{const n=Dr(t).collection("tableColumnEntities").selectById(e.columnId);return n?{name:`${l}${n.name}${l} ${Hz(e.orderType)}`}:null})).filter((e=>null!==e));if(0!==a.length){let e=i.name;""===i.name.trim()&&(e=`IDX_${r.name}`,e=Kz(o,"",e),o.push({id:nr(),name:e})),i.unique?n.push(`CREATE UNIQUE INDEX ${l}${e}${l}`):n.push(`CREATE INDEX ${l}${e}${l}`),n.push(`  ON ${l}${r.name}${l} (${Vz(a)})\nGO`)}}function xj(e,{buffer:t,table:n}){const{settings:{bracketType:i},collections:o}=e,l=wz(i),r=Dr(o).collection("tableColumnEntities").selectByIds(n.columnIds);t.push(`CREATE TABLE ${l}${n.name}${l}`),t.push("(");const a=Rz(r),s=Cz(r);if(r.forEach(((n,i)=>{Xj(e,a?{column:n,isComma:!0,spaceSize:s,buffer:t}:{column:n,isComma:r.length!==i+1,spaceSize:s,buffer:t})})),a){const e=Lz(r);t.push(`  PRIMARY KEY (${Vz(e,l)})`)}""===n.comment.trim()?t.push(");"):t.push(`) COMMENT '${n.comment}';`)}function Xj({settings:{bracketType:e}},{buffer:t,column:n,isComma:i,spaceSize:o}){const l=wz(e),r=[];r.push(`  ${l}${n.name}${l}`+Sz(o.name-n.name.length)),r.push(`${n.dataType}`+Sz(o.dataType-n.dataType.length)),r.push(""+(Zf(n.options,rf.notNull)?"NOT NULL":"NULL    ")),Zf(n.options,rf.autoIncrement)?r.push("AUTO_INCREMENT"):""!==n.default.trim()&&r.push(`DEFAULT ${n.default}`),""!==n.comment.trim()&&r.push(`COMMENT '${n.comment}'`),t.push(r.join(" ")+""+(i?",":""))}function Gj({settings:{bracketType:e},collections:t},{buffer:n,relationship:i,fkNames:o}){const l=wz(e),r=Dr(t).collection("tableEntities"),a=Dr(t).collection("tableColumnEntities"),s=r.selectById(i.start.tableId),c=r.selectById(i.end.tableId);if(s&&c){n.push(`ALTER TABLE ${l}${c.name}${l}`);let e=`FK_${s.name}_TO_${c.name}`;e=Kz(o,"",e),o.push({id:nr(),name:e}),n.push(`  ADD CONSTRAINT ${l}${e}${l}`);const t={start:[],end:[]};i.end.columnIds.forEach((e=>{const n=a.selectById(e);n&&t.end.push(n)})),i.start.columnIds.forEach((e=>{const n=a.selectById(e);n&&t.start.push(n)})),n.push(`    FOREIGN KEY (${Vz(t.end,l)})`),n.push(`    REFERENCES ${l}${s.name}${l} (${Vz(t.start,l)});`)}}function Ij({settings:{bracketType:e},collections:t},{buffer:n,index:i,indexNames:o}){const l=wz(e),r=Dr(t).collection("tableEntities").selectById(i.tableId);if(!r)return;const a=Dr(t).collection("indexColumnEntities").selectByIds(i.indexColumnIds).map((e=>{const n=Dr(t).collection("tableColumnEntities").selectById(e.columnId);return n?{name:`${l}${n.name}${l} ${Hz(e.orderType)}`}:null})).filter((e=>null!==e));if(0!==a.length){let e=i.name;""===i.name.trim()&&(e=`IDX_${r.name}`,e=Kz(o,"",e),o.push({id:nr(),name:e})),i.unique?n.push(`CREATE UNIQUE INDEX ${l}${e}${l}`):n.push(`CREATE INDEX ${l}${e}${l}`),n.push(`  ON ${l}${r.name}${l} (${Vz(a)});`)}}function Wj(e){const{settings:{bracketType:t},doc:{tableIds:n,relationshipIds:i,indexIds:o},collections:l}=e,r=[],a=[],s=[],c=[],u=[""],d=wz(t),p=Dr(l).collection("tableEntities").selectByIds(n).sort(Nz),h=Dr(l).collection("relationshipEntities").selectByIds(i),m=Dr(l).collection("indexEntities").selectByIds(o);return p.forEach((t=>{kj(e,{table:t,buffer:u}),u.push("");const n=Dr(l).collection("tableColumnEntities").selectByIds(t.columnIds);Yz(n)&&Tz(n).forEach((e=>{u.push(`ALTER TABLE ${d}${t.name}${d}`),u.push(`  ADD CONSTRAINT ${d}UQ_${e.name}${d} UNIQUE (${d}${e.name}${d});`),u.push("")})),n.forEach((e=>{if(Zf(e.options,rf.autoIncrement)){let n=`SEQ_${t.name}`;n=Kz(a,"",n),a.push({id:nr(),name:n}),u.push(`CREATE SEQUENCE ${n}`),u.push("START WITH 1"),u.push("INCREMENT BY 1;"),u.push("");let i=`SEQ_TRG_${t.name}`;i=Kz(a,"",i),s.push({id:nr(),name:i}),u.push(`CREATE OR REPLACE TRIGGER ${i}`),u.push(`BEFORE INSERT ON ${t.name}`),u.push("REFERENCING NEW AS NEW FOR EACH ROW"),u.push("BEGIN"),u.push(`  SELECT ${n}.NEXTVAL`),u.push(`  INTO: NEW.${e.name}`),u.push("  FROM DUAL;"),u.push("END;"),u.push("")}})),function({settings:{bracketType:e},collections:t},{table:n,buffer:i}){const o=wz(e);""!==n.comment.trim()&&(i.push(`COMMENT ON TABLE ${o}${n.name}${o} IS '${n.comment}';`),i.push("")),Dr(t).collection("tableColumnEntities").selectByIds(n.columnIds).forEach((e=>{""!==e.comment.trim()&&(i.push(`COMMENT ON COLUMN ${o}${n.name}${o}.${o}${e.name}${o} IS '${e.comment}';`),i.push(""))}))}(e,{table:t,buffer:u})})),h.forEach((t=>{(function({settings:{bracketType:e},collections:t},{buffer:n,relationship:i,fkNames:o}){const l=wz(e),r=Dr(t).collection("tableEntities"),a=Dr(t).collection("tableColumnEntities"),s=r.selectById(i.start.tableId),c=r.selectById(i.end.tableId);if(s&&c){n.push(`ALTER TABLE ${l}${c.name}${l}`);let e=`FK_${s.name}_TO_${c.name}`;e=Kz(o,"",e),o.push({id:nr(),name:e}),n.push(`  ADD CONSTRAINT ${l}${e}${l}`);const t={start:[],end:[]};i.end.columnIds.forEach((e=>{const n=a.selectById(e);n&&t.end.push(n)})),i.start.columnIds.forEach((e=>{const n=a.selectById(e);n&&t.start.push(n)})),n.push(`    FOREIGN KEY (${Vz(t.end,l)})`),n.push(`    REFERENCES ${l}${s.name}${l} (${Vz(t.start,l)});`)}})(e,{relationship:t,buffer:u,fkNames:r}),u.push("")})),m.forEach((t=>{Cj(e,{index:t,buffer:u,indexNames:c}),u.push("")})),u.join("\n")}function kj(e,{buffer:t,table:n}){const{settings:{bracketType:i},collections:o}=e,l=wz(i),r=Dr(o).collection("tableColumnEntities").selectByIds(n.columnIds);t.push(`CREATE TABLE ${l}${n.name}${l}`),t.push("(");const a=Rz(r),s=Cz(r);if(r.forEach(((n,i)=>{Vj(e,a?{column:n,isComma:!0,spaceSize:s,buffer:t}:{column:n,isComma:r.length!==i+1,spaceSize:s,buffer:t})})),a){const e=Lz(r);t.push(`  CONSTRAINT ${l}PK_${n.name}${l} PRIMARY KEY (${Vz(e,l)})`)}t.push(");")}function Vj({settings:{bracketType:e}},{buffer:t,column:n,isComma:i,spaceSize:o}){const l=wz(e),r=[];r.push(`  ${l}${n.name}${l}`+Sz(o.name-n.name.length)),r.push(`${n.dataType}`+Sz(o.dataType-n.dataType.length)),""!==n.default.trim()&&r.push(`DEFAULT ${n.default}`),Zf(n.options,rf.notNull)&&r.push("NOT NULL"),t.push(r.join(" ")+""+(i?",":""))}function Cj({settings:{bracketType:e},collections:t},{buffer:n,index:i,indexNames:o}){const l=wz(e),r=Dr(t).collection("tableEntities").selectById(i.tableId);if(!r)return;const a=Dr(t).collection("indexColumnEntities").selectByIds(i.indexColumnIds).map((e=>{const n=Dr(t).collection("tableColumnEntities").selectById(e.columnId);return n?{name:`${l}${n.name}${l} ${Hz(e.orderType)}`}:null})).filter((e=>null!==e));if(0!==a.length){let e=i.name;""===i.name.trim()&&(e=`IDX_${r.name}`,e=Kz(o,"",e),o.push({id:nr(),name:e})),i.unique?n.push(`CREATE UNIQUE INDEX ${l}${e}${l}`):n.push(`CREATE INDEX ${l}${e}${l}`),n.push(`  ON ${l}${r.name}${l} (${Vz(a)});`)}}function Sj(e){const{doc:{tableIds:t,relationshipIds:n,indexIds:i},collections:o}=e,l=[],r=[],a=[""],s=Dr(o).collection("tableEntities").selectByIds(t).sort(Nz),c=Dr(o).collection("relationshipEntities").selectByIds(n),u=Dr(o).collection("indexEntities").selectByIds(i);return s.forEach((t=>{Rj(e,{table:t,buffer:a}),a.push(""),function({settings:{bracketType:e},collections:t},{buffer:n,table:i}){const o=wz(e);""!==i.comment.trim()&&(n.push(`COMMENT ON TABLE ${o}${i.name}${o} IS '${i.comment}';`),n.push("")),Dr(t).collection("tableColumnEntities").selectByIds(i.columnIds).forEach((e=>{""!==e.comment.trim()&&(n.push(`COMMENT ON COLUMN ${o}${i.name}${o}.${o}${e.name}${o} IS '${e.comment}';`),n.push(""))}))}(e,{table:t,buffer:a})})),c.forEach((t=>{(function({settings:{bracketType:e},collections:t},{buffer:n,relationship:i,fkNames:o}){const l=wz(e),r=Dr(t).collection("tableEntities"),a=Dr(t).collection("tableColumnEntities"),s=r.selectById(i.start.tableId),c=r.selectById(i.end.tableId);if(s&&c){n.push(`ALTER TABLE ${l}${c.name}${l}`);let e=`FK_${s.name}_TO_${c.name}`;e=Kz(o,"",e),o.push({id:nr(),name:e}),n.push(`  ADD CONSTRAINT ${l}${e}${l}`);const t={start:[],end:[]};i.end.columnIds.forEach((e=>{const n=a.selectById(e);n&&t.end.push(n)})),i.start.columnIds.forEach((e=>{const n=a.selectById(e);n&&t.start.push(n)})),n.push(`    FOREIGN KEY (${Vz(t.end,l)})`),n.push(`    REFERENCES ${l}${s.name}${l} (${Vz(t.start,l)});`)}})(e,{relationship:t,buffer:a,fkNames:l}),a.push("")})),u.forEach((t=>{Yj(e,{index:t,buffer:a,indexNames:r}),a.push("")})),a.join("\n")}function Rj(e,{buffer:t,table:n}){const{settings:{bracketType:i},collections:o}=e,l=wz(i),r=Dr(o).collection("tableColumnEntities").selectByIds(n.columnIds);t.push(`CREATE TABLE ${l}${n.name}${l}`),t.push("(");const a=Rz(r),s=Cz(r);if(r.forEach(((n,i)=>{Lj(e,a?{column:n,isComma:!0,spaceSize:s,buffer:t}:{column:n,isComma:r.length!==i+1,spaceSize:s,buffer:t})})),a){const e=Lz(r);t.push(`  PRIMARY KEY (${Vz(e,l)})`)}t.push(");")}function Lj({settings:{bracketType:e}},{buffer:t,column:n,isComma:i,spaceSize:o}){const l=wz(e),r=[];r.push(`  ${l}${n.name}${l}`+Sz(o.name-n.name.length)),r.push(`${n.dataType}`+Sz(o.dataType-n.dataType.length)),Zf(n.options,rf.notNull)&&r.push("NOT NULL"),Zf(n.options,rf.autoIncrement)?r.push("GENERATED ALWAYS AS IDENTITY"):""!==n.default.trim()&&r.push(`DEFAULT ${n.default}`),Zf(n.options,rf.unique)&&r.push("UNIQUE"),t.push(r.join(" ")+""+(i?",":""))}function Yj({settings:{bracketType:e},collections:t},{buffer:n,index:i,indexNames:o}){const l=wz(e),r=Dr(t).collection("tableEntities").selectById(i.tableId);if(!r)return;const a=Dr(t).collection("indexColumnEntities").selectByIds(i.indexColumnIds).map((e=>{const n=Dr(t).collection("tableColumnEntities").selectById(e.columnId);return n?{name:`${l}${n.name}${l} ${Hz(e.orderType)}`}:null})).filter((e=>null!==e));if(0!==a.length){let e=i.name;""===i.name.trim()&&(e=`IDX_${r.name}`,e=Kz(o,"",e),o.push({id:nr(),name:e})),i.unique?n.push(`CREATE UNIQUE INDEX ${l}${e}${l}`):n.push(`CREATE INDEX ${l}${e}${l}`),n.push(`  ON ${l}${r.name}${l} (${Vz(a)});`)}}function Tj(e,{buffer:t,table:n}){const{settings:{bracketType:i},doc:{relationshipIds:o},collections:l}=e,r=wz(i),a=Dr(l).collection("tableEntities"),s=Dr(l).collection("tableColumnEntities"),c=s.selectByIds(n.columnIds),u=Dr(l).collection("relationshipEntities").selectByIds(o).filter((({end:e})=>e.tableId===n.id));""!==n.comment.trim()&&t.push(`-- ${n.comment}`),t.push(`CREATE TABLE ${r}${n.name}${r}`),t.push("(");const d=Rz(c),p=Cz(c);if(c.forEach(((n,i)=>{wj(e,d?{column:n,isComma:!0,spaceSize:p,buffer:t}:{column:n,isComma:c.length!==i+1,spaceSize:p,buffer:t})})),d){const e=Lz(c);if(0!==u.length)if(1===e.length){const n=Zf(e[0].options,rf.autoIncrement)?" AUTOINCREMENT":"";t.push(`  PRIMARY KEY (${Vz(e,r)}${n}),`)}else t.push(`  PRIMARY KEY (${Vz(e,r)}),`);else if(1===e.length){const n=Zf(e[0].options,rf.autoIncrement)?" AUTOINCREMENT":"";t.push(`  PRIMARY KEY (${Vz(e,r)}${n})`)}else t.push(`  PRIMARY KEY (${Vz(e,r)})`)}u.forEach(((e,n)=>{const i=a.selectById(e.start.tableId),o=a.selectById(e.end.tableId);if(i&&o){const o={start:[],end:[]};e.end.columnIds.forEach((e=>{const t=s.selectById(e);t&&o.end.push(t)})),e.start.columnIds.forEach((e=>{const t=s.selectById(e);t&&o.start.push(t)})),u.length-1>n?t.push(`  FOREIGN KEY (${Vz(o.end,r)}) REFERENCES ${r}${i.name}${r} (${Vz(o.start,r)}),`):t.push(`  FOREIGN KEY (${Vz(o.end,r)}) REFERENCES ${r}${i.name}${r} (${Vz(o.start,r)})`)}})),t.push(");")}function wj({settings:{bracketType:e}},{buffer:t,column:n,isComma:i,spaceSize:o}){const l=wz(e),r=[];""!==n.comment.trim()&&t.push(`  -- ${n.comment}`),r.push(`  ${l}${n.name}${l}`+Sz(o.name-n.name.length)),r.push(`${n.dataType}`+Sz(o.dataType-n.dataType.length)),r.push(""+(Zf(n.options,rf.notNull)?"NOT NULL":"NULL    ")),Zf(n.options,rf.unique)&&r.push("UNIQUE"),!Zf(n.options,rf.autoIncrement)&&""!==n.default.trim()&&r.push(`DEFAULT ${n.default}`),t.push(r.join(" ")+""+(i?",":""))}function Nj({settings:{bracketType:e},collections:t},{buffer:n,index:i,indexNames:o}){const l=wz(e),r=Dr(t).collection("tableEntities").selectById(i.tableId);if(!r)return;const a=Dr(t).collection("indexColumnEntities").selectByIds(i.indexColumnIds).map((e=>{const n=Dr(t).collection("tableColumnEntities").selectById(e.columnId);return n?{name:`${l}${n.name}${l} ${Hz(e.orderType)}`}:null})).filter((e=>null!==e));if(0!==a.length){let e=i.name;""===i.name.trim()&&(e=`IDX_${r.name}`,e=Kz(o,"",e),o.push({id:nr(),name:e})),i.unique?n.push(`CREATE UNIQUE INDEX ${l}${e}${l}`):n.push(`CREATE INDEX ${l}${e}${l}`),n.push(`  ON ${l}${r.name}${l} (${Vz(a)});`)}}function Kj(e,t){switch(t||e.settings.database){case Ab.MariaDB:return function(e){const{settings:{bracketType:t},doc:{tableIds:n,relationshipIds:i,indexIds:o},collections:l}=e,r=[],a=[],s=[""],c=wz(t),u=Dr(l).collection("tableEntities").selectByIds(n).sort(Nz),d=Dr(l).collection("relationshipEntities").selectByIds(i),p=Dr(l).collection("indexEntities").selectByIds(o);return u.forEach((t=>{pj(e,{table:t,buffer:s}),s.push("");const n=Dr(l).collection("tableColumnEntities").selectByIds(t.columnIds);Yz(n)&&Tz(n).forEach((e=>{s.push(`ALTER TABLE ${c}${t.name}${c}`),s.push(`  ADD CONSTRAINT ${c}UQ_${e.name}${c} UNIQUE (${c}${e.name}${c});`),s.push("")}))})),d.forEach((t=>{mj(e,{relationship:t,buffer:s,fkNames:r}),s.push("")})),p.forEach((t=>{bj(e,{index:t,buffer:s,indexNames:a}),s.push("")})),s.join("\n")}(e);case Ab.MSSQL:return fj(e);case Ab.MySQL:return function(e){const{settings:{bracketType:t},doc:{tableIds:n,relationshipIds:i,indexIds:o},collections:l}=e,r=[],a=[],s=[""],c=wz(t),u=Dr(l).collection("tableEntities").selectByIds(n).sort(Nz),d=Dr(l).collection("relationshipEntities").selectByIds(i),p=Dr(l).collection("indexEntities").selectByIds(o);return u.forEach((t=>{xj(e,{table:t,buffer:s}),s.push("");const n=Dr(l).collection("tableColumnEntities").selectByIds(t.columnIds);Yz(n)&&Tz(n).forEach((e=>{s.push(`ALTER TABLE ${c}${t.name}${c}`),s.push(`  ADD CONSTRAINT ${c}UQ_${e.name}${c} UNIQUE (${c}${e.name}${c});`),s.push("")}))})),d.forEach((t=>{Gj(e,{relationship:t,buffer:s,fkNames:r}),s.push("")})),p.forEach((t=>{Ij(e,{index:t,buffer:s,indexNames:a}),s.push("")})),s.join("\n")}(e);case Ab.Oracle:return Wj(e);case Ab.PostgreSQL:return Sj(e);case Ab.SQLite:return function(e){const{doc:{tableIds:t,indexIds:n},collections:i}=e,o=[],l=[""],r=Dr(i).collection("tableEntities").selectByIds(t).sort(Nz),a=Dr(i).collection("indexEntities").selectByIds(n);return r.forEach((t=>{Tj(e,{table:t,buffer:l}),l.push("")})),a.forEach((t=>{Nj(e,{index:t,buffer:l,indexNames:o}),l.push("")})),l.join("\n")}(e)}return""}function Hj(e,t,n){const{store:i}=e,o=i.state.settings.databaseName;return[{icon:{prefix:"mdi",name:"code-json"},name:"json",onClick:()=>{t(),uj(Ra(i.state),o)}},{icon:{prefix:"mdi",name:"database-export"},name:"Schema SQL",onClick:()=>{t(),dj(Kj(i.state),o)}},{icon:{prefix:"fas",name:"file-image"},name:"png",onClick:()=>{t(),function(e,t){oj(e).then((e=>{e&&aj(e,{fileName:cj(".png",t)})}))}(n,o)}}]}const Mj=[{iconName:"ZeroOne",name:"Zero One",relationshipType:nf.ZeroOne},{iconName:"ZeroN",name:"Zero N",relationshipType:nf.ZeroN},{iconName:"OneOnly",name:"One Only",relationshipType:nf.OneOnly},{iconName:"OneN",name:"One N",relationshipType:nf.OneN}];function zj({store:e},t){if(!t)return[];const{collections:n}=e.state,i=Dr(n).collection("relationshipEntities").selectById(t);return i?Mj.map((n=>({checked:n.relationshipType===i.relationshipType,iconName:n.iconName,name:n.name,onClick:()=>{e.dispatch(Iv({id:t,value:n.relationshipType}))}}))):[]}const Jj=[{name:"Table Comment",show:Eb.tableComment},{name:"Column Comment",show:Eb.columnComment},{name:"DataType",show:Eb.columnDataType},{name:"Default",show:Eb.columnDefault},{name:"Not Null",show:Eb.columnNotNull},{name:"Unique",show:Eb.columnUnique},{name:"Auto Increment",show:Eb.columnAutoIncrement},{name:"Relationship",show:Eb.relationship}];const jj="ERD",Fj="table",Oj="relationship",$j=(e,t)=>{const n=yL(t),i=Ch`<${JY} name="chevron-right" size=${14} />`,{addUnsubscribe:o}=WL(),l=()=>{const{store:t}=n.value;t.dispatch(Wx()),e.onClose()},r=()=>{const{store:t}=n.value;t.dispatch(gx()),e.onClose()},a=()=>{const{store:t}=n.value;t.dispatch(ag({[Bw]:!0})),e.onClose()},s=()=>{(function({emitter:e}){if(pJ)return void pJ({type:"json",op:"diff",accept:".json,.erd,.vuerd"});const t=document.createElement("input");t.setAttribute("type","file"),t.setAttribute("accept",".json,.erd,.vuerd"),t.addEventListener("change",(()=>{var n;const i=null==(n=t.files)?void 0:n[0];if(!i)return;if(!uJ.test(i.name))return void e.emit(XR({message:Ch`<${Aw} description="Just import the json file" />`}));const o=new FileReader;o.readAsText(i),o.onload=()=>{const t=o.result;Bl(t)&&e.emit(wR({value:t}))}})),t.click()})(n.value),e.onClose()},c=()=>{if(!e.relationshipId)return;const{store:t}=n.value;t.dispatch(Gv({id:e.relationshipId})),e.onClose()},u=()=>{if(!e.tableId)return;const{store:t}=n.value,{editor:i}=t.state;!i.focusTable||!i.focusTable.columnId||(t.dispatch(Mx(i.focusTable.tableId,i.focusTable.columnId)),e.onClose())},d=()=>{if(!e.tableId)return;const{store:t,emitter:i}=n.value;i.emit(IR({tableId:e.tableId})),t.dispatch(ag({[Qw]:!0})),e.onClose()},p=t=>{if(!e.tableId)return;const{store:i,emitter:o}=n.value,{collections:l}=i.state,r=Dr(l).collection("tableEntities").selectById(e.tableId);r&&(o.emit(ZR({x:t.clientX,y:t.clientY,color:r.ui.color})),e.onClose())};return Ts((()=>{const{shortcut$:t}=n.value;o(t.subscribe((({type:t})=>{t===nL.stop&&e.onClose()})))})),()=>{var t,o,h,m;const{keyBindingMap:b}=n.value;return Ch`
      <${aJ}
        children=${e.type===Fj?Ch`
              <${sJ}
                .onClick=${u}
                children=${Ch`
                  <${cJ}
                    icon=${Ch`<${JY} name="key" size=${14} />`}
                    name="Primary Key"
                    right=${Ch`
                      <${iw}
                        shortcut=${null==(t=b.primaryKey[0])?void 0:t.shortcut}
                      />
                    `}
                  />
                `}
              />
              <${sJ}
                .onClick=${d}
                children=${Ch`
                  <${cJ}
                    icon=${Ch`
                      <${JY} prefix="mdi" name="table-cog" size=${14} />
                    `}
                    name="Table Properties"
                    right=${Ch`
                      <${iw}
                        shortcut=${null==(o=b.tableProperties[0])?void 0:o.shortcut}
                      />
                    `}
                  />
                `}
              />
              <${sJ}
                .onClick=${p}
                children=${Ch`
                  <${cJ}
                    icon=${Ch`<${JY} name="palette" size=${14} />`}
                    name="Color"
                  />
                `}
              />
            `:e.type===Oj?Ch`
                <${sJ}
                  children=${Ch`
                    <${cJ}
                      icon=${Ch`
                        <${JY} prefix="mdi" name="vector-line" size=${14} />
                      `}
                      name="Relationship Type"
                      right=${i}
                    />
                  `}
                  subChildren=${Ch`${zj(n.value,e.relationshipId).map((e=>Ch`
                      <${sJ}
                        .onClick=${e.onClick}
                        children=${Ch`
                          <${cJ}
                            icon=${e.checked?Ch`<${JY} name="check" size=${14} />`:null}
                            name=${Ch`
                              <${cJ}
                                icon=${Ch` <${JY}
                                  prefix="base64"
                                  name=${e.iconName}
                                  size=${14}
                                />`}
                                name=${e.name}
                              />
                            `}
                          />
                        `}
                      />
                    `))}`}
                />
                <${sJ}
                  .onClick=${c}
                  children=${Ch`<${cJ} name="Delete" />`}
                />
              `:Ch`
                <${sJ}
                  .onClick=${l}
                  children=${Ch`
                    <${cJ}
                      icon=${Ch`<${JY} name="table" size=${14} />`}
                      name="New Table"
                      right=${Ch`
                        <${iw}
                          shortcut=${null==(h=b.addTable[0])?void 0:h.shortcut}
                        />
                      `}
                    />
                  `}
                />
                <${sJ}
                  .onClick=${r}
                  children=${Ch`
                    <${cJ}
                      icon=${Ch`<${JY} name="note-sticky" size=${14} />`}
                      name="New Memo"
                      right=${Ch`
                        <${iw}
                          shortcut=${null==(m=b.addMemo[0])?void 0:m.shortcut}
                        />
                      `}
                    />
                  `}
                />
                <${sJ}
                  children=${Ch`
                    <${cJ}
                      icon=${Ch`
                        <${JY} prefix="mdi" name="vector-line" size=${14} />
                      `}
                      name="Relationship"
                      right=${i}
                    />
                  `}
                  subChildren=${Ch`${function({store:e,keyBindingMap:t},n){return gJ.map((i=>{var o;return{iconName:i.iconName,name:i.name,shortcut:null==(o=t[i.keyBindingName][0])?void 0:o.shortcut,onClick:()=>{e.dispatch(XG(i.relationshipType)),n()}}}))}(n.value,e.onClose).map((e=>Ch`
                      <${sJ}
                        .onClick=${e.onClick}
                        children=${Ch`
                          <${cJ}
                            icon=${Ch`
                              <${JY}
                                prefix="base64"
                                name=${e.iconName}
                                size=${14}
                              />
                            `}
                            name=${e.name}
                            right=${Ch`
                              <${iw} shortcut=${e.shortcut} />
                            `}
                          />
                        `}
                      />
                    `))}`}
                />
                <${sJ}
                  children=${Ch`
                    <${cJ}
                      icon=${Ch`<${JY} name="eye" size=${14} />`}
                      name="View Option"
                      right=${i}
                    />
                  `}
                  subChildren=${Ch`${function({store:e}){const{settings:t}=e.state;return Jj.map((n=>{const i=Zf(t.show,n.show);return{checked:i,name:n.name,onClick:()=>{e.dispatch(_v({show:n.show,value:!i}))}}}))}(n.value).map((e=>Ch`
                      <${sJ}
                        .onClick=${e.onClick}
                        children=${Ch`
                          <${cJ}
                            icon=${e.checked?Ch`<${JY} name="check" size=${14} />`:null}
                            name=${e.name}
                          />
                        `}
                      />
                    `))}`}
                />
                <${sJ}
                  children=${Ch`
                    <${cJ}
                      icon=${Ch`
                        <${JY} prefix="mdi" name="database" size=${14} />
                      `}
                      name="Database"
                      right=${i}
                    />
                  `}
                  subChildren=${Ch`${yJ(n.value).map((e=>Ch`
                      <${sJ}
                        .onClick=${e.onClick}
                        children=${Ch`
                          <${cJ}
                            icon=${e.checked?Ch`<${JY} name="check" size=${14} />`:null}
                            name=${e.name}
                          />
                        `}
                      />
                    `))}`}
                />
                <${sJ}
                  children=${Ch`
                    <${cJ}
                      icon=${Ch`<${JY} name="file-import" size=${14} />`}
                      name="Import"
                      right=${i}
                    />
                  `}
                  subChildren=${Ch`${function(e,t){return[{icon:{prefix:"mdi",name:"code-json"},name:"json",onClick:()=>{mJ(e),t()}},{icon:{prefix:"mdi",name:"database-import"},name:"Schema SQL",onClick:()=>{bJ(e),t()}}]}(n.value,e.onClose).map((e=>Ch`
                      <${sJ}
                        .onClick=${e.onClick}
                        children=${Ch`
                          <${cJ}
                            icon=${Ch`<${JY}
                              prefix=${e.icon.prefix}
                              name=${e.icon.name}
                              size=${14}
                            />`}
                            name=${e.name}
                          />
                        `}
                      />
                    `))}`}
                />
                <${sJ}
                  children=${Ch`
                    <${cJ}
                      icon=${Ch`<${JY} name="file-export" size=${14} />`}
                      name="Export"
                      right=${i}
                    />
                  `}
                  subChildren=${Ch`${Hj(n.value,e.onClose,e.canvas.value).map((e=>Ch`
                      <${sJ}
                        .onClick=${e.onClick}
                        children=${Ch`
                          <${cJ}
                            icon=${Ch`<${JY}
                              prefix=${e.icon.prefix}
                              name=${e.icon.name}
                              size=${14}
                            />`}
                            name=${e.name}
                          />
                        `}
                      />
                    `))}`}
                />
                <${sJ}
                  .onClick=${a}
                  children=${Ch`
                    <${cJ}
                      icon=${Ch`<${JY}
                        prefix="mdi"
                        name="atom"
                        size=${14}
                      />`}
                      name="Automatic Table Placement"
                    />
                  `}
                />
                <${sJ}
                  .onClick=${s}
                  children=${Ch`
                    <${cJ}
                      icon=${Ch`<${JY}
                        prefix="mdi"
                        name="plus-minus-box"
                        size=${14}
                      />`}
                      name="Diff Viewer"
                    />
                  `}
                />
              `}
      />
    `}},Ej=Qh`
  position: absolute;
  cursor: pointer;

  &:hover {
    fill: var(--active);
  }
`,Uj=45,Pj="left",Aj="right",Bj="top",Qj="bottom",Dj="lt",_j="rt",qj="lb",eF="rb",tF={[Dj]:135,[_j]:225,[qj]:Uj,[eF]:315,[Pj]:90,[Aj]:270,[Bj]:180,[Qj]:0},nF=(e,t)=>{const n=yL(t),{addUnsubscribe:i}=WL(),o=Bs({scrollLeft:0,scrollTop:0}),l=({x:e,y:t})=>{const{store:i}=n.value,{settings:{width:o,height:l}}=i.state;return e<0&&t<0?Dj:e>o&&t<0?_j:e<0&&t>l?qj:e>o&&t>l?eF:e<0?Pj:e>o?Aj:t<0?Bj:Qj},r=e=>{const{store:t}=n.value,{settings:{width:i,height:r,zoomLevel:a}}=t.state,{scrollLeft:s,scrollTop:c}=o,{x:u,y:d}=Gf(e,i,r,a),p=`${d+c}px`,h=`${u+s}px`,m=l(e),b=tF[m];switch(m){case Dj:return[{left:"0",top:"0"},b];case _j:return[{right:"0",top:"0"},b];case qj:return[{left:"0",bottom:"0"},b];case eF:return[{right:"0",bottom:"0"},b];case Pj:return[{left:"0",top:p},b];case Aj:return[{right:"0",top:p},b];case Bj:return[{left:h,top:"0"},b];case Qj:return[{left:h,bottom:"0"},b]}},a=t=>{const i=e.root.value,{store:o}=n.value,{settings:{width:l,height:r,zoomLevel:a,scrollLeft:s,scrollTop:c}}=o.state,u=i.getBoundingClientRect();return If({x:t.clientX-u.x-s,y:t.clientY-u.y-c},l,r,a)};return Ts((()=>{const{store:e}=n.value,{settings:t}=e.state,l=new Lm((e=>Qs(t).subscribe((n=>{("scrollLeft"===n||"scrollTop"===n)&&e.next({scrollLeft:t.scrollLeft,scrollTop:t.scrollTop})}))));i(l.pipe(pb(100)).subscribe((({scrollLeft:e,scrollTop:t})=>{o.scrollLeft=e,o.scrollTop=t})))})),()=>{const{store:e}=n.value,{doc:{tableIds:t,memoIds:i},settings:{zoomLevel:o,width:s,height:c},collections:u}=e.state,d=If({x:0,y:0},s,c,o),p=If({x:s,y:c},s,c,o),h={...d,w:p.x-d.x,h:p.y-d.y},m=Dr(u).collection("tableEntities").selectByIds(t).filter((t=>!xf(h,{x:t.ui.x,y:t.ui.y,w:GZ(t,e.state).width,h:WZ(t)}))),b=Dr(u).collection("memoEntities").selectByIds(i).filter((e=>!xf(h,{x:e.ui.x,y:e.ui.y,w:Jx(e),h:jx(e)})));return 0===m.length&&0===b.length?null:Ch`
      ${ap(m,(e=>e.id),(e=>{const[t,i]=r(e.ui),o=Vl(e.name.trim());return Ch`
            <div
              class=${["hide-sign",Ej]}
              title=${o?"unnamed":e.name}
              style=${t}
              @click=${t=>((e,t)=>{const{store:i}=n.value,o=l(t.ui),{x:r,y:s}=a(e);let c=0,u=0;switch(o){case _j:c=GZ(t,i.state).width;break;case qj:u=WZ(t);break;case eF:c=GZ(t,i.state).width,u=WZ(t);break;case Aj:c=GZ(t,i.state).width;break;case Qj:u=WZ(t)}i.dispatch(RZ({id:t.id,x:r-c,y:s-u}),Vx(t.id,hL(e)))})(t,e)}
            >
              <${JY} name="location-dot" rotate=${i} />
            </div>
          `}))}
      ${ap(b,(e=>e.id),(e=>{const[t,i]=r(e.ui);return Ch`
            <div
              class=${["hide-sign",Ej]}
              title="Memo"
              style=${t}
              @click=${t=>((e,t)=>{const{store:i}=n.value,o=l(t.ui),{x:r,y:s}=a(e);let c=0,u=0;switch(o){case _j:c=Jx(t);break;case qj:u=jx(t);break;case eF:c=Jx(t),u=jx(t);break;case Aj:c=Jx(t);break;case Qj:u=jx(t)}i.dispatch(sv({id:t.id,x:r-c,y:s-u}),Zx(t.id,hL(e)))})(t,e)}
            >
              <${JY} name="location-dot" rotate=${i} />
            </div>
          `}))}
    `}},iF=(e,t)=>{const n=tp();return Ts((()=>{const t=n.value;!e.autofocus||!t||$T(t)})),()=>Ch`
    <input
      ${np(n)}
      class=${e.class}
      style=${{width:e.width?`${e.width}px`:""}}
      ...${TY({title:e.title,placeholder:e.placeholder})}
      type="text"
      spellcheck="false"
      ?readonly=${e.readonly}
      ?disabled=${e.disabled}
      .value=${e.value??""}
      @input=${e.numberOnly?EL:null}
      @input=${e.onInput}
      @change=${e.onChange}
      @blur=${e.onBlur}
      @keyup=${e.onKeyup}
      @keydown=${e.onKeydown}
    />
  `},oF=Qh`
  display: flex;
  width: 100%;
  height: ${Hf}px;
  align-items: center;
  fill: transparent;
  color: transparent;
  padding: 0 ${Sf}px;

  &:hover {
    fill: var(--foreground);
    color: var(--foreground);
    background-color: var(--column-hover);
  }

  &.selected {
    background-color: var(--column-select);
  }

  & > .column-col {
    padding: ${2}px ${Vf}px ${2}px 0;
  }
`,lF=Qh`
  width: 100%;
`,rF=Qh`
  cursor: pointer;
`,aF=Qh`
  cursor: pointer;
  margin-left: auto;

  &:hover {
    fill: var(--active);
    color: var(--active);
  }
`,sF=(e,t)=>{const n=yL(t),i=()=>{e.onSelect(e.index)},o=t=>{t.stopPropagation(),e.onSelect(null);const{store:i}=n.value;i.dispatch(vf(Lg({id:e.index.id})))},l=()=>{const{store:t}=n.value;t.dispatch(vf(YG(e.index.id)))},r=t=>{const i=t.target;if(!i)return;const{store:o}=n.value;o.dispatch(vf(Yg({id:e.index.id,tableId:e.index.tableId,value:i.value})))};return()=>{const{index:t}=e;return Ch`
      <div
        class=${[oF,{selected:e.selected}]}
        @click=${i}
      >
        <div class="column-col" @click=${l}>
          <${bw}
            class=${rF}
            checked=${t.unique}
            width=${Nf}
            text="UQ"
            title="Unique"
          />
        </div>
        <div class=${["column-col",lF]}>
          <${iF}
            class=${lF}
            placeholder="name"
            value=${t.name}
            .onInput=${r}
          />
        </div>
        <${JY}
          class=${aF}
          size=${12}
          name="xmark"
          title="Remove"
          .onClick=${o}
        />
      </div>
    `}},cF=Qh`
  display: flex;
  flex-direction: column;
  width: 100%;
  max-height: 240px;
  overflow: auto;
`,uF=(e,t)=>{const n=yL(t);return()=>{const{tableId:t,index:i}=e,{store:o}=n.value,{collections:l}=o.state,r=Dr(l).collection("tableEntities").selectById(t);if(!r)return null;const a=Dr(l).collection("tableColumnEntities").selectByIds(r.columnIds),s=GZ(r,o.state),c=Dr(l).collection("indexColumnEntities").selectByIds((null==i?void 0:i.indexColumnIds)??[]).map((e=>e.columnId)),u=jl(c);return Ch`
      <div class=${["scrollbar",cF]}>
        ${ap(a,(e=>e.id),(t=>Ch`
            <div class=${["column-row",fw]}>
              <div class="column-col">
                <input
                  type="checkbox"
                  ?disabled=${!i}
                  ?checked=${u(t.id)}
                  @change=${i=>((t,i)=>{const o=t.target;if(!o)return;const{store:l}=n.value,r=o.checked?wG:NG;l.dispatch(vf(r(e.index.id,i.id)))})(i,t)}
                />
              </div>
              <${dw} keys=${t.ui.keys} />
              ${ap(((e,t)=>{const{store:i}=n.value,{settings:o}=i.state;return o.columnOrder.map((n=>{let i=null;switch(n){case Ub.columnName:i=Ch`
              <div class="column-col">
                <${BT}
                  placeholder="column"
                  width=${t.name}
                  value=${e.name}
                />
              </div>
            `;break;case Ub.columnDefault:i=Zf(o.show,Eb.columnDefault)?Ch`
                  <div class="column-col">
                    <${BT}
                      placeholder="default"
                      width=${t.default}
                      value=${e.default}
                    />
                  </div>
                `:null;break;case Ub.columnComment:i=Zf(o.show,Eb.columnComment)?Ch`
                  <div class="column-col">
                    <${BT}
                      placeholder="comment"
                      width=${t.comment}
                      value=${e.comment}
                    />
                  </div>
                `:null;break;case Ub.columnDataType:i=Zf(o.show,Eb.columnDataType)?Ch`
                  <div class="column-col">
                    <${cw}
                      tableId=${e.tableId}
                      columnId=${e.id}
                      width=${t.dataType}
                      value=${e.dataType}
                    />
                  </div>
                `:null;break;case Ub.columnNotNull:i=Zf(o.show,Eb.columnNotNull)?Ch`
                  <div class="column-col">
                    <${hw} options=${e.options} />
                  </div>
                `:null;break;case Ub.columnUnique:i=Zf(o.show,Eb.columnUnique)?Ch`
                  <div class="column-col">
                    <${bw}
                      checked=${Zf(e.options,rf.unique)}
                      width=${Nf}
                      text="UQ"
                      title="Unique"
                    />
                  </div>
                `:null;break;case Ub.columnAutoIncrement:i=Zf(o.show,Eb.columnAutoIncrement)?Ch`
                  <div class="column-col">
                    <${bw}
                      checked=${Zf(e.options,rf.autoIncrement)}
                      width=${Kf}
                      text="AI"
                      title="Auto Increment"
                    />
                  </div>
                `:null}return{columnType:n,template:i}})).filter((({template:e})=>!!e))})(t,s),(({columnType:e})=>e),(({template:e})=>e))}
            </div>
          `))}
      </div>
    `}},dF=Qh`
  padding-top: 12px;

  .index-column-order-move {
    transition: transform 0.3s;
  }
`,pF=Qh`
  display: flex;
  width: 100%;
  height: ${Hf}px;
  align-items: center;
  color: var(--active);
  fill: var(--active);
  padding: 0 ${Sf}px;
  cursor: move;

  &:hover {
    background-color: var(--column-hover);
  }

  & > .column-col {
    padding: ${2}px ${Vf}px ${2}px 0;
  }

  &.none-hover {
    background-color: transparent;
  }

  &.dragging {
    opacity: 0.5;
  }
`,hF=Qh`
  cursor: pointer;
`,mF=(e,t)=>{const n=yL(t),i=tp(),o=new vw(i,`.${pF}`,"index-column-order-move"),l=e=>{var t;const l=i.value,r=e.target;if(!l||!r)return;const a=null==(t=r.dataset)?void 0:t.id;if(!a)return;const s=Array.from(l.querySelectorAll(`.${pF}`));s.forEach((e=>e.classList.add("none-hover"))),r.classList.add("dragging"),Zw(s,(e=>e.dataset.id)).subscribe({next:e=>{((e,t)=>{const{store:i}=n.value;e!==t&&(o.snapshot(),i.dispatch(vf(HG(e,t))))})(a,e)},complete:()=>{r.classList.remove("dragging"),s.forEach((e=>e.classList.remove("none-hover")))}})};return Ks((()=>o.play())),()=>{const{store:t}=n.value,{collections:o}=t.state,r=Dr(o).collection("indexColumnEntities").selectByIds(e.index.indexColumnIds).map((e=>({...e,column:Dr(o).collection("tableColumnEntities").selectById(e.columnId)})));return Ch`
      <div
        class=${dF}
        ${np(i)}
        @dragenter=${UL}
        @dragover=${UL}
      >
        ${ap(r,(e=>e.id),(e=>{var t;return Ch`
            <div
              class=${pF}
              draggable="true"
              data-id=${e.id}
              @dragstart=${l}
            >
              <${JY} class=${"column-col"} name="bars" size=${14} />
              <div
                class="column-col"
                @click=${()=>(e=>{const{store:t}=n.value;t.dispatch(vf(KG(e.id)))})(e)}
              >
                <${bw}
                  class=${hF}
                  checked=${!0}
                  width=${40}
                  text=${Hz(e.orderType)}
                  title=${(e=>{switch(e){case sf.ASC:return"Ascending";case sf.DESC:return"Descending";default:return""}})(e.orderType)}
                />
              </div>
              <div class="column-col">${null==(t=e.column)?void 0:t.name}</div>
            </div>
          `}))}
      </div>
    `}},bF=Qh`
  width: 30%;
  min-width: 240px;
  height: 100%;
  padding-right: 12px;
`,fF=Qh`
  width: 70%;
  min-width: 560px;
  height: 100%;
`,yF=Qh`
  display: flex;
  width: 100%;
  height: ${Hf}px;
  align-items: center;
  padding: 0 ${Sf}px;
  cursor: pointer;

  &:hover {
    background-color: var(--column-hover);
    fill: var(--active);
    color: var(--active);
  }
`,gF=(e,t)=>{const n=yL(t),i=Bs({index:null}),o=e=>{i.index=e},l=()=>{const{store:t}=n.value;t.dispatch(vf(LG(e.tableId)))};return()=>{const{tableId:t}=e,{store:r}=n.value,{doc:{indexIds:a},collections:s}=r.state,c=Dr(s).collection("indexEntities").selectByIds(a).filter((e=>e.tableId===t));return Ch`
      <div class=${bF}>
        ${ap(c,(e=>e.id),(e=>{var t;return Ch`
            <${sF}
              index=${e}
              selected=${e.id===(null==(t=i.index)?void 0:t.id)}
              .onSelect=${o}
            />
          `}))}
        <div
          class=${yF}
          title="Add Index"
          @click=${l}
        >
          <${JY} size=${12} name="plus" />
        </div>
      </div>
      <div class=${fF}>
        <${uF} tableId=${t} index=${i.index} />
        ${i.index?Ch`<${mF} index=${i.index} />`:null}
      </div>
    `}},vF=Qh`
  display: flex;
  padding: 12px;
  min-height: 56px;
`,ZF=Qh`
  display: flex;
  align-items: center;
  padding: 0 12px;
  height: 32px;
  border-radius: 4px;
  cursor: default;
  white-space: nowrap;

  &:hover {
    background-color: var(--context-menu-hover);
    color: var(--active);
    fill: var(--active);
  }

  &.selected {
    background-color: var(--context-menu-select);
    color: var(--active);
    fill: var(--active);
  }
`,xF={Indexes:"Indexes",SchemaSQL:"Schema SQL",GeneratorCode:"Code Generator"},XF=Object.values(xF),GF=(e,t)=>()=>Ch`
    <div class=${vF}>
      ${XF.map((t=>Ch`
          <div
            class=${[ZF,{selected:t===e.value}]}
            @click=${()=>e.onChange(t)}
          >
            ${t}
          </div>
        `))}
    </div>
  `,IF=[{name:"Pascal",value:_b.pascalCase},{name:"Camel",value:_b.camelCase},{name:"Snake",value:_b.snakeCase},{name:"None",value:_b.none}];const WF=[{name:"GraphQL",value:Qb.GraphQL},{name:"C#",value:Qb.csharp},{name:"Java",value:Qb.Java},{name:"Kotlin",value:Qb.Kotlin},{name:"TypeScript",value:Qb.TypeScript},{name:"JPA",value:Qb.JPA},{name:"Scala",value:Qb.Scala}];const kF=[{name:"Pascal",value:_b.pascalCase},{name:"Camel",value:_b.camelCase},{name:"Snake",value:_b.snakeCase},{name:"None",value:_b.none}];const VF=(e,t)=>{const n=yL(t),i=Ch`<${JY} name="chevron-right" size=${14} />`,{addUnsubscribe:o}=WL();return Ts((()=>{const{shortcut$:t}=n.value;o(t.subscribe((({type:t})=>{t===nL.stop&&e.onClose()})))})),()=>Ch`
    <${aJ}
      children=${Ch`
        <${sJ}
          children=${Ch`
            <${cJ}
              icon=${Ch`<${JY} name="code" size=${14} />`}
              name="Language"
              right=${i}
            />
          `}
          subChildren=${Ch`${function({store:e}){const{settings:t}=e.state;return WF.map((n=>({checked:n.value===t.language,name:n.name,onClick:()=>{e.dispatch(tZ({value:n.value}))}})))}(n.value).map((e=>Ch`
              <${sJ}
                .onClick=${e.onClick}
                children=${Ch`
                  <${cJ}
                    icon=${e.checked?Ch`<${JY} name="check" size=${14} />`:null}
                    name=${e.name}
                  />
                `}
              />
            `))}`}
        />
        <${sJ}
          children=${Ch`
            <${cJ}
              icon=${Ch`
                <${JY} prefix="mdi" name="format-letter-case" size=${14} />
              `}
              name="Table Name Case"
              right=${i}
            />
          `}
          subChildren=${Ch`${function({store:e}){const{settings:t}=e.state;return kF.map((n=>({checked:n.value===t.tableNameCase,name:n.name,onClick:()=>{e.dispatch(nZ({value:n.value}))}})))}(n.value).map((e=>Ch`
              <${sJ}
                .onClick=${e.onClick}
                children=${Ch`
                  <${cJ}
                    icon=${e.checked?Ch`<${JY} name="check" size=${14} />`:null}
                    name=${e.name}
                  />
                `}
              />
            `))}`}
        />
        <${sJ}
          children=${Ch`
            <${cJ}
              icon=${Ch`<${JY}
                prefix="mdi"
                name="format-letter-case"
                size=${14}
              />`}
              name="Column Name Case"
              right=${i}
            />
          `}
          subChildren=${Ch`${function({store:e}){const{settings:t}=e.state;return IF.map((n=>({checked:n.value===t.columnNameCase,name:n.name,onClick:()=>{e.dispatch(iZ({value:n.value}))}})))}(n.value).map((e=>Ch`
              <${sJ}
                .onClick=${e.onClick}
                children=${Ch`
                  <${cJ}
                    icon=${e.checked?Ch`<${JY} name="check" size=${14} />`:null}
                    name=${e.name}
                  />
                `}
              />
            `))}`}
        />
      `}
    />
  `},CF=new vR;let SF=()=>null;function RF(e){SF=e,CF.emit(GR())}const LF=Qh`
  position: absolute;
  top: 0;
  right: 0;
  padding: 8px;
  margin: 8px;
  cursor: pointer;
  fill: var(--foreground);
  color: var(--foreground);
  opacity: 0;
  transition: opacity 0.15s;
  user-select: none;

  &:hover {
    fill: var(--active);
    color: var(--active);
  }
`,YF=Qh`
  position: relative;
  width: 100%;
  height: 100%;
  overflow: hidden;
  min-height: 40px;
  outline: none;

  &:hover {
    ${LF} {
      opacity: 1;
    }
  }
`,TF=Qh`
  width: 100%;
  height: 100%;
  white-space: pre;
  overflow: auto;
  outline: none;
  font-family: var(--code-font-family) !important;
  color: var(--active);
  padding: 16px;
`,wF=jl(["value","lang","theme"]),NF=(e,t)=>{const n=tp(),{addUnsubscribe:i}=WL(),o=Bs({highlight:"",backgroundColor:""}),l=()=>{var t;null==(t=e.onCopy)||t.call(e,e.value)},r=()=>{rs((()=>{o.backgroundColor=(()=>{const e=n.value;if(!e)return null;const t=e.querySelector("pre.shiki");return t&&t.style.backgroundColor||null})()||""}))},a=()=>{var t;null==(t=SF())||t.codeToHtml(e.value,{lang:e.lang,theme:e.theme}).then((e=>{o.highlight=e,r()}))};return Ys((()=>{a(),i(CF.on({loadShikiService:a}),Qs(e).subscribe((e=>{wF(e)&&a()})),(()=>{o.highlight=""}))})),()=>Ch`
    <div class=${YF} ${np(n)}>
      <div
        class=${["scrollbar",TF]}
        style=${{"background-color":o.backgroundColor}}
      >
        ${lp(o.highlight?o.highlight:e.value)}
      </div>
      <div class=${LF} title="Copy" @click=${l}>
        <${JY} prefix="far" name="copy" useTransition=${!0} />
      </div>
    </div>
  `},KF={[Qb.TypeScript]:"typescript",[Qb.GraphQL]:"graphql",[Qb.csharp]:"csharp",[Qb.Java]:"java",[Qb.Kotlin]:"kotlin",[Qb.Scala]:"scala",[Qb.JPA]:"java"};function HF(e){return new Promise(((t,n)=>{const i=document.createElement("textarea");i.style.fontSize="12pt",i.style.border="0",i.style.padding="0",i.style.margin="0",i.style.position="fixed",i.style.left="-9999px",i.style.top="-9999px",i.setAttribute("readonly",""),i.value=e,document.body.appendChild(i),i.select(),i.setSelectionRange(0,99999);try{document.execCommand("copy"),t()}catch(e){n(e)}i.setSelectionRange(0,0),document.body.removeChild(i)}))}async function MF(e){if(!navigator.clipboard)return HF(e);try{await navigator.clipboard.writeText(e)}catch{return HF(e)}}const zF=jl([nf.ZeroOne,nf.OneOnly]),JF=jl([nf.ZeroN,nf.OneN]);function jF(e,t){const n=function(e){return ow[e]??[]}(t);for(const t of n)if(0===e.toLocaleLowerCase().indexOf(t.name.toLocaleLowerCase()))return t.primitiveType;return"string"}function FF(e,t){let n=e;switch(t){case _b.camelCase:n=ii(e);break;case _b.pascalCase:n=function(e){return Wn(ii(e))}(e);break;case _b.snakeCase:n=RS(e)}return n}const OF={int:"int",long:"long",float:"float",double:"double",decimal:"decimal",boolean:"bool",string:"string",lob:"string",date:"DateTime",dateTime:"DateTime",time:"TimeSpan"};function $F(e,{buffer:t,table:n}){const{settings:{tableNameCase:i},collections:o}=e,l=FF(n.name,i);""!==n.comment.trim()&&t.push(`// ${n.comment}`),t.push(`public class ${l} {`),Dr(o).collection("tableColumnEntities").selectByIds(n.columnIds).forEach((n=>{!function({settings:{columnNameCase:e,database:t}},{buffer:n,column:i}){const o=FF(i.name,e),l=jF(i.dataType,t);""!==i.comment.trim()&&n.push(`  // ${i.comment}`),n.push(`  public ${OF[l]} ${o.charAt(0).toLocaleUpperCase()+o.slice(1)} { get; set; }`)}(e,{buffer:t,column:n})})),t.push("}")}const EF={int:"Int",long:"Int",float:"Float",double:"Float",decimal:"Float",boolean:"Boolean",string:"String",lob:"String",date:"String",dateTime:"String",time:"String"};function UF(e,{buffer:t,table:n}){const{settings:{tableNameCase:i},collections:o}=e,l=FF(n.name,i);""!==n.comment.trim()&&t.push(`# ${n.comment}`),t.push(`type ${l} {`),Dr(o).collection("tableColumnEntities").selectByIds(n.columnIds).forEach((n=>{!function({settings:{columnNameCase:e,database:t}},{buffer:n,column:i}){const o=Zf(i.ui.keys,af.primaryKey),l=Zf(i.ui.keys,af.foreignKey);if(!o&&l)return;const r=FF(i.name,e);if(""!==i.comment.trim()&&n.push(`  # ${i.comment}`),Zf(i.options,rf.primaryKey)||l)n.push(`  ${r}: ID${Zf(i.options,rf.notNull)?"!":""}`);else{const e=jF(i.dataType,t);n.push(`  ${r}: ${EF[e]}${Zf(i.options,rf.notNull)?"!":""}`)}}(e,{buffer:t,column:n})})),function({doc:{relationshipIds:e},collections:t,settings:{tableNameCase:n,columnNameCase:i}},{buffer:o,table:l}){const r=Dr(t).collection("tableEntities"),a=Dr(t).collection("relationshipEntities").selectByIds(e),s=new Set,c=new Set;a.filter((e=>e.end.tableId===l.id)).forEach((e=>{const t=r.selectById(e.start.tableId);if(t){const e=FF(t.name,n),l=`  ${FF(t.name,i)}: ${e}`;if(s.has(l))return;""!==t.comment.trim()&&o.push(`  # ${t.comment}`),o.push(l),s.add(l)}})),a.filter((e=>e.start.tableId===l.id)).forEach((e=>{const t=r.selectById(e.end.tableId);if(t){const l=FF(t.name,n),r=FF(t.name,i),a=zF(e.relationshipType)?`  ${r}: ${l}`:JF(e.relationshipType)?`  ${FF(`${r}List`,i)}: [${l}!]!`:null;if(null===a||c.has(a))return;""!==t.comment.trim()&&o.push(`  # ${t.comment}`),o.push(a),c.add(a)}}))}(e,{buffer:t,table:n}),t.push("}")}const PF={int:"Integer",long:"Long",float:"Float",double:"Double",decimal:"BigDecimal",boolean:"Boolean",string:"String",lob:"String",date:"LocalDate",dateTime:"LocalDateTime",time:"LocalTime"};function AF(e,{buffer:t,table:n}){const{settings:{tableNameCase:i},collections:o}=e,l=FF(n.name,i);""!==n.comment.trim()&&t.push(`// ${n.comment}`),t.push("@Data"),t.push(`public class ${l} {`),Dr(o).collection("tableColumnEntities").selectByIds(n.columnIds).forEach((n=>{!function({settings:{columnNameCase:e,database:t}},{buffer:n,column:i}){const o=FF(i.name,e),l=jF(i.dataType,t);""!==i.comment.trim()&&n.push(`  // ${i.comment}`),n.push(`  private ${PF[l]} ${o};`)}(e,{buffer:t,column:n})})),t.push("}")}const BF={int:"Integer",long:"Long",float:"Float",double:"Double",decimal:"BigDecimal",boolean:"Boolean",string:"String",lob:"String",date:"LocalDate",dateTime:"LocalDateTime",time:"LocalTime"};function QF(e,{buffer:t,table:n}){const{settings:{tableNameCase:i,columnNameCase:o,database:l},doc:{relationshipIds:r},collections:a}=e,s=FF(n.name,i),c=Dr(a).collection("tableEntities"),u=Dr(a).collection("tableColumnEntities").selectByIds(n.columnIds),d=Dr(a).collection("relationshipEntities").selectByIds(r),p=Lz(u);if(p.length>1){t.push("@Data"),t.push(`public class ${FF(`${n.name}Id`,i)} implements Serializable {`);const e=[];p.forEach((n=>{if(Zf(n.ui.keys,af.primaryKey)&&Zf(n.ui.keys,af.foreignKey))c.selectByIds(d.filter((e=>e.end.columnIds.includes(n.id))).map((e=>e.start.tableId))).forEach((t=>{e.some((e=>e.id===t.id))||e.push(t)}));else{const e=FF(n.name,o),i=jF(n.dataType,l);t.push(`  private ${BF[i]} ${e};`)}})),e.forEach((e=>{t.push(`  private ${FF(e.name,i)} ${FF(e.name,o)};`)})),t.push("}")}""!==n.comment.trim()&&t.push(`// ${n.comment}`),t.push("@Data"),t.push("@Entity"),p.length>1&&t.push(`@IdClass(${FF(`${n.name}Id`,i)}.class)`),t.push(`public class ${s} {`),u.forEach((n=>{!function({settings:{columnNameCase:e,database:t}},{buffer:n,column:i}){const o=Zf(i.ui.keys,af.primaryKey),l=Zf(i.ui.keys,af.foreignKey);if(!o&&l||o&&l)return;const r=FF(i.name,e),a=jF(i.dataType,t);""!==i.comment.trim()&&n.push(`  // ${i.comment}`),Zf(i.options,rf.primaryKey)?(n.push("  @Id"),Zf(i.options,rf.autoIncrement)&&n.push("  @GeneratedValue")):Zf(i.options,rf.notNull)&&n.push("  @Column(nullable = false)"),"lob"===a&&n.push("  @Lob"),n.push(`  private ${BF[a]} ${r};`)}(e,{buffer:t,column:n})})),function({doc:{relationshipIds:e},collections:t,settings:{tableNameCase:n,columnNameCase:i}},{buffer:o,table:l}){const r=Dr(t).collection("tableEntities"),a=Dr(t).collection("tableColumnEntities"),s=Dr(t).collection("relationshipEntities").selectByIds(e);s.filter((e=>e.end.tableId===l.id)).forEach((e=>{const t=r.selectById(e.start.tableId),l=a.selectByIds(e.end.columnIds);if(t&&0!==l.length){const r=FF(t.name,n),a=FF(t.name,i);""!==t.comment.trim()&&o.push(`  // ${t.comment}`),Rz(l)&&o.push("  @Id"),zF(e.relationshipType)?o.push("  @OneToOne"):JF(e.relationshipType)&&o.push("  @ManyToOne"),l.length>1?(o.push("  @JoinColumns(value = {"),l.forEach(((e,t)=>{o.push(`    @JoinColumn(name = "${FF(e.name,_b.snakeCase)}")${l.length-1>t?",":""}`)})),o.push("  })")):o.push(`  @JoinColumn(name = "${FF(l[0].name,_b.snakeCase)}")`),o.push(`  private ${r} ${a};`)}})),s.filter((e=>e.start.tableId===l.id)).forEach((e=>{const t=r.selectById(e.end.tableId);if(t){const r=FF(t.name,n),a=FF(t.name,i);""!==t.comment.trim()&&o.push(`  // ${t.comment}`),zF(e.relationshipType)?(o.push(`  @OneToOne(mappedBy = "${FF(l.name,i)}")`),o.push(`  private ${r} ${a};`)):JF(e.relationshipType)&&(o.push(`  @OneToMany(mappedBy = "${FF(l.name,i)}")`),o.push(`  private List<${r}> ${FF(`${a}List`,i)} = new ArrayList<>();`))}}))}(e,{buffer:t,table:n}),t.push("}")}const DF={int:"Int",long:"Long",float:"Float",double:"Double",decimal:"BigDecimal",boolean:"Boolean",string:"String",lob:"String",date:"LocalDate",dateTime:"LocalDateTime",time:"LocalTime"};function _F(e,{buffer:t,table:n}){const{settings:{tableNameCase:i},collections:o}=e,l=FF(n.name,i);""!==n.comment.trim()&&t.push(`// ${n.comment}`),t.push(`class ${l} {`),Dr(o).collection("tableColumnEntities").selectByIds(n.columnIds).forEach((n=>{!function({settings:{columnNameCase:e,database:t}},{buffer:n,column:i}){const o=FF(i.name,e),l=jF(i.dataType,t);""!==i.comment.trim()&&n.push(`  // ${i.comment}`),Zf(i.options,rf.notNull)&&"date"!==l&&"dateTime"!==l&&"time"!==l?n.push(`  var ${o}: ${DF[l]} = ${function(e){switch(e){case"int":case"long":return 0;case"float":return"0.0f";case"double":return"0.0";case"boolean":return!1;case"string":case"lob":return'""';case"decimal":return"BigDecimal.ZERO";case"date":case"dateTime":case"time":return null}}(l)}`):n.push(`  var ${o}: ${DF[l]}? = null`)}(e,{buffer:t,column:n})})),t.push("}")}const qF={int:"Int",long:"Long",float:"Float",double:"Double",decimal:"BigDecimal",boolean:"Boolean",string:"String",lob:"String",date:"LocalDate",dateTime:"LocalDateTime",time:"LocalTime"};function eO(e,{buffer:t,table:n}){const{settings:{tableNameCase:i},collections:o}=e,l=FF(n.name,i);""!==n.comment.trim()&&t.push(`// ${n.comment}`),t.push("@Data"),t.push(`case class ${l}(`),Dr(o).collection("tableColumnEntities").selectByIds(n.columnIds).forEach(((n,i,o)=>{let l=!0;i===o.length-1&&(l=!1),function({settings:{columnNameCase:e,database:t}},{buffer:n,column:i},o){const l=FF(i.name,e),r=jF(i.dataType,t);""!==i.comment.trim()&&n.push(` // ${i.comment}`),n.push(` ${l}: ${qF[r]}${o?",":""}`)}(e,{buffer:t,column:n},l)})),t.push(")")}const tO={int:"number",long:"number",float:"number",double:"number",decimal:"number",boolean:"boolean",string:"string",lob:"string",date:"string",dateTime:"string",time:"string"};function nO(e,{buffer:t,table:n}){const{settings:{tableNameCase:i},collections:o}=e,l=FF(n.name,i);""!==n.comment.trim()&&t.push(`// ${n.comment}`),t.push(`export interface ${l} {`),Dr(o).collection("tableColumnEntities").selectByIds(n.columnIds).forEach((n=>{!function({settings:{columnNameCase:e,database:t}},{buffer:n,column:i}){const o=FF(i.name,e),l=jF(i.dataType,t);""!==i.comment.trim()&&n.push(`  // ${i.comment}`),n.push(`  ${o}: ${tO[l]}${Zf(i.options,rf.notNull)?"":" | null"};`)}(e,{buffer:t,column:n})})),t.push("}")}function iO(e){const{settings:{language:t}}=e;switch(t){case Qb.GraphQL:return function(e){const{doc:{tableIds:t},collections:n}=e,i=[""];return Dr(n).collection("tableEntities").selectByIds(t).sort(Nz).forEach((t=>{UF(e,{buffer:i,table:t}),i.push("")})),i.join("\n")}(e);case Qb.JPA:return function(e){const{doc:{tableIds:t},collections:n}=e,i=[""];return Dr(n).collection("tableEntities").selectByIds(t).sort(Nz).forEach((t=>{QF(e,{buffer:i,table:t}),i.push("")})),i.join("\n")}(e);case Qb.TypeScript:return function(e){const{doc:{tableIds:t},collections:n}=e,i=[""];return Dr(n).collection("tableEntities").selectByIds(t).sort(Nz).forEach((t=>{nO(e,{buffer:i,table:t}),i.push("")})),i.join("\n")}(e);case Qb.csharp:return function(e){const{doc:{tableIds:t},collections:n}=e,i=[""];return Dr(n).collection("tableEntities").selectByIds(t).sort(Nz).forEach((t=>{$F(e,{buffer:i,table:t}),i.push("")})),i.join("\n")}(e);case Qb.Java:return function(e){const{doc:{tableIds:t},collections:n}=e,i=[""];return Dr(n).collection("tableEntities").selectByIds(t).sort(Nz).forEach((t=>{AF(e,{buffer:i,table:t}),i.push("")})),i.join("\n")}(e);case Qb.Kotlin:return function(e){const{doc:{tableIds:t},collections:n}=e,i=[""];return Dr(n).collection("tableEntities").selectByIds(t).sort(Nz).forEach((t=>{_F(e,{buffer:i,table:t}),i.push("")})),i.join("\n")}(e);case Qb.Scala:return function(e){const{doc:{tableIds:t},collections:n}=e,i=[""];return Dr(n).collection("tableEntities").selectByIds(t).sort(Nz).forEach((t=>{eO(e,{buffer:i,table:t}),i.push("")})),i.join("\n")}(e)}return""}const oO=Qh`
  position: relative;
  width: 100%;
  height: 100%;
  overflow: hidden;
  background-color: var(--canvas-background);
`,lO=jl(["language","tableNameCase","columnNameCase"]),rO=(e,t)=>{const n=yL(t),{addUnsubscribe:i}=WL(),o=tJ(t),l=Bs({code:""}),r=()=>{const{store:t}=n.value;if(e.tableId){const{collections:n}=t.state,i=Dr(n).collection("tableEntities").selectById(e.tableId);i&&(l.code=function(e,t){const n=[""],{settings:{language:i}}=e;switch(i){case Qb.GraphQL:UF(e,{buffer:n,table:t}),n.push("");break;case Qb.JPA:QF(e,{buffer:n,table:t}),n.push("");break;case Qb.TypeScript:nO(e,{buffer:n,table:t}),n.push("");break;case Qb.csharp:$F(e,{buffer:n,table:t}),n.push("");break;case Qb.Java:AF(e,{buffer:n,table:t}),n.push("");break;case Qb.Kotlin:_F(e,{buffer:n,table:t}),n.push("");break;case Qb.Scala:eO(e,{buffer:n,table:t}),n.push("")}return n.join("\n")}(t.state,i))}else l.code=iO(t.state)},a=()=>{const{emitter:e}=n.value;MF(l.code).then((()=>{e.emit(XR({close:zI(2e3),message:Ch`<${Aw} title="Copied!" />`}))}))},s=()=>{o.state.show=!1};return Ys((()=>{const{store:t}=n.value,{settings:o}=t.state;r(),i(Qs(o).subscribe((e=>{lO(e)&&r()})),Qs(e).subscribe((e=>{"tableId"===e&&r()})))})),()=>{const{store:t}=n.value,{settings:{language:i}}=t.state,r=KF[i];return Ch`
      <div
        class=${oO}
        @contextmenu=${o.onContextmenu}
        @mousedown=${o.onMousedown}
      >
        <${NF}
          lang=${r}
          theme=${e.isDarkMode?"dark":"light"}
          value=${l.code}
          .onCopy=${a}
        />
        ${o.state.show?Ch`
              <${VF} .onClose=${s} />
            `:null}
      </div>
    `}},aO=[{name:"SingleQuote",value:ef.singleQuote},{name:"DoubleQuote",value:ef.doubleQuote},{name:"Backtick",value:ef.backtick},{name:"None",value:ef.none}];const sO=(e,t)=>{const n=yL(t),i=Ch`<${JY} name="chevron-right" size=${14} />`,{addUnsubscribe:o}=WL();return Ts((()=>{const{shortcut$:t}=n.value;o(t.subscribe((({type:t})=>{t===nL.stop&&e.onClose()})))})),()=>Ch`
    <${aJ}
      children=${Ch`
        <${sJ}
          children=${Ch`
            <${cJ}
              icon=${Ch`
                <${JY} prefix="mdi" name="database" size=${14} />
              `}
              name="Database"
              right=${i}
            />
          `}
          subChildren=${Ch`${yJ(n.value).map((e=>Ch`
              <${sJ}
                .onClick=${e.onClick}
                children=${Ch`
                  <${cJ}
                    icon=${e.checked?Ch`<${JY} name="check" size=${14} />`:null}
                    name=${e.name}
                  />
                `}
              />
            `))}`}
        />
        <${sJ}
          children=${Ch`
            <${cJ}
              icon=${Ch`
                <${JY} prefix="mdi" name="code-brackets" size=${14} />
              `}
              name="Bracket"
              right=${i}
            />
          `}
          subChildren=${Ch`${function({store:e}){const{settings:t}=e.state;return aO.map((n=>({checked:n.value===t.bracketType,name:n.name,onClick:()=>{e.dispatch(oZ({value:n.value}))}})))}(n.value).map((e=>Ch`
              <${sJ}
                .onClick=${e.onClick}
                children=${Ch`
                  <${cJ}
                    icon=${e.checked?Ch`<${JY} name="check" size=${14} />`:null}
                    name=${e.name}
                  />
                `}
              />
            `))}`}
        />
      `}
    />
  `},cO=Qh`
  position: relative;
  width: 100%;
  height: 100%;
  overflow: hidden;
  background-color: var(--canvas-background);
`,uO=jl(["database","bracketType"]),dO=(e,t)=>{const n=yL(t),{addUnsubscribe:i}=WL(),o=tJ(t),l=Bs({sql:""}),r=()=>{const{store:t}=n.value;if(e.tableId){const{collections:n}=t.state,i=Dr(n).collection("tableEntities").selectById(e.tableId);i&&(l.sql=function(e,t){const{settings:n,doc:{indexIds:i},collections:o}=e,l=[""],r=n.database,a=[],s=Dr(o).collection("indexEntities").selectByIds(i).filter((e=>e.tableId===t.id));switch(r){case Ab.MariaDB:pj(e,{buffer:l,table:t}),l.push(""),s.forEach((t=>{bj(e,{index:t,buffer:l,indexNames:a}),l.push("")}));break;case Ab.MSSQL:yj(e,{buffer:l,table:t}),l.push(""),s.forEach((t=>{Zj(e,{index:t,buffer:l,indexNames:a}),l.push("")}));break;case Ab.MySQL:xj(e,{buffer:l,table:t}),l.push(""),s.forEach((t=>{Ij(e,{index:t,buffer:l,indexNames:a}),l.push("")}));break;case Ab.Oracle:kj(e,{buffer:l,table:t}),l.push(""),s.forEach((t=>{Cj(e,{index:t,buffer:l,indexNames:a}),l.push("")}));break;case Ab.PostgreSQL:Rj(e,{buffer:l,table:t}),l.push(""),s.forEach((t=>{Yj(e,{index:t,buffer:l,indexNames:a}),l.push("")}));break;case Ab.SQLite:Tj(e,{buffer:l,table:t}),l.push(""),s.forEach((t=>{Nj(e,{index:t,buffer:l,indexNames:a}),l.push("")}))}return l.join("\n")}(t.state,i))}else l.sql=Kj(t.state)},a=()=>{const{emitter:e}=n.value;MF(l.sql).then((()=>{e.emit(XR({close:zI(2e3),message:Ch`<${Aw} title="Copied!" />`}))}))},s=()=>{o.state.show=!1};return Ys((()=>{const{store:t}=n.value,{settings:o}=t.state;r(),i(Qs(o).subscribe((e=>{uO(e)&&r()})),Qs(e).subscribe((e=>{"tableId"===e&&r()})))})),()=>Ch`
    <div
      class=${cO}
      @contextmenu=${o.onContextmenu}
      @mousedown=${o.onMousedown}
    >
      <${NF}
        lang="sql"
        theme=${e.isDarkMode?"dark":"light"}
        value=${l.sql}
        .onCopy=${a}
      />
      ${o.state.show?Ch`<${sO} .onClose=${s} />`:null}
    </div>
  `},pO=Qh`
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 16px;

  &::after {
    content: '';
    position: absolute;
    inset: 0;
    background-color: rgba(0, 0, 0, 0.4);
  }
`,hO=Qh`
  display: flex;
  flex-direction: column;
  width: 100%;
  max-width: 900px;
  max-height: calc(100% - 32px);
  position: relative;
  z-index: 1;
  background-color: var(--context-menu-background);
  border: 1px solid var(--context-menu-border);
  border-radius: 6px;
  overflow: hidden;
`,mO=Qh`
  display: flex;
  flex-direction: column;
  width: 100%;
  overflow: auto;
  padding: 0 12px 12px 12px;
`,bO=Qh`
  display: flex;
  padding: 0 8px;
  min-height: 32px;
  overflow-x: auto;
`,fO=Qh`
  display: flex;
  max-width: 200px;
  height: 32px;
  padding: 0 12px;
  border-radius: 4px;
  cursor: default;
  align-items: center;

  &:hover {
    background-color: var(--context-menu-hover);
    color: var(--active);
    fill: var(--active);
  }

  &.selected {
    background-color: var(--context-menu-select);
    color: var(--active);
    fill: var(--active);
  }

  & > span {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
`,yO=Qh`
  display: flex;
  width: 100%;
  height: 100%;
  min-height: 450px;
`,gO=(e,t)=>{const n=yL(t),{addUnsubscribe:i}=WL(),o=Bs({tab:xF.Indexes}),l=()=>{const{store:e}=n.value;e.dispatch(ag({[Qw]:!1}))},r=e=>{const t=e.target;t&&!t.closest(".table-properties")&&l()},a=e=>{o.tab=e};return Ts((()=>{const{shortcut$:e}=n.value;i(e.subscribe((({type:e})=>{e===nL.stop&&l()})))})),()=>{const{store:t}=n.value,{collections:i}=t.state,{tableIds:l}=e,s=Dr(i).collection("tableEntities").selectByIds(l);return Ch`
      <div
        class=${pO}
        @contextmenu=${PL}
        @mousedown=${PL}
        @touchstart=${PL}
        @wheel=${PL}
        @click=${r}
      >
        <div class=${["table-properties",hO]}>
          <div class=${["scrollbar",bO]}>
            ${s.map((t=>Ch`
                <div
                  class=${[fO,{selected:t.id===e.tableId}]}
                  title=${t.name}
                  @click=${()=>e.onChange(t.id)}
                >
                  <span>${t.name.trim()?t.name:"unnamed"}</span>
                </div>
              `))}
          </div>
          <${GF}
            value=${o.tab}
            .onChange=${a}
          />
          <div class=${["scrollbar",mO]}>
            ${o.tab===xF.Indexes?Ch`
                  <div class=${yO}>
                    <${gF} tableId=${e.tableId} />
                  </div>
                `:o.tab===xF.SchemaSQL?Ch`
                    <div class=${yO}>
                      <${dO}
                        isDarkMode=${e.isDarkMode}
                        tableId=${e.tableId}
                      />
                    </div>
                  `:o.tab===xF.GeneratorCode?Ch`
                      <div class=${yO}>
                        <${rO}
                          isDarkMode=${e.isDarkMode}
                          tableId=${e.tableId}
                        />
                      </div>
                    `:null}
          </div>
        </div>
      </div>
    `}},vO=Qh`
  display: flex;
  width: 100%;
  height: 12px;
  position: relative;
  align-items: center;
  user-select: none;
  touch-action: none;
`,ZO=Qh`
  width: 100%;
  height: 8px;
  background-color: var(--gray-color-3);
  box-shadow: inset 0 0 0 1px var(--gray-color-6);
  overflow: hidden;
  position: relative;
  border-radius: 9999px;
`,xO=Qh`
  position: absolute;
  border-radius: inherit;
  background-color: var(--accent-color-9);
  box-shadow: inset 0 0 0 1px var(--gray-color-6);
  top: 0;
  width: 100%;
  height: 100%;
`,XO=Qh`
  position: absolute;
  width: 12px;
  height: 12px;
  background-color: white;
  border-radius: 9999px;

  &::before {
    content: '';
    position: absolute;
    width: calc(12px * 3);
    height: calc(12px * 3);
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
  }

  &::after {
    content: '';
    position: absolute;
    background-color: white;
    border-radius: 9999px;
    inset: calc(-0.25 * 8px);
    box-shadow: inset 0 0 0 1px var(--gray-color-6);
    cursor: pointer;
  }
`,GO=(e,t)=>{const n=tp(),i=t=>{const i=n.value.getBoundingClientRect(),o=t-i.x,l=Hl(o/i.width,2),r=e.max-e.min;return ir(e.min,e.max)(Hl(r*l)+e.min)},o=({event:t,x:n})=>{"mousemove"===t.type&&t.preventDefault();const o=i(n);o!==e.value&&e.onChange(o)},l=e=>{bY.subscribe(o)},r=t=>{const n=i(t.clientX);n!==e.value&&e.onChange(n),l()};return()=>{const t=e.max-e.min,i=e.value-e.min,o=Hl(i/t,2),a=100*o,s=100-a+"%",c=`calc(${a}% - ${12*o}px)`;return Ch`
      <div class=${vO} ${np(n)} @mousedown=${r}>
        <div class=${ZO}>
          <div class=${xO} style=${{right:s}}></div>
        </div>
        <div
          class=${XO}
          style=${{left:c}}
          @mousedown=${l}
        ></div>
      </div>
    `}},IO=Qh`
  display: flex;
  width: 100%;
  height: 100%;
  overflow: hidden;
  position: absolute;
  top: 0;
  left: 0;
  background-color: var(--canvas-boundary-background);
`,WO=Qh`
  display: flex;
  width: 100%;
  height: 100%;
  overflow: hidden;
  position: relative;
  pointer-events: none;
`,kO=Qh`
  padding: 0 15px;
  display: flex;
  width: 100%;
  height: 30px;
  overflow: hidden;
  position: absolute;
  left: 0;
  bottom: 0;
  background-color: var(--canvas-boundary-background);
  align-items: center;

  & > button:last-child {
    margin-left: 8px;
  }
`,VO=Qh`
  width: 24px;
  height: 100%;
`,CO=(e,t)=>{const n=tp(),i=tp(),o=e.app.value,l=bL({toWidth:o.toWidth},{getHistory:o.store.history.clone}),{store:r}=l,{history:a}=r,{addUnsubscribe:s}=WL(),c=_s(t,fL,l);s((()=>{c.destroy()}));const u=()=>({...o.store.state.editor.viewport}),d=Bs({cursor:a.cursor});r.dispatchSync(fG(Ra(o.store.state)),Oy(u()));const p=()=>{e.onClose()},h=()=>{e.onChange(d.cursor),p()},m=e=>{d.cursor=e,(e=>{let t=0;for(;a.cursor!==e&&t<=tR;)a.cursor<e?a.redo():a.undo(),t++})(e)};return Ts((()=>{s(o.shortcut$.subscribe((({type:e})=>{e===nL.stop&&p()})),Qs(o.store.state.editor.viewport).subscribe((()=>{l.store.dispatch(Oy(u()))})),(()=>{gL(l)}))})),()=>Ch`
    <div class=${IO}>
      <div class=${WO} ${np(n)}>
        <${Ww} root=${n} canvas=${i} grabMove=${!0} />
        <${ww} />
      </div>
    </div>
    <div class=${kO}>
      <${GO}
        min=${-1}
        max=${a.size-1}
        value=${d.cursor}
        .onChange=${m}
      />
      <div class=${VO}></div>
      <${Fw} variant="soft" size="1" text="Apply" .onClick=${h} />
      <${Fw} size="1" text="Cancel" .onClick=${p} />
    </div>
  `};var SO={exports:{}};SO.exports=function(){function e(e,o){var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"rgba(0, 0, 0, 0)";return Array.isArray(e)&&(e={r:e[0],g:e[1],b:e[2],a:e[3]}),"hex"==o?t(e):"rgb"==o?n(e,l):"hsl"==o?i(e):e}function t(e){Array.isArray(e)&&(e={r:e[0],g:e[1],b:e[2],a:e[3]});var t=e.r.toString(16);e.r<16&&(t="0"+t);var n=e.g.toString(16);e.g<16&&(n="0"+n);var i=e.b.toString(16);e.b<16&&(i="0"+i);var o="";if(e.a<1){var l=Math.floor(255*e.a);o=l.toString(16),l<16&&(o="0"+o)}return"#"+t+n+i+o}function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"rgba(0, 0, 0, 0)";if(Array.isArray(e)&&(e={r:e[0],g:e[1],b:e[2],a:e[3]}),!(typeof e>"u"))return 1==e.a||typeof e.a>"u"?isNaN(e.r)?t:"rgb("+e.r+","+e.g+","+e.b+")":"rgba("+e.r+","+e.g+","+e.b+","+e.a+")"}function i(e){return Array.isArray(e)&&(e={r:e[0],g:e[1],b:e[2],a:e[3]}),1==e.a||typeof e.a>"u"?"hsl("+e.h+","+e.s+"%,"+e.l+"%)":"hsla("+e.h+","+e.s+"%,"+e.l+"%,"+e.a+")"}var o={format:e,rgb:n,hsl:i,hex:t};function l(e,t){return t=typeof t>"u"?1:t,Math.round(e*t)/t}function r(e){return e*Math.PI/180}function a(e){var t=180*e/Math.PI;return t<0&&(t=360+t),t}function s(e,t){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0)+t*Math.cos(r(e))}function c(e,t){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0)+t*Math.sin(r(e))}function u(e,t){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return{x:s(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),y:c(e,t,n)}}function d(e,t){return a(Math.atan2(t,e))}var p={round:l,radianToDegree:a,degreeToRadian:r,getXInCircle:s,getYInCircle:c,caculateAngle:d},h={aliceblue:"rgb(240, 248, 255)",antiquewhite:"rgb(250, 235, 215)",aqua:"rgb(0, 255, 255)",aquamarine:"rgb(127, 255, 212)",azure:"rgb(240, 255, 255)",beige:"rgb(245, 245, 220)",bisque:"rgb(255, 228, 196)",black:"rgb(0, 0, 0)",blanchedalmond:"rgb(255, 235, 205)",blue:"rgb(0, 0, 255)",blueviolet:"rgb(138, 43, 226)",brown:"rgb(165, 42, 42)",burlywood:"rgb(222, 184, 135)",cadetblue:"rgb(95, 158, 160)",chartreuse:"rgb(127, 255, 0)",chocolate:"rgb(210, 105, 30)",coral:"rgb(255, 127, 80)",cornflowerblue:"rgb(100, 149, 237)",cornsilk:"rgb(255, 248, 220)",crimson:"rgb(237, 20, 61)",cyan:"rgb(0, 255, 255)",darkblue:"rgb(0, 0, 139)",darkcyan:"rgb(0, 139, 139)",darkgoldenrod:"rgb(184, 134, 11)",darkgray:"rgb(169, 169, 169)",darkgrey:"rgb(169, 169, 169)",darkgreen:"rgb(0, 100, 0)",darkkhaki:"rgb(189, 183, 107)",darkmagenta:"rgb(139, 0, 139)",darkolivegreen:"rgb(85, 107, 47)",darkorange:"rgb(255, 140, 0)",darkorchid:"rgb(153, 50, 204)",darkred:"rgb(139, 0, 0)",darksalmon:"rgb(233, 150, 122)",darkseagreen:"rgb(143, 188, 143)",darkslateblue:"rgb(72, 61, 139)",darkslategray:"rgb(47, 79, 79)",darkslategrey:"rgb(47, 79, 79)",darkturquoise:"rgb(0, 206, 209)",darkviolet:"rgb(148, 0, 211)",deeppink:"rgb(255, 20, 147)",deepskyblue:"rgb(0, 191, 255)",dimgray:"rgb(105, 105, 105)",dimgrey:"rgb(105, 105, 105)",dodgerblue:"rgb(30, 144, 255)",firebrick:"rgb(178, 34, 34)",floralwhite:"rgb(255, 250, 240)",forestgreen:"rgb(34, 139, 34)",fuchsia:"rgb(255, 0, 255)",gainsboro:"rgb(220, 220, 220)",ghostwhite:"rgb(248, 248, 255)",gold:"rgb(255, 215, 0)",goldenrod:"rgb(218, 165, 32)",gray:"rgb(128, 128, 128)",grey:"rgb(128, 128, 128)",green:"rgb(0, 128, 0)",greenyellow:"rgb(173, 255, 47)",honeydew:"rgb(240, 255, 240)",hotpink:"rgb(255, 105, 180)",indianred:"rgb(205, 92, 92)",indigo:"rgb(75, 0, 130)",ivory:"rgb(255, 255, 240)",khaki:"rgb(240, 230, 140)",lavender:"rgb(230, 230, 250)",lavenderblush:"rgb(255, 240, 245)",lawngreen:"rgb(124, 252, 0)",lemonchiffon:"rgb(255, 250, 205)",lightblue:"rgb(173, 216, 230)",lightcoral:"rgb(240, 128, 128)",lightcyan:"rgb(224, 255, 255)",lightgoldenrodyellow:"rgb(250, 250, 210)",lightgreen:"rgb(144, 238, 144)",lightgray:"rgb(211, 211, 211)",lightgrey:"rgb(211, 211, 211)",lightpink:"rgb(255, 182, 193)",lightsalmon:"rgb(255, 160, 122)",lightseagreen:"rgb(32, 178, 170)",lightskyblue:"rgb(135, 206, 250)",lightslategray:"rgb(119, 136, 153)",lightslategrey:"rgb(119, 136, 153)",lightsteelblue:"rgb(176, 196, 222)",lightyellow:"rgb(255, 255, 224)",lime:"rgb(0, 255, 0)",limegreen:"rgb(50, 205, 50)",linen:"rgb(250, 240, 230)",magenta:"rgb(255, 0, 255)",maroon:"rgb(128, 0, 0)",mediumaquamarine:"rgb(102, 205, 170)",mediumblue:"rgb(0, 0, 205)",mediumorchid:"rgb(186, 85, 211)",mediumpurple:"rgb(147, 112, 219)",mediumseagreen:"rgb(60, 179, 113)",mediumslateblue:"rgb(123, 104, 238)",mediumspringgreen:"rgb(0, 250, 154)",mediumturquoise:"rgb(72, 209, 204)",mediumvioletred:"rgb(199, 21, 133)",midnightblue:"rgb(25, 25, 112)",mintcream:"rgb(245, 255, 250)",mistyrose:"rgb(255, 228, 225)",moccasin:"rgb(255, 228, 181)",navajowhite:"rgb(255, 222, 173)",navy:"rgb(0, 0, 128)",oldlace:"rgb(253, 245, 230)",olive:"rgb(128, 128, 0)",olivedrab:"rgb(107, 142, 35)",orange:"rgb(255, 165, 0)",orangered:"rgb(255, 69, 0)",orchid:"rgb(218, 112, 214)",palegoldenrod:"rgb(238, 232, 170)",palegreen:"rgb(152, 251, 152)",paleturquoise:"rgb(175, 238, 238)",palevioletred:"rgb(219, 112, 147)",papayawhip:"rgb(255, 239, 213)",peachpuff:"rgb(255, 218, 185)",peru:"rgb(205, 133, 63)",pink:"rgb(255, 192, 203)",plum:"rgb(221, 160, 221)",powderblue:"rgb(176, 224, 230)",purple:"rgb(128, 0, 128)",rebeccapurple:"rgb(102, 51, 153)",red:"rgb(255, 0, 0)",rosybrown:"rgb(188, 143, 143)",royalblue:"rgb(65, 105, 225)",saddlebrown:"rgb(139, 69, 19)",salmon:"rgb(250, 128, 114)",sandybrown:"rgb(244, 164, 96)",seagreen:"rgb(46, 139, 87)",seashell:"rgb(255, 245, 238)",sienna:"rgb(160, 82, 45)",silver:"rgb(192, 192, 192)",skyblue:"rgb(135, 206, 235)",slateblue:"rgb(106, 90, 205)",slategray:"rgb(112, 128, 144)",slategrey:"rgb(112, 128, 144)",snow:"rgb(255, 250, 250)",springgreen:"rgb(0, 255, 127)",steelblue:"rgb(70, 130, 180)",tan:"rgb(210, 180, 140)",teal:"rgb(0, 128, 128)",thistle:"rgb(216, 191, 216)",tomato:"rgb(255, 99, 71)",turquoise:"rgb(64, 224, 208)",violet:"rgb(238, 130, 238)",wheat:"rgb(245, 222, 179)",white:"rgb(255, 255, 255)",whitesmoke:"rgb(245, 245, 245)",yellow:"rgb(255, 255, 0)",yellowgreen:"rgb(154, 205, 50)",transparent:"rgba(0, 0, 0, 0)"};function m(e){return!!h[e]}function b(e){return h[e]}var f={isColorName:m,getColorByName:b};function y(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function g(e,t,n){if(1==arguments.length){var i=arguments[0];e=i.h,t=i.s,n=i.l}var o=v(e,t,n);return j(o.r,o.g,o.b)}function v(e,t,n){if(1==arguments.length){var i=arguments[0];e=i.h,t=i.s,n=i.l}var o,r,a;if(e/=360,n/=100,0==(t/=100))o=r=a=n;else{var s=n<.5?n*(1+t):n+t-n*t,c=2*n-s;o=y(c,s,e+1/3),r=y(c,s,e),a=y(c,s,e-1/3)}return{r:l(255*o),g:l(255*r),b:l(255*a)}}var Z={HUEtoRGB:y,HSLtoHSV:g,HSLtoRGB:v},x=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},X=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),G=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},W=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var l=Object.getPrototypeOf(t);return null===l?void 0:e(l,n,i)}if("value"in o)return o.value;var r=o.get;return void 0===r?void 0:r.call(i)},k=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},V=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},C=function(){function e(e,t){var n=[],i=!0,o=!1,l=void 0;try{for(var r,a=e[Symbol.iterator]();!(i=(r=a.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(e){o=!0,l=e}finally{try{!i&&a.return&&a.return()}finally{if(o)throw l}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),S=function(e){return Array.isArray(e)?e:Array.from(e)},R=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},L=/(#(?:[\da-f]{3}){1,2}|#(?:[\da-f]{8})|rgb\((?:\s*\d{1,3},\s*){2}\d{1,3}\s*\)|rgba\((?:\s*\d{1,3},\s*){3}\d*\.?\d+\s*\)|hsl\(\s*\d{1,3}(?:,\s*\d{1,3}%){2}\s*\)|hsla\(\s*\d{1,3}(?:,\s*\d{1,3}%){2},\s*\d*\.?\d+\s*\)|([\w_\-]+))/gi,Y=",";function T(e){var t=e.match(L),n=[];if(!t)return n;for(var i=0,o=t.length;i<o;i++)if(t[i].indexOf("#")>-1||t[i].indexOf("rgb")>-1||t[i].indexOf("hsl")>-1)n.push({color:t[i]});else{var l=f.getColorByName(t[i]);l&&n.push({color:t[i],nameColor:l})}var r={next:0};return n.forEach((function(t){var n=e.indexOf(t.color,r.next);t.startIndex=n,t.endIndex=n+t.color.length,r.next=t.endIndex})),n}function w(e){var t=T(e);return t.forEach((function(t,n){e=e.replace(t.color,"@"+n)})),{str:e,matches:t}}function N(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",",n=w(e);return n.str.split(t).map((function(e,t){return e=H(e),n.matches[t]&&(e=e.replace("@"+t,n.matches[t].color)),e}))}function K(e,t){return t.forEach((function(t,n){e=e.replace("@"+n,t.color)})),e}function H(e){return e.replace(/^\s+|\s+$/g,"")}function M(e){if("string"==typeof e){if(f.isColorName(e)&&(e=f.getColorByName(e)),e.indexOf("rgb(")>-1){for(var t=0,n=(o=e.replace("rgb(","").replace(")","").split(",")).length;t<n;t++)o[t]=parseInt(H(o[t]),10);var i={type:"rgb",r:o[0],g:o[1],b:o[2],a:1};return i=Object.assign(i,O(i))}if(e.indexOf("rgba(")>-1){for(t=0,n=(o=e.replace("rgba(","").replace(")","").split(",")).length;t<n;t++)o[t]=n-1==t?parseFloat(H(o[t])):parseInt(H(o[t]),10);return i={type:"rgb",r:o[0],g:o[1],b:o[2],a:o[3]},i=Object.assign(i,O(i))}if(e.indexOf("hsl(")>-1){for(t=0,n=(o=e.replace("hsl(","").replace(")","").split(",")).length;t<n;t++)o[t]=parseFloat(H(o[t]));return i={type:"hsl",h:o[0],s:o[1],l:o[2],a:1},i=Object.assign(i,v(i))}if(e.indexOf("hsla(")>-1){for(t=0,n=(o=e.replace("hsla(","").replace(")","").split(",")).length;t<n;t++)o[t]=n-1==t?parseFloat(H(o[t])):parseInt(H(o[t]),10);return i={type:"hsl",h:o[0],s:o[1],l:o[2],a:o[3]},i=Object.assign(i,v(i))}if(0==e.indexOf("#")){var o=[],l=1;if(3==(e=e.replace("#","")).length)for(t=0,n=e.length;t<n;t++){var r=e.substr(t,1);o.push(parseInt(r+r,16))}else if(8===e.length){for(t=0,n=e.length;t<n;t+=2)o.push(parseInt(e.substr(t,2),16));l=o.pop()/255}else for(t=0,n=e.length;t<n;t+=2)o.push(parseInt(e.substr(t,2),16));return i={type:"hex",r:o[0],g:o[1],b:o[2],a:l},i=Object.assign(i,O(i))}}else if("number"==typeof e){if(0<=e&&e<=16777215)return i={type:"hex",r:(16711680&e)>>16,g:(65280&e)>>8,b:(255&e)>>0,a:1},i=Object.assign(i,O(i));if(0<=e&&e<=4294967295)return i={type:"hex",r:(4278190080&e)>>24,g:(16711680&e)>>16,b:(65280&e)>>8,a:(255&e)/255},i=Object.assign(i,O(i))}return e}function z(e){"string"==typeof e&&(e=N(e));var t=(e=e.map((function(e){if("string"==typeof e){var t=w(e),n=H(t.str).split(" ");return n[1]?n[1].includes("%")?n[1]=parseFloat(n[1].replace(/%/,""))/100:n[1]=parseFloat(n[1]):n[1]="*",n[0]=K(n[0],t.matches),n}if(Array.isArray(e))return e[1]?"string"==typeof e[1]&&(e[1].includes("%")?e[1]=parseFloat(e[1].replace(/%/,""))/100:e[1]=+e[1]):e[1]="*",[].concat(R(e))}))).filter((function(e){return"*"===e[1]})).length;if(t>0){var n=(1-e.filter((function(e){return"*"!=e[1]&&1!=e[1]})).map((function(e){return e[1]})).reduce((function(e,t){return e+t}),0))/t;e.forEach((function(t,i){"*"==t[1]&&i>0&&(e.length-1==i||(t[1]=n))}))}return e}var J={matches:T,convertMatches:w,convertMatchesArray:N,reverseMatches:K,parse:M,parseGradient:z,trim:H,color_regexp:L,color_split:Y};function j(e,t,n){if(1==arguments.length){var i=arguments[0];e=i.r,t=i.g,n=i.b}var o=e/255,l=t/255,r=n/255,a=Math.max(o,l,r),s=a-Math.min(o,l,r),c=0;return 0==s?c=0:a==o?c=(l-r)/s%6*60:a==l?c=60*((r-o)/s+2):a==r&&(c=60*((o-l)/s+4)),c<0&&(c=360+c),{h:c,s:0==a?0:s/a,v:a}}function F(e,t,n){if(1==arguments.length){var i=arguments[0];e=i.r,t=i.g,n=i.b}var o=e/255,l=t/255,r=n/255,a=1-Math.max(o,l,r);return{c:(1-o-a)/(1-a),m:(1-l-a)/(1-a),y:(1-r-a)/(1-a),k:a}}function O(e,t,n){if(1==arguments.length){var i=arguments[0];e=i.r,t=i.g,n=i.b}e/=255,t/=255,n/=255;var o,r,a=Math.max(e,t,n),s=Math.min(e,t,n),c=(a+s)/2;if(a==s)o=r=0;else{var u=a-s;switch(r=c>.5?u/(2-a-s):u/(a+s),a){case e:o=(t-n)/u+(t<n?6:0);break;case t:o=(n-e)/u+2;break;case n:o=(e-t)/u+4}o/=6}return{h:l(360*o),s:l(100*r),l:l(100*c)}}function $(e,t,n){if(1==arguments.length){var i=arguments[0];e=i.r,t=i.g,n=i.b}return E((e+t+n)/3>90?0:255)}function E(e){return{r:e,g:e,b:e}}function U(e,t,n){if(1==arguments.length){var i=arguments[0];e=i.r,t=i.g,n=i.b}return E(Math.ceil((e+t+n)/3))}function P(e,t,n){if(1==arguments.length){var i=arguments[0];e=i.r,t=i.g,n=i.b}return E(B(e,t,n).y)}function A(e,t,n){return Math.ceil(.2126*e+.7152*t+.0722*n)}function B(e,t,n){if(1==arguments.length){var i=arguments[0];e=i.r,t=i.g,n=i.b}var o=A(e,t,n);return{y:o,cr:.713*(e-o),cb:.564*(n-o)}}function Q(e){return 100*(e>(arguments.length>1&&void 0!==arguments[1]?arguments[1]:.04045)?Math.pow((e+.055)/1.055,2.4):e/12.92)}function D(e,t,n){if(1==arguments.length){var i=arguments[0];e=i.r,t=i.g,n=i.b}var o=e/255,l=t/255,r=n/255;return{x:.4124*(o=Q(o))+.3576*(l=Q(l))+.1805*(r=Q(r)),y:.2126*o+.7152*l+.0722*r,z:.0193*o+.1192*l+.9505*r}}function _(e,t,n){if(1==arguments.length){var i=arguments[0];e=i.r,t=i.g,n=i.b}return XYZtoLAB(D(e,t,n))}var q={RGBtoCMYK:F,RGBtoGray:P,RGBtoHSL:O,RGBtoHSV:j,RGBtoLAB:_,RGBtoSimpleGray:U,RGBtoXYZ:D,RGBtoYCrCb:B,c:$,brightness:A,gray:E};function ee(e,t,n,i){if(1==arguments.length){var o=arguments[0];e=o.c,t=o.m,n=o.y,i=o.k}return{r:255*(1-e)*(1-i),g:255*(1-t)*(1-i),b:255*(1-n)*(1-i)}}var te={CMYKtoRGB:ee};function ne(e){return Math.pow(e,3)>.008856?Math.pow(e,3):(e-16/116)/7.787}function ie(e){return e>.0031308?1.055*Math.pow(e,1/2.4)-.055:12.92*e}function oe(e,t,n){if(1==arguments.length){var i=arguments[0];e=i.x,t=i.y,n=i.z}var o=e/100,r=t/100,a=n/100,s=3.2406*o+-1.5372*r+-.4986*a,c=-.9689*o+1.8758*r+.0415*a,u=.0557*o+-.204*r+1.057*a;return s=ie(s),c=ie(c),u=ie(u),{r:l(255*s),g:l(255*c),b:l(255*u)}}function le(e,t,n){if(1==arguments.length){var i=arguments[0];e=i.l,t=i.a,n=i.b}var o=(e+16)/116,l=t/500+o,r=o-n/200;return o=ne(o),{x:95.047*(l=ne(l)),y:100*o,z:108.883*(r=ne(r))}}function re(e,t,n){if(1==arguments.length){var i=arguments[0];e=i.l,t=i.a,n=i.b}return oe(le(e,t,n))}var ae={XYZtoRGB:oe,LABtoRGB:re,LABtoXYZ:le};function se(e,t,n){if(1==arguments.length){var i=arguments[0];e=i.h,t=i.s,n=i.v}var o=e,r=n;o>=360&&(o=0);var a=t*r,s=a*(1-Math.abs(o/60%2-1)),c=r-a,u=[];return 0<=o&&o<60?u=[a,s,0]:60<=o&&o<120?u=[s,a,0]:120<=o&&o<180?u=[0,a,s]:180<=o&&o<240?u=[0,s,a]:240<=o&&o<300?u=[s,0,a]:300<=o&&o<360&&(u=[a,0,s]),{r:l(255*(u[0]+c)),g:l(255*(u[1]+c)),b:l(255*(u[2]+c))}}function ce(e,t,n){if(1==arguments.length){var i=arguments[0];e=i.h,t=i.s,n=i.v}var o=se(e,t,n);return O(o.r,o.g,o.b)}var ue={HSVtoHSL:ce,HSVtoRGB:se};function de(e,t,n,i){if(1==arguments.length){var o=arguments[0];e=o.y,t=o.cr,n=o.cb,i=(i=o.bit)||0}var l=e+1.402*(t-i),r=e-.344*(n-i)-.714*(t-i),a=e+1.772*(n-i);return{r:Math.ceil(l),g:Math.ceil(r),b:Math.ceil(a)}}var pe={YCrCbtoRGB:de};function he(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"hex",r={r:l(t.r+(n.r-t.r)*i),g:l(t.g+(n.g-t.g)*i),b:l(t.b+(n.b-t.b)*i),a:l(t.a+(n.a-t.a)*i,100)};return e(r,r.a<1?"rgb":o)}function me(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if(!e)return[];"string"==typeof e&&(e=N(e));for(var n=(e=e||[]).length,i=[],o=0;o<n-1;o++)for(var l=0;l<t;l++)i.push(be(e[o],e[o+1],l/t));return i}function be(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"hex";return he(M(e),M(t),n,i)}function fe(e,t){return be(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5,arguments.length>3&&void 0!==arguments[3]?arguments[3]:"hex")}function ye(e){return e=M(e),(Math.round(299*e.r)+Math.round(587*e.g)+Math.round(114*e.b))/1e3}function ge(e){return ye(e)>=128?"black":"white"}function ve(e){for(var t=[],n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:10)-((e=z(e)).length-1),i=n,o=1,l=e.length;o<l;o++){var r=e[o-1][0],a=e[o][0],s=1==o?e[o][1]:e[o][1]-e[o-1][1],c=o==e.length-1?i:Math.floor(s*n);t=t.concat(me([r,a],c),[a]),i-=c}return t}function Ze(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"h",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:9,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"rgb",l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:100,s=j(M(t)),c=(r-l)*a/i,u=[],d=1;d<=i;d++)s[n]=Math.abs((a-c*d)/a),u.push(e(se(s),o));return u}function xe(e){return Ze(e,"h",arguments.length>1&&void 0!==arguments[1]?arguments[1]:9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"rgb",arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,arguments.length>4&&void 0!==arguments[4]?arguments[4]:360,1)}function Xe(e){return Ze(e,"s",arguments.length>1&&void 0!==arguments[1]?arguments[1]:9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"rgb",arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,100)}function Ge(e){return Ze(e,"v",arguments.length>1&&void 0!==arguments[1]?arguments[1]:9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"rgb",arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,100)}me.parula=function(e){return me(["#352a87","#0f5cdd","#00b5a6","#ffc337","#fdff00"],e)},me.jet=function(e){return me(["#00008f","#0020ff","#00ffff","#51ff77","#fdff00","#ff0000","#800000"],e)},me.hsv=function(e){return me(["#ff0000","#ffff00","#00ff00","#00ffff","#0000ff","#ff00ff","#ff0000"],e)},me.hot=function(e){return me(["#0b0000","#ff0000","#ffff00","#ffffff"],e)},me.pink=function(e){return me(["#1e0000","#bd7b7b","#e7e5b2","#ffffff"],e)},me.bone=function(e){return me(["#000000","#4a4a68","#a6c6c6","#ffffff"],e)},me.copper=function(e){return me(["#000000","#3d2618","#9d623e","#ffa167","#ffc77f"],e)};var Ie={interpolateRGB:he,blend:be,mix:fe,scale:me,contrast:ye,contrastColor:ge,gradient:ve,scaleHSV:Ze,scaleH:xe,scaleS:Xe,scaleV:Ge};function We(e,t){if(e.length!==t.length)return!1;for(var n=0,i=e.length;n<i;++n)if(e[n]!==t[n])return!1;return!0}function ke(e,t){for(var n=0,i=0,o=e.length;i<o;i++)n+=Math.pow(t[i]-e[i],2);return Math.sqrt(n)}function Ve(e,t){for(var n=0,i=0,o=e.length;i<o;i++)n+=Math.abs(t[i]-e[i]);return n}function Ce(e,t){for(var n=0,i=0,o=e.length;i<o;i++)n=Math.max(n,Math.abs(t[i]-e[i]));return n}var Se={euclidean:ke,manhattan:Ve,max:Ce},Re={linear:function(e,t){var n=[],i=Math.round(Math.random()*e),o=Math.floor(e/t);do{n.push(i),i=(i+o)%e}while(n.length<t);return n},shuffle:function(e,t){for(var n=[];n.length<t;){var i=Math.round(Math.random()*e);-1==n.indexOf(i)&&n.push(i)}return n}};function Le(e,t){return Re[arguments.length>2&&void 0!==arguments[2]?arguments[2]:"linear"](e.length,t).map((function(t){return e[t]}))}function Ye(e,t,n){var i=1/0,o=0;return t.forEach((function(t,l){var r=n(e,t);r<i&&(i=r,o=l)})),o}function Te(e){if(!e.length)return[];for(var t=new Array(e[0].length),n=0,i=t.length;n<i;n++)t[n]=0;var o=0;for(i=e.length;o<i;o++)for(var l=e[o],r=o+1,a=0,s=l.length;a<s;a++)t[a]+=(l[a]-t[a])/r;return t=t.map((function(e){return Math.floor(e)}))}function we(e,t,n,i){for(var o=new Array(e),l=0;l<e;l++)o[l]=[];for(var r=0,a=t.length;r<a;r++){var s=t[r];o[Ye(s,n,i)].push(s)}return o}function Ne(e,t,n,i,o,l){for(var r=0;r<e;r++){var a=n[r],s=i[r],c=new Array(s.length);o=!We(c=a.length>0?Te(a):t[Math.floor(l()*t.length)],s),i[r]=c}return o}function Ke(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"linear";t=t||Math.max(2,Math.ceil(Math.sqrt(e.length/2)));var l=n||"euclidean";"string"==typeof l&&(l=Se[l]);for(var r=0,a=function(){return(r=(9301*r+49297)%233280)/233280},s=Le(e,t,o),c=!0,u=0;c&&(c=Ne(t,e,we(t,e,s,l),s,!1,a),++u%i!=0););return s}function He(e,t){for(var n=0;n<e;n+=4)t(n)}function Me(e,t){He(e.pixels.length,(function(n){t(e.pixels,n)}))}var ze={create:function(e,t){var n=document.createElement("canvas");return n.width=e||0,n.height=t||0,n},drawPixels:function(e){var t=this.create(e.width,e.height),n=t.getContext("2d"),i=n.getImageData(0,0,t.width,t.height);return i.data.set(e.pixels),n.putImageData(i,0,0),t},createHistogram:function(e,t,n,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{black:!0,red:!1,green:!1,blue:!1},l=this.create(e,t),r=l.getContext("2d");r.clearRect(0,0,e,t),r.fillStyle="white",r.fillRect(0,0,e,t),r.globalAlpha=.7;var a={black:!1};o.black?a.black=!1:a.black=!0,o.red?a.red=!1:a.red=!0,o.green?a.green=!1:a.green=!0,o.blue?a.blue=!1:a.blue=!0,Object.keys(n).forEach((function(i){if(!a[i]){var o=n[i],l=Math.max.apply(Math,o),s=e/o.length;r.fillStyle=i,o.forEach((function(e,n){var i=t*(e/l),o=n*s;r.fillRect(o,t-i,s,i)}))}})),"function"==typeof i&&i(l)},getHistogram:function(e){for(var t=new Array(256),n=new Array(256),i=new Array(256),o=new Array(256),l=0;l<256;l++)t[l]=0,n[l]=0,i[l]=0,o[l]=0;return Me(e,(function(e,l){var r=Math.round(Be.brightness(e[l],e[l+1],e[l+2]));t[r]++,n[e[l]]++,i[e[l+1]]++,o[e[l+2]]++})),{black:t,red:n,green:i,blue:o}},getBitmap:function(e,t){var n=this.drawPixels(e);return{pixels:n.getContext("2d").getImageData(t.x||0,t.y||0,t.width||n.width,t.height||n.height).data,width:t.width,height:t.height}},putBitmap:function(e,t,n){var i=this.drawPixels(e),o=this.drawPixels(t),l=i.getContext("2d");return l.drawImage(o,n.x,n.y),e.pixels=l.getImageData(0,0,e.width,e.height).data,e}},Je=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};x(this,e),this.isLoaded=!1,this.imageUrl=t,this.opt=n,this.initialize()}return X(e,[{key:"initialize",value:function(){this.canvas=this.createCanvas(),this.context=this.canvas.getContext("2d")}},{key:"createCanvas",value:function(){return document.createElement("canvas")}},{key:"load",value:function(e){this.loadImage(e)}},{key:"loadImage",value:function(e){var t=this,n=this.context;this.newImage=new Image;var i=this.newImage;i.onload=function(){var o=i.height/i.width;t.opt.canvasWidth&&t.opt.canvasHeight?(t.canvas.width=t.opt.canvasWidth,t.canvas.height=t.opt.canvasHeight):(t.canvas.width=t.opt.maxWidth?t.opt.maxWidth:i.width,t.canvas.height=t.canvas.width*o),n.drawImage(i,0,0,i.width,i.height,0,0,t.canvas.width,t.canvas.height),t.isLoaded=!0,e&&e()},this.getImageUrl((function(e){i.src=e}))}},{key:"load",value:function(e){var t=this;this.newImage=new Image;var n=this.newImage;n.onload=function(){t.isLoaded=!0,e&&e()},this.getImageUrl((function(e){n.src=e}))}},{key:"getImageUrl",value:function(e){if("string"==typeof this.imageUrl)return e(this.imageUrl);if(this.imageUrl instanceof Blob){var t=new FileReader;t.onload=function(t){e(t.target.result)},t.readAsDataURL(this.imageUrl)}}},{key:"getRGBA",value:function(e,t,n,i){return[e,t,n,i]}},{key:"toArray",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.context.getImageData(0,0,this.canvas.width,this.canvas.height),o=i.width,l=i.height,r={pixels:new Uint8ClampedArray(i.data),width:o,height:l};e||(e=function(){return function(e,t){t(e)}}()),e(r,(function(e){var i=ze.drawPixels(e);"canvas"==n.returnTo?t(i):t(i.toDataURL(n.outputFormat||"image/png"))}),n)}},{key:"toHistogram",value:function(e){var t=this.context.getImageData(0,0,this.canvas.width,this.canvas.height),n=t.width,i=t.height,o={pixels:new Uint8ClampedArray(t.data),width:n,height:i};return ze.getHistogram(o)}},{key:"toRGB",value:function(){for(var e=this.context.getImageData(0,0,this.canvas.width,this.canvas.height).data,t=[],n=0,i=e.length;n<i;n+=4)t[t.length]=[e[n+0],e[n+1],e[n+2],e[n+3]];return t}}]),e}();function je(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"hex";return t.length>n&&(t=Ke(t,n)),t.map((function(t){return e(t,i)}))}function Fe(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments[2];i?i&&(t=new Je(e,n)).loadImage((function(){"function"==typeof i&&i(t.toRGB())})):(t=new Je(e)).loadImage((function(){"function"==typeof n&&n(t.toRGB())}))}function Oe(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{frameTimer:"full"};$e(e,t,n,Object.assign({returnTo:"canvas"},i))}function $e(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{frameTimer:"full"},o=new Je(e);o.loadImage((function(){o.toArray(t,(function(e){"function"==typeof n&&n(e)}),i)}))}function Ee(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=new Je(e);i.loadImage((function(){"function"==typeof t&&t(i.toHistogram(n))}))}function Ue(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n=[],i=0;i<e.length;i++){var o=e[i];if(0!=i)if(i!=e.length-1){var l=e[i-1],r=e[i+1];r[1],l[1],r[0],l[0];var a=[l[0]+(r[0]-l[0])*t,l[1]+(r[1]-l[1])*t],s=[[].concat(R(l)),[].concat(a)],c=Math.sqrt(Math.pow(o[0]-l[0],2)+Math.pow(o[1]-l[1],2))/Math.sqrt(Math.pow(r[0]-o[0],2)+Math.pow(r[1]-o[1],2)),u=s[0][0]+(s[1][0]-s[0][0])*c,d=s[0][1]+(s[1][1]-s[0][1])*c;s[0][0]+=o[0]-u,s[0][1]+=o[1]-d,s[1][0]+=o[0]-u,s[1][1]+=o[1]-d,n[i]=s}else n[i]=[];else n[i]=[]}return n}function Pe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{width:200,height:100},i=new Je(e);i.loadImage((function(){ze.createHistogram(n.width||200,n.height||100,i.toHistogram(n),(function(e){"function"==typeof t&&t(e.toDataURL("image/png"))}),n)}))}var Ae={palette:je,ImageToCanvas:Oe,ImageToHistogram:Pe,ImageToRGB:Fe,ImageToURL:$e,histogram:Ee,histogramToPoints:Ue},Be=I({},o,p,Ie,J,pe,q,te,ue,Z,ae,Ae);function Qe(e){return typeof e>"u"||null===e}function De(e){return!1===Qe(e)}function _e(e){return"string"==typeof e}function qe(e){return"function"==typeof e}function et(e){return"number"==typeof e}var tt=[{rgb:"#ff0000",start:0},{rgb:"#ffff00",start:.17},{rgb:"#00ff00",start:.33},{rgb:"#00ffff",start:.5},{rgb:"#0000ff",start:.67},{rgb:"#ff00ff",start:.83},{rgb:"#ff0000",start:1}];function nt(e){for(var t,n,i=0;i<tt.length;i++)if(tt[i].start>=e){t=tt[i-1],n=tt[i];break}return t&&n?Be.mix(t.rgb,n.rgb,(e-t.start)/(n.start-t.start)):tt[0].rgb}function it(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1,n=arguments[2],i=Qe(n)?e-t:t,o=Qe(n)?e+scale:n,l=[],r=0;r<tt.length;r++){var a=tt[r];i<=a.start&&a.start<o?l.push({rgb:a.rgb,start:a.start}):tt[r+1]&&a.start<i&&i<tt[r+1].start?l.push({rgb:nt(i),start:i}):tt[r-1]&&tt[r-1].start<o&&o<a.start?l.push({rgb:nt(o),start:o}):a.start<i||a.start>o||l.push({rgb:a.rgb,start:a.start})}return l}function ot(){for(var e=0,t=tt.length;e<t;e++){var n=tt[e],i=Be.parse(n.rgb);n.r=i.r,n.g=i.g,n.b=i.b}}ot();var lt={colors:tt,checkHueColor:nt,getHueScale:it},rt={identity:function(){return[1,0,0,0,1,0,0,0,1]},stretching:function(e){return[e,0,0,0,1,0,0,0,1]},squeezing:function(e){return[e,0,0,0,1/e,0,0,0,1]},scale:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return[e=e||0===e?e:1,0,0,0,t=t||0===t?t:1,0,0,0,1]},scaleX:function(e){return this.scale(e)},scaleY:function(e){return this.scale(1,e)},translate:function(e,t){return[1,0,e,0,1,t,0,0,1]},rotate:function(e){var t=this.radian(e);return[Math.cos(t),-Math.sin(t),0,Math.sin(t),Math.cos(t),0,0,0,1]},rotate90:function(){return[0,-1,0,1,0,0,0,0,1]},rotate180:function(){return[-1,0,0,0,-1,0,0,0,1]},rotate270:function(){return[0,1,0,-1,0,0,0,0,1]},radian:function(e){return e*Math.PI/180},skew:function(e,t){var n=this.radian(e),i=this.radian(t);return[1,Math.tan(n),0,Math.tan(i),1,0,0,0,1]},skewX:function(e){var t=this.radian(e);return[1,Math.tan(t),0,0,1,0,0,0,1]},skewY:function(e){var t=this.radian(e);return[1,0,0,Math.tan(t),1,0,0,0,1]},shear1:function(e){return[1,-Math.tan(this.radian(e)/2),0,0,1,0,0,0,1]},shear2:function(e){return[1,0,0,Math.sin(this.radian(e)),1,0,0,0,1]}},at={CONSTANT:rt,radian:function(e){return rt.radian(e)},multiply:function(e,t){return[e[0]*t[0]+e[1]*t[1]+e[2]*t[2],e[3]*t[0]+e[4]*t[1]+e[5]*t[2],e[6]*t[0]+e[7]*t[1]+e[8]*t[2]]},identity:function(e){return this.multiply(rt.identity(),e)},translate:function(e,t,n){return this.multiply(rt.translate(e,t),n)},rotate:function(e,t){return this.multiply(rt.rotate(e),t)},shear1:function(e,t){return this.multiply(rt.shear1(e),t)},shear2:function(e,t){return this.multiply(rt.shear2(e),t)},rotateShear:function(e,t){var n=t;return n=this.shear1(e,n),n=this.shear2(e,n),n=this.shear1(e,n)}};function st(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments[2],i=arguments[3],o=Tn(n*i*4,n,i);return function(l,r){for(var a=t,s=0;a<i;a++,s++)for(var c=e,u=0;c<n;c++,u++)o.pixels[s*n*u]=l.pixels[a*n*c];r(o)}}function ct(e,t){return function(n,i){var o=ze.drawPixels(n),l=o.getContext("2d");o.width=e,o.height=t,i({pixels:new Uint8ClampedArray(l.getImageData(0,0,e,t).data),width:e,height:t})}}function ut(){return function(e,t){for(var n=e.width,i=e.height,o=i%2==1?Math.floor(i/2):i/2,l=0;l<o;l++)for(var r=0;r<n;r++){var a=l*n+r<<2,s=(i-1-l)*n+r<<2;Pn(e.pixels,a,s)}t(e)}}function dt(){return function(e,t){for(var n=e.width,i=e.height,o=n%2==1?Math.floor(n/2):n/2,l=0;l<i;l++)for(var r=0;r<o;r++){var a=l*n+r<<2,s=l*n+(n-1-r)<<2;Pn(e.pixels,a,s)}t(e)}}function pt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"center",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"center";return function(i,o){var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Tn(i.pixels.length,i.width,i.height),a=i.width,s=i.height;"center"==t&&(t=Math.floor(a/2)),"center"==n&&(n=Math.floor(s/2));var c=at.CONSTANT.translate(-t,-n),u=at.CONSTANT.translate(t,n),d=at.CONSTANT.shear1(e),p=at.CONSTANT.shear2(e);An((function(e,t,n,o){var l=at.multiply(c,[n,o,1]);l=at.multiply(d,l).map(Math.round),l=at.multiply(p,l).map(Math.round),l=at.multiply(d,l).map(Math.round),l=at.multiply(u,l);var r=C(l,2),h=r[0],m=r[1];h<0||m<0||h>a-1||m>s-1||_n(e,m*a+h<<2,i.pixels,t)}))(r,(function(){o(r)}),l)}}function ht(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e=zn(e),e%=360,function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(0==e)return t;if(90==e||270==e)var o=Tn(t.pixels.length,t.height,t.width);else{if(180!=e)return pt(e)(t,n,i);o=Tn(t.pixels.length,t.width,t.height)}An((function(n,i,l,r){if(90==e)var a=l*o.width+(o.width-1-r)<<2;else 270==e?a=(o.height-1-l)*o.width+r<<2:180==e&&(a=(o.height-1-r)*o.width+(o.width-1-l)<<2);_n(o.pixels,a,t.pixels,i)}))(t,(function(){n(o)}),i)}}function mt(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"gray",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],i=0;i<t.length-1;i++)for(var o=t[i],l=t[i+1],r=l[0]-o[0],a=(l[1]-o[1])/r,s=0,c=o[0];s<r;s++,c++)n[c]=o[1]+s*a;return n[255]=255,En("red"===e?function(){$r=n[$r]}:"green"===e?function(){$g=n[$g]}:"blue"===e?function(){$b=n[$b]}:function(){var e=Color.RGBtoYCrCb($r,$g,$b),t=Color.YCrCbtoRGB(clamp(n[clamp(e.y)]),e.cr,e.cb,0);$r=t.r,$g=t.g,$b=t.b},{},{$realPoints:n})}var bt={crop:st,resize:ct,flipH:dt,flipV:ut,rotate:ht,rotateDegree:pt,histogram:mt,"rotate-degree":pt};function ft(e,t){return En("        \n        const thresholdColor = ( $r + $g + $b ) <= $threshold ? $darkColor : $lightColor\n\n        $r = thresholdColor.r;\n        $g = thresholdColor.g;\n        $b = thresholdColor.b; \n    ",{$threshold:arguments.length>2&&void 0!==arguments[2]?arguments[2]:100},{$darkColor:Be.parse(e),$lightColor:Be.parse(t)})}function yt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return e=zn(e),En("\n        $r += $C;\n        $g += $C;\n        $b += $C;\n    ",{$C:Math.floor(e/100*255)})}function gt(){return En("\n        $r = $matrix[0] * $r + $matrix[1] * $g + $matrix[2] * $b + $matrix[3] * $a;\n        $g = $matrix[4] * $r + $matrix[5] * $g + $matrix[6] * $b + $matrix[7] * $a;\n        $b = $matrix[8] * $r + $matrix[9] * $g + $matrix[10] * $b + $matrix[11] * $a;\n        $a = $matrix[12] * $r + $matrix[13] * $g + $matrix[14] * $b + $matrix[15] * $a;        \n    ",{$matrix:[.5997023498159715,.34553243048391263,-.2708298674538042,0,-.037703249837783157,.8609577587992641,.15059552388459913,0,.24113635128153335,-.07441037908422492,.44972182064877153,0,0,0,0,1]})}function vt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e=zn(e),En("\n\n        $r = ($r > 255 - $C) ? 255 : 0;\n        $g = ($g > 255 - $C) ? 255 : 0;\n        $b = ($b > 255 - $C) ? 255 : 0;\n\n    ",{$C:2.55*Math.abs(e)})}function Zt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e=zn(e),En("\n        $r *= $C;\n        $g *= $C;\n        $b *= $C;\n    ",{$C:Math.max((128+e)/128,0)})}function xt(){return En("\n        $r = Math.pow($r / 255, $C) * 255;\n        $g = Math.pow($g / 255, $C) * 255;\n        $b = Math.pow($b / 255, $C) * 255;\n    ",{$C:zn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1)})}function Xt(){var e=[].concat(Array.prototype.slice.call(arguments));1===e.length&&"string"==typeof e[0]&&(e=Be.convertMatchesArray(e[0]));var t=(e=e.map((function(e){return Be.matches(e).length?{type:"param",value:e}:{type:"scale",value:e}}))).filter((function(e){return"scale"==e.type}))[0];return t=t?+t.value:256,e=e.filter((function(e){return"param"==e.type})).map((function(e){return e.value})).join(","),En("\n        const colorIndex = clamp(Math.ceil($r * 0.2126 + $g * 0.7152 + $b * 0.0722));\n        const newColorIndex = clamp(Math.floor(colorIndex * ($scale / 256)));\n        const color = $colors[newColorIndex];\n\n        $r = color.r; \n        $g = color.g; \n        $b = color.b; \n        $a = clamp(Math.floor(color.a * 256));\n    ",{},{$colors:Be.gradient(e,t).map((function(e){var t=Be.parse(e);return{r:t.r,g:t.g,b:t.b,a:t.a}})),$scale:t})}function Gt(e){var t=(e=zn(e))/100;return t>1&&(t=1),En("\n        $r = $matrix[0] * $r + $matrix[1] * $g + $matrix[2] * $b + $matrix[3] * $a;\n        $g = $matrix[4] * $r + $matrix[5] * $g + $matrix[6] * $b + $matrix[7] * $a;\n        $b = $matrix[8] * $r + $matrix[9] * $g + $matrix[10] * $b + $matrix[11] * $a;\n        $a = $matrix[12] * $r + $matrix[13] * $g + $matrix[14] * $b + $matrix[15] * $a;\n    ",{$matrix:[.2126+.7874*(1-t),.7152-.7152*(1-t),.0722-.0722*(1-t),0,.2126-.2126*(1-t),.7152+.2848*(1-t),.0722-.0722*(1-t),0,.2126-.2126*(1-t),.7152-.7152*(1-t),.0722+.9278*(1-t),0,0,0,0,1]})}function It(){return En("\n        var hsv = Color.RGBtoHSV($r, $g, $b);\n\n        // 0 ~ 360 \n        var h = hsv.h;\n        h += Math.abs($C);\n        h = h % 360;\n        hsv.h = h;\n\n        var rgb = Color.HSVtoRGB(hsv);\n\n        $r = rgb.r;\n        $g = rgb.g;\n        $b = rgb.b;\n    ",{$C:zn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:360)})}function Wt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return En("\n        $r = (255 - $r) * $C;\n        $g = (255 - $g) * $C;\n        $b = (255 - $b) * $C;\n    ",{$C:(e=zn(e))/100})}function kt(){return En("\n        $r = $matrix[0] * $r + $matrix[1] * $g + $matrix[2] * $b + $matrix[3] * $a;\n        $g = $matrix[4] * $r + $matrix[5] * $g + $matrix[6] * $b + $matrix[7] * $a;\n        $b = $matrix[8] * $r + $matrix[9] * $g + $matrix[10] * $b + $matrix[11] * $a;\n        $a = $matrix[12] * $r + $matrix[13] * $g + $matrix[14] * $b + $matrix[15] * $a;\n    ",{$matrix:[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,0,0,0,1]})}function Vt(){return En("\n        $r = $matrix[0] * $r + $matrix[1] * $g + $matrix[2] * $b + $matrix[3] * $a;\n        $g = $matrix[4] * $r + $matrix[5] * $g + $matrix[6] * $b + $matrix[7] * $a;\n        $b = $matrix[8] * $r + $matrix[9] * $g + $matrix[10] * $b + $matrix[11] * $a;\n        $a = $matrix[12] * $r + $matrix[13] * $g + $matrix[14] * $b + $matrix[15] * $a;\n    ",{$matrix:[arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,arguments.length>15&&void 0!==arguments[15]?arguments[15]:0]})}function Ct(){return En("\n        const C = Math.abs($C) * 5;\n        const min = -C;\n        const max = C;\n        const noiseValue = Math.round(min + (Math.random() * (max - min)));\n\n        $r += noiseValue;\n        $g += noiseValue;\n        $b += noiseValue;\n    ",{$C:zn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1)})}function St(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return En("\n        $a *= $C; \n    ",{$C:(e=zn(e))/100})}function Rt(){return En("\n        $r = $matrix[0] * $r + $matrix[1] * $g + $matrix[2] * $b + $matrix[3] * $a;\n        $g = $matrix[4] * $r + $matrix[5] * $g + $matrix[6] * $b + $matrix[7] * $a;\n        $b = $matrix[8] * $r + $matrix[9] * $g + $matrix[10] * $b + $matrix[11] * $a;\n        $a = $matrix[12] * $r + $matrix[13] * $g + $matrix[14] * $b + $matrix[15] * $a;\n    ",{$matrix:[1.438,-.062,-.062,0,-.122,1.378,-.122,0,-.016,-.016,1.483,0,0,0,0,1]})}function Lt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=(e=zn(e))/100,n=1-Math.abs(t);return En("\n        $r = $matrix[0] * $r + $matrix[1] * $g + $matrix[2] * $b + $matrix[3] * $a;\n        $g = $matrix[4] * $r + $matrix[5] * $g + $matrix[6] * $b + $matrix[7] * $a;\n        $b = $matrix[8] * $r + $matrix[9] * $g + $matrix[10] * $b + $matrix[11] * $a;\n        $a = $matrix[12] * $r + $matrix[13] * $g + $matrix[14] * $b + $matrix[15] * $a;        \n    ",{$matrix:[n,0,0,0,0,n,0,0,0,0,n,0,0,0,0,n]})}function Yt(){var e=zn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1);return e>1&&(e=1),En("\n        $r = $matrix[0] * $r + $matrix[1] * $g + $matrix[2] * $b + $matrix[3] * $a;\n        $g = $matrix[4] * $r + $matrix[5] * $g + $matrix[6] * $b + $matrix[7] * $a;\n        $b = $matrix[8] * $r + $matrix[9] * $g + $matrix[10] * $b + $matrix[11] * $a;\n        $a = $matrix[12] * $r + $matrix[13] * $g + $matrix[14] * $b + $matrix[15] * $a;        \n    ",{$matrix:[.393+.607*(1-e),.769-.769*(1-e),.189-.189*(1-e),0,.349-.349*(1-e),.686+.314*(1-e),.168-.168*(1-e),0,.272-.272*(1-e),.534-.534*(1-e),.131+.869*(1-e),0,0,0,0,1]})}function Tt(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return En("\n        $r *= $redValue;\n        $g *= $greenValue;\n        $b *= $blueValue;\n    ",{$redValue:zn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1),$greenValue:zn(e),$blueValue:zn(t)})}function wt(){return En("\n        $r = $matrix[0] * $r + $matrix[1] * $g + $matrix[2] * $b + $matrix[3] * $a;\n        $g = $matrix[4] * $r + $matrix[5] * $g + $matrix[6] * $b + $matrix[7] * $a;\n        $b = $matrix[8] * $r + $matrix[9] * $g + $matrix[10] * $b + $matrix[11] * $a;\n        $a = $matrix[12] * $r + $matrix[13] * $g + $matrix[14] * $b + $matrix[15] * $a;        \n    ",{$matrix:[1.438,-.062,-.062,0,-.122,1.378,-.122,0,-.016,-.016,1.483,0,0,0,0,1]})}function Nt(e,t,n){return En("\n        $r = ($r < $redValue) ? 255 - $r: $r;\n        $g = ($g < $greenValue) ? 255 - $g: $g;\n        $b = ($b < $blueValue) ? 255 - $b: $b;\n    ",{$redValue:zn(e),$greenValue:zn(t),$blueValue:zn(n)})}function Kt(){return En("\n        $r = $matrix[0] * $r + $matrix[1] * $g + $matrix[2] * $b + $matrix[3] * $a;\n        $g = $matrix[4] * $r + $matrix[5] * $g + $matrix[6] * $b + $matrix[7] * $a;\n        $b = $matrix[8] * $r + $matrix[9] * $g + $matrix[10] * $b + $matrix[11] * $a;\n        $a = $matrix[12] * $r + $matrix[13] * $g + $matrix[14] * $b + $matrix[15] * $a;\n    ",{$matrix:[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-.231103377548616,-.7501899197440212,1.847597816108189,0,0,0,0,1]})}function Ht(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=zn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:200);return En("\n        // refer to Color.brightness \n        const v = ($C * Math.ceil($r * 0.2126 + $g * 0.7152 + $b * 0.0722) ) >= $scale ? 255 : 0;\n\n        if ($hasColor) {\n\n            if (v == 0) {\n                $r = 0; \n                $g = 0; \n                $b = 0;\n            }\n            \n        } else {\n            const value = Math.round(v);\n            $r = value; \n            $g = value;\n            $b = value; \n        }\n        \n    ",{$C:(e=zn(e))/100,$scale:n,$hasColor:t})}function Mt(){return Ht(arguments.length>0&&void 0!==arguments[0]?arguments[0]:200,arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,!1)}function zt(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return En("\n\n        $r += (255 - $r) * $redTint;\n        $g += (255 - $g) * $greenTint;\n        $b += (255 - $b) * $blueTint;\n\n    ",{$redTint:zn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1),$greenTint:zn(e),$blueTint:zn(t)})}var Jt={bitonal:ft,brightness:yt,brownie:gt,clip:vt,contrast:Zt,gamma:xt,gradient:Xt,grayscale:Gt,hue:It,invert:Wt,kodachrome:kt,matrix:Vt,noise:Ct,opacity:St,polaroid:Rt,saturation:Lt,sepia:Yt,shade:Tt,shift:wt,solarize:Nt,technicolor:Kt,threshold:Mt,"threshold-color":Ht,tint:zt};function jt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;return ti(Qn(e=zn(e)))}function Ft(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;return ti([-2*(e=zn(e)),-e,0,-e,1,e,0,e,2*e])}function Ot(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return ti(In([1,2,1,2,4,2,1,2,1],1/16*((e=zn(e))/100)))}function $t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return ti(In([1,4,6,4,1,4,16,24,16,4,6,24,36,24,6,4,16,24,16,4,1,4,6,4,1],1/256*((e=zn(e))/100)))}function Et(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return ti(In([.3,.3,.3,0,0,.59,.59,.59,0,0,.11,.11,.11,0,0,0,0,0,0,0,0,0,0,0,0],(e=zn(e))/100))}function Ut(){return ti([0,0,0,0,1,0,0,0,0])}function Pt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return e=zn(e),ti([5,5,5,-3,0,-3,-3,-3,-3])}function At(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return e=zn(e),ti([5,-3,-3,5,0,-3,5,-3,-3])}function Bt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return ti(In([-1,-1,-1,-1,8,-1,-1,-1,-1],(e=zn(e))/100))}function Qt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return ti(In([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,24,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],(e=zn(e))/100))}function Dt(){return ti(In([1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1],1/9))}function _t(){return ti(In([1,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,1],1/9))}function qt(){return ti(In([1,0,0,0,1,0,0,0,1,0,1,0,0,1,0,0,1,0,0,0,1,0,1,0,1,0,0,0,0,0,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,0,0,0,0,0,1,0,1,0,1,0,0,0,1,0,0,1,0,0,1,0,1,0,0,0,1,0,0,0,1],1/9))}function en(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return ti(In([-1,0,0,0,0,0,-1,0,0,0,0,0,-1,0,0,0,0,0,1,0,1,1,1,1,1],(e=zn(e))/100))}function tn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return ti(In([.393,.349,.272,0,0,.769,.686,.534,0,0,.189,.168,.131,0,0,0,0,0,0,0,0,0,0,0,0],(e=zn(e))/100))}function nn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return ti(In([0,-1,0,-1,5,-1,0,-1,0],(e=zn(e))/100))}function on(){return ti([-1,-2,-1,0,0,0,1,2,1])}function ln(){return ti([-1,0,1,-2,0,2,-1,0,1])}var rn=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],an=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function sn(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}function cn(e,t,n){return n?un(e,0,0,t):stackBlurCanvasRGB(e,0,0,t)}function un(e,t,n,i){if(isNaN(i)||i<1)return e;i|=0;var o,l,r,a,s,c,u,d,p,h,m,b,f,y,g,v,Z,x,X,G,I=e.pixels,W=e.width,k=e.height,V=i+i+1,C=W-1,S=k-1,R=i+1,L=R*(R+1)/2,Y=new sn,T=Y;for(r=1;r<V;r++)if(T=T.next=new sn,r==R)var w=T;T.next=Y;var N=null,K=null;u=c=0;var H=rn[i],M=an[i];for(l=0;l<k;l++){for(y=g=v=d=p=h=0,m=R*(Z=I[c]),b=R*(x=I[c+1]),f=R*(X=I[c+2]),d+=L*Z,p+=L*x,h+=L*X,T=Y,r=0;r<R;r++)T.r=Z,T.g=x,T.b=X,T=T.next;for(r=1;r<R;r++)a=c+((C<r?C:r)<<2),d+=(T.r=Z=I[a])*(G=R-r),p+=(T.g=x=I[a+1])*G,h+=(T.b=X=I[a+2])*G,y+=Z,g+=x,v+=X,T=T.next;for(N=Y,K=w,o=0;o<W;o++)I[c]=d*H>>M,I[c+1]=p*H>>M,I[c+2]=h*H>>M,d-=m,p-=b,h-=f,m-=N.r,b-=N.g,f-=N.b,a=u+((a=o+i+1)<C?a:C)<<2,d+=y+=N.r=I[a],p+=g+=N.g=I[a+1],h+=v+=N.b=I[a+2],N=N.next,m+=Z=K.r,b+=x=K.g,f+=X=K.b,y-=Z,g-=x,v-=X,K=K.next,c+=4;u+=W}for(o=0;o<W;o++){for(g=v=y=p=h=d=0,m=R*(Z=I[c=o<<2]),b=R*(x=I[c+1]),f=R*(X=I[c+2]),d+=L*Z,p+=L*x,h+=L*X,T=Y,r=0;r<R;r++)T.r=Z,T.g=x,T.b=X,T=T.next;for(s=W,r=1;r<=i;r++)c=s+o<<2,d+=(T.r=Z=I[c])*(G=R-r),p+=(T.g=x=I[c+1])*G,h+=(T.b=X=I[c+2])*G,y+=Z,g+=x,v+=X,T=T.next,r<S&&(s+=W);for(c=o,N=Y,K=w,l=0;l<k;l++)I[a=c<<2]=d*H>>M,I[a+1]=p*H>>M,I[a+2]=h*H>>M,d-=m,p-=b,h-=f,m-=N.r,b-=N.g,f-=N.b,a=o+((a=l+R)<S?a:S)*W<<2,d+=y+=N.r=I[a],p+=g+=N.g=I[a+1],h+=v+=N.b=I[a+2],N=N.next,m+=Z=K.r,b+=x=K.g,f+=X=K.b,y-=Z,g-=x,v-=X,K=K.next,c+=W}return e}function dn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e=zn(e),function(n,i){i(cn(n,e,t))}}function pn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return ti(In([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,.3,0,0,0,0,0,1],(e=zn(e))/100))}function hn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:256;return ti(In([1,4,6,4,1,4,16,24,16,4,6,24,-476,24,6,4,16,24,16,4,1,4,6,4,1],-1/(e=zn(e))))}var mn={blur:jt,emboss:Ft,gaussianBlur:Ot,"gaussian-blur":Ot,gaussianBlur5x:$t,"gaussian-blur-5x":$t,grayscale2:Et,normal:Ut,kirschHorizontal:Pt,"kirsch-horizontal":Pt,kirschVertical:At,"kirsch-vertical":At,laplacian:Bt,laplacian5x:Qt,"laplacian-5x":Qt,motionBlur:Dt,"motion-blur":Dt,motionBlur2:_t,"motion-blur-2":_t,motionBlur3:qt,"motion-blur-3":qt,negative:en,sepia2:tn,sharpen:nn,sobelHorizontal:on,"sobel-horizontal":on,sobelVertical:ln,"sobel-vertical":ln,stackBlur:dn,"stack-blur":dn,transparency:pn,unsharpMasking:hn,"unsharp-masking":hn};function bn(){return li("kirsch-horizontal kirsch-vertical")}function fn(){return li("sobel-horizontal sobel-vertical")}function yn(){return li("brightness(15) saturation(-20) gamma(1.8)")}var gn,vn={kirsch:bn,sobel:fn,vintage:yn},Zn=I({},bt,Jt,mn,vn),xn=0,Xn=(G(gn={partial:ci,multi:ai,merge:si,weight:In,repeat:Wn,colorMatrix:kn,each:Sn,eachXY:Rn,createRandomCount:Yn,createRandRange:Ln,createBitmap:Tn,createBlurMatrix:Qn,pack:jn,packXY:An,pixel:En,getBitmap:Hn,putBitmap:Mn,radian:Bn,convolution:ti,parseParamNumber:zn,filter:li,clamp:oi,fillColor:Dn,fillPixelColor:_n},"multi",ai),G(gn,"merge",si),G(gn,"matches",ni),G(gn,"parseFilter",ii),G(gn,"partial",ci),gn),Gn=Xn;function In(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e.map((function(e){return e*t}))}function Wn(e,t){for(var n=new Array(t),i=0;i<t;i++)n[i]=e;return n}function kn(e,t,n){var i=e[t],o=e[t+1],l=e[t+2],r=e[t+3];Dn(e,t,n[0]*i+n[1]*o+n[2]*l+n[3]*r,n[4]*i+n[5]*o+n[6]*l+n[7]*r,n[8]*i+n[9]*o+n[10]*l+n[11]*r,n[12]*i+n[13]*o+n[14]*l+n[15]*r)}function Vn(e){if("function"==typeof e)return e;"string"==typeof e&&(e=[e]);var t=(e=e.slice(0)).shift();if("function"==typeof t)return t;var n=e,i=Zn[t]||Gn[t];if(!i)throw new Error(t+" is not filter. please check filter name.");return i.apply(i,n)}function Cn(e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments[3],i=arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1e4,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"full",r=arguments.length>7&&void 0!==arguments[7]?arguments[7]:50,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=function(e){setTimeout(e,0)};function c(){var e=[].concat(R(Array(arguments.length>0&&void 0!==arguments[0]?arguments[0]:50))).map((function(e){return"cri = ri + i * s; if (cri >= mx) return {currentRunIndex: cri, i: null}; c(cri); i++;"})).join("\n");return new Function("ri","i","s","mx","c","\n            let cri = ri;\n            \n            "+e+"\n            \n            return {currentRunIndex: cri, i: i} \n        ")}function u(){for(var i=c(r),l=a,s={},u=0;u<o;){if(null==(s=i(a,u,t,e,n)).i){l=s.currentRunIndex;break}u=s.i,l=s.currentRunIndex}d(l)}function d(n){n?a=n:a+=t,a>=e?i():s?s(u):u()}"requestAnimationFrame"==l&&(s=requestAnimationFrame,o=1e3),"full"==l&&(s=null,o=e),u()}function Sn(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};Cn(e,0,4,(function(e){t(e,e>>2)}),(function(){n()}),i.functionDumpCount,i.frameTimer,i.loopCount)}function Rn(e,t,n,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};Cn(e,0,4,(function(e){var i=e>>2;n(e,i%t,Math.floor(i/t))}),(function(){i()}),o.functionDumpCount,o.frameTimer,o.loopCount)}function Ln(e,t,n){for(var i=[],o=1;o<=n;o++){var l=Math.random()*(t-e)+e,r=Math.floor(10*Math.random())%2==0?-1:1;i.push(r*l)}i.sort();var a=Math.floor(n>>1),s=i[a];return i[a]=i[0],i[0]=s,i}function Yn(){return[9,16,25,36,49,64,81,100].sort((function(e,t){return.5-Math.random()}))[0]}function Tn(e,t,n){return{pixels:new Uint8ClampedArray(e),width:t,height:n}}function wn(e,t,n,i){for(var o=t.pixels.length/4,l=0,r=0,a=0,s=0,c=0,u=0,d=0;d<o;d++)a=d%t.width,r=i+(s=Math.floor(d/t.width)),!((l=n+a)>e.width)&&(r>e.height||(c=s*t.width+a<<2,u=r*e.width+l<<2,e.pixels[u]=t.pixels[c],e.pixels[u+1]=t.pixels[c+1],e.pixels[u+2]=t.pixels[c+2],e.pixels[u+3]=t.pixels[c+3]))}function Nn(e,t,n,i){for(var o=t.pixels.length>>2,l=0,r=0,a=0,s=0,c=0,u=0,d=0;d<o;d++)a=d%t.width,r=i+(s=Math.floor(d/t.width)),!((l=n+a)>e.width)&&(r>e.height||(c=r*e.width+l<<2,u=s*t.width+a<<2,t.pixels[u]=e.pixels[c],t.pixels[u+1]=e.pixels[c+1],t.pixels[u+2]=e.pixels[c+2],t.pixels[u+3]=e.pixels[c+3]))}function Kn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.width+t,i=e.height+t;return{pixels:new Uint8ClampedArray(n*i*4),width:n,height:i}}function Hn(e,t){return ze.getBitmap(e,t)}function Mn(e,t,n){return ze.putBitmap(e,t,n)}function zn(e){return"string"==typeof e&&(e=(e=e.replace(/deg/,"")).replace(/px/,"")),+e}var Jn=/(([\w_\-]+)(\(([^\)]*)\))?)+/gi;function jn(e){return function(t,n){Sn(t.pixels.length,(function(n,i){e(t.pixels,n,i,t.pixels[n],t.pixels[n+1],t.pixels[n+2],t.pixels[n+3])}),(function(){n(t)}))}}function Fn(e){var t=e.map((function(e){return" \n            "+e.userFunction.$preContext+"\n\n            "+e.userFunction.$preCallbackString+"\n\n            $r = clamp($r); $g = clamp($g); $b = clamp($b); $a = clamp($a);\n        "})).join("\n\n"),n={clamp:oi,Color:Be};e.forEach((function(e){Object.assign(n,e.userFunction.rootContextObject)}));var i="const "+Object.keys(n).map((function(e){return" "+e+" = $rc."+e+" "})).join(","),o=new Function("$p","$pi","$rc"," \n    let $r = $p[$pi], $g = $p[$pi+1], $b = $p[$pi+2], $a = $p[$pi+3];\n    \n    "+i+"\n\n    "+t+"\n    \n    $p[$pi] = $r; $p[$pi+1] = $g; $p[$pi+2] = $b; $p[$pi+3] = $a;\n    ");return function(e,t){o(e,t,n)}}function On(e){var t={},n=e.map((function(e){var n=[];Object.keys(e.context).forEach((function(e,t){n[e]="n$"+xn+++e+"$"})),Object.keys(e.rootContext).forEach((function(i,o){n[i]="r$"+xn+++i+"$",t[n[i]]=e.rootContext[i]}));var i=Object.keys(e.context).filter((function(t){return"number"!=typeof e.context[t]&&"string"!=typeof e.context[t]&&!(Array.isArray(e.context[t])&&("number"==typeof e.context[t][0]||"string"==typeof e.context[t][0]))})).map((function(t,i){return[n[t],JSON.stringify(e.context[t])].join(" = ")})),o=e.callback;return"function"==typeof e.callback&&((o=e.callback.toString().split("{")).shift(),(o=(o=o.join("{")).split("}")).pop(),o=o.join("}")),Object.keys(n).forEach((function(t){var i=n[t];"number"==typeof e.context[t]||"string"==typeof e.context[t]?o=o.replace(new RegExp("\\"+t,"g"),e.context[t]):!Array.isArray(e.context[t])||"number"!=typeof e.context[t][0]&&"string"!=typeof e.context[t][0]?o=o.replace(new RegExp("\\"+t,"g"),i):e.context[t].forEach((function(e,n){o=o.replace(new RegExp("\\"+t+"\\["+n+"\\]","g"),e)}))})),{preCallbackString:o,preContext:i}})),i=n.map((function(e,t){return e.preContext.length?"const "+e.preContext+";":""})).join("\n\n"),o=n.map((function(e){return e.preCallbackString})).join("\n\n"),l=new Function("$pixels","$pixelIndex","$clamp","$Color"," \n    let $r = $pixels[$pixelIndex], $g = $pixels[$pixelIndex+1], $b = $pixels[$pixelIndex+2], $a = $pixels[$pixelIndex+3];\n\n    "+i+"\n\n    "+o+"\n    \n    $pixels[$pixelIndex] = $r\n    $pixels[$pixelIndex+1] = $g \n    $pixels[$pixelIndex+2] = $b   \n    $pixels[$pixelIndex+3] = $a   \n    ");return l.$preCallbackString=o,l.$preContext=i,l.rootContextObject=t,l}function $n(e){return On([{callback:e,context:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},rootContext:arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}}])}function En(e){var t=$n(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),n=function(e,t){};return n.userFunction=t,n}var Un=[0,1,2,3];function Pn(e,t,n){Un.forEach((function(i){var o=e[t+i];e[t+i]=e[n+i],e[n+i]=o}))}function An(e){return function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Rn(t.pixels.length,t.width,(function(n,i,o){e(t.pixels,n,i,o)}),(function(){n(t)}),i)}}function Bn(e){return at.CONSTANT.radian(e)}function Qn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=Math.pow(e,2);return Wn(1/t,t)}function Dn(e,t,n,i,o,l){if(3==arguments.length){var r=arguments[2];n=r.r,i=r.g,o=r.b,l=r.a}"number"==typeof n&&(e[t]=n),"number"==typeof i&&(e[t+1]=i),"number"==typeof o&&(e[t+2]=o),"number"==typeof l&&(e[t+3]=l)}function _n(e,t,n,i){Dn(e,t,n[i],n[i+1],n[i+2],n[i+3])}function qn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:255,i=[];return i=e.map((function(e,t){return[]})),e.forEach((function(e,o){if(0!=e){var l=i[o];for(o=t;o<=n;o++)l[o]=e*o}})),i}function ei(e,t,n,i,o){var l=Math.round(Math.sqrt(e.length)),r=Math.floor(l/2),a=o?1:0,s="let r = 0, g = 0, b = 0, a = 0, scy = 0, scx =0, si = 0; ",c=[],u=[],d=[],p=[];e.forEach((function(e,t){var i=Math.floor(t/l)-r,o=t%l-r;0!=e&&(c.push("$t["+t+"][$sp[(($sy + ("+i+")) * "+n+" + ($sx + ("+o+"))) * 4]]"),u.push("$t["+t+"][$sp[(($sy + ("+i+")) * "+n+" + ($sx + ("+o+"))) * 4 + 1]]"),d.push("$t["+t+"][$sp[(($sy + ("+i+")) * "+n+" + ($sx + ("+o+"))) * 4 + 2]]"),p.push("$t["+t+"][$sp[(($sy + ("+i+")) * "+n+" + ($sx + ("+o+"))) * 4 + 3]]"))})),s+="r = "+c.join(" + ")+"; g = "+u.join(" + ")+"; b = "+d.join(" + ")+"; a = "+p.join(" + ")+";",s+="$dp[$di] = r; $dp[$di+1] = g;$dp[$di+2] = b;$dp[$di+3] = a + ("+a+")*(255-a); ";var h=new Function("$dp","$sp","$di","$sx","$sy","$t",s);return function(e,n,i,o,l){h(e,n,i,o,l,t)}}function ti(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=qn(e);return function(i,o){var l=Math.round(Math.sqrt(e.length)),r=Kn(i,2*l);wn(r,i,l,l);for(var a=Tn(r.pixels.length,r.width,r.height),s=Tn(i.pixels.length,i.width,i.height),c=ei(e,n,r.width,r.height,t),u=i.pixels.length/4,d=0;d<u;d++){var p=d,h=p%i.width+l,m=Math.floor(p/i.width)+l;c(a.pixels,r.pixels,4*(m*r.width+h),h,m)}Nn(a,s,l,l),o(s)}}function ni(e){var t=Be.convertMatches(e),n=t.str.match(Jn),i=[];if(!n)return i;i=n.map((function(e){return{filter:e,origin:Be.reverseMatches(e,t.matches)}}));var o={next:0};return i=i.map((function(t){var n=e.indexOf(t.origin,o.next);return t.startIndex=n,t.endIndex=n+t.origin.length,t.arr=ii(t.origin),o.next=t.endIndex,t})).filter((function(e){return!!e.arr.length}))}function ii(e){var t=Be.convertMatches(e),n=t.str.match(Jn);if(!n[0])return[];var i=n[0].split("("),o=i.shift(),l=[];return i.length&&(l=i.shift().split(")")[0].split(",").map((function(e){return Be.reverseMatches(e,t.matches)}))),[o].concat(R(l)).map(Be.trim)}function oi(e){return Math.min(255,e)}function li(e){return si(ni(e).map((function(e){return e.arr})))}function ri(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[],n=[],i=0,o=e.length;i<o;i++){var l=e[i];l.userFunction?n.push(l):(n.length&&t.push([].concat(R(n))),t.push(l),n=[])}return n.length&&t.push([].concat(R(n))),t.forEach((function(e,n){var i;Array.isArray(e)&&(t[n]=(i=Fn(e),function(e,t){for(var n=0,o=e.pixels.length;n<o;n+=4)i(e.pixels,n);t(e)}))})),t}function ai(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=(t=ri(t=t.map((function(e){return Vn(e)})).filter((function(e){return e})))).length;return function(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=e,r=0;function a(){t[r].call(null,l,(function(e){l=e,s()}),o)}function s(){++r>=i?n(l):a()}a()}}function si(e){return ai.apply(void 0,R(e))}function ci(e){for(var t=null,n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return t=1==i.length&&"string"==typeof i[0]?li(i[0]):si(i),function(n,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t(Hn(n,e),(function(t){i(Mn(n,t,e))}),o)}}var ui=I({},Zn,Xn),di={Color:Be,HueColor:lt,ColorNames:f,ImageFilter:ui,Canvas:ze,ImageLoader:Je};Be.color;var pi=0,hi=[],mi=function(){function e(t,n,i){if(x(this,e),"string"!=typeof t)this.el=t;else{var o=document.createElement(t);for(var l in this.uniqId=pi++,n&&(o.className=n),i=i||{})o.setAttribute(l,i[l]);this.el=o}}return X(e,[{key:"attr",value:function(e,t){return 1==arguments.length?this.el.getAttribute(e):(this.el.setAttribute(e,t),this)}},{key:"closest",value:function(t){for(var n=this,i=!1;!(i=n.hasClass(t));){if(!n.el.parentNode)return null;n=new e(n.el.parentNode)}return i?n:null}},{key:"checked",value:function(){return this.el.checked}},{key:"removeClass",value:function(e){return this.el.className=(" "+this.el.className+" ").replace(" "+e+" "," ").trim(),this}},{key:"hasClass",value:function(e){return!!this.el.className&&(" "+this.el.className+" ").indexOf(" "+e+" ")>-1}},{key:"addClass",value:function(e){return this.hasClass(e)||(this.el.className=this.el.className+" "+e),this}},{key:"toggleClass",value:function(e){this.hasClass(e)?this.removeClass(e):this.addClass(e)}},{key:"html",value:function(e){try{"string"==typeof e?this.el.innerHTML=e:this.empty().append(e)}catch{console.log(e)}return this}},{key:"find",value:function(e){return this.el.querySelector(e)}},{key:"$",value:function(t){return new e(this.find(t))}},{key:"findAll",value:function(e){return this.el.querySelectorAll(e)}},{key:"$$",value:function(t){return[].concat(R(this.findAll(t))).map((function(t){return new e(t)}))}},{key:"empty",value:function(){return this.html("")}},{key:"append",value:function(e){return"string"==typeof e?this.el.appendChild(document.createTextNode(e)):this.el.appendChild(e.el||e),this}},{key:"appendTo",value:function(e){return(e.el?e.el:e).appendChild(this.el),this}},{key:"remove",value:function(){return this.el.parentNode&&this.el.parentNode.removeChild(this.el),this}},{key:"text",value:function(){return this.el.textContent}},{key:"css",value:function(e,t){var n=this;if(2==arguments.length)this.el.style[e]=t;else if(1==arguments.length){if("string"==typeof e)return getComputedStyle(this.el)[e];var i=e||{};Object.keys(i).forEach((function(e){n.el.style[e]=i[e]}))}return this}},{key:"cssFloat",value:function(e){return parseFloat(this.css(e))}},{key:"cssInt",value:function(e){return parseInt(this.css(e))}},{key:"px",value:function(e,t){return this.css(e,t+"px")}},{key:"offset",value:function(){var t=this.el.getBoundingClientRect();return{top:t.top+e.getScrollTop(),left:t.left+e.getScrollLeft()}}},{key:"rect",value:function(){return this.el.getBoundingClientRect()}},{key:"position",value:function(){return this.el.style.top?{top:parseFloat(this.css("top")),left:parseFloat(this.css("left"))}:this.el.getBoundingClientRect()}},{key:"size",value:function(){return[this.width(),this.height()]}},{key:"width",value:function(){return this.el.offsetWidth||this.el.getBoundingClientRect().width}},{key:"contentWidth",value:function(){return this.width()-this.cssFloat("padding-left")-this.cssFloat("padding-right")}},{key:"height",value:function(){return this.el.offsetHeight||this.el.getBoundingClientRect().height}},{key:"contentHeight",value:function(){return this.height()-this.cssFloat("padding-top")-this.cssFloat("padding-bottom")}},{key:"dataKey",value:function(e){return this.uniqId+"."+e}},{key:"data",value:function(e,t){if(2!=arguments.length){if(1==arguments.length)return hi[this.dataKey(e)];var n=Object.keys(hi),i=this.uniqId+".";return n.filter((function(e){return 0==e.indexOf(i)})).map((function(e){return hi[e]}))}return hi[this.dataKey(e)]=t,this}},{key:"val",value:function(e){return 0==arguments.length?this.el.value:(1==arguments.length&&(this.el.value=e),this)}},{key:"int",value:function(){return parseInt(this.val(),10)}},{key:"float",value:function(){return parseFloat(this.val())}},{key:"show",value:function(){return this.css("display","block")}},{key:"hide",value:function(){return this.css("display","none")}},{key:"toggle",value:function(){return"none"==this.css("display")?this.show():this.hide()}},{key:"scrollTop",value:function(){return this.el===document.body?e.getScrollTop():this.el.scrollTop}},{key:"scrollLeft",value:function(){return this.el===document.body?e.getScrollLeft():this.el.scrollLeft}},{key:"on",value:function(e,t,n,i){return this.el.addEventListener(e,t,n,i),this}},{key:"off",value:function(e,t){return this.el.removeEventListener(e,t),this}},{key:"getElement",value:function(){return this.el}},{key:"createChild",value:function(t){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=new e(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",arguments.length>2&&void 0!==arguments[2]?arguments[2]:{});return i.css(n),this.append(i),i}},{key:"firstChild",value:function(){return new e(this.el.firstElementChild)}},{key:"replace",value:function(e,t){return this.el.replaceChild(t,e),this}}],[{key:"getScrollTop",value:function(){return Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop)}},{key:"getScrollLeft",value:function(){return Math.max(window.pageXOffset,document.documentElement.scrollLeft,document.body.scrollLeft)}}]),e}(),bi=function(){function e(t){x(this,e),this.$store=t,this.initialize()}return X(e,[{key:"initialize",value:function(){var e=this;this.filterProps().forEach((function(t){e.$store.action(t,e)}))}},{key:"filterProps",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/";return Object.getOwnPropertyNames(this.__proto__).filter((function(t){return t.startsWith(e)}))}}]),e}(),fi=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),X(t,[{key:"initialize",value:function(){W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initialize",this).call(this),this.$store.colorSetsList=[{name:"Material",colors:["#F44336","#E91E63","#9C27B0","#673AB7","#3F51B5","#2196F3","#03A9F4","#00BCD4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548","#9E9E9E","#607D8B"],edit:!0},{name:"Custom",edit:!0,colors:[]},{name:"Color Scale",scale:["red","yellow","black"],count:5}],this.$store.currentColorSets={}}},{key:"/list",value:function(e){return Array.isArray(e.userList)&&e.userList.length?e.userList:e.colorSetsList}},{key:"/setUserPalette",value:function(e,t){e.userList=t,e.dispatch("/resetUserPalette"),e.dispatch("/setCurrentColorSets")}},{key:"/resetUserPalette",value:function(e){e.userList&&e.userList.length&&(e.userList=e.userList.map((function(t,n){if("function"==typeof t.colors){var i=t.colors;t.colors=i(e),t._colors=i}return Object.assign({name:"color-"+n,colors:[]},t)})),e.emit("changeUserList"))}},{key:"/setCurrentColorSets",value:function(e,t){var n=e.dispatch("/list");e.currentColorSets=typeof t>"u"?n[0]:"number"==typeof t?n[t]:n.filter((function(e){return e.name==t}))[0],e.emit("changeCurrentColorSets")}},{key:"/getCurrentColorSets",value:function(e){return e.currentColorSets}},{key:"/addCurrentColor",value:function(e,t){Array.isArray(e.currentColorSets.colors)&&(e.currentColorSets.colors.push(t),e.emit("changeCurrentColorSets"),e.emit("addCurrentColor",t))}},{key:"/setCurrentColorAll",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.currentColorSets.colors=t,e.emit("changeCurrentColorSets")}},{key:"/removeCurrentColor",value:function(e,t){e.currentColorSets.colors[t]&&(e.currentColorSets.colors.splice(t,1),e.emit("changeCurrentColorSets"))}},{key:"/removeCurrentColorToTheRight",value:function(e,t){e.currentColorSets.colors[t]&&(e.currentColorSets.colors.splice(t,Number.MAX_VALUE),e.emit("changeCurrentColorSets"))}},{key:"/clearPalette",value:function(e){e.currentColorSets.colors&&(e.currentColorSets.colors=[],e.emit("changeCurrentColorSets"))}},{key:"/getCurrentColors",value:function(e){return e.dispatch("/getColors",e.currentColorSets)}},{key:"/getColors",value:function(e,t){return t.scale?Be.scale(t.scale,t.count):t.colors||[]}},{key:"/getColorSetsList",value:function(e){return e.dispatch("/list").map((function(t){return{name:t.name,edit:t.edit,colors:e.dispatch("/getColors",t)}}))}}]),t}(bi),yi={addEvent:function(e,t,n,i){e&&e.addEventListener(t,n,i)},removeEvent:function(e,t,n){e&&e.removeEventListener(t,n)},pos:function(e){return e.touches&&e.touches[0]?e.touches[0]:e},posXY:function(e){var t=this.pos(e);return{x:t.pageX,y:t.pageY}}},gi=".",vi=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};x(this,e),this.masterObj=t,this.settingObj=n}return X(e,[{key:"set",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;this.settingObj[e]=t||n}},{key:"init",value:function(e){if(!this.has(e)||!this.settingObj[e]){var t=e.split(gi),n=this.masterObj.refs[t[0]]||this.masterObj[t[0]]||this.masterObj,i=t.pop();if(n[i]){for(var o=arguments.length,l=Array(o>1?o-1:0),r=1;r<o;r++)l[r-1]=arguments[r];var a=n[i].apply(n,l);this.set(e,a)}}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.init(e,t),this.settingObj[e]||t}},{key:"has",value:function(e){return!!this.settingObj[e]}}]),e}(),Zi=/^(click|mouse(down|up|move|enter|leave)|touch(start|move|end)|key(down|up|press)|contextmenu|change|input)/gi,xi=/^load (.*)/gi,Xi=" ",Gi=["Control","Shift","Alt","Meta"],Ii=function(){function e(){x(this,e),this.state=new vi(this),this.refs={},this.childComponents=this.components()}return X(e,[{key:"newChildComponents",value:function(){var e=this;Object.keys(this.childComponents).forEach((function(t){var n=e.childComponents[t];e[t]=new n(e)}))}},{key:"render",value:function(){this.$el=this.parseTemplate(this.template()),this.refs.$el=this.$el,this.parseTarget(),this.load(),this.afterRender()}},{key:"afterRender",value:function(){}},{key:"components",value:function(){return{}}},{key:"parseTemplate",value:function(e){var t=this,n=new mi("div").html(e).firstChild(),i=n.findAll("[ref]");return[].concat(R(i)).forEach((function(e){var n=e.getAttribute("ref");t.refs[n]=new mi(e)})),n}},{key:"parseTarget",value:function(){var e=this,t=this.$el.findAll("[target]");[].concat(R(t)).forEach((function(t){var n=t.getAttribute("target"),i=t.getAttribute("ref")||n,o=new(0,e.childComponents[n])(e);e[i]=o,e.refs[i]=o.$el,o&&(o.render(),new mi(t.parentNode).replace(t,o.$el.el))}))}},{key:"load",value:function(){var e=this;this.filterProps(xi).forEach((function(t){var n=t.split("load ")[1];e.refs[n]&&e.refs[n].html(e.parseTemplate(e[t].call(e)))}))}},{key:"template",value:function(){return"<div></div>"}},{key:"initialize",value:function(){}},{key:"initializeEvent",value:function(){var e=this;this.initializeEventMachin(),Object.keys(this.childComponents).forEach((function(t){e[t]&&e[t].initializeEvent()}))}},{key:"destroy",value:function(){var e=this;this.destroyEventMachin(),Object.keys(this.childComponents).forEach((function(t){e[t]&&e[t].destroy()}))}},{key:"destroyEventMachin",value:function(){this.removeEventAll()}},{key:"initializeEventMachin",value:function(){this.filterProps(Zi).forEach(this.parseEvent.bind(this))}},{key:"collectProps",value:function(){if(!this.collapsedProps){var e=this.__proto__,t=[];do{t.push.apply(t,R(Object.getOwnPropertyNames(e))),e=e.__proto__}while(e);this.collapsedProps=t}return this.collapsedProps}},{key:"filterProps",value:function(e){return this.collectProps().filter((function(t){return t.match(e)}))}},{key:"parseEvent",value:function(e){var t=e.split(Xi);this.bindingEvent(t,this[e].bind(this))}},{key:"getDefaultDomElement",value:function(e){var t=void 0;return(t=e?this.refs[e]||this[e]||window[e]:this.el||this.$el||this.$root)instanceof mi?t.getElement():t}},{key:"getDefaultEventObject",value:function(e){var t=this,n=e.split("."),i=n.shift(),o=n.includes("Control"),l=n.includes("Shift"),r=n.includes("Alt"),a=n.includes("Meta"),s=(n=n.filter((function(e){return!1===Gi.includes(e)}))).filter((function(e){return!!t[e]}));return{eventName:i,isControl:o,isShift:l,isAlt:r,isMeta:a,codes:n=n.filter((function(e){return!1===s.includes(e)})).map((function(e){return e.toLowerCase()})),checkMethodList:s}}},{key:"bindingEvent",value:function(e,t){var n=S(e),i=n[0],o=n[1],l=n.slice(2);o=this.getDefaultDomElement(o);var r=this.getDefaultEventObject(i);r.dom=o,r.delegate=l.join(Xi),this.addEvent(r,t)}},{key:"matchPath",value:function(e,t){return e?e.matches(t)?e:this.matchPath(e.parentElement,t):null}},{key:"getBindings",value:function(){return this._bindings||this.initBindings(),this._bindings}},{key:"addBinding",value:function(e){this.getBindings().push(e)}},{key:"initBindings",value:function(){this._bindings=[]}},{key:"checkEventType",value:function(e,t){var n=this,i=!t.isControl||e.ctrlKey,o=!t.isShift||e.shiftKey,l=!t.isAlt||e.altKey,r=!t.isMeta||e.metaKey,a=!0;t.codes.length&&(a=t.codes.includes(e.code.toLowerCase())||t.codes.includes(e.key.toLowerCase()));var s=!0;return t.checkMethodList.length&&(s=t.checkMethodList.every((function(t){return n[t].call(n,e)}))),i&&l&&o&&r&&a&&s}},{key:"makeCallback",value:function(e,t){var n=this;return e.delegate?function(i){if(i.xy=yi.posXY(i),n.checkEventType(i,e)){var o=n.matchPath(i.target||i.srcElement,e.delegate);if(o)return i.delegateTarget=o,i.$delegateTarget=new mi(o),t(i)}}:function(i){if(i.xy=yi.posXY(i),n.checkEventType(i,e))return t(i)}}},{key:"addEvent",value:function(e,t){e.callback=this.makeCallback(e,t),this.addBinding(e);var n=!0;"touchstart"===e.eventName&&(n={passive:!0}),yi.addEvent(e.dom,e.eventName,e.callback,n)}},{key:"removeEventAll",value:function(){var e=this;this.getBindings().forEach((function(t){e.removeEvent(t)})),this.initBindings()}},{key:"removeEvent",value:function(e){var t=e.eventName,n=e.dom,i=e.callback;yi.removeEvent(n,t,i)}}]),e}(),Wi=/^@/,ki=function(e){function t(e){x(this,t);var n=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.opt=e||{},e&&e.$store&&(n.$store=e.$store),n.initialize(),n.initializeStoreEvent(),n}return k(t,e),X(t,[{key:"initializeStoreEvent",value:function(){var e=this;this.storeEvents={},this.filterProps(Wi).forEach((function(t){var n=t.split("@");n.shift();var i=n.join("@");e.storeEvents[i]=e[t].bind(e),e.$store.on(i,e.storeEvents[i])}))}},{key:"destoryStoreEvent",value:function(){var e=this;Object.keys(this.storeEvents).forEach((function(t){e.$store.off(t,e.storeEvents[t])}))}}]),t}(Ii);function Vi(e){return typeof e>"u"||null==e}var Ci=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),X(t,[{key:"initialize",value:function(){W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initialize",this).call(this),this.$store.rgb={},this.$store.hsl={},this.$store.hsv={},this.$store.alpha=1,this.$store.format="hex"}},{key:"/changeFormat",value:function(e,t){e.format=t,e.emit("changeFormat")}},{key:"/initColor",value:function(e,t,n){e.dispatch("/changeColor",t,n,!0),e.emit("initColor")}},{key:"/changeColor",value:function(e,t,n,i){"string"==typeof(t=t||"#FF0000")&&(t=Be.parse(t)),t.source=t.source||n,e.alpha=Vi(t.a)?e.alpha:t.a,e.format="hsv"!=t.type&&t.type||e.format,"hsl"==t.type?(e.hsl=Object.assign(e.hsl,t),e.rgb=Be.HSLtoRGB(e.hsl),e.hsv=Be.HSLtoHSV(t)):"hex"==t.type||"rgb"==t.type?(e.rgb=Object.assign(e.rgb,t),e.hsl=Be.RGBtoHSL(e.rgb),e.hsv=Be.RGBtoHSV(t)):"hsv"==t.type&&(e.hsv=Object.assign(e.hsv,t),e.rgb=Be.HSVtoRGB(e.hsv),e.hsl=Be.HSVtoHSL(e.hsv)),i||e.emit("changeColor",t.source)}},{key:"/getHueColor",value:function(e){return lt.checkHueColor(e.hsv.h/360)}},{key:"/toString",value:function(e,t){var n=e[t=t||e.format]||e.rgb;return Be.format(I({},n,{a:e.alpha}),t)}},{key:"/toColor",value:function(e,t){return"rgb"==(t=t||e.format)?e.dispatch("/toRGB"):"hsl"==t?e.dispatch("/toHSL"):"hex"==t?e.dispatch("/toHEX"):e.dispatch("/toString",t)}},{key:"/toRGB",value:function(e){return e.dispatch("/toString","rgb")}},{key:"/toHSL",value:function(e){return e.dispatch("/toString","hsl")}},{key:"/toHEX",value:function(e){return e.dispatch("/toString","hex").toUpperCase()}}]),t}(bi),Si=function(){function e(t){x(this,e),this.callbacks=[],this.actions=[],this.modules=t.modules||[],this.initialize()}return X(e,[{key:"initialize",value:function(){this.initializeModule()}},{key:"initializeModule",value:function(){var e=this;this.modules.forEach((function(t){new t(e)}))}},{key:"action",value:function(e,t){this.actions[e]={context:t,callback:t[e]}}},{key:"dispatch",value:function(e){var t=[].concat(Array.prototype.slice.call(arguments)),n=(e=t.shift(),this.actions[e]);if(n)return n.callback.apply(n.context,[this].concat(R(t)))}},{key:"module",value:function(e){}},{key:"on",value:function(e,t){this.callbacks.push({event:e,callback:t})}},{key:"off",value:function(e,t){0==arguments.length?this.callbacks=[]:1==arguments.length?this.callbacks=this.callbacks.filter((function(t){return t.event!=e})):2==arguments.length&&(this.callbacks=this.callbacks.filter((function(n){return n.event!=e&&n.callback!=t})))}},{key:"emit",value:function(){var e=[].concat(Array.prototype.slice.call(arguments)),t=e.shift();this.callbacks.filter((function(e){return e.event==t})).forEach((function(t){t&&"function"==typeof t.callback&&t.callback.apply(t,R(e))}))}}]),e}(),Ri=function(e){function t(e){x(this,t);var n=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.isColorPickerShow=!1,n.isShortCut=!1,n.hideDelay=+(typeof n.opt.hideDeplay>"u"?2e3:n.opt.hideDelay),n.timerCloseColorPicker,n.autoHide=n.opt.autoHide||!0,n.outputFormat=n.opt.outputFormat,n.$checkColorPickerClass=n.checkColorPickerClass.bind(n),n}return k(t,e),X(t,[{key:"initialize",value:function(){var e=this;this.$body=null,this.$root=null,this.$store=new Si({modules:[Ci,fi]}),this.callbackChange=function(){e.callbackColorValue()},this.callbackLastUpdate=function(){e.callbackLastUpdateColorValue()},this.callbackAddCurrentColor=function(t){e.callbackAddCurrentColorValue(t)},this.colorpickerShowCallback=function(){},this.colorpickerHideCallback=function(){},this.colorpickerLastUpdateCallback=function(){},this.colorpickerAddCurrentColorCallback=function(){},this.$body=new mi(this.getContainer()),this.$root=new mi("div","easylogic-colorpicker",{tabIndex:-1}),"inline"==this.opt.position&&this.$body.append(this.$root),this.opt.type&&this.$root.addClass(this.opt.type),this.opt.hideInformation&&this.$root.addClass("hide-information"),this.opt.hideColorsets&&this.$root.addClass("hide-colorsets"),this.$arrow=new mi("div","arrow"),this.$root.append(this.$arrow),this.opt.colorSets?this.$store.dispatch("/setUserPalette",this.opt.colorSet):qe(this.opt.onRetrievePreset)?this.$store.dispatch("/setUserPalette",this.opt.onRetrievePreset()):this.$store.dispatch("/setUserPalette",[]),this.render(),this.$root.append(this.$el),this.initColorWithoutChangeEvent(this.opt.color),this.initializeEvent()}},{key:"initColorWithoutChangeEvent",value:function(e){this.$store.dispatch("/initColor",e)}},{key:"show",value:function(e,t,n,i,o,l){this.colorpickerShowCallback=n,this.colorpickerHideCallback=i,this.colorpickerLastUpdateCallback=o,this.colorpickerAddCurrentColorCallback=l,this.$root.css(this.getInitalizePosition()).show(),this.isColorPickerShow=!0,this.isShortCut=e.isShortCut||!1,this.outputFormat=e.outputFormat,this.hideDelay=+(typeof e.hideDelay>"u"?2e3:e.hideDelay),this.hideDelay>0&&this.setHideDelay(this.hideDelay),this.$root.appendTo(this.$body),this.definePosition(e),this.initColorWithoutChangeEvent(t)}},{key:"initColor",value:function(e,t){this.$store.dispatch("/changeColor",e,t)}},{key:"hide",value:function(){this.isColorPickerShow&&(this.$root.hide(),this.$root.remove(),this.isColorPickerShow=!1,this.callbackHideColorValue())}},{key:"setColorsInPalette",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.$store.dispatch("/setCurrentColorAll",e)}},{key:"setUserPalette",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.$store.dispatch("/setUserPalette",e)}},{key:"getOption",value:function(e){return this.opt[e]}},{key:"setOption",value:function(e,t){this.opt[e]=t}},{key:"isType",value:function(e){return this.getOption("type")==e}},{key:"isPaletteType",value:function(){return this.isType("palette")}},{key:"isSketchType",value:function(){return this.isType("sketch")}},{key:"getContainer",value:function(){return this.opt.container||document.body}},{key:"getColor",value:function(e){return this.$store.dispatch("/toColor",e)}},{key:"definePositionForArrow",value:function(e,t,n){}},{key:"definePosition",value:function(e){var t=this.$root.width(),n=this.$root.height(),i=e.left-this.$body.scrollLeft();t+i>window.innerWidth&&(i-=t+i-window.innerWidth),i<0&&(i=0);var o=e.top-this.$body.scrollTop();n+o>window.innerHeight&&(o-=n+o-window.innerHeight),o<0&&(o=0),this.$root.css({left:i+"px",top:o+"px"})}},{key:"getInitalizePosition",value:function(){return"inline"==this.opt.position?{position:"relative",left:"auto",top:"auto",display:"inline-block"}:{position:"fixed",left:"-10000px",top:"-10000px"}}},{key:"isAbsolute",value:function(){return"inline"!==this.opt.position}},{key:"mouseup.isAbsolute document",value:function(e){this.__isMouseDown=!1,this.checkInHtml(e.target)||(0==this.checkColorPickerClass(e.target)?this.hide():this.__isMouseIn||(clearTimeout(this.timerCloseColorPicker),this.timerCloseColorPicker=setTimeout(this.hide.bind(this),this.delayTime||this.hideDelay)))}},{key:"keyup.isAbsolute.escape $root",value:function(e){this.hide()}},{key:"mouseover.isAbsolute $root",value:function(e){clearTimeout(this.timerCloseColorPicker)}},{key:"mousemove.isAbsolute $root",value:function(e){clearTimeout(this.timerCloseColorPicker)}},{key:"mouseenter.isAbsolute $root",value:function(e){clearTimeout(this.timerCloseColorPicker),this.__isMouseIn=!0}},{key:"mouseleave.isAbsolute $root",value:function(e){this.__isMouseIn=!1,this.__isMouseDown||(clearTimeout(this.timerCloseColorPicker),this.timerCloseColorPicker=setTimeout(this.hide.bind(this),this.delayTime||this.hideDelay))}},{key:"mousedown.isAbsolute $root",value:function(e){this.__isMouseDown=!0}},{key:"setHideDelay",value:function(e){this.delayTime=e||0}},{key:"runHideDelay",value:function(){this.isColorPickerShow&&this.setHideDelay()}},{key:"callbackColorValue",value:function(e){e=e||this.getCurrentColor(),"function"==typeof this.opt.onChange&&this.opt.onChange.call(this,e),"function"==typeof this.colorpickerShowCallback&&this.colorpickerShowCallback(e)}},{key:"callbackLastUpdateColorValue",value:function(e){e=e||this.getCurrentColor(),"function"==typeof this.opt.onLastUpdate&&this.opt.onLastUpdate.call(this,e),"function"==typeof this.colorpickerLastUpdateCallback&&this.colorpickerLastUpdateCallback(e)}},{key:"callbackAddCurrentColorValue",value:function(e){"function"==typeof this.opt.onLastUpdate&&this.opt.onAddPreset.call(this,e),"function"==typeof this.colorpickerAddCurrentColorCallback&&this.colorpickerAddCurrentColorCallback(e)}},{key:"callbackHideColorValue",value:function(e){e=e||this.getCurrentColor(),"function"==typeof this.opt.onHide&&this.opt.onHide.call(this,e),"function"==typeof this.colorpickerHideCallback&&this.colorpickerHideCallback(e)}},{key:"getCurrentColor",value:function(){return this.$store.dispatch("/toColor",this.outputFormat)}},{key:"checkColorPickerClass",value:function(e){var t=new mi(e).closest("codemirror-colorview"),n=new mi(e).closest("easylogic-colorpicker"),i=new mi(e).closest("CodeMirror");return e.nodeName,!!(n||t||i)}},{key:"checkInHtml",value:function(e){return"HTML"==e.nodeName}},{key:"initializeStoreEvent",value:function(){W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initializeStoreEvent",this).call(this),this.$store.on("changeColor",this.callbackChange),this.$store.on("lastUpdateColor",this.callbackLastUpdate),this.$store.on("changeFormat",this.callbackChange),this.$store.on("addCurrentColor",this.callbackAddCurrentColor)}},{key:"destroy",value:function(){W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.$store.off("changeColor",this.callbackChange),this.$store.off("lastUpdateColor",this.callbackLastUpdate),this.$store.off("changeFormat",this.callbackChange),this.$store.off("addCurrentColor",this.callbackAddCurrentColor),this.callbackChange=void 0,this.callbackLastUpdate=void 0,this.callbackAddCurrentColor=void 0,this.colorpickerShowCallback=void 0,this.colorpickerHideCallback=void 0}}]),t}(ki),Li=function(e){function t(e){x(this,t);var n=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.source="base-box",n}return k(t,e),X(t,[{key:"refresh",value:function(){}},{key:"refreshColorUI",value:function(e){}},{key:"changeColor",value:function(e){this.$store.dispatch("/changeColor",Object.assign({source:this.source},e||{}))}},{key:"mouseup document",value:function(e){this.onDragEnd(e)}},{key:"mousemove document",value:function(e){this.onDragMove(e)}},{key:"mousedown $bar",value:function(e){e.preventDefault(),this.isDown=!0}},{key:"mousedown $container",value:function(e){this.isDown=!0,this.onDragStart(e)}},{key:"touchend document",value:function(e){this.onDragEnd(e)}},{key:"touchmove document",value:function(e){this.onDragMove(e)}},{key:"touchstart $bar",value:function(e){e.preventDefault(),this.isDown=!0}},{key:"touchstart $container",value:function(e){this.onDragStart(e)}},{key:"onDragStart",value:function(e){this.isDown=!0,this.refreshColorUI(e)}},{key:"onDragMove",value:function(e){this.isDown&&this.refreshColorUI(e)}},{key:"onDragEnd",value:function(e){this.isDown&&(this.$store.emit("lastUpdateColor"),this.isDown=!1)}},{key:"@changeColor",value:function(e){this.source!=e&&this.refresh()}},{key:"@initColor",value:function(){this.refresh()}}]),t}(ki),Yi=function(e){function t(e){x(this,t);var n=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.minValue=0,n.maxValue=1,n.source="base-slider",n}return k(t,e),X(t,[{key:"getMinMaxPosition",value:function(){var e=this.getMinPosition(),t=this.getMaxDist();return{min:e,max:e+t,width:t}}},{key:"getCurrent",value:function(e){return min+this.getMaxDist()*e}},{key:"getMinPosition",value:function(){return this.refs.$container.offset().left}},{key:"getMaxDist",value:function(){return this.state.get("$container.width")}},{key:"getDist",value:function(e){var t=this.getMinMaxPosition(),n=t.min,i=t.max;return e<n?0:e>i?100:(e-n)/(i-n)*100}},{key:"getCaculatedDist",value:function(e){var t=e?this.getMousePosition(e):this.getCurrent(this.getDefaultValue()/this.maxValue);return this.getDist(t)}},{key:"getDefaultValue",value:function(){return 0}},{key:"setMousePosition",value:function(e){this.refs.$bar.css({left:e+"px"})}},{key:"getMousePosition",value:function(e){return yi.pos(e).pageX}},{key:"refresh",value:function(){this.setColorUI()}},{key:"setColorUI",value:function(e){if(e=e||this.getDefaultValue(),this.lastV===e)return!0;this.lastV=e,e<=this.minValue?this.refs.$bar.addClass("first").removeClass("last"):e>=this.maxValue?this.refs.$bar.addClass("last").removeClass("first"):this.refs.$bar.removeClass("last").removeClass("first"),this.setMousePosition(this.getMaxDist()*((e||0)/this.maxValue))}}]),t}(Li),Ti=function(e){function t(e){x(this,t);var n=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.minValue=0,n.maxValue=1,n.source="value-control",n}return k(t,e),X(t,[{key:"template",value:function(){return'\n            <div class="value">\n                <div ref="$container" class="value-container">\n                    <div ref="$bar" class="drag-bar"></div>\n                </div>\n            </div>\n        '}},{key:"setBackgroundColor",value:function(){this.refs.$container.css("background-color",this.$store.dispatch("/toRGB"))}},{key:"refresh",value:function(){W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"refresh",this).call(this),this.setBackgroundColor()}},{key:"getDefaultValue",value:function(){return this.$store.hsv.v}},{key:"refreshColorUI",value:function(e){var t=this.getCaculatedDist(e);this.setColorUI(t/100*this.maxValue),this.changeColor({type:"hsv",v:t/100*this.maxValue})}}]),t}(Yi),wi=function(e){function t(e){x(this,t);var n=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.minValue=0,n.maxValue=1,n.source="opacity-control",n}return k(t,e),X(t,[{key:"template",value:function(){return'\n        <div class="opacity">\n            <div ref="$container" class="opacity-container">\n                <div ref="$colorbar" class="color-bar"></div>\n                <div ref="$bar" class="drag-bar2"></div>\n            </div>\n        </div>\n        '}},{key:"refresh",value:function(){W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"refresh",this).call(this),this.setOpacityColorBar()}},{key:"setOpacityColorBar",value:function(){var e=Object.assign({},this.$store.rgb);e.a=0;var t=Be.format(e,"rgb");e.a=1;var n=Be.format(e,"rgb");this.setOpacityColorBarBackground(t,n)}},{key:"setOpacityColorBarBackground",value:function(e,t){this.refs.$colorbar.css("background","linear-gradient(to right, "+e+", "+t+")")}},{key:"getDefaultValue",value:function(){return this.$store.alpha}},{key:"refreshColorUI",value:function(e){var t=this.getCaculatedDist(e);this.setColorUI(t/100*this.maxValue),this.changeColor({a:Math.floor(t)/100*this.maxValue})}}]),t}(Yi),Ni="macos-control",Ki=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),X(t,[{key:"components",value:function(){return{Value:Ti,Opacity:wi}}},{key:"template",value:function(){return'\n        <div class="control">\n            <div target="Value" ></div>\n            <div target="Opacity" ></div>\n            <div ref="$controlPattern" class="empty"></div>\n            <div ref="$controlColor" class="color"></div>\n        </div>\n        '}},{key:"setBackgroundColor",value:function(){this.refs.$controlColor.css("background-color",this.$store.dispatch("/toRGB"))}},{key:"refresh",value:function(){this.setColorUI(),this.setBackgroundColor()}},{key:"setColorUI",value:function(){this.Value.setColorUI(),this.Opacity.setColorUI()}},{key:"@changeColor",value:function(e){Ni!=e&&this.refresh()}},{key:"@initColor",value:function(){this.refresh()}}]),t}(ki),Hi=function(e){function t(e){x(this,t);var n=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.width=214,n.height=214,n.thinkness=0,n.half_thinkness=0,n.source="colorwheel",n}return k(t,e),X(t,[{key:"template",value:function(){return'\n        <div class="wheel">\n            <canvas class="wheel-canvas" ref="$colorwheel" ></canvas>\n            <div class="wheel-canvas" ref="$valuewheel" ></div>\n            <div class="drag-pointer" ref="$drag_pointer"></div>\n        </div>\n        '}},{key:"refresh",value:function(e){this.setColorUI(e)}},{key:"setColorUI",value:function(e){this.renderCanvas(),this.renderValue(),this.setHueColor(null,e)}},{key:"renderValue",value:function(){var e=1-this.$store.hsv.v;this.refs.$valuewheel.css({"background-color":"rgba(0, 0, 0, "+e+")"})}},{key:"renderWheel",value:function(e,t){this.width&&!e&&(e=this.width),this.height&&!t&&(t=this.height);var n=new mi("canvas"),i=n.el.getContext("2d");n.el.width=e,n.el.height=t,n.css({width:e+"px",height:t+"px"});for(var o=i.getImageData(0,0,e,t),l=o.data,r=Math.floor(e/2),a=Math.floor(t/2),s=e>t?a:r,c=r,u=a,p=0;p<t;p++)for(var h=0;h<e;h++){var m=h-c+1,b=p-u+1,f=m*m+b*b,y=d(m,b),g=Be.HSVtoRGB(y,Math.min(Math.sqrt(f)/s,1),1),v=4*(p*e+h);l[v]=g.r,l[v+1]=g.g,l[v+2]=g.b,l[v+3]=255}return i.putImageData(o,0,0),this.thinkness>0&&(i.globalCompositeOperation="destination-out",i.fillStyle="black",i.beginPath(),i.arc(c,u,s-this.thinkness,0,2*Math.PI),i.closePath(),i.fill()),n}},{key:"renderCanvas",value:function(){if(!this.$store.createdWheelCanvas){var e=this.refs.$colorwheel,t=e.el.getContext("2d"),n=e.size(),i=C(n,2),o=i[0],l=i[1];this.width&&!o&&(o=this.width),this.height&&!l&&(l=this.height),e.el.width=o,e.el.height=l,e.css({width:o+"px",height:l+"px"});var r=this.renderWheel(o,l);t.drawImage(r.el,0,0),this.$store.createdWheelCanvas=!0}}},{key:"getDefaultValue",value:function(){return this.$store.hsv.h}},{key:"getDefaultSaturation",value:function(){return this.$store.hsv.s}},{key:"getCurrentXY",value:function(e,t,n,i,o){return e?yi.posXY(e):u(t,n,i,o)}},{key:"getRectangle",value:function(){var e=this.state.get("$el.width"),t=this.state.get("$el.height"),n=this.state.get("$colorwheel.width")/2,i=this.refs.$el.offset().left,o=i+e/2,l=this.refs.$el.offset().top;return{minX:i,minY:l,width:e,height:t,radius:n,centerX:o,centerY:l+t/2}}},{key:"setHueColor",value:function(e,t){if(this.state.get("$el.width")){var n=this.getRectangle(),i=n.minX,o=n.minY,l=n.radius,r=n.centerX,a=n.centerY,s=this.getCurrentXY(e,this.getDefaultValue(),this.getDefaultSaturation()*l,r,a),c=(b=s.x)-r,u=(f=s.y)-a,p=c*c+u*u,h=d(c,u);if(p>l*l)var m=this.getCurrentXY(null,h,l,r,a),b=m.x,f=m.y;var y=Math.min(Math.sqrt(p)/l,1);this.refs.$drag_pointer.css({left:b-i+"px",top:f-o+"px"}),t||this.changeColor({type:"hsv",h:h,s:y})}}},{key:"changeColor",value:function(e){this.$store.dispatch("/changeColor",Object.assign({source:this.source},e||{}))}},{key:"@changeColor",value:function(e){this.source!=e&&this.refresh(!0)}},{key:"@initColor",value:function(){this.refresh(!0)}},{key:"mouseup document",value:function(e){this.isDown&&(this.isDown=!1,this.$store.emit("lastUpdateColor"))}},{key:"mousemove document",value:function(e){this.isDown&&this.setHueColor(e)}},{key:"mousedown $drag_pointer",value:function(e){e.preventDefault(),this.isDown=!0}},{key:"mousedown $el",value:function(e){this.isDown=!0,this.setHueColor(e)}},{key:"touchend document",value:function(e){this.isDown&&(this.isDown=!1,this.$store.emit("lastUpdateColor"))}},{key:"touchmove document",value:function(e){this.isDown&&this.setHueColor(e)}},{key:"touchstart $drag_pointer",value:function(e){e.preventDefault(),this.isDown=!0}},{key:"touchstart $el",value:function(e){e.preventDefault(),this.isDown=!0,this.setHueColor(e)}}]),t}(ki),Mi="chromedevtool-information",zi=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),X(t,[{key:"template",value:function(){return'\n        <div class="information hex">\n            <div ref="$informationChange" class="information-change">\n                <button ref="$formatChangeButton" type="button" class="format-change-button arrow-button"></button>\n            </div>\n            <div class="information-item hex">\n                <div class="input-field hex">\n                    <input ref="$hexCode" class="input" type="text" />\n                    <div class="title">HEX</div>\n                </div>\n            </div>\n            <div class="information-item rgb">\n                <div class="input-field rgb-r">\n                    <input ref="$rgb_r" class="input" type="number" step="1" min="0" max="255" />\n                    <div class="title">R</div>\n                </div>\n                <div class="input-field rgb-g">\n                    <input ref="$rgb_g" class="input" type="number" step="1" min="0" max="255" />\n                    <div class="title">G</div>\n                </div>\n                <div class="input-field rgb-b">\n                    <input ref="$rgb_b" class="input" type="number" step="1" min="0" max="255" />\n                    <div class="title">B</div>\n                </div>          \n                <div class="input-field rgb-a">\n                    <input ref="$rgb_a" class="input" type="number" step="0.01" min="0" max="1" />\n                    <div class="title">A</div>\n                </div>                                                            \n            </div>\n            <div class="information-item hsl">\n                <div class="input-field hsl-h">\n                    <input ref="$hsl_h" class="input" type="number" step="1" min="0" max="360" />\n                    <div class="title">H</div>\n                </div>\n                <div class="input-field hsl-s">\n                    <input ref="$hsl_s" class="input" type="number" step="1" min="0" max="100" />\n                    <div class="postfix">%</div>\n                    <div class="title">S</div>\n                </div>\n                <div class="input-field hsl-l">\n                    <input ref="$hsl_l" class="input" type="number" step="1" min="0" max="100" />\n                    <div class="postfix">%</div>                        \n                    <div class="title">L</div>\n                </div>\n                <div class="input-field hsl-a">\n                    <input ref="$hsl_a" class="input" type="number" step="0.01" min="0" max="1" />\n                    <div class="title">A</div>\n                </div>\n            </div>\n        </div>\n        '}},{key:"setCurrentFormat",value:function(e){this.format=e,this.initFormat()}},{key:"initFormat",value:function(){var e=this,t=this.format||"hex";["hex","rgb","hsl"].filter((function(e){return e!==t})).forEach((function(t){e.$el.removeClass(t)})),this.$el.addClass(t)}},{key:"nextFormat",value:function(){var e=this.format||"hex",t="hex";"hex"==e?t="rgb":"rgb"==e?t="hsl":"hsl"==e&&(t="hex"),this.format=t,this.initFormat(),this.$store.dispatch("/changeFormat",this.format),this.$store.emit("lastUpdateColor")}},{key:"goToFormat",value:function(e){this.format=e,("rgb"===e||"hsl"===e)&&this.initFormat(),this.$store.dispatch("/changeFormat",this.format)}},{key:"getFormat",value:function(){return this.format||"hex"}},{key:"checkNumberKey",value:function(e){var t=e.which,n=!1;return(37==t||39==t||8==t||46==t||9==t)&&(n=!0),!(!n&&(t<48||t>57))}},{key:"checkNotNumberKey",value:function(e){return!this.checkNumberKey(e)}},{key:"changeRgbColor",value:function(){this.$store.dispatch("/changeColor",{type:"rgb",r:this.refs.$rgb_r.int(),g:this.refs.$rgb_g.int(),b:this.refs.$rgb_b.int(),a:this.refs.$rgb_a.float(),source:Mi}),this.$store.emit("lastUpdateColor")}},{key:"changeHslColor",value:function(){this.$store.dispatch("/changeColor",{type:"hsl",h:this.refs.$hsl_h.int(),s:this.refs.$hsl_s.int(),l:this.refs.$hsl_l.int(),a:this.refs.$hsl_a.float(),source:Mi}),this.$store.emit("lastUpdateColor")}},{key:"@changeColor",value:function(e){Mi!=e&&this.refresh()}},{key:"@initColor",value:function(){this.refresh()}},{key:"input $rgb_r",value:function(e){this.changeRgbColor()}},{key:"input $rgb_g",value:function(e){this.changeRgbColor()}},{key:"input $rgb_b",value:function(e){this.changeRgbColor()}},{key:"input $rgb_a",value:function(e){this.changeRgbColor()}},{key:"input $hsl_h",value:function(e){this.changeHslColor()}},{key:"input $hsl_s",value:function(e){this.changeHslColor()}},{key:"input $hsl_l",value:function(e){this.changeHslColor()}},{key:"input $hsl_a",value:function(e){this.changeHslColor()}},{key:"keyup $hexCode",value:function(e){var t=this.refs.$hexCode.val();"#"==t.charAt(0)&&(7==t.length||9===t.length)&&(this.$store.dispatch("/changeColor",t,Mi),this.$store.emit("lastUpdateColor"))}},{key:"click $formatChangeButton",value:function(e){this.nextFormat()}},{key:"click $el .information-item.hex .input-field .title",value:function(e){this.goToFormat("hex")}},{key:"click $el .information-item.rgb .input-field .title",value:function(e){this.goToFormat("hsl")}},{key:"click $el .information-item.hsl .input-field .title",value:function(e){this.goToFormat("rgb")}},{key:"setRGBInput",value:function(){this.refs.$rgb_r.val(this.$store.rgb.r),this.refs.$rgb_g.val(this.$store.rgb.g),this.refs.$rgb_b.val(this.$store.rgb.b),this.refs.$rgb_a.val(this.$store.alpha)}},{key:"setHSLInput",value:function(){this.refs.$hsl_h.val(this.$store.hsl.h),this.refs.$hsl_s.val(this.$store.hsl.s),this.refs.$hsl_l.val(this.$store.hsl.l),this.refs.$hsl_a.val(this.$store.alpha)}},{key:"setHexInput",value:function(){this.refs.$hexCode.val(this.$store.dispatch("/toHEX"))}},{key:"refresh",value:function(){this.setCurrentFormat(this.$store.format),this.setRGBInput(),this.setHSLInput(),this.setHexInput()}}]),t}(ki),Ji="data-colorsets-index",ji=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),X(t,[{key:"template",value:function(){return'\n            <div class="color-chooser">\n                <div class="color-chooser-container">\n                    <div class="colorsets-item colorsets-item-header">\n                        <h1 class="title">Color Palettes</h1>\n                        <span ref="$toggleButton" class="items">&times;</span>\n                    </div>\n                    <div ref="$colorsetsList" class="colorsets-list"></div>\n                </div>\n            </div>\n        '}},{key:"refresh",value:function(){this.load()}},{key:"@changeCurrentColorSets",value:function(){this.refresh()}},{key:"@toggleColorChooser",value:function(){this.toggle()}},{key:"load $colorsetsList",value:function(){return"\n            <div>\n                "+this.$store.dispatch("/getColorSetsList").map((function(e,t){return'\n                        <div class="colorsets-item" data-colorsets-index="'+t+'" >\n                            <h1 class="title">'+e.name+'</h1>\n                            <div class="items">\n                                <div>\n                                    '+e.colors.filter((function(e,t){return t<5})).map((function(e){return'<div class="color-item" title="'+(e=e||"rgba(255, 255, 255, 1)")+'">\n                                                <div class="color-view" style="background-color: '+e+'"></div>\n                                            </div>'})).join("")+"\n                                </div>\n                            </div>\n                        </div>"})).join("")+"\n            </div>\n        "}},{key:"show",value:function(){this.$el.addClass("open")}},{key:"hide",value:function(){this.$el.removeClass("open")}},{key:"toggle",value:function(){this.$el.toggleClass("open")}},{key:"click $toggleButton",value:function(e){this.toggle()}},{key:"click $colorsetsList .colorsets-item",value:function(e){var t=e.$delegateTarget;if(t){var n=parseInt(t.attr(Ji));this.$store.dispatch("/setCurrentColorSets",n),this.hide()}}},{key:"destroy",value:function(){W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.hide()}}]),t}(ki),Fi=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),X(t,[{key:"template",value:function(){return'\n            <div class="colorsets">\n                <div class="menu" title="Open Color Palettes">\n                    <button ref="$colorSetsChooseButton" type="button" class="color-sets-choose-btn arrow-button"></button>\n                </div>\n                <div ref="$colorSetsColorList" class="color-list"></div>\n            </div>\n        '}},{key:"load $colorSetsColorList",value:function(){var e=this.$store.dispatch("/getCurrentColorSets"),t=this.$store.dispatch("/getCurrentColors");return"\n            <div>\n                <h6>"+e.name+'</h6>\n                <div class="current-color-sets">\n                '+t.map((function(e,t){return'<div class="color-item" title="'+e+'" data-index="'+t+'" data-color="'+e+'">\n                        <div class="empty"></div>\n                        <div class="color-view" style="background-color: '+e+'"></div>\n                    </div>'})).join("")+"   \n                "+(e.edit?'<div class="add-color-item">+</div>':"")+"         \n                </div>\n            </div>\n            \n        "}},{key:"refresh",value:function(){this.load()}},{key:"addColor",value:function(e){this.$store.dispatch("/addCurrentColor",e)}},{key:"@changeCurrentColorSets",value:function(){this.refresh()}},{key:"click $colorSetsChooseButton",value:function(e){this.$store.emit("toggleColorChooser")}},{key:"contextmenu $colorSetsColorList",value:function(e){if(e.preventDefault(),this.$store.dispatch("/getCurrentColorSets").edit){var t=new mi(e.target).closest("color-item");if(t){var n=parseInt(t.attr("data-index"));this.$store.emit("showContextMenu",e,n)}else this.$store.emit("showContextMenu",e)}}},{key:"click $colorSetsColorList .add-color-item",value:function(e){this.addColor(this.$store.dispatch("/toColor"))}},{key:"click $colorSetsColorList .color-item",value:function(e){this.$store.dispatch("/changeColor",e.$delegateTarget.attr("data-color")),this.$store.emit("lastUpdateColor")}}]),t}(ki),Oi=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),X(t,[{key:"template",value:function(){return'\n            <ul class="colorsets-contextmenu">\n                <li class="menu-item small-hide" data-type="remove-color">Remove color</li>\n                <li class="menu-item small-hide" data-type="remove-all-to-the-right">Remove all to the right</li>\n                <li class="menu-item" data-type="clear-palette">Clear palette</li>\n            </ul>\n        '}},{key:"show",value:function(e,t){var n=yi.pos(e);this.$el.css({top:n.clientY-10+"px",left:n.clientX+"px"}),this.$el.addClass("show"),this.selectedColorIndex=t,typeof this.selectedColorIndex>"u"?this.$el.addClass("small"):this.$el.removeClass("small")}},{key:"hide",value:function(){this.$el.removeClass("show")}},{key:"runCommand",value:function(e){switch(e){case"remove-color":this.$store.dispatch("/removeCurrentColor",this.selectedColorIndex);break;case"remove-all-to-the-right":this.$store.dispatch("/removeCurrentColorToTheRight",this.selectedColorIndex);break;case"clear-palette":this.$store.dispatch("/clearPalette")}}},{key:"@showContextMenu",value:function(e,t){this.show(e,t)}},{key:"click $el .menu-item",value:function(e){e.preventDefault(),this.runCommand(e.$delegateTarget.attr("data-type")),this.hide()}}]),t}(ki),$i=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),X(t,[{key:"template",value:function(){return'\n            <div class=\'colorpicker-body\'>\n                <div target="colorwheel"></div>\n                <div target="control"></div>\n                <div target="information"></div>\n                <div target="currentColorSets"></div>\n                <div target="colorSetsChooser"></div>\n                <div target="contextMenu"></div>                \n            </div>\n        '}},{key:"components",value:function(){return{colorwheel:Hi,control:Ki,information:zi,currentColorSets:Fi,colorSetsChooser:ji,contextMenu:Oi}}}]),t}(Ri),Ei=function(e){function t(e){x(this,t);var n=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.minValue=0,n.maxValue=360,n.source="hue-control",n}return k(t,e),X(t,[{key:"template",value:function(){return'\n            <div class="hue"> \n                <div ref="$container" class="hue-container">\n                    <div ref="$bar" class="drag-bar"></div>\n                </div>\n            </div>\n        '}},{key:"getDefaultValue",value:function(){return this.$store.hsv.h}},{key:"refreshColorUI",value:function(e){var t=this.getCaculatedDist(e);!0!==this.setColorUI(t/100*this.maxValue)&&this.changeColor({h:t/100*this.maxValue,type:"hsv"})}}]),t}(Yi),Ui=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),X(t,[{key:"initialize",value:function(){W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initialize",this).call(this),this.minValue=0,this.maxValue=360,this.hueScaleDist=.05}},{key:"template",value:function(){return'\n            <div class="hue-scale">\n                <div ref="$container" class="hue-scale-container">\n                    <div ref="$bar" class="drag-bar"></div>\n                </div>\n            </div>\n        '}},{key:"getDefaultValue",value:function(){return this.$store.hsv.h}},{key:"getCalculatedDist",value:function(e){var t=e?this.getMousePosition(e):this.getCurrent(this.getDefaultValue()/this.maxValue);return this.getDist(t)}},{key:"refreshColorUI",value:function(e){var t=this.getCalculatedDist(e);!0!==this.setColorUI(t/100)&&this.changeColor({h:360*(this.minValue+this.fullDist*(t/100)),type:"hsv"})}},{key:"setColorUI",value:function(e){var t=void 0;if(e){if(t=this.minValue+e*this.fullDist,this.lastP===t)return!0;this.lastP=t}else{if(t=this.getDefaultValue()/360,this.lastP===t)return!0;this.lastP=t;var n=t+.05,i=t-.05;if(n>1)n=1,i=1-2*this.hueScaleDist;else if(i<0){var o=Math.abs(i);i=0,n+=o}var l=lt.getHueScale(t,i,n);this.list=l;var r=l[0].start,a=l[l.length-1].start;this.minValue=r,this.maxValue=a;var s=this.maxValue-this.minValue;this.fullDist=s;var c=l.map((function(e){return{color:e.rgb,percent:(e.start-r)/s*100,unit:"%"}}));this.refs.$container.css("background-image","linear-gradient(to right, "+c.map((function(e){return e.color+" "+e.percent+e.unit})).join(",")+")")}t<=this.minValue?(t=this.minValue,this.refs.$bar.addClass("first").removeClass("last")):t>=this.maxValue?(t=this.maxValue,this.refs.$bar.addClass("last").removeClass("first")):this.refs.$bar.removeClass("last").removeClass("first"),this.setMousePosition(this.getMaxDist()*((t-this.minValue)/this.fullDist))}}]),t}(Yi),Pi="chromedevtool-control",Ai=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),X(t,[{key:"components",value:function(){return{Hue:Ei,Opacity:wi,HueScale:Ui}}},{key:"template",value:function(){return'\n        <div class="control">\n            <div target="Hue" ></div>\n            <div target="HueScale" ></div>\n            <div target="Opacity" ></div>\n            <div ref="$controlPattern" class="empty"></div>\n            <div ref="$controlColor" class="color"></div>\n            <div ref="$controlPattern2" class="empty2"></div>\n            <div ref="$controlColor2" class="color2"></div>            \n        </div>\n        '}},{key:"setBackgroundColor",value:function(){this.refs.$controlColor.css("background-color",this.$store.dispatch("/toRGB"))}},{key:"setLastUpdateColor",value:function(){this.refs.$controlColor2.css("background-color",this.$store.dispatch("/toRGB"))}},{key:"refresh",value:function(){this.setColorUI(),this.setBackgroundColor()}},{key:"setColorUI",value:function(){this.Hue.setColorUI(),this.Opacity.setColorUI()}},{key:"@changeColor",value:function(e){Pi!=e&&this.refresh()}},{key:"@lastUpdateColor",value:function(e){Pi!=e&&this.setLastUpdateColor()}},{key:"@initColor",value:function(){this.refresh()}}]),t}(ki),Bi="chromedevtool-palette",Qi=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),X(t,[{key:"template",value:function(){return'\n        <div class="color">\n            <div ref="$saturation" class="saturation">\n                <div ref="$value" class="value">\n                    <div ref="$drag_pointer" class="drag-pointer" data-axis-value="all">\n                        <div ref="$left_saturation" class="left-saturation" data-axis-value="saturation"></div>\n                        <div ref="$right_saturation" class="right-saturation" data-axis-value="saturation"></div>\n                        <div ref="$top_value" class="top-value" data-axis-value="value"></div>\n                        <div ref="$bottom_value" class="bottom-value" data-axis-value="value"></div>\n                    </div>\n                </div>\n            </div>        \n        </div>        \n        '}},{key:"setBackgroundColor",value:function(e){this.$el.css("background-color",e)}},{key:"refresh",value:function(){this.cacheSize(),this.setColorUI()}},{key:"calculateSV",value:function(){var e=this.drag_pointer_pos||{x:0,y:0},t=this.state.get("$el.width"),n=this.state.get("$el.height"),i=e.x/t,o=(n-e.y)/n;this.$store.dispatch("/changeColor",{type:"hsv",s:i,v:o,source:Bi})}},{key:"setColorUI",value:function(){var e=this.w*this.$store.hsv.s,t=this.h*(1-this.$store.hsv.v);this.refs.$drag_pointer.css({left:e+"px",top:t+"px"}),this.drag_pointer_pos={x:e,y:t},this.setBackgroundColor(this.$store.dispatch("/getHueColor"))}},{key:"setSubColor",value:function(e){var t=e.pageX,n=e.pageY,i=t-this.x,o=n-this.y,l=this.$el.contentWidth(),r=this.$el.contentHeight(),a=this.refs.$drag_pointer.cssFloat("left"),s=this.refs.$drag_pointer.cssFloat("top");"saturation"===this.axis?a+=i:"value"===this.axis&&(s+=o),a<0?a=0:a>l&&(a=l),s<0?s=0:s>r&&(s=r),this.refs.$drag_pointer.px("left",a),this.refs.$drag_pointer.px("top",s),this.drag_pointer_pos={x:a,y:s},this.x=t,this.y=n,this.calculateSV()}},{key:"setMainColor",value:function(e){var t=this.$el.offset(),n=this.w,i=this.h,o=yi.pos(e).pageX-t.left,l=yi.pos(e).pageY-t.top;o<0?o=0:o>n&&(o=n),l<0?l=0:l>i&&(l=i),this.refs.$drag_pointer.css({left:o+"px",top:l+"px"}),this.drag_pointer_pos={x:o,y:l},this.calculateSV()}},{key:"@changeColor",value:function(e){Bi!=e&&this.refresh()}},{key:"@initColor",value:function(){this.refresh()}},{key:"mouseup document",value:function(e){this.isDown&&(this.isDown=!1,this.$store.emit("lastUpdateColor"))}},{key:"mousemove document",value:function(e){this.isDown&&(this.cacheSize(),"saturation"===this.axis||"value"===this.axis?this.setSubColor(e):this.setMainColor(e))}},{key:"mousedown",value:function(e){this.isDown=!0,this.cacheSize(),this.axis=new mi(e.target).attr("data-axis-value"),this.x=e.pageX,this.y=e.pageY,"saturation"===this.axis||"value"===this.axis?this.setSubColor(e):this.setMainColor(e)}},{key:"touchend document",value:function(e){this.isDown&&(this.isDown=!1,this.$store.emit("lastUpdateColor"))}},{key:"touchmove document",value:function(e){this.isDown&&this.setMainColor(e)}},{key:"touchstart",value:function(e){e.preventDefault(),this.isDown=!0,this.cacheSize(),this.setMainColor(e)}},{key:"cacheSize",value:function(){this.w=this.state.get("$el.contentWidth"),this.h=this.state.get("$el.contentHeight")}}]),t}(ki),Di=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),X(t,[{key:"template",value:function(){return'\n            <div class=\'colorpicker-body\'>\n                <div target="palette"></div> \n                <div target="control"></div>\n                <div target="information"></div>\n                <div target="currentColorSets"></div>\n                <div target="colorSetsChooser"></div>\n                <div target="contextMenu"></div>\n            </div>\n        '}},{key:"components",value:function(){return{palette:Qi,control:Ai,information:zi,currentColorSets:Fi,colorSetsChooser:ji,contextMenu:Oi}}}]),t}(Ri),_i="mini-control",qi=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),X(t,[{key:"components",value:function(){return{Hue:Ei,Opacity:wi}}},{key:"template",value:function(){return'\n        <div class="control">\n            <div target="Hue" ></div>\n            <div target="Opacity" ></div>\n        </div>\n        '}},{key:"refresh",value:function(){this.setColorUI()}},{key:"setColorUI",value:function(){this.Hue.setColorUI(),this.Opacity.setColorUI()}},{key:"@changeColor",value:function(e){_i!=e&&this.refresh()}},{key:"@initColor",value:function(){this.refresh()}}]),t}(ki),eo=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),X(t,[{key:"template",value:function(){return'\n            <div class=\'colorpicker-body\'>\n                <div target="palette"></div>\n                <div target="control"></div>\n            </div>\n        '}},{key:"components",value:function(){return{palette:Qi,control:qi}}}]),t}(Ri),to=function(e){function t(e){x(this,t);var n=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.source="vertical-slider",n}return k(t,e),X(t,[{key:"getMaxDist",value:function(){return this.state.get("$container.height")}},{key:"setMousePosition",value:function(e){this.refs.$bar.css({top:e+"px"})}},{key:"getMousePosition",value:function(e){return yi.pos(e).pageY}},{key:"getMinPosition",value:function(){return this.refs.$container.offset().top}},{key:"getCaculatedDist",value:function(e){var t=e?this.getMousePosition(e):this.getCurrent(this.getDefaultValue()/this.maxValue);return 100-this.getDist(t)}},{key:"setColorUI",value:function(e){(e=e||this.getDefaultValue())<=this.minValue?this.refs.$bar.addClass("first").removeClass("last"):e>=this.maxValue?this.refs.$bar.addClass("last").removeClass("first"):this.refs.$bar.removeClass("last").removeClass("first");var t=1-(e||0)/this.maxValue;this.setMousePosition(this.getMaxDist()*t)}}]),t}(Yi),no=function(e){function t(e){x(this,t);var n=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.minValue=0,n.maxValue=360,n.source="vertical-hue-control",n}return k(t,e),X(t,[{key:"template",value:function(){return'\n            <div class="hue">\n                <div ref="$container" class="hue-container">\n                    <div ref="$bar" class="drag-bar"></div>\n                </div>\n            </div>\n        '}},{key:"getDefaultValue",value:function(){return this.$store.hsv.h}},{key:"refreshColorUI",value:function(e){var t=this.getCaculatedDist(e);this.setColorUI(t/100*this.maxValue),this.changeColor({h:t/100*this.maxValue,type:"hsv"})}}]),t}(to),io=function(e){function t(e){x(this,t);var n=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.source="vertical-opacity-control",n}return k(t,e),X(t,[{key:"template",value:function(){return'\n        <div class="opacity">\n            <div ref="$container" class="opacity-container">\n                <div ref="$colorbar" class="color-bar"></div>\n                <div ref="$bar" class="drag-bar2"></div>\n            </div>\n        </div>\n        '}},{key:"refresh",value:function(){W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"refresh",this).call(this),this.setOpacityColorBar()}},{key:"setOpacityColorBar",value:function(){var e=Object.assign({},this.$store.rgb);e.a=0;var t=Be.format(e,"rgb");e.a=1;var n=Be.format(e,"rgb");this.refs.$colorbar.css("background","linear-gradient(to top, "+t+", "+n+")")}},{key:"getDefaultValue",value:function(){return this.$store.alpha}},{key:"refreshColorUI",value:function(e){var t=this.getCaculatedDist(e);this.setColorUI(t/100*this.maxValue),this.changeColor({a:Math.floor(t)/100*this.maxValue})}}]),t}(to),oo="mini-control",lo=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),X(t,[{key:"components",value:function(){return{Hue:no,Opacity:io}}},{key:"template",value:function(){return'<div class="control"><div target="Hue" ></div><div target="Opacity" ></div></div>'}},{key:"refresh",value:function(){this.setColorUI()}},{key:"setColorUI",value:function(){this.Hue.setColorUI(),this.Opacity.setColorUI()}},{key:"@changeColor",value:function(e){oo!=e&&this.refresh()}},{key:"@initColor",value:function(){this.refresh()}}]),t}(ki),ro=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),X(t,[{key:"template",value:function(){return'\n            <div class=\'colorpicker-body\'>\n                <div target="palette"></div><div target="control"></div>\n            </div>\n        '}},{key:"components",value:function(){return{palette:Qi,control:lo}}}]),t}(Ri),ao="macos-control",so=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),X(t,[{key:"components",value:function(){return{Value:Ti,Opacity:wi}}},{key:"template",value:function(){return'\n        <div class="control">\n            <div target="Value" ></div>\n            <div target="Opacity" ></div>\n            <div ref="$controlPattern" class="empty"></div>\n            <div ref="$controlColor" class="color"></div>\n        </div>\n        '}},{key:"setBackgroundColor",value:function(){this.refs.$controlColor.css("background-color",this.$store.dispatch("/toRGB"))}},{key:"refresh",value:function(){this.setColorUI(),this.setBackgroundColor()}},{key:"setColorUI",value:function(){this.Value.setColorUI(),this.Opacity.setColorUI()}},{key:"@changeColor",value:function(e){ao!=e&&this.refresh()}},{key:"@initColor",value:function(){this.refresh()}}]),t}(ki),co=function(e){function t(e){x(this,t);var n=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.width=214,n.height=214,n.thinkness=16,n.half_thinkness=n.thinkness/2,n.source="colorring",n}return k(t,e),X(t,[{key:"template",value:function(){return'\n        <div class="wheel" data-type="ring">\n            <canvas class="wheel-canvas" ref="$colorwheel" ></canvas>\n            <div class="drag-pointer" ref="$drag_pointer"></div>\n        </div>\n        '}},{key:"setColorUI",value:function(e){this.renderCanvas(),this.setHueColor(null,e)}},{key:"getDefaultValue",value:function(){return this.$store.hsv.h}},{key:"setHueColor",value:function(e,t){if(this.state.get("$el.width")){var n=this.getRectangle(),i=n.minX,o=n.minY,l=n.radius,r=n.centerX,a=n.centerY,s=this.getCurrentXY(e,this.getDefaultValue(),l,r,a),c=d((p=s.x)-r,(h=s.y)-a),u=this.getCurrentXY(null,c,l-this.half_thinkness,r,a),p=u.x,h=u.y;this.refs.$drag_pointer.css({left:p-i+"px",top:h-o+"px"}),t||this.changeColor({type:"hsv",h:c})}}}]),t}(Hi),uo=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),X(t,[{key:"template",value:function(){return'\n            <div class=\'colorpicker-body\'>\n                <div target="colorring"></div>\n                <div target="palette"></div> \n                <div target="control"></div>\n                <div target="information"></div>\n                <div target="currentColorSets"></div>\n                <div target="colorSetsChooser"></div>\n                <div target="contextMenu"></div>\n            </div>\n        '}},{key:"components",value:function(){return{colorring:co,palette:Qi,control:so,information:zi,currentColorSets:Fi,colorSetsChooser:ji,contextMenu:Oi}}}]),t}(Ri),po=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),X(t,[{key:"components",value:function(){return{Hue:no,Opacity:io}}},{key:"template",value:function(){return'\n        <div class="control">\n            <div target="Hue" ></div>\n            <div target="Opacity" ></div>\n        </div>\n        '}},{key:"refresh",value:function(){this.setColorUI()}},{key:"setColorUI",value:function(){this.Hue.setColorUI(),this.Opacity.setColorUI()}},{key:"@changeColor",value:function(){this.refresh()}},{key:"@initColor",value:function(){this.refresh()}}]),t}(ki),ho=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),X(t,[{key:"template",value:function(){return'\n            <div class=\'colorpicker-body\'>\n                <div target="palette"></div> \n                <div target="control"></div>\n                <div target="information"></div>\n                <div target="currentColorSets"></div>\n                <div target="colorSetsChooser"></div>\n                <div target="contextMenu"></div>\n            </div>\n        '}},{key:"components",value:function(){return{palette:Qi,control:po,information:zi,currentColorSets:Fi,colorSetsChooser:ji,contextMenu:Oi}}}]),t}(Ri),mo="mini-control",bo=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),X(t,[{key:"components",value:function(){return{Hue:no,Opacity:io}}},{key:"template",value:function(){return'\n            <div class="control">\n                <div target="Opacity" ></div>            \n                <div target="Hue" ></div>\n            </div>\n        '}},{key:"refresh",value:function(){this.setColorUI()}},{key:"setColorUI",value:function(){this.Hue.setColorUI(),this.Opacity.setColorUI()}},{key:"@changeColor",value:function(e){mo!=e&&this.refresh()}},{key:"@initColor",value:function(){this.refresh()}}]),t}(ki),fo=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),X(t,[{key:"template",value:function(){return"\n            <div class='colorpicker-body'>\n                <div class='color-view'>\n                    <div class='color-view-container'  ref=\"$colorview\"></div>\n                </div>\n                <div class='color-tool'>\n                    <div target=\"palette\"></div>\n                    <div target=\"control\"></div>\n                </div>\n            </div>\n        "}},{key:"components",value:function(){return{palette:Qi,control:bo}}},{key:"initColorWithoutChangeEvent",value:function(e){this.$store.dispatch("/initColor",e),this.refresh()}},{key:"setBackgroundColor",value:function(){var e=this.$store.dispatch("/toColor"),t=this.$store.rgb,n=Be.brightness(t.r,t.g,t.b);this.refs.$colorview.css({"background-color":e,color:n>127?"black":"white"}),this.refs.$colorview.html(e)}},{key:"click $colorview",value:function(e){this.nextFormat()}},{key:"nextFormat",value:function(){var e=this.$store.format||"hex",t="hex";"hex"==e?t="rgb":"rgb"==e?t="hsl":"hsl"==e&&(t="hex"),this.$store.dispatch("/changeFormat",t),this.$store.emit("lastUpdateColor"),this.refresh()}},{key:"refresh",value:function(){this.setBackgroundColor()}},{key:"@changeColor",value:function(){this.refresh()}},{key:"@initColor",value:function(){this.refresh()}}]),t}(Ri),yo={create:function(e){switch(e.type){case"macos":return new $i(e);case"xd":return new ho(e);case"ring":return new uo(e);case"mini":return new eo(e);case"vscode":return new fo(e);case"mini-vertical":return new ro(e);default:return new Di(e)}},ColorPicker:Di,ChromeDevToolColorPicker:Di,MacOSColorPicker:$i,RingColorPicker:uo,MiniColorPicker:eo,VSCodePicker:fo,MiniVerticalColorPicker:ro},go=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),X(t,[{key:"afterRender",value:function(){var e=this,t=this.opt.opt.colorpickerOptions||{type:"sketch"};this.colorPicker=yo.create(I({position:"inline",container:this.refs.$el.el,onChange:function(t){e.changeColor(t)},onLastUpdate:function(t){e.changeColor(t,!0)}},t))}},{key:"template",value:function(){return'<div ref="$color"></div>'}},{key:"changeColor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.$store.emit("changeEmbedColorPicker",e,t)}},{key:"setValue",value:function(e){this.colorPicker.initColorWithoutChangeEvent(e)}}]),t}(ki);function vo(e){var t=[];return e.layers.length&&e.layers.forEach((function(e){t.push.apply(t,R(vo(e)))})),t.push(e),t}var Zo=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return x(this,e),n instanceof e&&(n=n.toJSON()),this.json=this.convert(I({},this.getDefaultObject(),n)),this.ref=new Proxy(this,{get:function(e,t){var n=e[t];return qe(n)?function(){for(var t=arguments.length,i=Array(t),o=0;o<t;o++)i[o]=arguments[o];return n.apply(e,i)}:n||e.json[t]},set:function(e,n,i){if(i&&i.realVal&&qe(i.realVal)&&(i=i.realVal()),!t.checkField(n,i))throw new Error(i+" is invalid as "+n+" property value.");return e.json[n]=i,!0}}),this.ref}return X(e,[{key:"getDefaultTitle",value:function(){return"Item"}},{key:"isAttribute",value:function(){return!1}},{key:"is",value:function(){if(!this.json)return!1;for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.indexOf(this.json.itemType)>-1}},{key:"convert",value:function(e){return e}},{key:"checkField",value:function(e,t){return!0}},{key:"toCloneObject",value:function(){return{itemType:this.json.itemType,type:this.json.type,selected:this.json.selected}}},{key:"clone",value:function(){var e=new(0,this.constructor)(this.toCloneObject());return e.parent=this.json.parent,e}},{key:"reset",value:function(t){t instanceof e&&(t=t.toJSON()),this.json=this.convert(I({},this.json,t))}},{key:"getDefaultObject",value:function(){return I({selected:!1,type:"",itemType:""},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}},{key:"add",value:function(e){return this.json.layers.push(e),e.parent=this.ref,e}},{key:"toggle",value:function(e,t){Qe(t)?this.json[e]=!this.json[e]:this.json[e]=!!t}},{key:"toJSON",value:function(){return this.json}},{key:"resize",value:function(){}},{key:"copy",value:function(){this.json.parent.copyItem(this.ref)}},{key:"copyItem",value:function(e){var t=e.clone();t.width.add(10),t.width.add(10);for(var n=this.json.layers,i=-1,o=0,l=n.length;o<l;o++)if(n[o]===e){i=o;break}i>-1&&this.json.layers.splice(i,0,t)}},{key:"remove",value:function(){this.json.parent.removeItem(this.ref)}},{key:"removeItem",value:function(e){for(var t=this.json.layers,n=-1,i=0,o=t.length;i<o;i++)if(t[i]===e){n=i;break}n>-1&&this.json.layers.splice(n,1)}},{key:"title",get:function(){return this.json.name||this.getDefaultTitle()}},{key:"id",get:function(){return this.json.id}},{key:"layers",get:function(){return this.json.layers}},{key:"parent",get:function(){return this.json.parent}},{key:"html",get:function(){var e=this.json,t=e.elementType,n=e.id,i=e.layers,o=t||"div";return"\n    <"+o+" class='element-item "+e.itemType+"' data-id=\""+n+'">\n      '+i.map((function(e){return e.html})).join("")+"\n    </"+o+">\n    "}},{key:"allLayers",get:function(){return[].concat(R(vo(this.ref)))}}]),e}(),xo=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),X(t,[{key:"getDefaultObject",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getDefaultObject",this).call(this,I({itemType:"image-resource",type:"image"},e))}},{key:"isGradient",value:function(){return!1}},{key:"isLinear",value:function(){return!1}},{key:"isRadial",value:function(){return!1}},{key:"isConic",value:function(){return!1}},{key:"isStatic",value:function(){return!1}},{key:"isImage",value:function(){return!1}},{key:"hasAngle",value:function(){return!1}},{key:"isUrl",value:function(){return!1}},{key:"isFile",value:function(){return!1}},{key:"isAttribute",value:function(){return!0}},{key:"toString",value:function(){return"none"}}]),t}(Zo),Xo={center:50,top:0,left:0,right:100,bottom:100},Go=function e(){x(this,e)};Go.CENTER="center",Go.TOP="top",Go.RIGHT="right",Go.LEFT="left",Go.BOTTOM="bottom";var Io=/([\d.]+)(px|pt|fr|r?em|deg|vh|vw|m?s|%|g?rad|turn)/gi,Wo=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";x(this,e),this.value=t,this.unit=n}return X(e,[{key:Symbol.toPrimitive,value:function(e){return"number"==e?this.value:this.toString()}},{key:"toString",value:function(){switch(this.unit){case"string":case"number":return this.value+"";case"var":return"var(--"+this.value+")";case"calc":return"calc("+this.value+")";default:return this.value+this.unit}}},{key:"isUnitType",value:function(e){return this.unit===e}},{key:"isCalc",value:function(){return this.isUnitType("calc")}},{key:"isFr",value:function(){return this.isUnitType("fr")}},{key:"isPercent",value:function(){return this.isUnitType("%")}},{key:"isPx",value:function(){return this.isUnitType("px")}},{key:"isEm",value:function(){return this.isUnitType("em")}},{key:"isDeg",value:function(){return this.isUnitType("deg")}},{key:"isSecond",value:function(){return this.isUnitType("s")}},{key:"isMs",value:function(){return this.isUnitType("ms")}},{key:"isNumber",value:function(){return this.isUnitType("number")}},{key:"isString",value:function(){return this.isUnitType("")}},{key:"isVar",value:function(){return this.isUnitType("--")}},{key:"set",value:function(e){return this.value=e,this}},{key:"add",value:function(e){return this.value+=+e,this}},{key:"sub",value:function(e){return this.add(-1*e)}},{key:"mul",value:function(e){return this.value*=+e,this}},{key:"div",value:function(e){return this.value/=+e,this}},{key:"mod",value:function(e){return this.value%=+e,this}},{key:"clone",value:function(){return new e(this.value,this.unit)}},{key:"getUnitName",value:function(){return"%"===this.unit?"percent":this.unit}},{key:"toJSON",value:function(){return{value:this.value,unit:this.unit}}},{key:"rate",value:function(e){return e/this.value}},{key:"stringToPercent",value:function(){return De(Xo[this.value])?e.percent(Xo[this.value]):e.percent(0)}},{key:"stringToEm",value:function(e){return this.stringToPercent().toEm(e)}},{key:"stringToPx",value:function(e){return this.stringToPercent().toPx(e)}},{key:"toPercent",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16;return this.isPercent()?this:this.isPx()?e.percent(100*this.value/t):this.isEm()?e.percent(this.value*n*100/t):this.isString()?this.stringToPercent(t):this.isDeg()?e.percent(this.value/360*100):void 0}},{key:"toEm",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16;return this.isPercent()?e.em(this.value/100*t/n):this.isPx()?e.em(this.value/n):this.isEm()?this:this.isString()?this.stringToEm(t):void 0}},{key:"toPx",value:function(t){return this.isPercent()?e.px(this.value/100*t):this.isPx()?this:this.isEm()?e.px(this.value/100*t/16):this.isString()?this.stringToPx(t):void 0}},{key:"toSecond",value:function(){return this.isSecond()?this:this.isMs()?e.second(this.value/1e3):void 0}},{key:"toMs",value:function(){return this.isSecond()?e.ms(1e3*this.value):this.isMs()?this:void 0}},{key:"to",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16;return"px"===e?this.toPx(t,n):"%"===e||"percent"===e?this.toPercent(t,n):"em"===e?this.toEm(t,n):void 0}},{key:"toUnit",value:function(t){return new e(this.value,t)}},{key:"calculate",value:function(e,t){var n=this[e];return n?n.call(this,t):this}},{key:"includes",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.includes(this.value)}},{key:"round",value:function(t){return new e(l(this.value,t),this.unit)}},{key:"equals",value:function(e){return this.value===e.value&&this.unit===e.unit}}],[{key:"min",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i=t.shift(),o=0,l=t.length;o<l;o++)i.value>t[o].value&&(i=t[o]);return i}},{key:"max",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i=t.shift(),o=0,l=t.length;o<l;o++)i.value<t[o].value&&(i=t[o]);return i}},{key:"string",value:function(t){return new e(t+"","")}},{key:"number",value:function(t){return new e(+t,"number")}},{key:"px",value:function(t){return new e(+t,"px")}},{key:"em",value:function(t){return new e(+t,"em")}},{key:"percent",value:function(t){return new e(+t,"%")}},{key:"deg",value:function(t){return new e(+t,"deg")}},{key:"fr",value:function(t){return new e(+t,"fr")}},{key:"second",value:function(t){return new e(+t,"s")}},{key:"ms",value:function(t){return new e(+t,"ms")}},{key:"var",value:function(t){return new e(t+"","--")}},{key:"calc",value:function(t){return new e(t,"calc")}},{key:"parse",value:function(t){if(_e(t)){if(t.indexOf("calc(")>-1)return new e(t.split("calc(")[1].split(")")[0],"calc");var n=t.replace(Io,"$1 $2").split(" ").filter(Boolean);return+n[0]==n[0]?new e(+n[0],n[1]):new e(n[0])}if(t instanceof e)return t;if(t.unit){if("%"==t.unit||"percent"==t.unit){var i=0;return De(t.percent)?i=t.percent:De(t.value)&&(i=t.value),e.percent(i)}if("px"==t.unit)return i=0,De(t.px)?i=t.px:De(t.value)&&(i=t.value),e.px(i);if("em"==t.unit)return i=0,De(t.em)?i=t.em:De(t.value)&&(i=t.value),e.em(i);if("deg"==t.unit)return i=0,De(t.deg)?i=t.deg:De(t.value)&&(i=t.value),e.deg(i);if("s"==t.unit)return i=0,De(t.second)?i=t.second:De(t.value)&&(i=t.value),e.second(i);if("ms"==t.unit)return i=0,De(t.ms)?i=t.ms:De(t.value)&&(i=t.value),e.ms(i);if("number"==t.unit)return i=0,De(t.value)&&(i=t.value),e.number(i);if("--"==t.unit)return i=0,De(t.value)&&(i=t.value),e.var(i);if(""===t.unit||"string"===t.unit)return i="",De(t.str)?i=t.str:De(t.value)&&(i=t.value),e.string(i)}return e.string(t)}}]),e}();Wo.auto=Wo.string("auto");var ko,Vo,Co=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),X(t,[{key:"getDefaultObject",value:function(){return W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getDefaultObject",this).call(this,{cut:!1,percent:0,unit:"%",px:0,em:0,color:"rgba(0, 0, 0, 0)",prevColorStep:null})}},{key:"toCloneObject",value:function(){return I({},W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toCloneObject",this).call(this),{cut:this.json.cut,percent:this.json.percent,unit:this.json.unit,px:this.json.px,em:this.json.em,color:this.json.color})}},{key:"on",value:function(){this.json.cut=!0}},{key:"off",value:function(){this.json.cut=!1}},{key:"toggle",value:function(){this.json.cut=!this.json.cut}},{key:"getUnit",value:function(){return"%"==this.json.unit?"percent":this.json.unit}},{key:"add",value:function(e){var t=this.getUnit();return this.json[t]+=+e,this}},{key:"sub",value:function(e){var t=this.getUnit();return this.json[t]-=+e,this}},{key:"mul",value:function(e){var t=this.getUnit();return this.json[t]*=+e,this}},{key:"div",value:function(e){var t=this.getUnit();return this.json[t]/=+e,this}},{key:"mod",value:function(e){var t=this.getUnit();return this.json[t]%=+e,this}},{key:"toLength",value:function(e){return Wo.parse(this.json).round(1e3)}},{key:"getPrevLength",value:function(){return this.json.prevColorStep?this.json.prevColorStep.toLength():""}},{key:"toString",value:function(){var e=this.json.cut?this.getPrevLength():"";return this.json.color+" "+e+" "+this.toLength()}},{key:"reset",value:function(e){W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"reset",this).call(this,e),this.parent()&&this.parent().sortColorStep()}},{key:"isPx",get:function(){return"px"==this.json.unit}},{key:"isPercent",get:function(){return"%"==this.json.unit||"percent"===this.json.unit}},{key:"isEm",get:function(){return"em"==this.json.unit}}],[{key:"parse",value:function(e){var n=[],i=w(e),o=i.str.split(" ").filter((function(e){return e.trim()})),l=+o[0].replace("@",""),r=i.matches[l].color;if(1===o.length)n.push(new t({color:r,unit:"%",percent:0}));else if(2===o.length){var a=Wo.parse(o[1]),s={unit:a.unit};a.isPercent()?s.percent=a.value:a.isPx()?s.px=a.value:a.isEm()&&(s.em=a.value),n.push(new t(I({color:r},s)))}else 3===o.length&&[1,2].forEach((function(e){var i=Wo.parse(o[e]),l={unit:i.unit};i.isPercent()?l.percent=i.value:i.isPx()?l.px=i.value:i.isEm()&&(l.em=i.value),n.push(new t(I({color:r},l)))}));return n}}]),t}(Zo),So={"to top":0,"to top right":45,"to right":90,"to bottom right":135,"to bottom":180,"to bottom left":225,"to left":270,"to top left":315},Ro=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),X(t,[{key:"isGradient",value:function(){return!0}},{key:"toString",value:function(){return"none"}},{key:"getDefaultObject",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getDefaultObject",this).call(this,I({type:"gradient",colorsteps:[]},e))}},{key:"toCloneObject",value:function(){return I({},W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toCloneObject",this).call(this),{colorsteps:this.json.colorsteps.map((function(e){return e.clone()}))})}},{key:"convert",value:function(e){return e.colorsteps=e.colorsteps.map((function(e){return new Co(e)})),e}},{key:"calculateAngle",value:function(){var e=this.json.angle;return Qe(So[e])?e:So[e]||0}},{key:"addColorStep",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.json.colorsteps.push(e),t&&this.sortColorStep(),e}},{key:"insertColorStep",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"rgba(216,216,216,0)",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"rgba(216,216,216,1)",i=this.colorsteps;if(i.length){if(e<i[0].percent)return i[0].index=1,void this.addColorStep(new Co({index:0,color:i[0].color,percent:e}));var o=i.length-1;if(i[o].percent<e){var l=i[o].color,r=i[o].index+1;this.addColorStep(new Co({index:r,color:l,percent:e}))}else for(var a=0,s=i.length-1;a<s;a++){var c=i[a],u=i[a+1];if(c.percent<=e&&e<=u.percent)return l=Color.mix(c.color,u.color,(e-c.percent)/(u.percent-c.percent),"rgb"),void this.addColorStep(new Co({index:c.index+1,color:l,percent:e}))}}else this.addColorStepList([new Co({color:t,percent:e,index:0}),new Co({color:n,percent:100,index:100})])}},{key:"sortColorStep",value:function(){var e=this.colorsteps;e.sort((function(e,t){return e.percent>t.percent?1:e.percent<t.percent?-1:e.percent==t.percent?e.index===t.index?0:e.index>t.index?1:-1:void 0})),e.forEach((function(e,t){e.index=100*t}))}},{key:"addColorStepList",value:function(){var e=this;(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(t){e.addColorStep(t,!1)})),this.sortColorStep()}},{key:"getColorStep",value:function(e){return this.json.colorsteps.filter((function(t){return t.id==e}))[0]}},{key:"clear",value:function(){arguments.length?this.json.colorsteps.splice(+(arguments.length<=0?void 0:arguments[0]),1):this.json.colorsteps=[]}},{key:"getColorString",value:function(){var e=this.colorsteps;return e.length?e.map((function(t,n){return t.prevColorStep=t.cut&&n>0?e[n-1]:null,t})).map((function(e){return""+e})).join(","):""}},{key:"colorsteps",get:function(){return this.json.colorsteps}}],[{key:"random",value:function(){return"linear-gradient("+Math.floor(1e3*Math.random())%360+"deg, "+Color.random()+" 0%, "+Color.random()+" 100%)"}}]),t}(xo),Lo=["circle","circle closest-side","circle closest-corner","circle farthest-side","circle farthest-corner","ellipse","ellipse closest-side","ellipse closest-corner","ellipse farthest-side","ellipse farthest-corner"],Yo=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),X(t,[{key:"initialize",value:function(){W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initialize",this).call(this);var e=[{offset:Wo.percent(0),cut:!1,color:"yellow"},{offset:Wo.percent(100),cut:!1,color:"red"}];this.type="linear-gradient",this.index=0,this.colorsteps=e,this.radialPosition=[Wo.percent(50),Wo.percent(50)],this.radialType="ellipse"}},{key:"@changeRadialPosition",value:function(e,t){this["@changeKeyValue"]("radialPosition",[e,t]),this.reloadInputValue()}},{key:"@setGradientEditor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"linear-gradient",i=arguments[3],o=arguments[4],l=arguments[5],r=w(e),a=r.str.split(",").map((function(e){return e.trim()})).map((function(e){var t=e.split(" ").filter((function(e){return e.length})),n=C(t,3),i=n[0],o=n[1],l=n[2];i=K(i,r.matches);var a=!1;l&&(a=!0);var s=a?Wo.parse(l):Wo.parse(o);return s.isDeg()&&(s=Wo.percent(s.value/360*100)),{color:i,offset:s,cut:a}}));1==a.length&&a.push({color:a[0].color,offset:Wo.percent(100),cut:!1}),this.cachedStepListRect=null,this.colorsteps=a,this.index=t,this.type=n,this.angle=Wo.parse(i||"90deg"),this.radialPosition=o||[Wo.percent(50),Wo.percent(50)],this.radialType=l,this.refresh(),this.selectStep(t),this.reloadInputValue()}},{key:"template",value:function(){var e=this;return"\n        <div class='gradient-editor' data-selected-editor='"+this.type+"'>\n            <div class='gradient-steps' data-editor='gradient'>\n                <div class=\"hue-container\" ref=\"$back\"></div>            \n                <div class=\"hue\" ref=\"$steps\">\n                    <div class='step-list' ref=\"$stepList\" ></div>\n                </div>\n            </div>\n            <div class='tools' data-editor='tools'>\n              <label>Offset <input type='checkbox' ref='$cut' checked />  connected</label> <div class=\"right-menu\" ><button type=\"button\" ref=\"$remove\" style=\"float:right;\" title=\"Remove color stop\">&times; Remove</button></div>\n              <div class='unit'>\n                <div><input type='range' data-key='length' min='0' max=\"100\" step='0.1' ref='$offset' /></div>\n                <div><input type='number' data-key='length' min='0' max=\"100\" step='0.1' ref='$offsetNumber' /></div>              \n                <div><select ref='$offsetSelect'>\n                  <option value='%'>%</option>\n                  <option value='px'>px</option>\n                  <option value='em'>em</option>\n                </select></div>\n              </div>\n            </div>\n            <div class='sub-editor' ref='$subEditor'> \n              <div data-editor='angle'>\n                <label>Angle</label>\n                <div class='unit'>                \n                  <div><input type='range' data-key='angle' min='-720' max=\"720\" step='0.1' ref='$angle' /> </div>\n                  <div><input type='number' data-key='angle' min='-720' max=\"720\" step='0.1' ref='$angleNumber' /></div> \n                  <span>deg</span>\n                </div>\n              </div>\n              <div data-editor='centerX'>\n                <label>Center X</label>\n                <div class='unit'>\n                  <div><input type='range' data-key='centerX' min='-100' max=\"100\" step='0.1' ref='$centerX' /></div>\n                  <div><input type='number' data-key='centerX' min='-100' max=\"100\" step='0.1' ref='$centerXNumber' /></div>\n                  <div><select ref='$centerXSelect'>\n                      <option value='%'>%</option>\n                      <option value='px'>px</option>\n                      <option value='em'>em</option>\n                    </select></div>\n                </div>\n              </div>                \n              <div data-editor='centerY'>           \n                <label>Center Y</label>                 \n                <div class='unit'>\n                  <div><input type='range' data-key='centerY' min='-100' max=\"100\" step='0.1' ref='$centerY' /></div>\n                  <div><input type='number' data-key='centerX' min='-100' max=\"100\" step='0.1' ref='$centerYNumber' /></div>\n                  <div><select ref='$centerYSelect'>\n                      <option value='%'>%</option>\n                      <option value='px'>px</option>\n                      <option value='em'>em</option>\n                    </select></div>\n                </div>\n              </div>                \n              <div data-editor='radialType'>       \n                <label>Radial Type</label>              \n                <div><select ref='$radialType'>\n                  "+Lo.map((function(t){return'<option value="'+t+'" '+(e.radialType===t?"selected":"")+">"+t+"</option>"})).join("")+"\n                </select></div>\n              </div>\n            </div>            \n        </div>\n      "}},{key:"input $offset",value:function(e){this.refs.$offsetNumber.val(this.refs.$offset.val()),this["@changeColorStepOffset"]("offset",new Wo(this.refs.$offset.val(),this.refs.$offsetSelect.val()))}},{key:"mouseup $offset",value:function(e){this["@changeColorStepOffset"]("offset",new Wo(this.refs.$offset.val(),this.refs.$offsetSelect.val()),!0)}},{key:"input $offsetNumber",value:function(e){this.refs.$offset.val(this.refs.$offsetNumber.val()),this["@changeColorStepOffset"]("offset",new Wo(this.refs.$offset.val(),this.refs.$offsetSelect.val()),!0)}},{key:"input $angle",value:function(e){this.refs.$angleNumber.val(this.refs.$angle.val()),this["@changeKeyValue"]("angle",Wo.deg(this.refs.$angle.val()))}},{key:"mouseup $angle",value:function(e){this["@changeKeyValue"]("angle",Wo.deg(this.refs.$angle.val()),!0)}},{key:"input $angleNumber",value:function(e){this.refs.$angle.val(this.refs.$angleNumber.val()),this["@changeKeyValue"]("angle",Wo.deg(this.refs.$angle.val()),!0)}},{key:"input $centerX",value:function(e){this.refs.$centerXNumber.val(this.refs.$centerX.val()),this["@changeKeyValue"]("radialPositionX")}},{key:"mouseup $centerX",value:function(e){this["@changeKeyValue"]("radialPositionX",null,!0)}},{key:"input $centerXNumber",value:function(e){this.refs.$centerX.val(this.refs.$centerXNumber.val()),this["@changeKeyValue"]("radialPositionX")}},{key:"input $centerY",value:function(e){this.refs.$centerYNumber.val(this.refs.$centerY.val()),this["@changeKeyValue"]("radialPositionY")}},{key:"mouseup $centerY",value:function(e){this["@changeKeyValue"]("radialPositionY",null,!0)}},{key:"input $centerYNumber",value:function(e){this.refs.$centerY.val(this.refs.$centerYNumber.val()),this["@changeKeyValue"]("radialPositionX")}},{key:"change $centerXSelect",value:function(e){this["@changeKeyValue"]("radialPositionX",null,!0)}},{key:"change $centerYSelect",value:function(e){this["@changeKeyValue"]("radialPositionY",null,!0)}},{key:"change $radialType",value:function(e){this["@changeKeyValue"]("radialType",this.refs.$radialType.val(),!0)}},{key:"@changeKeyValue",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];"angle"===e&&(t=t.value),"radialPositionX"===e||"radialPositionY"===e?this.radialPosition=[this.radialPositionX,this.radialPositionY]:this[e]=t,this.updateData(n)}},{key:"@changeColorStepOffset",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.currentStep&&(this.currentStep.offset=t.clone(),this.$currentStep.css({left:this.currentStep.offset}),this.setColorUI(),this.updateData(n))}},{key:"click $back",value:function(e){if(!this.startXY){var t=this.refs.$stepList.rect(),n=t.x,i=t.right,o=e.xy.x;o<n?o=n:o>i&&(o=i);var l=(o-n)/t.width*100,r=this.colorsteps.map((function(e,t){return{index:t,color:e.color,offset:e.offset}})),a=r.filter((function(e){return e.offset.value<=l})).pop(),s=r.filter((function(e){return e.offset.value>l})).shift(),c=0;if(a&&s){if(a.offset.value===l)return;this.colorsteps.splice(s.index,0,{cut:!1,offset:Wo.percent(l),color:Be.mix(a.color,s.color,(l-a.offset.value)/(s.offset.value-a.offset.value))}),c=a.index+1}else if(a){var u={cut:!1,offset:Wo.percent(l),color:a.color};this.colorsteps.length-1===a.index?this.colorsteps.push(u):this.colorsteps.splice(a.index+1,0,u),c=a.index+1}else if(s){var d={cut:!1,offset:Wo.percent(l),color:s.color};0===s.index?(this.colorsteps.unshift(d),c=0):(this.colorsteps.splice(s.index-1,0,d),c=s.index)}else this.colorsteps.push({cut:!1,offset:Wo.percent(0),color:"rgba(0, 0, 0, 1)"}),c=0;this.refresh(),this.updateData(!0),this.selectStep(c)}}},{key:"reloadStepList",value:function(){this.refs.$stepList.html(this.colorsteps.map((function(e,t){return"<div class='step' data-index='"+t+"' data-cut='"+e.cut+"' style='left: "+e.offset+";'>\n        <div class='color-view' style=\"background-color: "+e.color+"\"></div>\n        <div class='arrow' style=\"background-color: "+e.color+'"></div>\n      </div>'})).join(""))}},{key:"click $cut",value:function(){this.currentStep&&(this.currentStep.cut=this.refs.$cut.checked(),this.$currentStep.attr("data-cut",this.currentStep.cut),this.setColorUI(),this.updateData(!0))}},{key:"click $remove",value:function(){this.removeStep(this.index)}},{key:"removeStep",value:function(e){this.colorsteps.splice(e,1);var t=this.colorsteps[e],n=e;t||(t=this.colorsteps[e-1],n=e-1),t&&this.selectStep(n),this.refresh(),this.updateData(!0)}},{key:"selectStep",value:function(e){this.index=e,this.currentStep=this.colorsteps[e],this.refs.$stepList.attr("data-selected-index",e),this.$currentStep=this.refs.$stepList.$('[data-index="'+e.toString()+'"]'),this.$currentStep&&(this.$colorView=this.$currentStep.$(".color-view"),this.$arrow=this.$currentStep.$(".arrow"),this.refs.$cut.el.checked=this.currentStep.cut),this.prev=this.colorsteps[e-1],this.next=this.colorsteps[e+1]}},{key:"mousedown $stepList .step",value:function(e){var t=+e.$delegateTarget.attr("data-index");e.altKey?this.removeStep(t):(this.selectStep(t),this.startXY=e.xy,this.$store.emit("selectColorStep",this.currentStep.color),this.refs.$cut.checked(this.currentStep.cut),this.refs.$offset.val(this.currentStep.offset.value),this.refs.$stepList.attr("data-selected-index",t),this.cachedStepListRect=this.refs.$stepList.rect())}},{key:"getStepListRect",value:function(){return this.cachedStepListRect}},{key:"mouseup document",value:function(e){this.startXY&&(this.startXY=null,this.updateData(!0))}},{key:"mousemove document",value:function(e){if(this.startXY){var t=e.xy.x-this.startXY.x;e.xy.y,this.startXY.y;var n=this.getStepListRect(),i=n.x,o=n.right,r=this.startXY.x+t;r<i?r=i:r>o&&(r=o);var a=(r-i)/n.width*100;this.prev&&this.prev.offset.value>a&&(a=this.prev.offset.value),this.next&&this.next.offset.value<a&&(a=this.next.offset.value),this.currentStep.offset.set(l(a,100)),this.$currentStep.css({left:Wo.percent(a)}),this.refs.$offset.val(this.currentStep.offset.value),this.setColorUI(),this.updateData()}}},{key:"refresh",value:function(){this.reloadStepList(),this.setColorUI()}},{key:"getLinearGradient",value:function(){var e=this;if(0===this.colorsteps.length)return"";if(1===this.colorsteps.length){var t=this.colorsteps[0];return"linear-gradient(to right, "+t.color+" "+t.offset+", "+t.color+" 100%)"}return"linear-gradient(to right, "+this.colorsteps.map((function(t,n){if(t.cut){var i=e.colorsteps[n-1];return i?t.color+" "+i.offset+" "+t.offset:t.color+" "+t.offset}return t.color+" "+t.offset})).join(",")+")"}},{key:"setColorUI",value:function(){this.refs.$stepList.css("background-image",this.getLinearGradient()),this.refs.$el.attr("data-selected-editor",this.type)}},{key:"reloadInputValue",value:function(){this.refs.$offset.val(this.currentStep.offset.value),this.refs.$offsetNumber.val(this.currentStep.offset.value),this.refs.$offsetSelect.val(this.currentStep.offset.unit),this.refs.$angle.val(this.angle.value),this.refs.$angleNumber.val(this.angle.value);var e=this.radialPosition.map((function(e){return"center"===e?Wo.percent(50):e}));this.refs.$centerX.val(e[0].value),this.refs.$centerXNumber.val(e[0].value),this.refs.$centerXSelect.val(e[0].unit),this.refs.$centerY.val(e[1].value),this.refs.$centerYNumber.val(e[1].value),this.refs.$centerYSelect.val(e[1].unit),this.refs.$radialType.val(this.radialType)}},{key:"@setColorStepColor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.currentStep&&(this.currentStep.color=e,this.$colorView.css({"background-color":e}),this.$arrow.css({"background-color":e}),this.setColorUI(),this.updateData(t))}},{key:"updateData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$store.emit("changeGradientEditor",{type:this.type,index:this.index,angle:this.angle,colorsteps:this.colorsteps,radialPosition:this.radialPosition,radialType:this.radialType},e)}},{key:"radialPositionX",get:function(){return new Wo(+this.refs.$centerX.val(),this.refs.$centerXSelect.val()).round(1e3)}},{key:"radialPositionY",get:function(){return new Wo(+this.refs.$centerY.val(),this.refs.$centerYSelect.val()).round(1e3)}}]),t}(ki),To={0:"to top",45:"to top right",90:"to right",135:"to bottom right",180:"to bottom",225:"to bottom left",270:"to left",315:"to top left"},wo={"to top":"0","to top right":"45","to right":"90","to bottom right":"135","to bottom":"180","to bottom left":"225","to left":"270","to top left":"315"},No=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),X(t,[{key:"getDefaultObject",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getDefaultObject",this).call(this,I({type:"linear-gradient",angle:0},e))}},{key:"toCloneObject",value:function(){return I({},W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toCloneObject",this).call(this),{angle:this.json.angle})}},{key:"isLinear",value:function(){return!0}},{key:"hasAngle",value:function(){return!0}},{key:"toString",value:function(){if(0===this.colorsteps.length)return"";var e=this.getColorString(),t="";return et(t=this.json.angle||0)&&(t=To[""+t]||t),et(t)&&(t=t>360?t%360:t,t+="deg"),this.json.type+"("+t+", "+e+")"}}],[{key:"toLinearGradient",value:function(e){return 0===e.length?"none":new t({angle:"to right",colorsteps:e})+""}},{key:"parse",value:function(e){var n=w(e),i=0,o=[];return n.str.split("(")[1].split(")")[0].split(",").map((function(e){return e.trim()})).forEach((function(e,t){e.includes("@")?(e=K(e,n.matches),o.push.apply(o,R(Co.parse(e)))):i=Qe(wo[e])?Wo.parse(e):Wo.deg(+wo[e])})),new t({angle:i,colorsteps:o})}}]),t}(Ro),Ko=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),X(t,[{key:"getDefaultObject",value:function(){return W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getDefaultObject",this).call(this,{type:"repeating-linear-gradient",angle:0})}}],[{key:"parse",value:function(e){var n=No.parse(e);return new t({angle:n.angle,colorsteps:n.colorsteps})}}]),t}(No),Ho=(G(ko={},"center",!0),G(ko,"top",!0),G(ko,"left",!0),G(ko,"right",!0),G(ko,"bottom",!0),ko),Mo=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),X(t,[{key:"getDefaultObject",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getDefaultObject",this).call(this,I({type:"radial-gradient",radialType:"ellipse",radialPosition:[Go.CENTER,Go.CENTER]},e))}},{key:"toCloneObject",value:function(){var e=this.json.radialPosition||[Wo.percent(50),Wo.percent(50)];return I({},W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toCloneObject",this).call(this),{radialType:this.json.radialType||"ellipse",radialPosition:JSON.parse(JSON.stringify(e))})}},{key:"isRadial",value:function(){return!0}},{key:"toString",value:function(){if(0===this.colorsteps.length)return"";var e=this.getColorString(),t=this.json,n="",i=t.radialType,o=t.radialPosition||["center","center"];return Ho[o]||"string"==typeof o||(o=o.map((function(e){return"string"==typeof e?e:e.isString()?e.value:e.round(1e3)})).join(" ")),n=o?i+" at "+o:i,(t.type||"radial-gradient")+"("+n+", "+e+")"}}],[{key:"parse",value:function(e){var n=w(e),i="ellipse",o=[Go.CENTER,Go.CENTER],l=[];return n.str.split("(")[1].split(")")[0].split(",").map((function(e){return e.trim()})).forEach((function(e,t){if(e.includes("@"))e=K(e,n.matches),l.push.apply(l,R(Co.parse(e)));else{if(e.includes("at")){var r=e.split("at").map((function(e){return e.trim()})),a=C(r,2);i=a[0],o=a[1]}else i=e;if(_e(o)){var s=o.split(" ");if(1===s.length){var c=Wo.parse(s[0]);o=c.isString()?[c.value,c.value]:[c.clone(),c.clone()]}else 2===s.length&&(o=s.map((function(e){var t=Wo.parse(e);return t.isString()?t.value:t})))}}})),new t({radialType:i,colorsteps:l})}}]),t}(Ro),zo=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),X(t,[{key:"getDefaultObject",value:function(){return W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getDefaultObject",this).call(this,{type:"repeating-radial-gradient"})}}],[{key:"parse",value:function(e){var n=Mo.parse(e);return new t({radialType:n.radialType,radialPosition:n.radialPosition,colorsteps:n.colorsteps})}}]),t}(Mo),Jo=(G(Vo={},"center",!0),G(Vo,"top",!0),G(Vo,"left",!0),G(Vo,"right",!0),G(Vo,"bottom",!0),Vo),jo={"to top":0,"to top right":45,"to right":90,"to bottom right":135,"to bottom":180,"to bottom left":225,"to left":270,"to top left":315},Fo=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),X(t,[{key:"getDefaultObject",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getDefaultObject",this).call(this,I({type:"conic-gradient",angle:0,radialPosition:[Go.CENTER,Go.CENTER]},e))}},{key:"toCloneObject",value:function(){return I({},W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toCloneObject",this).call(this),{angle:this.json.angle,radialPosition:JSON.parse(JSON.stringify(this.json.radialPosition))})}},{key:"isConic",value:function(){return!0}},{key:"hasAngle",value:function(){return!0}},{key:"getColorString",value:function(){if(0===this.colorsteps.length)return"";var e=this.colorsteps;return e?(e.sort((function(e,t){return e.percent==t.percent?0:e.percent>t.percent?1:-1})),e.map((function(t,n){return t.prevColorStep=t.cut&&n>0?e[n-1]:null,t})).map((function(e){var t=Math.floor(3.6*e.percent),n="";return e.cut&&e.prevColorStep&&(n=Math.floor(3.6*e.prevColorStep.percent)+"deg"),e.color+" "+n+" "+t+"deg"})).join(",")):""}},{key:"toString",value:function(){var e=this.getColorString(),t=[],n=this.json,i=n.angle,o=n.radialPosition||Go.CENTER;o=Jo[o]?o:o.join(" "),De(i)&&(i=+(jo[i]||i),t.push("from "+i+"deg")),o&&t.push("at "+o);var l=t.length?t.join(" ")+",":"";return n.type+"("+l+" "+e+")"}}],[{key:"parse",value:function(e){var n=w(e),i="0deg",o=[Go.CENTER,Go.CENTER],l=[];return n.str.split("(")[1].split(")")[0].split(",").map((function(e){return e.trim()})).forEach((function(e,t){if(e.includes("@"))e=e.split(" ").map((function(e){return e.trim()})).map((function(e){return e.includes("deg")?Wo.parse(e).toPercent():e})).join(" "),e=K(e,n.matches),l.push.apply(l,R(Co.parse(e)));else{if(e.includes("at")){var r=e.split("at").map((function(e){return e.trim()})),a=C(r,2);i=a[0],o=a[1]}else i=e;if(_e(o)){var s=o.split(" ");if(1===s.length){var c=Wo.parse(s[0]);o=c.isString()?[c.value,c.value]:[c.clone(),c.clone()]}else 2===s.length&&(o=s.map((function(e){var t=Wo.parse(e);return t.isString()?t.value:t})))}_e(i)&&i.includes("from")&&(i=i.split("from")[1],i=Qe(jo[i])?Wo.parse(i):Wo.deg(+jo[i]))}})),new t({angle:i,radialPosition:o,colorsteps:l})}}]),t}(Ro),Oo=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),X(t,[{key:"getDefaultObject",value:function(){return W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getDefaultObject",this).call(this,{type:"repeating-conic-gradient",angle:0,radialPosition:[Go.CENTER,Go.CENTER]})}}],[{key:"parse",value:function(e){var n=Fo.parse(e);return new t({angle:n.angle,radialPosition:n.radialPosition,colorsteps:n.colorsteps})}}]),t}(Fo),$o=[{type:"linear-gradient",title:"Linear Gradient"},{type:"repeating-linear-gradient",title:"Repeating Linear Gradient"},{type:"radial-gradient",title:"Radial Gradient"},{type:"repeating-radial-gradient",title:"Repeating Radial Gradient"},{type:"conic-gradient",title:"Conic Gradient"},{type:"repeating-conic-gradient",title:"Repeating Conic Gradient"}],Eo=/((linear\-gradient|repeating\-linear\-gradient|radial\-gradient|repeating\-radial\-gradient|conic\-gradient|repeating\-conic\-gradient|url)\(([^\)]*)\))/gi,Uo=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),X(t,[{key:"components",value:function(){return{EmbedColorPicker:go,gradientEditor:Yo}}},{key:"parseImage",value:function(e){var t=w(e),n=null;return t.str.match(Eo).forEach((function(e,i){(e=K(e,t.matches)).includes("repeating-linear-gradient")?n=Ko.parse(e):e.includes("linear-gradient")?n=No.parse(e):e.includes("repeating-radial-gradient")?n=zo.parse(e):e.includes("radial")?n=Mo.parse(e):e.includes("repeating-conic-gradient")?n=Oo.parse(e):e.includes("conic")&&(n=Fo.parse(e))})),n}},{key:"callbackColorValue",value:function(e){var t=this.image.toString();"function"==typeof this.opt.onChange&&this.opt.onChange.call(this,t,this.image),"function"==typeof this.colorpickerShowCallback&&this.colorpickerShowCallback(t,this.image)}},{key:"callbackLastUpdateColorValue",value:function(e){var t=this.image.toString();"function"==typeof this.opt.onLastUpdate&&this.opt.onLastUpdate.call(this,t,this.image)}},{key:"callbackHideColorValue",value:function(e){var t=this.image.toString();"function"==typeof this.opt.onHide&&this.opt.onHide.call(this,t,this.image),"function"==typeof this.colorpickerHideCallback&&this.colorpickerHideCallback(t,this.image)}},{key:"initialize",value:function(){W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initialize",this).call(this),this.$root.addClass("gradient-picker"),this.selectedTab="linear-gradient",this.setValue(this.opt.gradient||"linear-gradient(to right, red 0%, yellow 100%)")}},{key:"setValue",value:function(e){this.gradient=e,this.image=this.parseImage(this.gradient),this.selectTabContent(this.image.type)}},{key:"getValue",value:function(){return this.image.toString()}},{key:"template",value:function(){return'\n      <div class="gradient-body">\n\n        <div class=\'box\'>\n          <div class=\'gradient-preview\'>\n            <div class=\'gradient-view\' ref=\'$gradientView\'></div>\n          </div>\n          <div class="picker-tab">\n            <div class="picker-tab-list" ref="$tab" data-value="static-gradient" data-is-image-hidden="false">\n              '+$o.map((function(e){return"\n                  <span \n                    class='picker-tab-item "+(e.selected?"selected":"")+"' \n                    data-selected-value='"+e.type+"'\n                    title='"+e.title+"'\n                  > \n                  <div class='icon'></div>\n                  </span>"})).join("")+"\n            </div>\n          </div>\n          <div target='gradientEditor'></div>\n\n        </div>\n        <div class='box'>\n          <div target=\"EmbedColorPicker\"></div>\n        </div>\n      </div>\n     \n    "}},{key:"getColorString",value:function(){return this.image?this.image.getColorString():""}},{key:"getCurrentStepColor",value:function(){return(this.image.colorsteps[this.selectColorStepIndex||0]||{color:"rgba(0, 0, 0, 1)"}).color}},{key:"@changeGradientEditor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.colorsteps.map((function(e,t){return new Co({color:e.color,percent:e.offset.value,cut:e.cut,index:100*(t+1)})}));e=I({},e,{type:this.selectedTab,colorsteps:n}),this.image.reset(e),this.updateGradientPreview(t)}},{key:"click $tab .picker-tab-item",value:function(e){var t=e.$delegateTarget.attr("data-selected-value");this.selectTabContent(t)}},{key:"selectTabContent",value:function(e){this.selectedTab=e,this.refs.$tab.attr("data-value",e),this.image=this.createGradient({type:e},this.image),this.$store.emit("setGradientEditor",this.getColorString(),this.selectColorStepIndex,this.image.type,this.image.angle,this.image.radialPosition,this.image.radialType);var t=this.getCurrentStepColor();this["@selectColorStep"](t),this.updateGradientPreview(!0)}},{key:"createGradient",value:function(e,t){var n=e.colorsteps||t.colorsteps,i=e.angle||t.angle,o=e.radialType||t.radialType||"ellipse",l=e.radialPosition||t.radialPosition||[Wo.percent(50),Wo.percent(50)],r=t.clone().toJSON();switch(delete r.itemType,delete r.type,e.type){case"linear-gradient":return new No({colorsteps:n,angle:i});case"repeating-linear-gradient":return new Ko({colorsteps:n,angle:i});case"radial-gradient":return new Mo({colorsteps:n,radialType:o,radialPosition:l});case"repeating-radial-gradient":return new zo({colorsteps:n,radialType:o,radialPosition:l});case"conic-gradient":return new Fo({colorsteps:n,angle:i,radialPosition:l});case"repeating-conic-gradient":return new Oo({colorsteps:n,angle:i,radialPosition:l})}return new Ro}},{key:"@changeEmbedColorPicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.$store.emit("setColorStepColor",e,t)}},{key:"@selectColorStep",value:function(e){this.EmbedColorPicker.setValue(e)}},{key:"@changeColorStep",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.image.reset(I({},e)),this.updateGradientPreview()}},{key:"updateGradientPreview",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.image&&(this.refs.$gradientView.css("background-image",this.image.toString()),this.updateData(e))}},{key:"mousedown $gradientView",value:function(e){this.mouseDown=!0,this.mouseDownX=e.clientX,this.mouseDownY=e.clientY,this.rect=this.refs.$gradientView.rect()}},{key:"mousemove document",value:function(e){if(this.mouseDown){var t=this.rect.left,n=this.rect.right,i=this.rect.top,o=this.rect.bottom,l=Math.min(Math.max(t,e.clientX),n),r=Math.min(Math.max(i,e.clientY),o),a=Wo.percent((l-t)/(n-t)*100),s=Wo.percent((r-i)/(o-i)*100);this.$store.emit("changeRadialPosition",a,s)}}},{key:"mouseup document",value:function(e){this.mouseDown&&(this.mouseDown=!1,this.updateData(!0))}},{key:"updateData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.callbackChange(),e&&this.callbackLastUpdate()}}]),t}(Ri),Po={createGradientPicker:function(e){return new Uo(e)}},Ao=I({},di,yo,Po);return Ao}();const RO=vg(SO.exports),LO=Qh`
  position: absolute;
`,YO=(e,t)=>{const n=tp(),{addUnsubscribe:i}=WL(),o=Bs({x:e.x,y:e.y});return Ts((()=>{const t=n.value,l=RO.create({container:t,type:"sketch",position:"inline",color:e.color||"",onChange:t=>{var n;null==(n=e.onChange)||n.call(e,t)},onLastUpdate:t=>{var n;null==(n=e.onLastUpdate)||n.call(e,t)}});if(e.viewport){const n=t.getBoundingClientRect(),i=e.x+n.width,l=e.y+n.height;if(e.viewport.width<i){const t=e.viewport.width-n.width;0<=t&&(o.x=t)}if(e.viewport.height<l){const t=e.viewport.height-n.height;0<=t&&(o.y=t)}}i((()=>{l.destroy(),t.removeChild(l.$root.el)}))})),()=>Ch`
    <div
      class=${["color-picker",LO]}
      style=${{top:`${o.y}px`,left:`${o.x}px`}}
      ${np(n)}
    ></div>
  `},TO={1:"ZeroOneN",[nf.ZeroOne]:"ZeroOne",[nf.ZeroN]:"ZeroN",[nf.OneOnly]:"OneOnly",[nf.OneN]:"OneN",32:"One",64:"N"};const wO=Qh`
  display: flex;
  width: 100%;
  height: 100%;
  overflow: hidden;
  position: relative;
`;function NO({editor:{focusTable:e},settings:{show:t,columnOrder:n},collections:i}){const o=[];if(!e||e.edit||0===e.selectColumnIds.length)return o;const l=Dr(i).collection("tableEntities").selectById(e.tableId);if(!l)return o;const r=jl(e.selectColumnIds),a=Dr(i).collection("tableColumnEntities").selectByIds(l.columnIds).filter((e=>r(e.id))),s=Ix(t,n);return a.map((e=>s.map((t=>{switch(t){case Ub.columnName:return[Xx.columnName,e.name];case Ub.columnDataType:return[Xx.columnDataType,e.dataType];case Ub.columnDefault:return[Xx.columnDefault,e.default];case Ub.columnComment:return[Xx.columnComment,e.comment];case Ub.columnAutoIncrement:return[Xx.columnAutoIncrement,Zf(e.options,rf.autoIncrement)?"TRUE":"FALSE"];case Ub.columnUnique:return[Xx.columnUnique,Zf(e.options,rf.unique)?"TRUE":"FALSE"];case Ub.columnNotNull:return[Xx.columnNotNull,Zf(e.options,rf.notNull)?"NOT NULL":"NULL"];default:return["",""]}}))))}const KO=jl(["true","1","yes","y"]),HO=jl(["true","1","yes","y","not null"]);function MO(e,t,n,i=""){if(Gx(i))switch(i){case Xx.columnName:e.name=t;break;case Xx.columnDataType:e.dataType=t;break;case Xx.columnDefault:e.default=t;break;case Xx.columnComment:e.comment=t;break;case Xx.columnAutoIncrement:zO(t)&&(e.options|=rf.autoIncrement);break;case Xx.columnUnique:zO(t)&&(e.options|=rf.unique);break;case Xx.columnNotNull:HO(t.trim().toLowerCase())&&(e.options|=rf.notNull)}else switch(n){case Ub.columnName:e.name=t;break;case Ub.columnDataType:e.dataType=t;break;case Ub.columnDefault:e.default=t;break;case Ub.columnComment:e.comment=t;break;case Ub.columnAutoIncrement:zO(t)&&(e.options|=rf.autoIncrement);break;case Ub.columnUnique:zO(t)&&(e.options|=rf.unique);break;case Ub.columnNotNull:HO(t.trim().toLowerCase())&&(e.options|=rf.notNull)}}function zO(e){return KO(e.trim().toLowerCase())}const JO=({editor:e,settings:t})=>n=>new Lm((i=>n.subscribe({next:n=>{const o=e.openMap[Bw],l=e.openMap[Qw],r=e.openMap[eN],a=e.openMap[Dw],s=e.openMap[qw];t.canvasType===Fb.ERD&&!o&&!l&&!a&&!s&&!r&&i.next(n)},error:e=>i.error(e),complete:()=>i.complete()}))),jO=jl([nL.relationshipZeroOne,nL.relationshipZeroN,nL.relationshipOneOnly,nL.relationshipOneN]),FO={[nL.relationshipZeroOne]:nf.ZeroOne,[nL.relationshipZeroN]:nf.ZeroN,[nL.relationshipOneOnly]:nf.OneOnly,[nL.relationshipOneN]:nf.OneN};function OO(e){const t=yL(e),{addUnsubscribe:n}=WL(),i=e=>{const{store:n}=t.value,{editor:i,settings:o}=n.state;ry(o.zoomLevel)||(i.focusTable&&!i.focusTable.edit&&e.key!==uy.Tab&&dy(e.key)&&n.dispatch(Dy({moveKey:e.key,shiftKey:e.shiftKey})),i.focusTable&&e.key===uy.Tab&&(e.preventDefault(),n.dispatch(xG(e.key,e.shiftKey)),setTimeout((()=>{!i.focusTable||Lx(i.focusTable.focusType)||n.dispatch(_y())}),1)))},o=({type:n})=>{const{store:i,emitter:o}=t.value,{editor:l,settings:r}=i.state,a=ry(r.zoomLevel);if(!l.focusTable||!l.focusTable.edit){if(n===nL.addTable&&i.dispatch(Wx()),n===nL.addColumn&&i.dispatch(Tx()),n===nL.addMemo&&i.dispatch(gx()),n===nL.selectAllTable&&i.dispatch(Jy()),jO(n)){const e=FO[n];i.dispatch(XG(e))}if(n===nL.removeTable&&(e.host.dispatchEvent(_L()),i.dispatch(gG())),n===nL.tableProperties){const e=Object.entries(l.selectedMap).find((([,e])=>e===ay));e&&(o.emit(IR({tableId:e[0]})),i.dispatch(ag({[Qw]:!0})))}n===nL.zoomIn&&i.dispatch(jG(.04)),n===nL.zoomOut&&i.dispatch(jG(-.04))}if(!a&&(l.focusTable&&!l.focusTable.edit&&(n===nL.selectAllColumn&&i.dispatch(eg()),n===nL.removeColumn&&l.focusTable.selectColumnIds.length&&i.dispatch(wx(l.focusTable.tableId,l.focusTable.selectColumnIds)),n===nL.primaryKey&&l.focusTable.columnId&&i.dispatch(Mx(l.focusTable.tableId,l.focusTable.columnId))),l.focusTable&&n===nL.edit)){const e=l.focusTable;e.edit?i.dispatch(qy()):e.columnId&&Lx(e.focusType)?i.dispatch(Nx(e.focusType,e.tableId,e.columnId)):i.dispatch(_y())}n===nL.stop&&(e.host.dispatchEvent(qL()),i.dispatch(ig(),ZG())),n===nL.undo&&i.undo(),n===nL.redo&&i.redo()},l=e=>{const{store:n}=t.value,{editor:i,settings:o}=n.state;!ry(o.zoomLevel)&&i.focusTable&&!i.focusTable.edit&&0!==i.focusTable.selectColumnIds.length&&e.clipboardData&&(e.preventDefault(),e.clipboardData.clearData(),e.clipboardData.setData("text/plain",function(e){return NO(e).map((e=>e.map((([,e])=>e)).join("\t"))).join("\n")}(n.state)),e.clipboardData.setData("text/html",function(e){const t=NO(e);return 0===t.length?"":`<table><tbody>${t.map((e=>`<tr>${e.map((([e,t])=>`<td data-type="${e}">${t}</td>`)).join("")}</tr>`)).join("")}</tbody></table>`}(n.state)))},r=e=>{var n;const{store:i}=t.value,{editor:o,settings:l}=i.state;if(ry(l.zoomLevel)||null!=(n=o.focusTable)&&n.edit||!e.clipboardData||0===Object.entries(o.selectedMap).filter((([,e])=>e===ay)).length)return;const r=e.clipboardData.getData("text/html"),a=e.clipboardData.getData("text/plain");let s=[];r.trim()?s=function({settings:{show:e,columnOrder:t}},n){const i=Ix(e,t),o=document.createElement("template");o.innerHTML=n;const l=o.content;return Array.from(l.querySelectorAll("tr")).map((e=>Array.from(e.querySelectorAll("td,th")).map((e=>{var t;return[(null==(t=e.dataset)?void 0:t.type)??"",e.textContent??""]})))).map((e=>{const t=_Z();return i.forEach(((n,i)=>{const o=e[i];if(!o)return;const[l,r]=o,a=r.trim();MO(t,a,n,l)})),e.filter((([e])=>Gx(e))).forEach((([e,n])=>{const i=n.trim();MO(t,i,0,e)})),t}))}(i.state,r):a.trim()&&(s=function({settings:{show:e,columnOrder:t}},n){const i=n.split("\n").map((e=>e.split("\t"))),o=Ix(e,t);return i.map((e=>{const t=_Z();return o.forEach(((n,i)=>{const o=e[i];if(!o)return;const l=o.trim();MO(t,l,n)})),t}))}(i.state,a)),0!==s.length&&(e.preventDefault(),i.dispatch(Cx(s)))};Ts((()=>{const{store:e,keydown$:a,shortcut$:s,emitter:c}=t.value;n(a.pipe(JO(e.state)).subscribe(i),s.pipe(JO(e.state)).subscribe(o),(e=>new Lm((t=>e.on({copy:({payload:{event:e}})=>{t.next(e)}}))))(c).pipe(JO(e.state)).subscribe(l),(e=>new Lm((t=>e.on({paste:({payload:{event:e}})=>{t.next(e)}}))))(c).pipe(JO(e.state)).subscribe(r))}))}const $O=(e,t)=>{const n=tJ(t),i=tp(),o=tp(),l=yL(t),r=Bs({dragSelect:!1,dragSelectX:0,dragSelectY:0,contextMenuType:jj,relationshipId:"",tableId:"",colorPickerShow:!1,colorPickerX:0,colorPickerY:0,colorPickerViewport:null,colorPickerInitialColor:"",tablePropertiesId:"",tablePropertiesIds:[],grabMove:!1,grabCursor:"grab",diffValue:"{}"});OO(t);const{addUnsubscribe:a}=WL(),s=()=>{const{store:e}=l.value,{editor:t}=e.state,n=t.openMap[Bw],i=t.openMap[Qw],o=t.openMap[eN],r=t.openMap[qw];return n||i||o||r},c=e=>{const t=e.target;if(!t||s())return;const i=t.closest(".table"),o=t.closest(".relationship");i?(r.tableId=i.dataset.id,r.contextMenuType=Fj):o?(r.relationshipId=o.dataset.id,r.contextMenuType=Oj):r.contextMenuType=jj,n.onContextmenu(e)},u=()=>{n.state.show=!1},d=()=>{const{store:e}=l.value;e.dispatch(ag({[qw]:!1})),r.diffValue="{}"},p=()=>{const{store:e}=l.value;e.dispatch(ag({[eN]:!1}))},h=e=>{if(s())return;e.preventDefault();const t=hL(e),{store:n}=l.value,i=e.shiftKey&&0===e.deltaX&&0!==e.deltaY;n.dispatch(t?jG(e.deltaY<0?.03:-.03):Dv(i?{movementX:-1*e.deltaY,movementY:-1*e.deltaX}:{movementX:-1*e.deltaX,movementY:-1*e.deltaY}))},m=({event:e,movementX:t,movementY:n})=>{const{store:o}=l.value;"mousemove"===e.type&&e.preventDefault(),(0!==t||0!==n)&&(o.dispatch(Dv({movementX:t,movementY:n})),0===i.value.scrollTop&&0===i.value.scrollLeft||(i.value.scrollTop=0,i.value.scrollLeft=0))},b=e=>{const t=e.target;if(!t)return;const n=s(),o=!t.closest(".color-picker"),a=!t.closest(".table")&&!t.closest(".memo")&&!t.closest(".edit-input")&&!t.closest(".context-menu-content")&&!t.closest(".hide-sign")&&o,c=a&&o&&!t.closest(".minimap")&&!t.closest(".minimap-viewport")&&!t.closest(".virtual-scroll")&&!n;if(a){const{store:e}=l.value;e.dispatch(ZG())}if(o){const{emitter:e}=l.value;e.emit(xR())}if(c)if(AL(e)&&hL(e)){e.preventDefault();const{x:t,y:n}=i.value.getBoundingClientRect();r.dragSelect=!0,r.dragSelectX=e.clientX-t,r.dragSelectY=e.clientY-n}else r.grabMove&&(r.grabCursor="grabbing"),bY.subscribe({next:m,complete:()=>{r.grabCursor="grab"}})},f=()=>{r.dragSelect=!1},y=e=>{const{store:t}=l.value;t.dispatch(IG(e))},g=e=>{const{store:t}=l.value;t.dispatch(e.map(RZ))},v=e=>{r.tablePropertiesId=e},Z=e=>{const{store:t}=l.value,{history:n}=t;let i=0;for(;n.cursor!==e&&i<=tR;)n.cursor<e?n.redo():n.undo(),i++};let x=null;const X=()=>{null==x||x.unsubscribe(),x=null},G=()=>{const{store:e}=l.value,t=i.value;t&&(X(),x=US(t,"mousemove").pipe(mb(100,void 0,{leading:!1,trailing:!0})).subscribe((n=>{const i=t.getBoundingClientRect(),{settings:{scrollLeft:o,scrollTop:l,width:r,height:a,zoomLevel:s}}=e.state,c=If({x:n.clientX-i.x-o,y:n.clientY-i.y-l},r,a,s);e.dispatch(ug(c))})))};return Ts((()=>{const{store:t,emitter:n,keydown$:o}=l.value,s=i.value;e.mouseTracking&&G(),a(Qs(e).subscribe((t=>{"mouseTracking"===t&&(e.mouseTracking?G():X())})),n.on({openColorPicker:({payload:{x:e,y:n,color:i}})=>{const{editor:o}=t.state,l=s.getBoundingClientRect();r.colorPickerX=e-l.x,r.colorPickerY=n-l.y,r.colorPickerViewport=o.viewport,r.colorPickerInitialColor=i,r.colorPickerShow=!0},closeColorPicker:()=>{r.colorPickerShow=!1},openTableProperties:({payload:{tableId:e}})=>{const{doc:n}=t.state,i=r.tablePropertiesIds.filter((e=>n.tableIds.includes(e)));if(i.includes(e)){const t=i.indexOf(e);i.splice(t,1)}i.unshift(e),r.tablePropertiesIds=i.slice(0,5),r.tablePropertiesId=e},openDiffViewer:({payload:{value:e}})=>{r.diffValue=e,t.dispatch(ag({[qw]:!0}))}}),o.pipe(ub((e=>{const n=e.target;if(!n)return!1;const{editor:i,settings:o}=t.state,l=i.openMap[Bw],r=i.openMap[Qw],a=i.openMap[eN],s=i.openMap[qw];return!(o.canvasType!==Fb.ERD||l||r||s||a)&&("Space"===e.code&&"DIV"===n.tagName)}))).subscribe((()=>{r.grabMove=!0})),tY.pipe(ub((e=>"Space"===e.code))).subscribe((()=>{r.grabMove=!1})))})),()=>{const{store:t}=l.value,{editor:{drawRelationship:a,openMap:s}}=t.state,m=s[Bw],x=s[Qw],X=s[eN],G=s[qw],I=r.grabMove?r.grabCursor:a?`url("${function(e){const t=zY("base64",TO[e]);if(!t)return null;const[n,i,,,o]=t.icon;return o}(a.relationshipType)}") 16 16, auto`:"";return Ch`
      <div
        class=${wO}
        style=${{cursor:I}}
        ${np(i)}
        @contextmenu=${c}
        @mousedown=${n.onMousedown}
        @mousedown=${b}
        @touchstart=${b}
        @wheel=${h}
      >
        <${Ww} root=${i} canvas=${o} grabMove=${r.grabMove} />
        <${Iz} />
        <${ww} />
        <${nF} root=${i} />
        ${r.dragSelect?Ch`
              <${Qz}
                root=${i}
                x=${r.dragSelectX}
                y=${r.dragSelectY}
                .onDragSelectEnd=${f}
              />
            `:null}
        ${n.state.show?Ch`
              <${$j}
                type=${r.contextMenuType}
                canvas=${o}
                relationshipId=${r.relationshipId}
                tableId=${r.tableId}
                .onClose=${u}
              />
            `:null}
        ${r.colorPickerShow?Ch`
              <${YO}
                color=${r.colorPickerInitialColor}
                x=${r.colorPickerX}
                y=${r.colorPickerY}
                viewport=${r.colorPickerViewport}
                .onChange=${y}
              />
            `:null}
        ${m?Ch`
              <div>
                <${dz}
                  app=${l}
                  .onChange=${g}
                />
              </div>
            `:null}
        ${x?Ch`
              <${gO}
                tableId=${r.tablePropertiesId}
                tableIds=${r.tablePropertiesIds}
                isDarkMode=${e.isDarkMode}
                .onChange=${v}
              />
            `:null}
        ${G?Ch`
              <div>
                <${Az}
                  app=${l}
                  initialValue=${r.diffValue}
                  .onClose=${d}
                />
              </div>
            `:null}
        ${X?Ch`
              <div>
                <${CO}
                  app=${l}
                  .onChange=${Z}
                  .onClose=${p}
                />
              </div>
            `:null}
      </div>
    `}};const EO="-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', 'Open Sans', system-ui, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji'";const UO=()=>{const e=function(){const e=document.createElement("style");return e.textContent="\np,\nol,\nul,\nli,\ndl,\ndt,\ndd,\nblockquote,\nfigure,\nfieldset,\nlegend,\ntextarea,\npre,\niframe,\nhr,\nh1,\nh2,\nh3,\nh4,\nh5,\nh6 {\n  margin: 0;\n  padding: 0;\n}\n\nh1,\nh2,\nh3,\nh4,\nh5,\nh6 {\n  font-size: 100%;\n  font-weight: normal;\n}\n\nul {\n  list-style: none;\n}\n\nbutton,\ninput,\nselect,\ntextarea {\n  padding: 0;\n  border: none;\n  outline: none;\n  font-family: var(--text-font-family);\n  color: var(--active);\n  background-color: inherit;\n}\n\ninput::placeholder,\ntextarea::placeholder {\n  font-family: var(--text-font-family);\n  color: var(--placeholder);\n  opacity: 1;\n}\n\ninput:disabled,\ntextarea:disabled {\n  cursor: not-allowed;\n  opacity: 0.5;\n}\n\n*, *::before, *::after {\n  box-sizing: border-box;\n}\n\nimg,\nvideo {\n  height: auto;\n  max-width: 100%;\n}\n\niframe {\n  border: 0;\n}\n\ntable {\n  border-collapse: collapse;\n  border-spacing: 0;\n}\n\ntd,\nth {\n  padding: 0;\n}\n\n:host {\n  font-family: var(--text-font-family);\n  color: var(--foreground);\n  fill: var(--foreground);\n  font-size: var(--font-size-2);\n  letter-spacing: var(--letter-spacing-2);\n  line-height: var(--line-height-2);\n  font-weight: var(--font-weight-regular);\n}\n",e}(),t=function(){const e=document.createElement("style");return e.textContent=`\n    :host {\n      --text-font-family: ${EO};\n      --code-font-family: 'Menlo', 'Consolas', 'Bitstream Vera Sans Mono', monospace, 'Apple Color Emoji', 'Segoe UI Emoji';\n    }\n  `,e}(),n=function(){const e=document.createElement("style");return e.textContent="\n    :host {\n      --font-size-1: 12px;\n      --font-size-2: 14px;\n      --font-size-3: 16px;\n      --font-size-4: 18px;\n      --font-size-5: 20px;\n      --font-size-6: 24px;\n      --font-size-7: 28px;\n      --font-size-8: 35px;\n      --font-size-9: 60px;\n      --letter-spacing-1: 0em;\n      --letter-spacing-2: 0em;\n      --letter-spacing-3: 0em;\n      --letter-spacing-4: -0.0025em;\n      --letter-spacing-5: -0.005em;\n      --letter-spacing-6: -0.00625em;\n      --letter-spacing-7: -0.0075em;\n      --letter-spacing-8: -0.01em;\n      --letter-spacing-9: -0.025em;\n      --line-height-1: 16px;\n      --line-height-2: 20px;\n      --line-height-3: 24px;\n      --line-height-4: 26px;\n      --line-height-5: 28px;\n      --line-height-6: 30px;\n      --line-height-7: 36px;\n      --line-height-8: 40px;\n      --line-height-9: 60px;\n      --font-weight-light: 300;\n      --font-weight-regular: 400;\n      --font-weight-medium: 500;\n      --font-weight-bold: 700;\n    }\n  ",e}(),i=function(){const e=document.createElement("style");return e.textContent="\n::-webkit-scrollbar {\n  width: 8px;\n  height: 8px;\n}\n::-webkit-scrollbar-track {\n  background: var(--scrollbar-track);\n}\n::-webkit-scrollbar-corner {\n  background: transparent;\n}\n::-webkit-scrollbar-thumb {\n  background: var(--scrollbar-thumb);\n}\n::-webkit-scrollbar-thumb:hover {\n  background: var(--scrollbar-thumb-hover);\n}\n\n.scrollbar {\n  scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);\n  scrollbar-width: thin;\n}\n",e}(),o=function(){const e=document.createElement("style");return e.textContent="\n/* easylogic-colorpicker */\n.easylogic-colorpicker {\n  position: relative;\n  width: 224px;\n  z-index: 1000;\n  display: inline-block;\n  border: 1px solid var(--context-menu-border);\n  background-color: var(--context-menu-background);\n  border-radius: 3px;\n  -webkit-box-shadow: 0 0px 10px 2px rgba(0, 0, 0, 0.12);\n  box-shadow: 0 0px 10px 2px rgba(0, 0, 0, 0.12);\n  outline: none;\n  /* theme */\n}\n.easylogic-colorpicker > .arrow {\n  position: absolute;\n  top: -10px;\n  left: 7px;\n  width: 0;\n  height: 0;\n  border-left: 10px solid transparent;\n  border-right: 10px solid transparent;\n  display: none;\n  border-bottom: 10px solid rgba(0, 0, 0, 0.2);\n  pointer-events: none;\n}\n.easylogic-colorpicker > .arrow:after {\n  position: absolute;\n  content: '';\n  top: 1px;\n  left: -9px;\n  width: 0;\n  height: 0;\n  border-left: 9px solid transparent;\n  border-right: 9px solid transparent;\n  border-bottom: 9px solid white;\n}\n.easylogic-colorpicker .colorpicker-body .arrow-button {\n  position: relative;\n  width: 10px;\n  height: 12px;\n  padding: 0px;\n  background-color: transparent;\n}\n.easylogic-colorpicker .colorpicker-body .arrow-button:before {\n  content: '';\n  display: inline-block;\n  position: absolute;\n  left: 0px;\n  right: 0px;\n  top: 0px;\n  height: 50%;\n  width: 0;\n  height: 0;\n  border-left: 3px solid transparent;\n  border-right: 3px solid transparent;\n  border-bottom: 3px solid var(--active);\n  pointer-events: none;\n  margin: 2px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n}\n.easylogic-colorpicker .colorpicker-body .arrow-button:after {\n  content: '';\n  display: inline-block;\n  position: absolute;\n  left: 0px;\n  right: 0px;\n  bottom: 0px;\n  top: 50%;\n  width: 0;\n  height: 0;\n  border-left: 3px solid transparent;\n  border-right: 3px solid transparent;\n  border-top: 3px solid var(--active);\n  pointer-events: none;\n  margin: 2px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n}\n.easylogic-colorpicker .colorpicker-body .color {\n  position: relative;\n  height: 120px;\n  overflow: hidden;\n  cursor: pointer;\n}\n.easylogic-colorpicker .colorpicker-body .color > .saturation {\n  position: relative;\n  width: 100%;\n  height: 100%;\n}\n.easylogic-colorpicker .colorpicker-body .color > .saturation > .value {\n  position: relative;\n  width: 100%;\n  height: 100%;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .color\n  > .saturation\n  > .value\n  > .drag-pointer {\n  position: absolute;\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  -webkit-transform: translateX(-50%) translateY(-50%);\n  transform: translateX(-50%) translateY(-50%);\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .color\n  > .saturation\n  > .value\n  > .drag-pointer\n  > div {\n  border: 1px solid #ececec;\n  -webkit-box-shadow: 0 0 2px 0 rgba(0, 0, 0, 0.05);\n  box-shadow: 0 0 2px 0 rgba(0, 0, 0, 0.05);\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  position: absolute;\n  width: 10px;\n  height: 4px;\n  background-color: white;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .color\n  > .saturation\n  > .value\n  > .drag-pointer\n  .left-saturation {\n  left: 0%;\n  top: 50%;\n  -webkit-transform: translateX(calc(-100% - 4px)) translateY(-50%);\n  transform: translateX(calc(-100% - 4px)) translateY(-50%);\n  cursor: col-resize;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .color\n  > .saturation\n  > .value\n  > .drag-pointer\n  .right-saturation {\n  left: 100%;\n  top: 50%;\n  -webkit-transform: translateX(4px) translateY(-50%);\n  transform: translateX(4px) translateY(-50%);\n  cursor: col-resize;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .color\n  > .saturation\n  > .value\n  > .drag-pointer\n  .top-value {\n  width: 4px;\n  height: 10px;\n  left: 50%;\n  top: 0%;\n  -webkit-transform: translateX(-50%) translateY(calc(-100% - 4px));\n  transform: translateX(-50%) translateY(calc(-100% - 4px));\n  cursor: row-resize;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .color\n  > .saturation\n  > .value\n  > .drag-pointer\n  .bottom-value {\n  width: 4px;\n  height: 10px;\n  left: 50%;\n  top: 100%;\n  -webkit-transform: translateX(-50%) translateY(4px);\n  transform: translateX(-50%) translateY(4px);\n  cursor: row-resize;\n}\n.easylogic-colorpicker .colorpicker-body .color > .saturation {\n  background-color: rgba(204, 154, 129, 0);\n  background-image: -webkit-gradient(\n    linear,\n    left top,\n    right top,\n    from(#fff),\n    to(rgba(204, 154, 129, 0))\n  );\n  background-image: linear-gradient(to right, #fff, rgba(204, 154, 129, 0));\n  background-repeat: repeat-x;\n}\n.easylogic-colorpicker .colorpicker-body .color > .saturation > .value {\n  background-image: -webkit-gradient(\n    linear,\n    left bottom,\n    left top,\n    from(#000000),\n    to(rgba(204, 154, 129, 0))\n  );\n  background-image: linear-gradient(to top, #000000, rgba(204, 154, 129, 0));\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .color\n  > .saturation\n  > .value\n  > .drag-pointer {\n  border: 1px solid #fff;\n  -webkit-box-shadow: 0 0 2px 0 rgba(0, 0, 0, 0.05);\n  box-shadow: 0 0 2px 0 rgba(0, 0, 0, 0.05);\n}\n.easylogic-colorpicker .colorpicker-body .control {\n  position: relative;\n  padding: 10px 0px 10px 0px;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n.easylogic-colorpicker .colorpicker-body .control > .color,\n.easylogic-colorpicker .colorpicker-body .control > .empty {\n  position: absolute;\n  left: 12px;\n  top: 14px;\n  width: 30px;\n  height: 30px;\n  border-radius: 50%;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n}\n.easylogic-colorpicker .colorpicker-body .control > .color2,\n.easylogic-colorpicker .colorpicker-body .control > .empty2 {\n  position: absolute;\n  left: 12px;\n  top: 50px;\n  width: 30px;\n  height: 20px;\n  border-radius: 4px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n}\n.easylogic-colorpicker .colorpicker-body .control > .color {\n  border: 1px solid rgba(0, 0, 0, 0.1);\n}\n.easylogic-colorpicker .colorpicker-body .control > .hue {\n  position: relative;\n  padding: 3px 16px;\n  margin: 0px 0px 0px 42px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  cursor: pointer;\n}\n.easylogic-colorpicker .colorpicker-body .control > .hue > .hue-container {\n  position: relative;\n  width: 100%;\n  height: 14px;\n  border-radius: 3px;\n}\n.easylogic-colorpicker .colorpicker-body .control > .hue-scale {\n  position: relative;\n  padding: 3px 16px;\n  margin: 0px 0px 0px 42px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  cursor: pointer;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .control\n  > .hue-scale\n  > .hue-scale-container {\n  position: relative;\n  width: 100%;\n  height: 14px;\n}\n.easylogic-colorpicker .colorpicker-body .control > .opacity {\n  position: relative;\n  padding: 3px 16px;\n  margin: 0px 0px 0px 42px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  cursor: pointer;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .control\n  > .opacity\n  > .opacity-container {\n  position: relative;\n  width: 100%;\n  height: 14px;\n  border-radius: 3px;\n}\n.easylogic-colorpicker .colorpicker-body .control .drag-bar,\n.easylogic-colorpicker .colorpicker-body .control .drag-bar2 {\n  position: absolute;\n  cursor: pointer;\n  top: 50%;\n  left: 0px;\n  -webkit-transform: translateX(-50%) translateY(-50%);\n  transform: translateX(-50%) translateY(-50%);\n  width: 12px;\n  height: 12px;\n  border-radius: 50%;\n}\n.easylogic-colorpicker .colorpicker-body .control > .hue > .hue-container {\n  background: -webkit-gradient(\n    linear,\n    left top,\n    right top,\n    from(#ff0000),\n    color-stop(17%, #ffff00),\n    color-stop(33%, #00ff00),\n    color-stop(50%, #00ffff),\n    color-stop(67%, #0000ff),\n    color-stop(83%, #ff00ff),\n    to(#ff0000)\n  );\n  background: linear-gradient(\n    to right,\n    #ff0000 0%,\n    #ffff00 17%,\n    #00ff00 33%,\n    #00ffff 50%,\n    #0000ff 67%,\n    #ff00ff 83%,\n    #ff0000 100%\n  );\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .control\n  > .opacity\n  > .opacity-container {\n  background-color: transparent;\n  background-image: linear-gradient(45deg, #ccc 25%, transparent 25%),\n    linear-gradient(-45deg, #ccc 25%, transparent 25%),\n    linear-gradient(45deg, transparent 75%, #ccc 75%),\n    linear-gradient(-45deg, transparent 75%, #ccc 75%);\n  background-size: 10px 10px;\n  background-position: 0 0, 0 5px, 5px -5px, -5px 0px;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .control\n  > .opacity\n  > .opacity-container\n  > .color-bar {\n  position: absolute;\n  display: block;\n  content: '';\n  left: 0px;\n  right: 0px;\n  bottom: 0px;\n  top: 0px;\n}\n.easylogic-colorpicker .colorpicker-body .control > .empty,\n.easylogic-colorpicker .colorpicker-body .control > .empty2 {\n  background-color: transparent;\n  background-image: linear-gradient(45deg, #ccc 25%, transparent 25%),\n    linear-gradient(-45deg, #ccc 25%, transparent 25%),\n    linear-gradient(45deg, transparent 75%, #ccc 75%),\n    linear-gradient(-45deg, transparent 75%, #ccc 75%);\n  background-size: 10px 10px;\n  background-position: 0 0, 0 5px, 5px -5px, -5px 0px;\n}\n.easylogic-colorpicker .colorpicker-body .control .drag-bar,\n.easylogic-colorpicker .colorpicker-body .control .drag-bar2 {\n  border: 1px solid rgba(0, 0, 0, 0.05);\n  -webkit-box-shadow: 2px 2px 2px 0px rgba(0, 0, 0, 0.2);\n  box-shadow: 2px 2px 2px 0px rgba(0, 0, 0, 0.2);\n  background-color: #fefefe;\n}\n.easylogic-colorpicker .colorpicker-body .information {\n  /*border-top: 1px solid #e8e8e8;*/\n  position: relative;\n  -webkit-box-sizing: padding-box;\n  box-sizing: padding-box;\n}\n.easylogic-colorpicker .colorpicker-body .information > input {\n  position: absolute;\n  font-size: 10px;\n  height: 20px;\n  bottom: 20px;\n  padding: 0 0 0 2px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  -webkit-user-select: text;\n  -moz-user-select: text;\n  -ms-user-select: text;\n  user-select: text;\n}\n.easylogic-colorpicker .colorpicker-body .information > input[type='number'] {\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  appearance: none;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .information\n  > input[type='number']::-webkit-inner-spin-button,\n.easylogic-colorpicker\n  .colorpicker-body\n  .information\n  > input[type='number']::-webkit-outer-spin-button {\n  -webkit-appearance: none;\n  appearance: none;\n  margin: 0;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .information.hex\n  > .information-item.hex {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .information.rgb\n  > .information-item.rgb {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .information.hsl\n  > .information-item.hsl {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n}\n.easylogic-colorpicker .colorpicker-body .information > .information-item {\n  display: none;\n  position: relative;\n  padding: 0px 5px;\n  padding-left: 9px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  margin-right: 40px;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .information\n  > .information-item\n  > .input-field {\n  display: block;\n  -webkit-box-flex: 1;\n  -ms-flex: 1;\n  flex: 1;\n  padding: 3px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  position: relative;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .information\n  > .information-item\n  > .input-field\n  > .title {\n  text-align: center;\n  font-size: 12px;\n  color: #a9a9a9;\n  padding-top: 2px;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .information\n  > .information-item\n  > .input-field\n  input {\n  text-align: center;\n  width: 100%;\n  padding: 3px;\n  height: 21px;\n  font-size: 11px;\n  color: var(--foreground);\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  -webkit-user-select: text;\n  -moz-user-select: text;\n  -ms-user-select: text;\n  user-select: text;\n  border: 1px solid var(--context-menu-border);\n  border-radius: 2px;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .information\n  > .information-item\n  > .input-field\n  input[type='number'] {\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  appearance: none;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .information\n  > .information-item\n  > .input-field\n  input[type='number']::-webkit-inner-spin-button,\n.easylogic-colorpicker\n  .colorpicker-body\n  .information\n  > .information-item\n  > .input-field\n  input[type='number']::-webkit-outer-spin-button {\n  -webkit-appearance: none;\n  appearance: none;\n  margin: 0;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .information\n  > .information-item\n  > .input-field.hsl-l\n  input[type='number'],\n.easylogic-colorpicker\n  .colorpicker-body\n  .information\n  > .information-item\n  > .input-field.hsl-s\n  input[type='number'] {\n  padding-left: 1px;\n  padding-right: 10px;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .information\n  > .information-item\n  > .input-field\n  .postfix {\n  display: inline-block;\n  position: absolute;\n  right: 3px;\n  top: 2px;\n  height: 21px;\n  line-height: 2;\n  padding: 2px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  text-align: center;\n  font-size: 11px;\n}\n.easylogic-colorpicker .colorpicker-body .information > .information-change {\n  position: absolute;\n  display: block;\n  width: 40px;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  text-align: center;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  padding-top: 5px;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .information\n  > .information-change\n  > .format-change-button {\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  background: transparent;\n  border: 0px;\n  cursor: pointer;\n  outline: none;\n}\n.easylogic-colorpicker .colorpicker-body .information > .title {\n  color: #a3a3a3;\n}\n.easylogic-colorpicker .colorpicker-body .information > .input {\n  color: var(--foreground);\n}\n.easylogic-colorpicker .colorpicker-body .colorsets {\n  border-top: 1px solid var(--context-menu-border);\n}\n.easylogic-colorpicker .colorpicker-body .colorsets > .menu {\n  float: right;\n  padding: 10px 5px;\n  padding-right: 15px;\n}\n.easylogic-colorpicker .colorpicker-body .colorsets > .menu button {\n  border: 0px;\n  font-size: 14px;\n  font-weight: 300;\n  font-family: serif, sans-serif;\n  outline: none;\n  cursor: pointer;\n}\n.easylogic-colorpicker .colorpicker-body .colorsets > .color-list {\n  margin-right: 30px;\n  display: block;\n  padding: 12px 0px 0px 12px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  line-height: 0;\n}\n.easylogic-colorpicker .colorpicker-body .colorsets > .color-list h6 {\n  margin-top: 0px;\n  margin-bottom: 8px;\n  display: none;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .colorsets\n  > .color-list\n  .color-item {\n  width: 13px;\n  height: 13px;\n  border-radius: 2px;\n  display: inline-block;\n  margin-right: 12px;\n  margin-bottom: 12px;\n  position: relative;\n  background-size: contain;\n  overflow: hidden;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  cursor: pointer;\n  vertical-align: middle;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .colorsets\n  > .color-list\n  .color-item:hover {\n  -webkit-transform: scale(1.2);\n  transform: scale(1.2);\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .colorsets\n  > .color-list\n  .color-item\n  .empty {\n  position: absolute;\n  left: 0px;\n  top: 0px;\n  background-color: transparent;\n  background-image: linear-gradient(45deg, #ccc 25%, transparent 25%),\n    linear-gradient(-45deg, #ccc 25%, transparent 25%),\n    linear-gradient(45deg, transparent 75%, #ccc 75%),\n    linear-gradient(-45deg, transparent 75%, #ccc 75%);\n  background-size: 10px 10px;\n  background-position: 0 0, 0 5px, 5px -5px, -5px 0px;\n  width: 100%;\n  height: 100%;\n  padding: 0px;\n  margin: 0px;\n  pointer-events: none;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .colorsets\n  > .color-list\n  .color-item\n  .color-view {\n  position: absolute;\n  left: 0px;\n  top: 0px;\n  width: 100%;\n  height: 100%;\n  padding: 0px;\n  margin: 0px;\n  pointer-events: none;\n  border: 1px solid rgba(0, 0, 0, 0.1);\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .colorsets\n  > .color-list\n  .add-color-item {\n  width: 13px;\n  height: 13px;\n  display: inline-block;\n  margin-right: 12px;\n  margin-bottom: 12px;\n  cursor: pointer;\n  line-height: 1;\n  text-align: center;\n  font-size: 16px;\n  font-weight: 400;\n  font-family: serif, sans-serif;\n  color: var(--foreground);\n  vertical-align: middle;\n}\n.easylogic-colorpicker .colorpicker-body .color-chooser {\n  position: absolute;\n  left: 0px;\n  right: 0px;\n  bottom: 0px;\n  top: 0px;\n  opacity: 0;\n  background-color: rgba(0, 0, 0, 0.5);\n  -webkit-transition: opacity 0.05s ease-out;\n  transition: opacity 0.05s ease-out;\n  pointer-events: none;\n}\n.easylogic-colorpicker .colorpicker-body .color-chooser.open {\n  opacity: 1;\n  pointer-events: all;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .color-chooser\n  .color-chooser-container {\n  position: absolute;\n  top: 120px;\n  left: 0px;\n  right: 0px;\n  bottom: 0px;\n  background-color: var(--context-menu-background);\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .color-chooser\n  .color-chooser-container\n  .colorsets-item-header {\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  right: 0px;\n  height: 34px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  padding: 3px 0px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.2);\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .color-chooser\n  .color-chooser-container\n  .colorsets-item-header\n  .title {\n  -webkit-box-flex: 2;\n  -ms-flex: 2;\n  flex: 2;\n  font-weight: bold;\n  font-size: 15px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  margin-right: 30px;\n  vertical-align: middle;\n  margin: 0px;\n  padding: 5px;\n  padding-left: 14px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  color: var(--active);\n  text-align: left;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .color-chooser\n  .color-chooser-container\n  .colorsets-item-header\n  .items {\n  -webkit-box-flex: 1;\n  -ms-flex: 1;\n  flex: 1;\n  text-align: right;\n  padding-right: 10px;\n  display: block;\n  height: 100%;\n  line-height: 2;\n  cursor: pointer;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .color-chooser\n  .color-chooser-container\n  .colorsets-list {\n  position: absolute;\n  top: 34px;\n  left: 0px;\n  right: 0px;\n  bottom: 0px;\n  overflow: auto;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .color-chooser\n  .color-chooser-container\n  .colorsets-list\n  .colorsets-item {\n  cursor: pointer;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  padding: 3px 0px;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.1);\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .color-chooser\n  .color-chooser-container\n  .colorsets-list\n  .colorsets-item:hover {\n  background-color: rgba(0, 0, 0, 0.05);\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .color-chooser\n  .color-chooser-container\n  .colorsets-list\n  .colorsets-item\n  .title {\n  -webkit-box-flex: 2;\n  -ms-flex: 2;\n  flex: 2;\n  font-size: 14px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  margin-right: 30px;\n  vertical-align: middle;\n  pointer-events: none;\n  margin: 0px;\n  padding: 5px;\n  padding-left: 14px;\n  font-weight: normal;\n  font-size: 13px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  color: var(--active);\n  text-align: left;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .color-chooser\n  .color-chooser-container\n  .colorsets-list\n  .colorsets-item\n  .items {\n  -webkit-box-flex: 3;\n  -ms-flex: 3;\n  flex: 3;\n  display: block;\n  height: 100%;\n  line-height: 1.6;\n  cursor: pointer;\n  pointer-events: none;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .color-chooser\n  .color-chooser-container\n  .colorsets-list\n  .colorsets-item\n  .items\n  .color-item {\n  width: 13px;\n  height: 13px;\n  border-radius: 3px;\n  display: inline-block;\n  margin-right: 10px;\n  background-color: transparent;\n  background-image: linear-gradient(45deg, #ccc 25%, transparent 25%),\n    linear-gradient(-45deg, #ccc 25%, transparent 25%),\n    linear-gradient(45deg, transparent 75%, #ccc 75%),\n    linear-gradient(-45deg, transparent 75%, #ccc 75%);\n  background-size: 10px 10px;\n  background-position: 0 0, 0 5px, 5px -5px, -5px 0px;\n  background-size: contain;\n  border: 1px solid #dddddd;\n  overflow: hidden;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  cursor: pointer;\n  vertical-align: middle;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .color-chooser\n  .color-chooser-container\n  .colorsets-list\n  .colorsets-item\n  .items\n  .color-item\n  .color-view {\n  width: 100%;\n  height: 100%;\n  padding: 0px;\n  margin: 0px;\n  pointer-events: none;\n}\n.easylogic-colorpicker .gradient-editor {\n  position: relative;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n.easylogic-colorpicker .gradient-editor .tools {\n  padding: 4px 6px;\n}\n.easylogic-colorpicker .gradient-editor .unit {\n  display: grid;\n  grid-template-columns: 1fr 50px 50px;\n  grid-column-gap: 5px;\n  font-size: 11px;\n}\n.easylogic-colorpicker .gradient-editor .unit input,\n.easylogic-colorpicker .gradient-editor .unit select {\n  width: 100%;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n}\n.easylogic-colorpicker .gradient-editor [data-editor] {\n  display: none;\n  margin-top: 2px;\n}\n.easylogic-colorpicker .gradient-editor [data-editor] > label {\n  font-size: 11px;\n  vertical-align: middle;\n}\n.easylogic-colorpicker .gradient-editor [data-editor] > label > * {\n  vertical-align: middle;\n}\n.easylogic-colorpicker\n  .gradient-editor:not([data-selected-editor*='static-gradient'])\n  [data-editor='gradient'],\n.easylogic-colorpicker\n  .gradient-editor:not([data-selected-editor*='static-gradient'])\n  [data-editor='tools'] {\n  display: block;\n}\n.easylogic-colorpicker\n  .gradient-editor[data-selected-editor='linear-gradient']\n  [data-editor='angle'],\n.easylogic-colorpicker\n  .gradient-editor[data-selected-editor='repeating-linear-gradient']\n  [data-editor='angle'],\n.easylogic-colorpicker\n  .gradient-editor[data-selected-editor='conic-gradient']\n  [data-editor='angle'],\n.easylogic-colorpicker\n  .gradient-editor[data-selected-editor='repeating-conic-gradient']\n  [data-editor='angle'] {\n  display: block;\n}\n.easylogic-colorpicker\n  .gradient-editor[data-selected-editor='radial-gradient']\n  [data-editor='centerX'],\n.easylogic-colorpicker\n  .gradient-editor[data-selected-editor='radial-gradient']\n  [data-editor='centerY'],\n.easylogic-colorpicker\n  .gradient-editor[data-selected-editor='repeating-radial-gradient']\n  [data-editor='centerX'],\n.easylogic-colorpicker\n  .gradient-editor[data-selected-editor='repeating-radial-gradient']\n  [data-editor='centerY'],\n.easylogic-colorpicker\n  .gradient-editor[data-selected-editor='conic-gradient']\n  [data-editor='centerX'],\n.easylogic-colorpicker\n  .gradient-editor[data-selected-editor='conic-gradient']\n  [data-editor='centerY'],\n.easylogic-colorpicker\n  .gradient-editor[data-selected-editor='repeating-conic-gradient']\n  [data-editor='centerX'],\n.easylogic-colorpicker\n  .gradient-editor[data-selected-editor='repeating-conic-gradient']\n  [data-editor='centerY'] {\n  display: block;\n}\n.easylogic-colorpicker\n  .gradient-editor[data-selected-editor='radial-gradient']\n  [data-editor='radialType'],\n.easylogic-colorpicker\n  .gradient-editor[data-selected-editor='repeating-radial-gradient']\n  [data-editor='radialType'] {\n  margin-top: 5px;\n  display: grid;\n  grid-template-columns: 1fr 105px;\n  grid-column-gap: 2px;\n}\n.easylogic-colorpicker\n  .gradient-editor[data-selected-editor='radial-gradient']\n  [data-editor='radialType']\n  select,\n.easylogic-colorpicker\n  .gradient-editor[data-selected-editor='repeating-radial-gradient']\n  [data-editor='radialType']\n  select {\n  width: 100%;\n}\n.easylogic-colorpicker .gradient-editor .sub-editor {\n  padding: 0px 8px;\n}\n.easylogic-colorpicker .gradient-editor .gradient-steps {\n  position: relative;\n  height: 30px;\n}\n.easylogic-colorpicker .gradient-editor .hue-container,\n.easylogic-colorpicker .gradient-editor .hue {\n  position: absolute;\n  left: 10px;\n  right: 10px;\n  top: 4px;\n  height: 14px;\n  border-radius: 10px;\n  border: 1px solid #cccccc;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  background-color: transparent;\n  background-image: linear-gradient(45deg, #ccc 25%, transparent 25%),\n    linear-gradient(-45deg, #ccc 25%, transparent 25%),\n    linear-gradient(45deg, transparent 75%, #ccc 75%),\n    linear-gradient(-45deg, transparent 75%, #ccc 75%);\n  background-size: 10px 10px;\n  background-position: 0 0, 0 5px, 5px -5px, -5px 0px;\n  pointer-events: all;\n}\n.easylogic-colorpicker .gradient-editor .hue {\n  pointer-events: none;\n}\n.easylogic-colorpicker .gradient-editor .hue .step-list {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0px;\n  left: 0px;\n  border-radius: 10px;\n  pointer-events: none;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='0']\n  [data-index='0'] {\n  border: 0px;\n  -webkit-transform: translateX(-50%) translateY(calc(100%));\n  transform: translateX(-50%) translateY(calc(100%));\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='0']\n  [data-index='0']\n  .arrow {\n  display: block;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='1']\n  [data-index='1'] {\n  border: 0px;\n  -webkit-transform: translateX(-50%) translateY(calc(100%));\n  transform: translateX(-50%) translateY(calc(100%));\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='1']\n  [data-index='1']\n  .arrow {\n  display: block;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='2']\n  [data-index='2'] {\n  border: 0px;\n  -webkit-transform: translateX(-50%) translateY(calc(100%));\n  transform: translateX(-50%) translateY(calc(100%));\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='2']\n  [data-index='2']\n  .arrow {\n  display: block;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='3']\n  [data-index='3'] {\n  border: 0px;\n  -webkit-transform: translateX(-50%) translateY(calc(100%));\n  transform: translateX(-50%) translateY(calc(100%));\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='3']\n  [data-index='3']\n  .arrow {\n  display: block;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='4']\n  [data-index='4'] {\n  border: 0px;\n  -webkit-transform: translateX(-50%) translateY(calc(100%));\n  transform: translateX(-50%) translateY(calc(100%));\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='4']\n  [data-index='4']\n  .arrow {\n  display: block;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='5']\n  [data-index='5'] {\n  border: 0px;\n  -webkit-transform: translateX(-50%) translateY(calc(100%));\n  transform: translateX(-50%) translateY(calc(100%));\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='5']\n  [data-index='5']\n  .arrow {\n  display: block;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='6']\n  [data-index='6'] {\n  border: 0px;\n  -webkit-transform: translateX(-50%) translateY(calc(100%));\n  transform: translateX(-50%) translateY(calc(100%));\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='6']\n  [data-index='6']\n  .arrow {\n  display: block;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='7']\n  [data-index='7'] {\n  border: 0px;\n  -webkit-transform: translateX(-50%) translateY(calc(100%));\n  transform: translateX(-50%) translateY(calc(100%));\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='7']\n  [data-index='7']\n  .arrow {\n  display: block;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='8']\n  [data-index='8'] {\n  border: 0px;\n  -webkit-transform: translateX(-50%) translateY(calc(100%));\n  transform: translateX(-50%) translateY(calc(100%));\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='8']\n  [data-index='8']\n  .arrow {\n  display: block;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='9']\n  [data-index='9'] {\n  border: 0px;\n  -webkit-transform: translateX(-50%) translateY(calc(100%));\n  transform: translateX(-50%) translateY(calc(100%));\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='9']\n  [data-index='9']\n  .arrow {\n  display: block;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='10']\n  [data-index='10'] {\n  border: 0px;\n  -webkit-transform: translateX(-50%) translateY(calc(100%));\n  transform: translateX(-50%) translateY(calc(100%));\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='10']\n  [data-index='10']\n  .arrow {\n  display: block;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='11']\n  [data-index='11'] {\n  border: 0px;\n  -webkit-transform: translateX(-50%) translateY(calc(100%));\n  transform: translateX(-50%) translateY(calc(100%));\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='11']\n  [data-index='11']\n  .arrow {\n  display: block;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='12']\n  [data-index='12'] {\n  border: 0px;\n  -webkit-transform: translateX(-50%) translateY(calc(100%));\n  transform: translateX(-50%) translateY(calc(100%));\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='12']\n  [data-index='12']\n  .arrow {\n  display: block;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='13']\n  [data-index='13'] {\n  border: 0px;\n  -webkit-transform: translateX(-50%) translateY(calc(100%));\n  transform: translateX(-50%) translateY(calc(100%));\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='13']\n  [data-index='13']\n  .arrow {\n  display: block;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='14']\n  [data-index='14'] {\n  border: 0px;\n  -webkit-transform: translateX(-50%) translateY(calc(100%));\n  transform: translateX(-50%) translateY(calc(100%));\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='14']\n  [data-index='14']\n  .arrow {\n  display: block;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='15']\n  [data-index='15'] {\n  border: 0px;\n  -webkit-transform: translateX(-50%) translateY(calc(100%));\n  transform: translateX(-50%) translateY(calc(100%));\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='15']\n  [data-index='15']\n  .arrow {\n  display: block;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='16']\n  [data-index='16'] {\n  border: 0px;\n  -webkit-transform: translateX(-50%) translateY(calc(100%));\n  transform: translateX(-50%) translateY(calc(100%));\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='16']\n  [data-index='16']\n  .arrow {\n  display: block;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='17']\n  [data-index='17'] {\n  border: 0px;\n  -webkit-transform: translateX(-50%) translateY(calc(100%));\n  transform: translateX(-50%) translateY(calc(100%));\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='17']\n  [data-index='17']\n  .arrow {\n  display: block;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='18']\n  [data-index='18'] {\n  border: 0px;\n  -webkit-transform: translateX(-50%) translateY(calc(100%));\n  transform: translateX(-50%) translateY(calc(100%));\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='18']\n  [data-index='18']\n  .arrow {\n  display: block;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='19']\n  [data-index='19'] {\n  border: 0px;\n  -webkit-transform: translateX(-50%) translateY(calc(100%));\n  transform: translateX(-50%) translateY(calc(100%));\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='19']\n  [data-index='19']\n  .arrow {\n  display: block;\n}\n.easylogic-colorpicker .gradient-editor .hue .step-list .step {\n  pointer-events: all;\n  width: 10px;\n  height: 10px;\n  border: 1px solid white;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  display: inline-block;\n  position: absolute;\n  top: 50%;\n  border-radius: 100%;\n  -webkit-box-shadow: 0 0 2px 0px rgba(0, 0, 0, 0.5);\n  box-shadow: 0 0 2px 0px rgba(0, 0, 0, 0.5);\n  -webkit-transform: translateX(-50%) translateY(-50%);\n  transform: translateX(-50%) translateY(-50%);\n  background-color: transparent;\n  background-image: linear-gradient(45deg, #ccc 25%, transparent 25%),\n    linear-gradient(-45deg, #ccc 25%, transparent 25%),\n    linear-gradient(45deg, transparent 75%, #ccc 75%),\n    linear-gradient(-45deg, transparent 75%, #ccc 75%);\n  background-size: 10px 10px;\n  background-position: 0 0, 0 5px, 5px -5px, -5px 0px;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list\n  .step[data-cut='true'] {\n  border-radius: 0%;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list\n  .step[data-cut='true']\n  .color-view {\n  border-radius: 0%;\n}\n.easylogic-colorpicker .gradient-editor .hue .step-list .step .color-view {\n  position: absolute;\n  left: 0px;\n  top: 0px;\n  bottom: 0px;\n  right: 0px;\n  border-radius: 100%;\n  pointer-events: none;\n}\n.easylogic-colorpicker .gradient-editor .hue .step-list .step .arrow {\n  position: absolute;\n  left: 50%;\n  display: none;\n  top: 0%;\n  width: 5px;\n  height: 5px;\n  -webkit-transform: translateX(-50%) translateY(-120%);\n  transform: translateX(-50%) translateY(-120%);\n  pointer-events: none;\n  -webkit-clip-path: polygon(40% 0%, 60% 0%, 60% 100%, 40% 100%);\n  clip-path: polygon(40% 0%, 60% 0%, 60% 100%, 40% 100%);\n}\n.easylogic-colorpicker .gradient-editor input[type='range'] {\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  appearance: none;\n  width: 100%;\n  margin: 6.2px 0;\n  background-color: transparent;\n}\n.easylogic-colorpicker .gradient-editor input[type='range']:focus {\n  outline: none;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  input[type='range']::-webkit-slider-runnable-track {\n  width: 100%;\n  height: 1px;\n  cursor: pointer;\n  background: #556375;\n  border-radius: 0px;\n  border: 0px solid #010101;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  input[type='range']::-webkit-slider-thumb {\n  height: 10px;\n  width: 10px;\n  border-radius: 10px;\n  background: #556375;\n  cursor: pointer;\n  -webkit-appearance: none;\n  appearance: none;\n  margin-top: -5px;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  input[type='range']:focus::-webkit-slider-runnable-track {\n  background: #3174ad;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  input[type='range']::-moz-range-track {\n  width: 100%;\n  height: 1px;\n  cursor: pointer;\n  background: #556375;\n  border-radius: 0px;\n  border: 0px solid #010101;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  input[type='range']::-moz-range-thumb {\n  border: 1px solid #000000;\n  height: 10px;\n  width: 10px;\n  border-radius: 9px;\n  background: #556375;\n  cursor: pointer;\n}\n.easylogic-colorpicker .gradient-editor input[type='range']::-ms-track {\n  width: 100%;\n  height: 1px;\n  cursor: pointer;\n  background: transparent;\n  border-color: transparent;\n  color: transparent;\n}\n.easylogic-colorpicker .gradient-editor input[type='range']::-ms-fill-lower {\n  background: #556375;\n  border: 0px solid #010101;\n  border-radius: 0px;\n  box-shadow: 0px 0px 0px #000000, 0px 0px 0px #0d0d0d;\n}\n.easylogic-colorpicker .gradient-editor input[type='range']::-ms-fill-upper {\n  background: #556375;\n  border: 0px solid #010101;\n  border-radius: 0px;\n}\n.easylogic-colorpicker .gradient-editor input[type='range']::-ms-thumb {\n  height: 10px;\n  width: 10px;\n  border-radius: 9px;\n  background: #556375;\n  cursor: pointer;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  input[type='range']:focus::-ms-fill-lower {\n  background: #556375;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  input[type='range']:focus::-ms-fill-upper {\n  background: #556375;\n}\n.easylogic-colorpicker .gradient-editor .right-menu {\n  display: inline-block;\n  float: right;\n}\n.easylogic-colorpicker .gradient-editor .right-menu button {\n  font-size: 11px;\n  background-color: transparent;\n  border: 0px;\n}\n.easylogic-colorpicker.gradient-picker {\n  width: 460px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n}\n.easylogic-colorpicker.gradient-picker .gradient-body {\n  display: grid;\n  grid-template-columns: 1fr 224px;\n}\n.easylogic-colorpicker.gradient-picker .gradient-body > div:first-child {\n  padding: 5px;\n  border-right: 1px solid #cccccc;\n}\n.easylogic-colorpicker.gradient-picker .popup-item {\n  margin-bottom: 5px;\n}\n.easylogic-colorpicker.gradient-picker .grid-2 {\n  display: grid;\n  grid-template-columns: 60px 1fr;\n}\n.easylogic-colorpicker.gradient-picker .grid-2 label {\n  font-size: 11px;\n  padding-right: 2px;\n  text-align: left;\n}\n.easylogic-colorpicker.gradient-picker label {\n  font-size: 11px;\n}\n.easylogic-colorpicker.gradient-picker .gradient-preview {\n  width: 100%;\n  height: 100px;\n  position: relative;\n  margin-bottom: 5px;\n  border: 1px solid #cccccc;\n  border-radius: 3px;\n  overflow: hidden;\n  background-color: transparent;\n  background-image: linear-gradient(45deg, #ccc 25%, transparent 25%),\n    linear-gradient(-45deg, #ccc 25%, transparent 25%),\n    linear-gradient(45deg, transparent 75%, #ccc 75%),\n    linear-gradient(-45deg, transparent 75%, #ccc 75%);\n  background-size: 10px 10px;\n  background-position: 0 0, 0 5px, 5px -5px, -5px 0px;\n}\n.easylogic-colorpicker.gradient-picker .gradient-preview .gradient-view {\n  position: absolute;\n  left: 0px;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n}\n.easylogic-colorpicker.gradient-picker .picker-tab {\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n.easylogic-colorpicker.gradient-picker .picker-tab .picker-tab-list {\n  text-align: center;\n  padding: 2px 5px;\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-tab-list[data-value='linear-gradient']\n  .picker-tab-item[data-selected-value='linear-gradient'] {\n  -webkit-box-shadow: 0px 0px 3px 0px rgba(0, 0, 0, 0.5);\n  box-shadow: 0px 0px 3px 0px rgba(0, 0, 0, 0.5);\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-tab-list[data-value='linear-gradient']\n  .picker-tab-item[data-selected-value='linear-gradient']\n  .icon\n  svg\n  path {\n  fill: rgba(0, 0, 255, 0.5);\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-tab-list[data-value='repeating-linear-gradient']\n  .picker-tab-item[data-selected-value='repeating-linear-gradient'] {\n  -webkit-box-shadow: 0px 0px 3px 0px rgba(0, 0, 0, 0.5);\n  box-shadow: 0px 0px 3px 0px rgba(0, 0, 0, 0.5);\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-tab-list[data-value='repeating-linear-gradient']\n  .picker-tab-item[data-selected-value='repeating-linear-gradient']\n  .icon\n  svg\n  path {\n  fill: rgba(0, 0, 255, 0.5);\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-tab-list[data-value='radial-gradient']\n  .picker-tab-item[data-selected-value='radial-gradient'] {\n  -webkit-box-shadow: 0px 0px 3px 0px rgba(0, 0, 0, 0.5);\n  box-shadow: 0px 0px 3px 0px rgba(0, 0, 0, 0.5);\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-tab-list[data-value='radial-gradient']\n  .picker-tab-item[data-selected-value='radial-gradient']\n  .icon\n  svg\n  path {\n  fill: rgba(0, 0, 255, 0.5);\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-tab-list[data-value='repeating-radial-gradient']\n  .picker-tab-item[data-selected-value='repeating-radial-gradient'] {\n  -webkit-box-shadow: 0px 0px 3px 0px rgba(0, 0, 0, 0.5);\n  box-shadow: 0px 0px 3px 0px rgba(0, 0, 0, 0.5);\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-tab-list[data-value='repeating-radial-gradient']\n  .picker-tab-item[data-selected-value='repeating-radial-gradient']\n  .icon\n  svg\n  path {\n  fill: rgba(0, 0, 255, 0.5);\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-tab-list[data-value='conic-gradient']\n  .picker-tab-item[data-selected-value='conic-gradient'] {\n  -webkit-box-shadow: 0px 0px 3px 0px rgba(0, 0, 0, 0.5);\n  box-shadow: 0px 0px 3px 0px rgba(0, 0, 0, 0.5);\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-tab-list[data-value='conic-gradient']\n  .picker-tab-item[data-selected-value='conic-gradient']\n  .icon\n  svg\n  path {\n  fill: rgba(0, 0, 255, 0.5);\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-tab-list[data-value='repeating-conic-gradient']\n  .picker-tab-item[data-selected-value='repeating-conic-gradient'] {\n  -webkit-box-shadow: 0px 0px 3px 0px rgba(0, 0, 0, 0.5);\n  box-shadow: 0px 0px 3px 0px rgba(0, 0, 0, 0.5);\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-tab-list[data-value='repeating-conic-gradient']\n  .picker-tab-item[data-selected-value='repeating-conic-gradient']\n  .icon\n  svg\n  path {\n  fill: rgba(0, 0, 255, 0.5);\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-tab-list\n  .picker-tab-item {\n  display: inline-block;\n  vertical-align: middle;\n  height: 20px;\n  width: 20px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  cursor: pointer;\n  position: relative;\n  border-radius: 20%;\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-tab-list\n  .picker-tab-item\n  .icon {\n  pointer-events: none;\n  border-radius: 100%;\n  display: inline-block;\n  width: 90%;\n  height: 90%;\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translateX(-50%) translateY(-50%);\n  transform: translateX(-50%) translateY(-50%);\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-tab-list\n  .picker-tab-item\n  .icon\n  svg {\n  width: 100%;\n  height: 100%;\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-tab-list\n  .picker-tab-item[data-selected-value='static-gradient']\n  .icon {\n  background-image: -webkit-gradient(\n    linear,\n    left top,\n    right top,\n    from(red),\n    to(red)\n  );\n  background-image: linear-gradient(to right, red, red);\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-tab-list\n  .picker-tab-item[data-selected-value='linear-gradient']\n  .icon {\n  background-image: -webkit-gradient(\n    linear,\n    left top,\n    right top,\n    from(black),\n    to(gray)\n  );\n  background-image: linear-gradient(to right, black, gray);\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-tab-list\n  .picker-tab-item[data-selected-value='radial-gradient']\n  .icon {\n  background-image: radial-gradient(closest-side, black, #ebf8e1, gray);\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-tab-list\n  .picker-tab-item[data-selected-value='conic-gradient']\n  .icon {\n  background-image: conic-gradient(black, #ebf8e1);\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-tab-list\n  .picker-tab-item[data-selected-value='repeating-linear-gradient']\n  .icon {\n  background-image: repeating-linear-gradient(\n    45deg,\n    #3f87a6,\n    #ebf8e1 15%,\n    #f69d3c 20%\n  );\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-tab-list\n  .picker-tab-item[data-selected-value='repeating-radial-gradient']\n  .icon {\n  background-image: repeating-radial-gradient(\n    circle,\n    #3f87a6,\n    #ebf8e1 15%,\n    #f69d3c 20%\n  );\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-tab-list\n  .picker-tab-item[data-selected-value='repeating-conic-gradient']\n  .icon {\n  background-image: repeating-conic-gradient(\n    #3f87a6,\n    #ebf8e1 5%,\n    #f69d3c 10%\n  );\n}\n.easylogic-colorpicker.gradient-picker .picker-tab .picker-gradient-selector {\n  padding: 2px 10px;\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-gradient-selector\n  .gradient-steps {\n  position: relative;\n  display: block;\n  height: 30px;\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-gradient-selector\n  .gradient-steps\n  .hue-container {\n  width: 100%;\n  height: 14px;\n  position: absolute;\n  z-index: 0;\n  background-color: transparent;\n  background-image: linear-gradient(45deg, #ccc 25%, transparent 25%),\n    linear-gradient(-45deg, #ccc 25%, transparent 25%),\n    linear-gradient(45deg, transparent 75%, #ccc 75%),\n    linear-gradient(-45deg, transparent 75%, #ccc 75%);\n  background-size: 10px 10px;\n  background-position: 0 0, 0 5px, 5px -5px, -5px 0px;\n  -webkit-box-shadow: 0 0 1px 0 rgba(0, 0, 0, 0.1);\n  box-shadow: 0 0 1px 0 rgba(0, 0, 0, 0.1);\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-gradient-selector\n  .gradient-steps\n  .hue {\n  position: relative;\n  padding: 0px;\n  margin: 0px;\n  cursor: pointer;\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-gradient-selector\n  .gradient-steps\n  .hue\n  > .step-list {\n  position: relative;\n  width: 100%;\n  cursor: copy;\n  height: 14px;\n  z-index: 1;\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-gradient-selector\n  .gradient-steps\n  .hue\n  > .step-list.mode-drag {\n  cursor: pointer;\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-gradient-selector\n  .gradient-steps\n  .hue\n  .drag-bar {\n  border: 0px;\n  background-color: transparent;\n  border: 2px solid white;\n  -webkit-box-shadow: 0 0 2px 0px rgba(0, 0, 0, 0.6);\n  box-shadow: 0 0 2px 0px rgba(0, 0, 0, 0.6);\n  width: 10px;\n  height: 10px;\n  -webkit-transform: none;\n  transform: none;\n  border-radius: 50%;\n  display: inline-block;\n  left: 0px;\n  top: 17px;\n  -webkit-transform: translateX(-50%);\n  transform: translateX(-50%);\n  position: absolute;\n  background-color: rgba(255, 255, 255, 0.8);\n  cursor: pointer;\n  -webkit-transition: top 0.3s ease-out;\n  transition: top 0.3s ease-out;\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-gradient-selector\n  .gradient-steps\n  .hue\n  .drag-bar\n  .guide-line {\n  pointer-events: none;\n  position: absolute;\n  width: 1px;\n  height: 0px;\n  bottom: 8px;\n  left: 3px;\n  -webkit-transform: translateX(-1px);\n  transform: translateX(-1px);\n  -webkit-transition: all 0.3s ease-out;\n  transition: all 0.3s ease-out;\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-gradient-selector\n  .gradient-steps\n  .hue\n  .drag-bar.selected {\n  z-index: 1;\n  top: 30px;\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-gradient-selector\n  .gradient-steps\n  .hue\n  .drag-bar.selected\n  .guide-line {\n  height: 17px;\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-gradient-selector\n  .gradient-steps\n  .hue\n  .drag-bar.selected\n  .guide-change {\n  opacity: 1;\n}\n.easylogic-colorpicker.gradient-picker .easylogic-colorpicker {\n  width: 223px;\n  border-radius: 0px;\n  border-top-right-radius: 3px;\n  border-bottom-right-radius: 3px;\n  border: 0px;\n  -webkit-box-shadow: none;\n  box-shadow: none;\n}\n.easylogic-colorpicker.sketch {\n  border-radius: 5px;\n}\n.easylogic-colorpicker.sketch > .colorpicker-body > .color {\n  margin: 10px 10px 2px 10px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  height: 150px;\n}\n.easylogic-colorpicker.sketch > .colorpicker-body > .control {\n  padding: 0px;\n}\n.easylogic-colorpicker.sketch > .colorpicker-body > .control > .color,\n.easylogic-colorpicker.sketch > .colorpicker-body > .control > .empty {\n  position: absolute;\n  right: 10px;\n  left: auto;\n  top: 2px;\n  width: 40px;\n  height: 44px;\n  border-radius: 2px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n}\n.easylogic-colorpicker.sketch > .colorpicker-body > .control > .color2,\n.easylogic-colorpicker.sketch > .colorpicker-body > .control > .empty2 {\n  position: absolute;\n  right: 10px;\n  left: auto;\n  top: 50px;\n  width: 40px;\n  height: 20px;\n  border-radius: 2px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n}\n.easylogic-colorpicker.sketch > .colorpicker-body > .control > .color {\n  -webkit-box-shadow: inset 0px 0px 1px 0px rgba(0, 0, 0, 0.5);\n  box-shadow: inset 0px 0px 1px 0px rgba(0, 0, 0, 0.5);\n}\n.easylogic-colorpicker.sketch > .colorpicker-body > .control > .hue {\n  position: relative;\n  padding: 2px 2px 2px 10px;\n  margin: 0px 50px 0px 0px;\n}\n.easylogic-colorpicker.sketch\n  > .colorpicker-body\n  > .control\n  > .hue\n  > .hue-container {\n  border-radius: 0px;\n  height: 20px;\n}\n.easylogic-colorpicker.sketch > .colorpicker-body > .control > .hue-scale {\n  position: relative;\n  padding: 2px 2px 2px 10px;\n  margin: 0px 50px 0px 0px;\n}\n.easylogic-colorpicker.sketch\n  > .colorpicker-body\n  > .control\n  > .hue-scale\n  > .hue-scale-container {\n  border-radius: 0px;\n  height: 20px;\n}\n.easylogic-colorpicker.sketch > .colorpicker-body > .control > .opacity {\n  position: relative;\n  padding: 2px 2px 2px 10px;\n  margin: 0px 50px 0px 0px;\n}\n.easylogic-colorpicker.sketch\n  > .colorpicker-body\n  > .control\n  > .opacity\n  > .opacity-container {\n  border-radius: 0px;\n  height: 20px;\n}\n.easylogic-colorpicker.sketch > .colorpicker-body > .control .drag-bar,\n.easylogic-colorpicker.sketch > .colorpicker-body > .control .drag-bar2 {\n  border-radius: 0px;\n  top: 50%;\n  left: 0px;\n  width: 5px;\n  height: 80%;\n  -webkit-transform: translateX(-50%) translateY(-50%);\n  transform: translateX(-50%) translateY(-50%);\n  border-radius: 1px;\n  bottom: 1px !important;\n}\n.easylogic-colorpicker.sketch > .colorpicker-body > .control .drag-bar.first,\n.easylogic-colorpicker.sketch\n  > .colorpicker-body\n  > .control\n  .drag-bar2.first {\n  left: 0px;\n  -webkit-transform: translateX(50%) translateY(-50%) !important;\n  transform: translateX(50%) translateY(-50%) !important;\n}\n.easylogic-colorpicker.sketch > .colorpicker-body > .control .drag-bar.last,\n.easylogic-colorpicker.sketch > .colorpicker-body > .control .drag-bar2.last {\n  -webkit-transform: translateX(-110%) translateY(-50%) !important;\n  transform: translateX(-110%) translateY(-50%) !important;\n}\n.easylogic-colorpicker.sketch\n  > .colorpicker-body\n  > .information\n  .information-change {\n  display: none;\n}\n.easylogic-colorpicker.sketch\n  > .colorpicker-body\n  > .information.rgb\n  .information-item.rgb {\n  display: inherit;\n}\n.easylogic-colorpicker.sketch\n  > .colorpicker-body\n  > .information.rgb\n  .information-item.hsl {\n  display: none !important;\n}\n.easylogic-colorpicker.sketch\n  > .colorpicker-body\n  > .information.hex\n  .information-item.hex {\n  display: inherit;\n}\n.easylogic-colorpicker.sketch\n  > .colorpicker-body\n  > .information.hex\n  .information-item.hsl {\n  display: none !important;\n}\n.easylogic-colorpicker.sketch\n  > .colorpicker-body\n  > .information.hsl\n  .information-item.rgb {\n  display: none !important;\n}\n.easylogic-colorpicker.sketch\n  > .colorpicker-body\n  > .information.hsl\n  .information-item.hsl {\n  display: inherit;\n}\n.easylogic-colorpicker.sketch\n  > .colorpicker-body\n  > .information\n  .information-item {\n  display: -webkit-inline-box !important;\n  display: -ms-inline-flexbox !important;\n  display: inline-flex !important;\n  margin-right: 0px;\n}\n.easylogic-colorpicker.sketch\n  > .colorpicker-body\n  > .information\n  .information-item\n  > .input-field {\n  padding-left: 0px;\n}\n.easylogic-colorpicker.sketch\n  > .colorpicker-body\n  > .information\n  .information-item\n  > .input-field:last-child {\n  padding-right: 0px;\n}\n.easylogic-colorpicker.sketch\n  > .colorpicker-body\n  > .information\n  .information-item\n  > .input-field\n  > .title {\n  color: var(--active);\n  font-size: 11px;\n  cursor: pointer;\n}\n.easylogic-colorpicker.sketch\n  > .colorpicker-body\n  > .information\n  .information-item\n  > .input-field:last-child:not(:first-child) {\n  padding-right: 0px;\n}\n.easylogic-colorpicker.sketch\n  > .colorpicker-body\n  > .information\n  .information-item.hex {\n  width: 74px;\n  padding-right: 0px;\n  padding-left: 5px;\n}\n.easylogic-colorpicker.sketch\n  > .colorpicker-body\n  > .information\n  .information-item.rgb {\n  width: 140px;\n  padding-left: 0px;\n  padding-right: 0px;\n}\n.easylogic-colorpicker.sketch\n  > .colorpicker-body\n  > .information\n  .information-item.hsl {\n  display: none;\n  width: 140px;\n  padding-left: 0px;\n  padding-right: 0px;\n}\n.easylogic-colorpicker.sketch > .colorpicker-body > .colorsets > .color-list {\n  margin-right: 0px;\n  padding-right: 12px;\n}\n.easylogic-colorpicker.sketch\n  > .colorpicker-body\n  > .colorsets\n  > .color-list\n  h6 {\n  margin-top: 0px;\n  margin-bottom: 8px;\n  display: none;\n}\n.easylogic-colorpicker.sketch\n  > .colorpicker-body\n  > .colorsets\n  > .color-list\n  .color-item {\n  width: 16px;\n  height: 16px;\n  border-radius: 3px;\n  margin-right: 9px;\n  margin-bottom: 10px;\n}\n.easylogic-colorpicker.palette {\n  border-radius: 3px;\n  -webkit-box-shadow: none;\n  box-shadow: none;\n}\n.easylogic-colorpicker.palette > .colorpicker-body > .color {\n  display: none;\n}\n.easylogic-colorpicker.palette > .colorpicker-body > .control {\n  display: none;\n}\n.easylogic-colorpicker.palette > .colorpicker-body > .information {\n  display: none;\n}\n.easylogic-colorpicker.palette > .colorpicker-body > .colorsets {\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  border-top: 0px;\n}\n.easylogic-colorpicker.palette\n  > .colorpicker-body\n  > .colorsets\n  > .color-list\n  h6 {\n  margin-top: 0px;\n  margin-bottom: 8px;\n  display: none;\n}\n.easylogic-colorpicker.palette\n  > .colorpicker-body\n  > .colorsets\n  > .color-list\n  .color-item {\n  width: 15px;\n  height: 15px;\n  margin-right: 10px;\n  margin-bottom: 10px;\n}\n.easylogic-colorpicker.palette > .colorpicker-body > .color-chooser {\n  display: none;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n}\n.easylogic-colorpicker.palette > .colorpicker-body > .color-chooser.open {\n  display: block;\n  top: -1px;\n  left: -1px;\n  right: -1px;\n  bottom: auto;\n  border-radius: 3px;\n  border: 1px solid #d8d8d8;\n  -webkit-box-shadow: 0 0px 10px 2px rgba(0, 0, 0, 0.12);\n  box-shadow: 0 0px 10px 2px rgba(0, 0, 0, 0.12);\n}\n.easylogic-colorpicker.palette\n  > .colorpicker-body\n  > .color-chooser.open\n  .color-chooser-container {\n  position: relative;\n  top: auto;\n  left: auto;\n  right: auto;\n  bottom: auto;\n  background-color: var(--context-menu-background);\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  border-radius: 2px;\n}\n.easylogic-colorpicker.palette\n  > .colorpicker-body\n  > .color-chooser.open\n  .color-chooser-container\n  .colorsets-item-header {\n  position: relative;\n  left: auto;\n  top: auto;\n  right: auto;\n  bottom: auto;\n  border-top-left-radius: 3px;\n  border-top-right-radius: 3px;\n}\n.easylogic-colorpicker.palette\n  > .colorpicker-body\n  > .color-chooser.open\n  .color-chooser-container\n  .colorsets-list {\n  position: relative;\n  top: auto;\n  left: auto;\n  right: auto;\n  bottom: auto;\n  overflow: auto;\n}\n.easylogic-colorpicker.palette\n  > .colorpicker-body\n  > .color-chooser.open\n  .color-chooser-container\n  .colorsets-list\n  .colorsets-item:last-child {\n  border-bottom-left-radius: 3px;\n  border-bottom-right-radius: 3px;\n}\n.easylogic-colorpicker.macos .colorpicker-body .wheel {\n  width: 224px;\n  height: 224px;\n  position: relative;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n}\n.easylogic-colorpicker.macos .colorpicker-body .wheel .wheel-canvas {\n  width: 214px;\n  height: 214px;\n  border-radius: 50%;\n  position: absolute;\n  left: 5px;\n  top: 5px;\n}\n.easylogic-colorpicker.macos .colorpicker-body .wheel .drag-pointer {\n  display: inline-block;\n  position: absolute;\n  width: 10px;\n  height: 10px;\n  left: 50%;\n  top: 50%;\n  border: 1px solid white;\n  border-radius: 50%;\n  -webkit-transform: translateX(-50%) translateY(-50%);\n  transform: translateX(-50%) translateY(-50%);\n  z-index: 2;\n}\n.easylogic-colorpicker.macos .control {\n  padding-top: 0px;\n}\n.easylogic-colorpicker.macos .control > .color,\n.easylogic-colorpicker.macos .control > .empty {\n  top: 4px;\n}\n.easylogic-colorpicker.macos .value {\n  position: relative;\n  padding: 6px 16px;\n  margin: 0px 0px 0px 42px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  cursor: pointer;\n}\n.easylogic-colorpicker.macos .value > .value-container {\n  position: relative;\n  width: 100%;\n  height: 10px;\n  border-radius: 3px;\n  background-image: -webkit-gradient(\n    linear,\n    left top,\n    right top,\n    from(#000000),\n    to(rgba(255, 255, 255, 0))\n  );\n  background-image: linear-gradient(\n    to right,\n    #000000 0%,\n    rgba(255, 255, 255, 0) 100%\n  );\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n}\n.easylogic-colorpicker.macos .value > .value-container .drag-bar {\n  position: absolute;\n  cursor: pointer;\n  top: 50%;\n  left: 0px;\n  -webkit-transform: translateX(-50%) translateY(-50%);\n  transform: translateX(-50%) translateY(-50%);\n  width: 12px;\n  height: 12px;\n  border-radius: 50%;\n}\n.easylogic-colorpicker.mini {\n  width: 180px;\n  display: inline-block;\n}\n.easylogic-colorpicker.mini .control {\n  padding: 0px;\n}\n.easylogic-colorpicker.mini .control .hue,\n.easylogic-colorpicker.mini .control .opacity {\n  margin: 0px;\n  padding: 0px;\n}\n.easylogic-colorpicker.mini .control .hue > .hue-container {\n  border-radius: 0px;\n  overflow: hidden;\n  height: 20px;\n}\n.easylogic-colorpicker.mini .control .opacity > .opacity-container {\n  border-radius: 0px;\n  overflow: hidden;\n  height: 20px;\n}\n.easylogic-colorpicker.mini .control .drag-bar,\n.easylogic-colorpicker.mini .control .drag-bar2 {\n  border: 0px;\n  background-color: transparent;\n  height: 100%;\n  width: 5px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  -webkit-box-shadow: none;\n  box-shadow: none;\n}\n.easylogic-colorpicker.mini .control .drag-bar.last:before,\n.easylogic-colorpicker.mini .control .drag-bar.lastafter,\n.easylogic-colorpicker.mini .control .drag-bar2.last:before,\n.easylogic-colorpicker.mini .control .drag-bar2.lastafter {\n  left: 1px;\n}\n.easylogic-colorpicker.mini .control .drag-bar.first:before,\n.easylogic-colorpicker.mini .control .drag-bar.first:after,\n.easylogic-colorpicker.mini .control .drag-bar2.first:before,\n.easylogic-colorpicker.mini .control .drag-bar2.first:after {\n  left: 3px;\n}\n.easylogic-colorpicker.mini .control .drag-bar:before,\n.easylogic-colorpicker.mini .control .drag-bar2:before {\n  content: '';\n  position: absolute;\n  left: 2px;\n  top: 0px;\n  width: 0;\n  height: 0;\n  -webkit-transform: translateX(-50%);\n  transform: translateX(-50%);\n  border-left: 4px solid transparent;\n  border-right: 4px solid transparent;\n  border-top: 4px solid black;\n}\n.easylogic-colorpicker.mini .control .drag-bar:after,\n.easylogic-colorpicker.mini .control .drag-bar2:after {\n  content: '';\n  position: absolute;\n  left: 2px;\n  bottom: 0px;\n  width: 0;\n  height: 0;\n  -webkit-transform: translateX(-50%);\n  transform: translateX(-50%);\n  border-left: 4px solid transparent;\n  border-right: 4px solid transparent;\n  border-bottom: 4px solid black;\n}\n.easylogic-colorpicker.mini-vertical {\n  width: 180px;\n  display: inline-block;\n}\n.easylogic-colorpicker.mini-vertical .color {\n  display: inline-block;\n  width: 140px;\n  height: 160px;\n  vertical-align: middle;\n}\n.easylogic-colorpicker.mini-vertical .control {\n  height: 160px;\n  padding: 0px;\n  vertical-align: middle;\n  display: inline-block;\n}\n.easylogic-colorpicker.mini-vertical .control .hue,\n.easylogic-colorpicker.mini-vertical .control .opacity {\n  margin: 0px;\n  padding: 0px;\n  width: 20px;\n  display: inline-block;\n  vertical-align: middle;\n  height: 100%;\n  position: relative;\n}\n.easylogic-colorpicker.mini-vertical .control .hue > .hue-container {\n  border-radius: 0px;\n  overflow: hidden;\n  height: 100%;\n  background: -webkit-gradient(\n    linear,\n    left bottom,\n    left top,\n    from(#ff0000),\n    color-stop(17%, #ffff00),\n    color-stop(33%, #00ff00),\n    color-stop(50%, #00ffff),\n    color-stop(67%, #0000ff),\n    color-stop(83%, #ff00ff),\n    to(#ff0000)\n  );\n  background: linear-gradient(\n    to top,\n    #ff0000 0%,\n    #ffff00 17%,\n    #00ff00 33%,\n    #00ffff 50%,\n    #0000ff 67%,\n    #ff00ff 83%,\n    #ff0000 100%\n  );\n}\n.easylogic-colorpicker.mini-vertical .control .opacity > .opacity-container {\n  border-radius: 0px;\n  overflow: hidden;\n  height: 100%;\n  width: 20px;\n}\n.easylogic-colorpicker.mini-vertical .control .drag-bar,\n.easylogic-colorpicker.mini-vertical .control .drag-bar2 {\n  border: 0px;\n  background-color: transparent;\n  height: 2px;\n  width: 100%;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  -webkit-box-shadow: none;\n  box-shadow: none;\n  -webkit-transform: none;\n  transform: none;\n}\n.easylogic-colorpicker.mini-vertical .control .drag-bar.last:before,\n.easylogic-colorpicker.mini-vertical .control .drag-bar.last:after,\n.easylogic-colorpicker.mini-vertical .control .drag-bar2.last:before,\n.easylogic-colorpicker.mini-vertical .control .drag-bar2.last:after {\n  top: 2px;\n}\n.easylogic-colorpicker.mini-vertical .control .drag-bar.first:before,\n.easylogic-colorpicker.mini-vertical .control .drag-bar.first:after,\n.easylogic-colorpicker.mini-vertical .control .drag-bar2.first:before,\n.easylogic-colorpicker.mini-vertical .control .drag-bar2.first:after {\n  top: -1px;\n}\n.easylogic-colorpicker.mini-vertical .control .drag-bar:before,\n.easylogic-colorpicker.mini-vertical .control .drag-bar2:before {\n  content: '';\n  position: absolute;\n  left: 0px;\n  top: 2px;\n  width: 0;\n  height: 0;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  border-top: 4px solid transparent;\n  border-bottom: 4px solid transparent;\n  border-left: 4px solid black;\n}\n.easylogic-colorpicker.mini-vertical .control .drag-bar:after,\n.easylogic-colorpicker.mini-vertical .control .drag-bar2:after {\n  content: '';\n  position: absolute;\n  top: 2px;\n  right: 0px;\n  width: 0;\n  height: 0;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  border-top: 4px solid transparent;\n  border-bottom: 4px solid transparent;\n  border-right: 4px solid black;\n}\n.easylogic-colorpicker.ring .colorpicker-body > .color {\n  position: absolute;\n  width: 120px;\n  height: 120px;\n  left: 52px;\n  top: 52px;\n}\n.easylogic-colorpicker.ring .colorpicker-body .wheel {\n  width: 224px;\n  height: 224px;\n  position: relative;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n}\n.easylogic-colorpicker.ring .colorpicker-body .wheel .wheel-canvas {\n  width: 214px;\n  height: 214px;\n  border-radius: 50%;\n  position: absolute;\n  left: 5px;\n  top: 5px;\n}\n.easylogic-colorpicker.ring .colorpicker-body .wheel .drag-pointer {\n  display: inline-block;\n  position: absolute;\n  width: 10px;\n  height: 10px;\n  left: 50%;\n  top: 50%;\n  border: 1px solid white;\n  border-radius: 50%;\n  -webkit-transform: translateX(-50%) translateY(-50%);\n  transform: translateX(-50%) translateY(-50%);\n  z-index: 2;\n}\n.easylogic-colorpicker.ring .control {\n  padding-top: 0px;\n}\n.easylogic-colorpicker.ring .control .value {\n  display: none;\n}\n.easylogic-colorpicker.ring .control > .color,\n.easylogic-colorpicker.ring .control > .empty {\n  top: -17px;\n  width: 30px;\n  height: 30px;\n  border-radius: 2px;\n}\n.easylogic-colorpicker.xd {\n  display: inline-block;\n  padding-top: 12px;\n  width: 245px;\n}\n.easylogic-colorpicker.xd .color {\n  display: inline-block;\n  margin-left: 12px;\n  margin-bottom: 12px;\n  width: 170px;\n  height: 170px;\n  vertical-align: middle;\n  border-radius: 3px;\n  overflow: hidden;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  border: 1px solid #cecece;\n}\n.easylogic-colorpicker.xd .color > .saturation > .value > .drag-pointer {\n  border: 2px solid white;\n  width: 7px;\n  height: 7px;\n  -webkit-box-shadow: 0 0 1px 0px black, inset 0 0 1px 0px black;\n  box-shadow: 0 0 1px 0px black, inset 0 0 1px 0px black;\n}\n.easylogic-colorpicker.xd .control {\n  height: 170px;\n  padding: 0px;\n  vertical-align: middle;\n  display: inline-block;\n  margin-right: 12px;\n  margin-bottom: 12px;\n}\n.easylogic-colorpicker.xd .control .hue,\n.easylogic-colorpicker.xd .control .opacity {\n  margin: 0px;\n  padding: 0px;\n  width: 13px;\n  display: inline-block;\n  vertical-align: middle;\n  height: 100%;\n  position: relative;\n  overflow: hidden;\n  border-radius: 3px;\n  margin-left: 8px;\n}\n.easylogic-colorpicker.xd .control .hue > .hue-container {\n  border-radius: 0px;\n  overflow: hidden;\n  height: 100%;\n  background: -webkit-gradient(\n    linear,\n    left bottom,\n    left top,\n    from(#ff0000),\n    color-stop(17%, #ffff00),\n    color-stop(33%, #00ff00),\n    color-stop(50%, #00ffff),\n    color-stop(67%, #0000ff),\n    color-stop(83%, #ff00ff),\n    to(#ff0000)\n  );\n  background: linear-gradient(\n    to top,\n    #ff0000 0%,\n    #ffff00 17%,\n    #00ff00 33%,\n    #00ffff 50%,\n    #0000ff 67%,\n    #ff00ff 83%,\n    #ff0000 100%\n  );\n}\n.easylogic-colorpicker.xd .control .opacity > .opacity-container {\n  border-radius: 0px;\n  overflow: hidden;\n  height: 100%;\n}\n.easylogic-colorpicker.xd .control .drag-bar,\n.easylogic-colorpicker.xd .control .drag-bar2 {\n  border: 0px;\n  background-color: transparent;\n  border: 2px solid white;\n  -webkit-box-shadow: 0 0 1px 0px black, inset 0 0 1px 0px black;\n  box-shadow: 0 0 1px 0px black, inset 0 0 1px 0px black;\n  width: 10px;\n  height: 10px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  -webkit-transform: none;\n  transform: none;\n  overflow: hidden;\n  left: 50%;\n  -webkit-transform: translateX(-50%) translateY(-50%);\n  transform: translateX(-50%) translateY(-50%);\n}\n.easylogic-colorpicker.xd .information {\n  margin-top: 5px;\n}\n.easylogic-colorpicker.vscode {\n  width: 336px;\n  display: inline-block;\n  background-color: #333;\n  border: 1px solid #ececec;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  border-radius: 0px;\n}\n.easylogic-colorpicker.vscode .colorpicker-body {\n  border-radius: 0px;\n  display: inline-block;\n}\n.easylogic-colorpicker.vscode .colorpicker-body .color-view {\n  height: 34px;\n  background-color: transparent;\n  background-image: linear-gradient(45deg, #ccc 25%, transparent 25%),\n    linear-gradient(-45deg, #ccc 25%, transparent 25%),\n    linear-gradient(45deg, transparent 75%, #ccc 75%),\n    linear-gradient(-45deg, transparent 75%, #ccc 75%);\n  background-size: 10px 10px;\n  background-position: 0 0, 0 5px, 5px -5px, -5px 0px;\n}\n.easylogic-colorpicker.vscode\n  .colorpicker-body\n  .color-view\n  .color-view-container {\n  line-height: 34px;\n  font-size: 14px;\n  text-align: center;\n  width: 100%;\n  height: 100%;\n  cursor: pointer;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  text-shadow: 0 0 3px #535353;\n}\n.easylogic-colorpicker.vscode .colorpicker-body .color-tool {\n  padding: 8px;\n}\n.easylogic-colorpicker.vscode .color {\n  display: inline-block;\n  width: 240px;\n  height: 160px;\n  vertical-align: middle;\n}\n.easylogic-colorpicker.vscode .control {\n  height: 160px;\n  vertical-align: middle;\n  display: inline-block;\n  padding: 0px 0px 0px 4px;\n}\n.easylogic-colorpicker.vscode .control .hue,\n.easylogic-colorpicker.vscode .control .opacity {\n  margin: 0px;\n  padding: 0px;\n  width: 30px;\n  display: inline-block;\n  vertical-align: middle;\n  height: 100%;\n  position: relative;\n}\n.easylogic-colorpicker.vscode .control .hue {\n  padding-left: 5px;\n  width: 35px;\n}\n.easylogic-colorpicker.vscode .control .hue > .hue-container {\n  border-radius: 0px;\n  height: 100%;\n  background: -webkit-gradient(\n    linear,\n    left bottom,\n    left top,\n    from(#ff0000),\n    color-stop(17%, #ffff00),\n    color-stop(33%, #00ff00),\n    color-stop(50%, #00ffff),\n    color-stop(67%, #0000ff),\n    color-stop(83%, #ff00ff),\n    to(#ff0000)\n  );\n  background: linear-gradient(\n    to top,\n    #ff0000 0%,\n    #ffff00 17%,\n    #00ff00 33%,\n    #00ffff 50%,\n    #0000ff 67%,\n    #ff00ff 83%,\n    #ff0000 100%\n  );\n}\n.easylogic-colorpicker.vscode .control .opacity > .opacity-container {\n  border-radius: 0px;\n  height: 100%;\n  width: 30px;\n}\n.easylogic-colorpicker.vscode .control .drag-bar,\n.easylogic-colorpicker.vscode .control .drag-bar2 {\n  background-color: transparent;\n  height: 5px;\n  width: 33px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  -webkit-box-shadow: none;\n  box-shadow: none;\n  -webkit-transform: translateY(-50%) translateX(-2px);\n  transform: translateY(-50%) translateX(-2px);\n  border: 1px solid rgba(255, 255, 255, 0);\n  border-radius: 0px;\n  -webkit-box-shadow: 0 0 2px 0 black, inset 0 0 0 0 black;\n  box-shadow: 0 0 2px 0 black, inset 0 0 0 0 black;\n}\n.easylogic-colorpicker.hide-colorsets .colorsets {\n  display: none !important;\n}\n\n.colorsets-contextmenu {\n  position: fixed;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  border-radius: 6px;\n  background-color: #ececec;\n  border: 1px solid #cccccc;\n  display: none;\n  list-style: none;\n  font-size: 13px;\n  padding-left: 0px;\n  padding-right: 0px;\n}\n.colorsets-contextmenu.show {\n  display: inline-block;\n}\n.colorsets-contextmenu .menu-item {\n  padding: 2px 20px;\n  cursor: default;\n}\n.colorsets-contextmenu .menu-item:hover {\n  background-color: #5ea3fb;\n  color: white;\n}\n.colorsets-contextmenu.small .menu-item.small-hide {\n  display: none;\n}\n",e}();return()=>Ch`${e}${t}${n}${i}${o}`};function PO({store:e}){const{settings:t,doc:{tableIds:n},collections:i}=e.state;return t.canvasType!==Fb.ERD?[]:Dr(i).collection("tableEntities").selectByIds(n).sort(Nz).map((e=>({name:Vl(e.name.trim())?"unnamed":e.name,keywords:"Table",perform:({store:t})=>{const{settings:{width:n,height:i,zoomLevel:o}}=t.state,{x:l,y:r}=Gf({x:e.ui.x-Wf,y:e.ui.y-kf},n,i,o);t.dispatch(Qv({scrollLeft:-1*l,scrollTop:-1*r}),Vx(e.id,!1))}})))}const AO=[{name:"Tab",next:[{icon:Ch`<${JY} name="diagram-project" size=${16} />`,name:"Entity Relationship Diagram",perform:({store:e})=>{e.dispatch(eZ({value:Fb.ERD}))},filter:({store:e})=>e.state.settings.canvasType!==Fb.ERD},{icon:Ch`<${JY}
          prefix="mdi"
          name="chart-scatter-plot"
          size=${16}
        />`,name:"Visualization",perform:({store:e})=>{e.dispatch(eZ({value:Fb.visualization}))},filter:({store:e})=>e.state.settings.canvasType!==Fb.visualization},{icon:Ch`<${JY} prefix="mdi" name="database-export" size=${16} />`,name:"Schema SQL",perform:({store:e})=>{e.dispatch(eZ({value:Fb.schemaSQL}))},filter:({store:e})=>e.state.settings.canvasType!==Fb.schemaSQL},{icon:Ch`<${JY} name="file-code" size=${16} />`,name:"Generator Code",perform:({store:e})=>{e.dispatch(eZ({value:Fb.generatorCode}))},filter:({store:e})=>e.state.settings.canvasType!==Fb.generatorCode},{icon:Ch`<${JY} name="gear" size=${16} />`,name:"Settings",perform:({store:e})=>{e.dispatch(eZ({value:Fb.settings}))},filter:({store:e})=>e.state.settings.canvasType!==Fb.settings}]}],BO=Qh`
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: start;
  justify-content: center;
  padding: 60px 16px 16px;
  z-index: 2147483647;

  &::after {
    content: '';
    position: absolute;
    inset: 0;
    background-color: rgba(0, 0, 0, 0.4);
  }
`,QO=Qh`
  display: flex;
  flex-direction: column;
  width: 100%;
  max-width: 600px;
  position: relative;
  z-index: 1;
  background-color: var(--context-menu-background);
  border: 1px solid var(--context-menu-border);
  border-radius: 6px;
  overflow: hidden;
`,DO=Qh`
  height: 50px;
  min-height: 50px;
  padding: 12px 16px;
  ${YL};
`,_O=Qh`
  display: flex;
  flex-direction: column;
  width: 100%;
  max-height: 400px;
  overflow: auto;
`,qO=Qh`
  display: flex;
  padding: 12px 16px;
  align-items: center;
  white-space: nowrap;
  overflow: hidden;
  cursor: pointer;
  min-height: 45px;
  height: 45px;

  &:hover {
    background-color: var(--column-hover);
  }

  &.selected {
    background-color: var(--column-select);
  }
`,e$=Qh`
  display: flex;
  align-items: center;
  min-width: 14px;
  margin-right: 8px;
`,t$=Qh`
  overflow: hidden;
  text-overflow: ellipsis;
  ${ML};
`,n$=Qh`
  overflow: hidden;
  text-overflow: ellipsis;
  color: var(--placeholder);
  ${zL};
`,i$=Qh`
  width: 8px;
  height: 100%;
`,o$=Qh`
  display: flex;
  align-items: center;
  margin-left: auto;
  padding-left: 24px;
`,l$=jl(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Enter"]),r$=(e,t)=>{const n=yL(t),{addUnsubscribe:i}=WL(),o=tp(),l=Bs({keyword:"",prevActions:[],actions:[],index:-1}),r=()=>l.actions.filter((e=>!e.filter||e.filter(n.value))),a=()=>{l.keyword="",l.index=-1},s=e=>{const t=e.trim();l.index=-1,l.actions=Vl(t)?l.prevActions:function(e,t){return new OT(e,{keys:["name","keywords"]}).search(t).map((e=>e.item))}(r(),t)},c=()=>{rs((()=>{var e,t;null==(t=null==(e=o.value)?void 0:e.querySelector(".selected"))||t.scrollIntoView({block:"nearest"})}))},u=()=>{rs((()=>{t.host.dispatchEvent(_L())}))},d=()=>{const{store:e}=n.value;e.dispatch(ag({[Dw]:!1})),u()},p=e=>{var t;const i=r()[e];if(i)if(i.perform)i.perform(n.value),d();else if(i.next){l.prevActions=i.next,l.actions=i.next;const e=null==(t=o.value)?void 0:t.querySelector("input");e&&$T(e),a()}else d()},h={ArrowUp:e=>{const t=r();if(!t.length)return;e.preventDefault();const n=l.index-1;l.index=n<0?t.length-1:n,c()},ArrowDown:e=>{const t=r();if(!t.length)return;e.preventDefault();const n=l.index+1;l.index=n>t.length-1?0:n,c()},ArrowLeft:()=>{l.index=-1},ArrowRight:()=>{l.index=-1},Enter:e=>{-1!==l.index&&(e.stopPropagation(),p(l.index))}},m=e=>{var t;l$(e.key)&&(null==(t=h[e.key])||t.call(h,e))},b=e=>{const t=e.target;t&&(s(t.value),l.keyword=t.value)},f=()=>{const{store:e}=n.value,{editor:{focusTable:t,openMap:i}}=e.state;if(!t||!t.edit){const t=!i[Dw];if(e.dispatch(ag({[Dw]:t})),t){const t=function(e){var t,n;const{store:i,keyBindingMap:o}=e,{settings:l}=i.state;return[...AO,{icon:Ch`<${JY} prefix="mdi" name="database" size=${16} />`,name:"Database",next:fJ.map((e=>({icon:e.value===l.database?Ch`<${JY} name="check" size=${16} />`:null,name:e.name,perform:({store:t})=>{t.dispatch(qv({value:e.value}))}}))),filter:({store:e})=>e.state.settings.canvasType===Fb.ERD||e.state.settings.canvasType===Fb.schemaSQL},{icon:Ch`<${JY} name="file-import" size=${16} />`,name:"Import",next:[{icon:Ch`<${JY} prefix="mdi" name="code-json" size=${16} />`,name:"json",perform:e=>{mJ(e)}},{icon:Ch`<${JY}
            prefix="mdi"
            name="database-import"
            size=${16}
          />`,name:"Schema SQL",perform:e=>{bJ(e)}}],filter:({store:e})=>e.state.settings.canvasType===Fb.ERD},{icon:Ch`<${JY} name="file-export" size=${16} />`,name:"Export",next:[{icon:Ch`<${JY} prefix="mdi" name="code-json" size=${16} />`,name:"json",perform:({store:e})=>{uj(Ra(e.state),e.state.settings.databaseName)}},{icon:Ch`<${JY}
            prefix="mdi"
            name="database-export"
            size=${16}
          />`,name:"Schema SQL",perform:({store:e})=>{dj(Kj(e.state),e.state.settings.databaseName)}}],filter:({store:e})=>e.state.settings.canvasType===Fb.ERD},{icon:Ch`<${JY} name="table" size=${16} />`,name:"New Table",shortcut:null==(t=o.addTable[0])?void 0:t.shortcut,perform:({store:e})=>{e.dispatch(Wx())},filter:({store:e})=>e.state.settings.canvasType===Fb.ERD},{icon:Ch`<${JY} name="note-sticky" size=${16} />`,name:"New Memo",shortcut:null==(n=o.addMemo[0])?void 0:n.shortcut,perform:({store:e})=>{e.dispatch(gx())},filter:({store:e})=>e.state.settings.canvasType===Fb.ERD},...gJ.map((e=>{var t;return{icon:Ch`<${JY} prefix="base64" name=${e.iconName} size=${16} />`,name:e.name,keywords:"Relationship",shortcut:null==(t=o[e.keyBindingName][0])?void 0:t.shortcut,perform:({store:t})=>{t.dispatch(XG(e.relationshipType))},filter:({store:e})=>e.state.settings.canvasType===Fb.ERD}})),{icon:Ch`<${JY} prefix="mdi" name="atom" size=${16} />`,name:"Automatic Table Placement",perform:({store:e})=>{e.dispatch(ag({[Bw]:!0}))},filter:({store:e})=>e.state.settings.canvasType===Fb.ERD},{icon:Ch`<${JY} prefix="mdi" name="code-brackets" size=${16} />`,name:"Bracket",next:aO.map((e=>({icon:e.value===l.bracketType?Ch`<${JY} name="check" size=${16} />`:null,name:e.name,perform:({store:t})=>{t.dispatch(oZ({value:e.value}))}}))),filter:({store:e})=>e.state.settings.canvasType===Fb.schemaSQL},{icon:Ch`<${JY} name="code" size=${16} />`,name:"Language",next:WF.map((e=>({icon:e.value===l.language?Ch`<${JY} name="check" size=${16} />`:null,name:e.name,perform:({store:t})=>{t.dispatch(tZ({value:e.value}))}}))),filter:({store:e})=>e.state.settings.canvasType===Fb.generatorCode},{icon:Ch`
        <${JY} prefix="mdi" name="format-letter-case" size=${16} />
      `,name:"Table Name Case",next:kF.map((e=>({icon:e.value===l.tableNameCase?Ch`<${JY} name="check" size=${16} />`:null,name:e.name,perform:({store:t})=>{t.dispatch(nZ({value:e.value}))}}))),filter:({store:e})=>e.state.settings.canvasType===Fb.generatorCode},{icon:Ch`
        <${JY} prefix="mdi" name="format-letter-case" size=${16} />
      `,name:"Column Name Case",next:IF.map((e=>({icon:e.value===l.columnNameCase?Ch`<${JY} name="check" size=${16} />`:null,name:e.name,perform:({store:t})=>{t.dispatch(iZ({value:e.value}))}}))),filter:({store:e})=>e.state.settings.canvasType===Fb.generatorCode},...PO(e)]}(n.value);l.prevActions=t,l.actions=t,a(),e.dispatch(ag({[Qw]:!1,[_w]:!1}))}else u()}},y=e=>{const t=e.target;t&&!t.closest(".quick-search")&&d()};return Ts((()=>{const{shortcut$:e,emitter:t}=n.value;i(e.pipe(ub((({type:e})=>e===nL.stop))).subscribe(d),e.pipe(ub((({type:e})=>e===nL.search))).subscribe(f),t.on({toggleSearch:f}))})),()=>{const{store:e}=n.value,{editor:{openMap:t}}=e.state;return t[Dw]?Ch`
      <div class=${BO} @click=${y}>
        <div class=${["quick-search",QO]} ${np(o)}>
          <${iF}
            class=${DO}
            placeholder="Search"
            autofocus=${!0}
            value=${l.keyword}
            .onInput=${b}
            .onKeydown=${m}
          />
          <div class=${["scrollbar",_O]}>
            ${r().map(((e,t)=>Ch`
                <div
                  class=${[qO,{selected:t===l.index}]}
                  @click=${e=>{e.stopPropagation(),p(t)}}
                >
                  ${e.icon?Ch`<div class=${e$}>${e.icon}</div>`:null}
                  <span class=${t$}>
                    <${qT}
                      searchWords=${[l.keyword]}
                      textToHighlight=${e.name}
                    />
                  </span>
                  ${e.keywords?Ch`
                        <div class=${i$}></div>
                        <span class=${n$}>
                          <${qT}
                            searchWords=${[l.keyword]}
                            textToHighlight=${e.keywords}
                          />
                        </span>
                      `:null}
                  ${e.shortcut?Ch`
                        <div class=${o$}>
                          <${iw} shortcut=${e.shortcut} />
                        </div>
                      `:null}
                </div>
              `))}
          </div>
        </div>
      </div>
    `:null}},a$=Qh`
  background-color: var(--gray-color-6);
`,s$=Qh`
  width: 100%;
  height: 1px;
`,c$=(e,t)=>()=>Ch`
    <div
      style=${{"padding-left":`${e.padding??0}px`,"padding-right":`${e.padding??0}px`}}
    >
      <div
        class=${[a$,s$]}
        style=${{"margin-top":`${e.space??0}px`,"margin-bottom":`${e.space??0}px`}}
      ></div>
    </div>
  `,u$=Qh`
  position: relative;
  display: inline-flex;
  align-items: center;
  cursor: pointer;
  outline: none;
  border-radius: 9999px;

  &::before {
    content: '';
    position: absolute;
    inset: 0;
    pointer-events: none;
    border-radius: inherit;
    transition: background-position, background-color, box-shadow, filter;
    transition-timing-function: linear, ease-in-out, ease-in-out, ease-in-out;
    background-repeat: no-repeat;
    background-color: var(--gray-color-3);
    background-image: linear-gradient(
      to right,
      var(--accent-color-9) 40%,
      transparent 60%
    );
    box-shadow: inset 0 0 0 1px var(--gray-color-6);
  }

  &[data-checked='true']::before {
    transition-duration: 0.16s, 0.14s, 0.14s, 0.14s;
    background-position: 0;
  }

  &[data-checked='false']::before {
    transition-duration: 0.12s, 0.14s, 0.14s, 0.14s;
    background-position-x: 100%;
  }
`,d$=Qh`
  width: 28px;
  height: 16px;

  &::before {
    background-size: calc(28px * 2 + 16px) 100%;
  }

  & > span {
    width: 14px;
    height: 14px;
  }

  & > span[data-checked] {
    transform: translateX(calc(28px - 14px - 1px));
  }
`,p$=Qh`
  width: 35px;
  height: 20px;

  &::before {
    background-size: calc(35px * 2 + 20px) 100%;
  }

  & > span {
    width: 18px;
    height: 18px;
  }

  & > span[data-checked] {
    transform: translateX(calc(35px - 18px - 1px));
  }
`,h$=Qh`
  width: 42px;
  height: 24px;

  &::before {
    background-size: calc(42px * 2 + 24px) 100%;
  }

  & > span {
    width: 22px;
    height: 22px;
  }

  & > span[data-checked] {
    transform: translateX(calc(42px - 22px - 1px));
  }
`,m$=Qh`
  background-color: #fff;
  position: relative;
  border-radius: 9999px;
  transition:
    transform 0.14s cubic-bezier(0.45, 0.05, 0.55, 0.95),
    box-shadow 0.14s ease-in-out;
  transform: translateX(1px);
`,b$=Object.freeze(Object.defineProperty({__proto__:null,size1:d$,size2:p$,size3:h$,switchButton:u$,switchThumb:m$},Symbol.toStringTag,{value:"Module"})),f$=(e,t)=>{const n=()=>{e.onChange(!e.value)};return()=>Ch`
    <button
      class=${[u$,Reflect.get(b$,`size${e.size??"2"}`)]}
      type="button"
      data-checked=${e.value}
      @click=${n}
    >
      <span class=${m$} ?data-checked=${e.value}></span>
    </button>
  `},y$=Qh`
  display: flex;
  flex-direction: column;
  width: 100%;
  height: 100%;
  overflow: hidden;
`,g$=Qh`
  display: flex;
  flex-direction: column;
  width: 100%;
  height: 100%;
  overflow-x: hidden;
  overflow-y: auto;
`,v$=Qh`
  display: flex;
  align-items: center;
  padding: 0 12px;
  height: 32px;
  border-radius: 4px;
  cursor: default;

  &:hover {
    background-color: var(--context-menu-hover);
    color: var(--active);
    fill: var(--active);
  }

  &.selected {
    background-color: var(--context-menu-select);
    color: var(--active);
    fill: var(--active);
  }
`,Z$={preferences:"Preferences",shortcuts:"Shortcuts"},x$=Object.values(Z$),X$=(e,t)=>()=>Ch`
    <div class=${y$}>
      <div class=${wL}>Settings</div>
      <${c$} space=${12} />
      <div class=${["scrollbar",g$]}>
        ${x$.map((t=>Ch`
            <div
              class=${[v$,{selected:t===e.value}]}
              @click=${()=>e.onChange(t)}
            >
              ${t}
            </div>
          `))}
      </div>
    </div>
  `,G$=Qh`
  padding: 12px;
  height: 44px;
  box-shadow: inset 0 -1px var(--gray-color-5);
`,I$=Qh`
  width: 100%;
  text-align: left;
  vertical-align: top;
  border-collapse: collapse;
  border-radius: calc(var(--table-border-radius) - 1px);
  border-spacing: 0;
  box-sizing: border-box;
  height: 0;

  th {
    font-weight: var(--font-weight-bold);
    ${G$};
  }

  td {
    ${G$};
  }
`,W$=Qh`
  margin-bottom: 12px;

  &:last-child {
    margin-bottom: 0;
  }
`,k$=(e,t)=>{const n=yL(t);return()=>Ch`
      <table class=${I$}>
        <thead>
          <tr>
            <th>Command</th>
            <th>Keybinding</th>
          </tr>
        </thead>
        <tbody>
          ${(()=>{const{keyBindingMap:e}=n.value;return[{command:"Editing",shortcuts:e.edit},{command:"Stop",shortcuts:e.stop},{command:"Search",shortcuts:e.search},{command:"Undo",shortcuts:e.undo},{command:"Redo",shortcuts:e.redo},{command:"Add Table",shortcuts:e.addTable},{command:"Add Column",shortcuts:e.addColumn},{command:"Add Memo",shortcuts:e.addMemo},{command:"Remove Table, Memo",shortcuts:e.removeTable},{command:"Remove Column",shortcuts:e.removeColumn},{command:"Primary Key",shortcuts:e.primaryKey},{command:"Select All Table, Memo",shortcuts:e.selectAllTable},{command:"Select All Column",shortcuts:e.selectAllColumn},{command:"Relationship Zero One",shortcuts:e.relationshipZeroOne},{command:"Relationship Zero N",shortcuts:e.relationshipZeroN},{command:"Relationship One Only",shortcuts:e.relationshipOneOnly},{command:"Relationship One N",shortcuts:e.relationshipOneN},{command:"Table Properties",shortcuts:e.tableProperties},{command:"Zoom In",shortcuts:e.zoomIn},{command:"Zoom Out",shortcuts:e.zoomOut}]})().map((({command:e,shortcuts:t})=>Ch`
              <tr>
                <td>${e}</td>
                <td>
                  ${t.map((({shortcut:e})=>Ch`
                      <div class=${W$}>
                        <${iw} shortcut=${e} />
                      </div>
                    `))}
                </td>
              </tr>
            `))}
        </tbody>
      </table>
    `},V$=Qh`
  display: flex;
  position: relative;
  width: 100%;
  height: 100%;
  overflow: hidden;
  padding: 32px;
  background-color: var(--context-menu-background);

  .column-order-move {
    transition: transform 0.3s;
  }
`,C$=Qh`
  display: flex;
  width: 200px;
  height: 100%;
  overflow: hidden;
`,S$=Qh`
  display: flex;
  flex-direction: column;
  width: 100%;
  height: 100%;
  overflow: hidden;
  padding-left: 16px;
`,R$=Qh`
  display: flex;
  width: 100%;
  height: 100%;
  overflow: auto;
  flex-flow: wrap;
`,L$=Qh`
  margin: 0 32px 32px 0;
  min-width: 300px;
`,Y$=Qh`
  display: flex;
  white-space: nowrap;
  height: 24px;
  align-items: center;
  margin-bottom: 16px;
`,T$=e=>Qh`
  width: ${e}px;
  height: 100%;
`,w$=Qh`
  display: flex;
  flex-direction: column;
  margin-bottom: 16px;
`,N$=Qh`
  display: flex;
  flex-direction: column;
`,K$=Qh`
  display: flex;
  align-items: center;
  padding: 0 12px;
  height: 32px;
  cursor: move;
  border-radius: 4px;

  &:hover {
    background-color: var(--context-menu-hover);
    color: var(--active);
    fill: var(--active);
  }

  &.none-hover {
    background-color: transparent;
    color: var(--foreground);
    fill: var(--foreground);
  }

  &.dragging {
    opacity: 0.5;
  }
`,H$=(e,t)=>{const n=yL(t),i=tp(),o=new vw(i,`.${K$}`,"column-order-move"),l=Bs({lnb:Z$.preferences}),r=e=>{const{store:t}=n.value;t.dispatch(lZ({value:e}))},a=()=>{const{store:e,emitter:t,toWidth:i}=n.value;kZ(e.state,{toWidth:i}),oW(e.state),t.emit(XR({close:zI(2e3),message:Ch`<${Aw} title="Recalculated table width" />`}))},s=e=>{var t;const l=i.value,r=e.target;if(!l||!r)return;const a=null==(t=r.dataset)?void 0:t.id;if(!a)return;const s=Number(a),c=Array.from(l.querySelectorAll(`.${K$}`));c.forEach((e=>e.classList.add("none-hover"))),r.classList.add("dragging"),Zw(c,(e=>e.dataset.id)).subscribe({next:e=>{((e,t)=>{const{store:i}=n.value;e!==t&&(o.snapshot(),i.dispatch(aZ({value:e,target:t})))})(s,Number(e))},complete:()=>{r.classList.remove("dragging"),c.forEach((e=>e.classList.remove("none-hover")))}})};Ks((()=>o.play()));const c=e=>{l.lnb=e},u=e=>{const{store:t}=n.value;t.dispatch(sZ({value:e?Tf:-1}))},d=e=>{const t=e.target;if(!t)return;const i=Uf(Number(Of(t.value))),{store:o}=n.value;t.value=Bf(i),o.dispatch(sZ({value:i}))},p=e=>{const{store:t}=n.value;t.dispatch(cZ({saveSettingType:cf.scroll,value:!e}))},h=e=>{const{store:t}=n.value;t.dispatch(cZ({saveSettingType:cf.zoomLevel,value:!e}))};return()=>{const{store:e}=n.value,{settings:t}=e.state,o=-1===t.maxWidthComment;return Ch`
      <div class=${V$} ${np(i)}>
        <div class=${C$}>
          <${X$} value=${l.lnb} .onChange=${c} />
        </div>
        <div class=${S$}>
          <div class=${wL}>${l.lnb}</div>
          <${c$} space=${12} />
          <div class=${["scrollbar",R$]}>
            ${l.lnb===Z$.preferences?Ch`
                  <div class=${L$}>
                    <div class=${Y$}>
                      <div>Relationship DataType Sync</div>
                      <div class=${T$(16)}></div>
                      <${f$}
                        value=${t.relationshipDataTypeSync}
                        .onChange=${r}
                      />
                    </div>

                    <div class=${Y$}>
                      <div>Save Scroll Information</div>
                      <div class=${T$(16)}></div>
                      <${f$}
                        value=${!Zf(t.ignoreSaveSettings,cf.scroll)}
                        .onChange=${p}
                      />
                    </div>

                    <div class=${Y$}>
                      <div>Save Zoom Information</div>
                      <div class=${T$(16)}></div>
                      <${f$}
                        value=${!Zf(t.ignoreSaveSettings,cf.zoomLevel)}
                        .onChange=${h}
                      />
                    </div>

                    <div class=${Y$}>
                      <div>Maximum comment width</div>
                      <div class=${T$(16)}></div>
                      <${f$}
                        value=${!o}
                        .onChange=${u}
                      />
                      <div class=${T$(8)}></div>
                      <${iF}
                        title="Maximum comment width"
                        placeholder="Maximum comment width"
                        width=${45}
                        value=${Bf(o?Tf:t.maxWidthComment)}
                        disabled=${o}
                        numberOnly=${!0}
                        .onChange=${d}
                      />
                    </div>

                    <div class=${Y$}>
                      <div>Recalculation table width</div>
                      <div class=${T$(16)}></div>
                      <${Fw}
                        variant="soft"
                        size="1"
                        text=${Ch`
                          <${JY} size=${14} name="rotate" />
                          <div class=${T$(8)}></div>
                          <span>Sync</span>
                        `}
                        .onClick=${a}
                      />
                    </div>
                    <div class=${w$}>
                      <div>Column Order</div>
                      <${c$} space=${12} />
                      <div
                        class=${N$}
                        @dragenter=${UL}
                        @dragover=${UL}
                      >
                        ${ap(t.columnOrder,(e=>e),(e=>Ch`
                            <div
                              class=${K$}
                              draggable="true"
                              data-id=${e}
                              @dragstart=${s}
                            >
                              <${rJ}
                                icon=${Ch`<${JY} name="bars" size=${14} />`}
                                name=${bf[e]}
                              />
                            </div>
                          `))}
                      </div>
                    </div>
                  </div>
                `:l.lnb===Z$.shortcuts?Ch`<${k$} />`:null}
          </div>
        </div>
      </div>
    `}},M$=["grayColor1","grayColor2","grayColor3","grayColor4","grayColor5","grayColor6","grayColor7","grayColor8","grayColor9","grayColor10","grayColor11","grayColor12","accentColor1","accentColor2","accentColor3","accentColor4","accentColor5","accentColor6","accentColor7","accentColor8","accentColor9","accentColor10","accentColor11","accentColor12","canvasBackground","canvasBoundaryBackground","tableBackground","tableSelect","tableBorder","memoBackground","memoSelect","memoBorder","columnSelect","columnHover","relationshipHover","toolbarBackground","contextMenuBackground","contextMenuSelect","contextMenuHover","contextMenuBorder","minimapBorder","minimapShadow","minimapViewportBorder","minimapViewportBorderHover","toastBackground","toastBorder","dargSelectBackground","dargSelectBorder","scrollbarTrack","scrollbarThumb","scrollbarThumbHover","foreground","active","placeholder","focus","inputActive","keyPK","keyFK","keyPFK","diffInsertBackground","diffDeleteBackground","diffCrossBackground","diffInsertForeground","diffDeleteForeground","diffCrossForeground"],z$=e=>()=>Ch`
    <style>
      :host {
        ${(e=>Object.keys(e).map((t=>{const n=CS(t);return`--${n}: var(--erd-editor-${n}, ${Reflect.get(e,t)});`})).join("\n"))(e.theme)}
      }
    </style>
  `,J$={grayColor1:"gray-1",grayColor2:"gray-2",grayColor3:"gray-3",grayColor4:"gray-4",grayColor5:"gray-5",grayColor6:"gray-6",grayColor7:"gray-7",grayColor8:"gray-8",grayColor9:"gray-9",grayColor10:"gray-10",grayColor11:"gray-11",grayColor12:"gray-12",accentColor1:"accent-1",accentColor2:"accent-2",accentColor3:"accent-3",accentColor4:"accent-4",accentColor5:"accent-5",accentColor6:"accent-6",accentColor7:"accent-7",accentColor8:"accent-8",accentColor9:"accent-9",accentColor10:"accent-10",accentColor11:"accent-11",accentColor12:"accent-12",canvasBackground:"gray-3",canvasBoundaryBackground:"gray-1",tableBackground:"gray-2",tableSelect:"accent-8",tableBorder:"gray-6",memoBackground:"gray-2",memoSelect:"accent-8",memoBorder:"gray-6",columnSelect:"gray-5",columnHover:"gray-4",relationshipHover:"accent-8",toolbarBackground:"gray-1",contextMenuBackground:"gray-2",contextMenuSelect:"gray-4",contextMenuHover:"accent-7",contextMenuBorder:"gray-6",minimapBorder:"override-black",minimapShadow:"override-black",minimapViewportBorder:"accent-7",minimapViewportBorderHover:"accent-8",toastBackground:"gray-2",toastBorder:"gray-6",dargSelectBackground:"accent-5",dargSelectBorder:"accent-8",scrollbarTrack:"grayA-3",scrollbarThumb:"gray-9",scrollbarThumbHover:"gray-10",foreground:"gray-11",active:"gray-12",placeholder:"grayA-10",focus:"accent-8",inputActive:"accent-10",keyPK:"custom-amber--9",keyFK:"custom-ruby--9",keyPFK:"custom-cyan--9",diffInsertBackground:"custom-green--4",diffDeleteBackground:"custom-red--4",diffCrossBackground:"custom-blue--4",diffInsertForeground:"custom-green--11",diffDeleteForeground:"custom-red--11",diffCrossForeground:"custom-blue--11"},j$={amber:{amber1:"#fefdfb",amber2:"#fefbe9",amber3:"#fff7c2",amber4:"#ffee9c",amber5:"#fbe577",amber6:"#f3d673",amber7:"#e9c162",amber8:"#e2a336",amber9:"#ffc53d",amber10:"#ffba18",amber11:"#ab6400",amber12:"#4f3422"},amberA:{amberA1:"#c0800004",amberA2:"#f4d10016",amberA3:"#ffde003d",amberA4:"#ffd40063",amberA5:"#f8cf0088",amberA6:"#eab5008c",amberA7:"#dc9b009d",amberA8:"#da8a00c9",amberA9:"#ffb300c2",amberA10:"#ffb300e7",amberA11:"#ab6400",amberA12:"#341500dd"},amberDark:{amber1:"#16120c",amber2:"#1d180f",amber3:"#302008",amber4:"#3f2700",amber5:"#4d3000",amber6:"#5c3d05",amber7:"#714f19",amber8:"#8f6424",amber9:"#ffc53d",amber10:"#ffd60a",amber11:"#ffca16",amber12:"#ffe7b3"},amberDarkA:{amberA1:"#e63c0006",amberA2:"#fd9b000d",amberA3:"#fa820022",amberA4:"#fc820032",amberA5:"#fd8b0041",amberA6:"#fd9b0051",amberA7:"#ffab2567",amberA8:"#ffae3587",amberA9:"#ffc53d",amberA10:"#ffd60a",amberA11:"#ffca16",amberA12:"#ffe7b3"},blue:{blue1:"#fbfdff",blue2:"#f4faff",blue3:"#e6f4fe",blue4:"#d5efff",blue5:"#c2e5ff",blue6:"#acd8fc",blue7:"#8ec8f6",blue8:"#5eb1ef",blue9:"#0090ff",blue10:"#0588f0",blue11:"#0d74ce",blue12:"#113264"},blueA:{blueA1:"#0080ff04",blueA2:"#008cff0b",blueA3:"#008ff519",blueA4:"#009eff2a",blueA5:"#0093ff3d",blueA6:"#0088f653",blueA7:"#0083eb71",blueA8:"#0084e6a1",blueA9:"#0090ff",blueA10:"#0086f0fa",blueA11:"#006dcbf2",blueA12:"#002359ee"},blueDark:{blue1:"#0d1520",blue2:"#111927",blue3:"#0d2847",blue4:"#003362",blue5:"#004074",blue6:"#104d87",blue7:"#205d9e",blue8:"#2870bd",blue9:"#0090ff",blue10:"#3b9eff",blue11:"#70b8ff",blue12:"#c2e6ff"},blueDarkA:{blueA1:"#004df211",blueA2:"#1166fb18",blueA3:"#0077ff3a",blueA4:"#0075ff57",blueA5:"#0081fd6b",blueA6:"#0f89fd7f",blueA7:"#2a91fe98",blueA8:"#3094feb9",blueA9:"#0090ff",blueA10:"#3b9eff",blueA11:"#70b8ff",blueA12:"#c2e6ff"},bronze:{bronze1:"#fdfcfc",bronze2:"#fdf7f5",bronze3:"#f6edea",bronze4:"#efe4df",bronze5:"#e7d9d3",bronze6:"#dfcdc5",bronze7:"#d3bcb3",bronze8:"#c2a499",bronze9:"#a18072",bronze10:"#957468",bronze11:"#7d5e54",bronze12:"#43302b"},bronzeA:{bronzeA1:"#55000003",bronzeA2:"#cc33000a",bronzeA3:"#92250015",bronzeA4:"#80280020",bronzeA5:"#7423002c",bronzeA6:"#7324003a",bronzeA7:"#6c1f004c",bronzeA8:"#671c0066",bronzeA9:"#551a008d",bronzeA10:"#4c150097",bronzeA11:"#3d0f00ab",bronzeA12:"#1d0600d4"},bronzeDark:{bronze1:"#141110",bronze2:"#1c1917",bronze3:"#262220",bronze4:"#302a27",bronze5:"#3b3330",bronze6:"#493e3a",bronze7:"#5a4c47",bronze8:"#6f5f58",bronze9:"#a18072",bronze10:"#ae8c7e",bronze11:"#d4b3a5",bronze12:"#ede0d9"},bronzeDarkA:{bronzeA1:"#d1110004",bronzeA2:"#fbbc910c",bronzeA3:"#faceb817",bronzeA4:"#facdb622",bronzeA5:"#ffd2c12d",bronzeA6:"#ffd1c03c",bronzeA7:"#fdd0c04f",bronzeA8:"#ffd6c565",bronzeA9:"#fec7b09b",bronzeA10:"#fecab5a9",bronzeA11:"#ffd7c6d1",bronzeA12:"#fff1e9ec"},brown:{brown1:"#fefdfc",brown2:"#fcf9f6",brown3:"#f6eee7",brown4:"#f0e4d9",brown5:"#ebdaca",brown6:"#e4cdb7",brown7:"#dcbc9f",brown8:"#cea37e",brown9:"#ad7f58",brown10:"#a07553",brown11:"#815e46",brown12:"#3e332e"},brownA:{brownA1:"#aa550003",brownA2:"#aa550009",brownA3:"#a04b0018",brownA4:"#9b4a0026",brownA5:"#9f4d0035",brownA6:"#a04e0048",brownA7:"#a34e0060",brownA8:"#9f4a0081",brownA9:"#823c00a7",brownA10:"#723300ac",brownA11:"#522100b9",brownA12:"#140600d1"},brownDark:{brown1:"#12110f",brown2:"#1c1816",brown3:"#28211d",brown4:"#322922",brown5:"#3e3128",brown6:"#4d3c2f",brown7:"#614a39",brown8:"#7c5f46",brown9:"#ad7f58",brown10:"#b88c67",brown11:"#dbb594",brown12:"#f2e1ca"},brownDarkA:{brownA1:"#91110002",brownA2:"#fba67c0c",brownA3:"#fcb58c19",brownA4:"#fbbb8a24",brownA5:"#fcb88931",brownA6:"#fdba8741",brownA7:"#ffbb8856",brownA8:"#ffbe8773",brownA9:"#feb87da8",brownA10:"#ffc18cb3",brownA11:"#fed1aad9",brownA12:"#feecd4f2"},crimson:{crimson1:"#fffcfd",crimson2:"#fef7f9",crimson3:"#ffe9f0",crimson4:"#fedce7",crimson5:"#facedd",crimson6:"#f3bed1",crimson7:"#eaacc3",crimson8:"#e093b2",crimson9:"#e93d82",crimson10:"#df3478",crimson11:"#cb1d63",crimson12:"#621639"},crimsonA:{crimsonA1:"#ff005503",crimsonA2:"#e0004008",crimsonA3:"#ff005216",crimsonA4:"#f8005123",crimsonA5:"#e5004f31",crimsonA6:"#d0004b41",crimsonA7:"#bf004753",crimsonA8:"#b6004a6c",crimsonA9:"#e2005bc2",crimsonA10:"#d70056cb",crimsonA11:"#c4004fe2",crimsonA12:"#530026e9"},crimsonDark:{crimson1:"#191114",crimson2:"#201318",crimson3:"#381525",crimson4:"#4d122f",crimson5:"#5c1839",crimson6:"#6d2545",crimson7:"#873356",crimson8:"#b0436e",crimson9:"#e93d82",crimson10:"#ee518a",crimson11:"#ff92ad",crimson12:"#fdd3e8"},crimsonDarkA:{crimsonA1:"#f4126709",crimsonA2:"#f22f7a11",crimsonA3:"#fe2a8b2a",crimsonA4:"#fd158741",crimsonA5:"#fd278f51",crimsonA6:"#fe459763",crimsonA7:"#fd559b7f",crimsonA8:"#fe5b9bab",crimsonA9:"#fe418de8",crimsonA10:"#ff5693ed",crimsonA11:"#ff92ad",crimsonA12:"#ffd5eafd"},cyan:{cyan1:"#fafdfe",cyan2:"#f2fafb",cyan3:"#def7f9",cyan4:"#caf1f6",cyan5:"#b5e9f0",cyan6:"#9ddde7",cyan7:"#7dcedc",cyan8:"#3db9cf",cyan9:"#00a2c7",cyan10:"#0797b9",cyan11:"#107d98",cyan12:"#0d3c48"},cyanA:{cyanA1:"#0099cc05",cyanA2:"#009db10d",cyanA3:"#00c2d121",cyanA4:"#00bcd435",cyanA5:"#01b4cc4a",cyanA6:"#00a7c162",cyanA7:"#009fbb82",cyanA8:"#00a3c0c2",cyanA9:"#00a2c7",cyanA10:"#0094b7f8",cyanA11:"#007491ef",cyanA12:"#00323ef2"},cyanDark:{cyan1:"#0b161a",cyan2:"#101b20",cyan3:"#082c36",cyan4:"#003848",cyan5:"#004558",cyan6:"#045468",cyan7:"#12677e",cyan8:"#11809c",cyan9:"#00a2c7",cyan10:"#23afd0",cyan11:"#4ccce6",cyan12:"#b6ecf7"},cyanDarkA:{cyanA1:"#0091f70a",cyanA2:"#02a7f211",cyanA3:"#00befd28",cyanA4:"#00baff3b",cyanA5:"#00befd4d",cyanA6:"#00c7fd5e",cyanA7:"#14cdff75",cyanA8:"#11cfff95",cyanA9:"#00cfffc3",cyanA10:"#28d6ffcd",cyanA11:"#52e1fee5",cyanA12:"#bbf3fef7"},gold:{gold1:"#fdfdfc",gold2:"#faf9f2",gold3:"#f2f0e7",gold4:"#eae6db",gold5:"#e1dccf",gold6:"#d8d0bf",gold7:"#cbc0aa",gold8:"#b9a88d",gold9:"#978365",gold10:"#8c7a5e",gold11:"#71624b",gold12:"#3b352b"},goldA:{goldA1:"#55550003",goldA2:"#9d8a000d",goldA3:"#75600018",goldA4:"#6b4e0024",goldA5:"#60460030",goldA6:"#64440040",goldA7:"#63420055",goldA8:"#633d0072",goldA9:"#5332009a",goldA10:"#492d00a1",goldA11:"#362100b4",goldA12:"#130c00d4"},goldDark:{gold1:"#121211",gold2:"#1b1a17",gold3:"#24231f",gold4:"#2d2b26",gold5:"#38352e",gold6:"#444039",gold7:"#544f46",gold8:"#696256",gold9:"#978365",gold10:"#a39073",gold11:"#cbb99f",gold12:"#e8e2d9"},goldDarkA:{goldA1:"#91911102",goldA2:"#f9e29d0b",goldA3:"#f8ecbb15",goldA4:"#ffeec41e",goldA5:"#feecc22a",goldA6:"#feebcb37",goldA7:"#ffedcd48",goldA8:"#fdeaca5f",goldA9:"#ffdba690",goldA10:"#fedfb09d",goldA11:"#fee7c6c8",goldA12:"#fef7ede7"},grass:{grass1:"#fbfefb",grass2:"#f5fbf5",grass3:"#e9f6e9",grass4:"#daf1db",grass5:"#c9e8ca",grass6:"#b2ddb5",grass7:"#94ce9a",grass8:"#65ba74",grass9:"#46a758",grass10:"#3e9b4f",grass11:"#2a7e3b",grass12:"#203c25"},grassA:{grassA1:"#00c00004",grassA2:"#0099000a",grassA3:"#00970016",grassA4:"#009f0725",grassA5:"#00930536",grassA6:"#008f0a4d",grassA7:"#018b0f6b",grassA8:"#008d199a",grassA9:"#008619b9",grassA10:"#007b17c1",grassA11:"#006514d5",grassA12:"#002006df"},grassDark:{grass1:"#0e1511",grass2:"#141a15",grass3:"#1b2a1e",grass4:"#1d3a24",grass5:"#25482d",grass6:"#2d5736",grass7:"#366740",grass8:"#3e7949",grass9:"#46a758",grass10:"#53b365",grass11:"#71d083",grass12:"#c2f0c2"},grassDarkA:{grassA1:"#00de1205",grassA2:"#5ef7780a",grassA3:"#70fe8c1b",grassA4:"#57ff802c",grassA5:"#68ff8b3b",grassA6:"#71ff8f4b",grassA7:"#77fd925d",grassA8:"#77fd9070",grassA9:"#65ff82a1",grassA10:"#72ff8dae",grassA11:"#89ff9fcd",grassA12:"#ceffceef"},gray:{gray1:"#fcfcfc",gray2:"#f9f9f9",gray3:"#f0f0f0",gray4:"#e8e8e8",gray5:"#e0e0e0",gray6:"#d9d9d9",gray7:"#cecece",gray8:"#bbbbbb",gray9:"#8d8d8d",gray10:"#838383",gray11:"#646464",gray12:"#202020"},grayA:{grayA1:"#00000003",grayA2:"#00000006",grayA3:"#0000000f",grayA4:"#00000017",grayA5:"#0000001f",grayA6:"#00000026",grayA7:"#00000031",grayA8:"#00000044",grayA9:"#00000072",grayA10:"#0000007c",grayA11:"#0000009b",grayA12:"#000000df"},grayDark:{gray1:"#111111",gray2:"#191919",gray3:"#222222",gray4:"#2a2a2a",gray5:"#313131",gray6:"#3a3a3a",gray7:"#484848",gray8:"#606060",gray9:"#6e6e6e",gray10:"#7b7b7b",gray11:"#b4b4b4",gray12:"#eeeeee"},grayDarkA:{grayA1:"#00000000",grayA2:"#ffffff09",grayA3:"#ffffff12",grayA4:"#ffffff1b",grayA5:"#ffffff22",grayA6:"#ffffff2c",grayA7:"#ffffff3b",grayA8:"#ffffff55",grayA9:"#ffffff64",grayA10:"#ffffff72",grayA11:"#ffffffaf",grayA12:"#ffffffed"},green:{green1:"#fbfefc",green2:"#f4fbf6",green3:"#e6f6eb",green4:"#d6f1df",green5:"#c4e8d1",green6:"#adddc0",green7:"#8eceaa",green8:"#5bb98b",green9:"#30a46c",green10:"#2b9a66",green11:"#218358",green12:"#193b2d"},greenA:{greenA1:"#00c04004",greenA2:"#00a32f0b",greenA3:"#00a43319",greenA4:"#00a83829",greenA5:"#019c393b",greenA6:"#00963c52",greenA7:"#00914071",greenA8:"#00924ba4",greenA9:"#008f4acf",greenA10:"#008647d4",greenA11:"#00713fde",greenA12:"#002616e6"},greenDark:{green1:"#0e1512",green2:"#121b17",green3:"#132d21",green4:"#113b29",green5:"#174933",green6:"#20573e",green7:"#28684a",green8:"#2f7c57",green9:"#30a46c",green10:"#33b074",green11:"#3dd68c",green12:"#b1f1cb"},greenDarkA:{greenA1:"#00de4505",greenA2:"#29f99d0b",greenA3:"#22ff991e",greenA4:"#11ff992d",greenA5:"#2bffa23c",greenA6:"#44ffaa4b",greenA7:"#50fdac5e",greenA8:"#54ffad73",greenA9:"#44ffa49e",greenA10:"#43fea4ab",greenA11:"#46fea5d4",greenA12:"#bbffd7f0"},indigo:{indigo1:"#fdfdfe",indigo2:"#f7f9ff",indigo3:"#edf2fe",indigo4:"#e1e9ff",indigo5:"#d2deff",indigo6:"#c1d0ff",indigo7:"#abbdf9",indigo8:"#8da4ef",indigo9:"#3e63dd",indigo10:"#3358d4",indigo11:"#3a5bc7",indigo12:"#1f2d5c"},indigoA:{indigoA1:"#00008002",indigoA2:"#0040ff08",indigoA3:"#0047f112",indigoA4:"#0044ff1e",indigoA5:"#0044ff2d",indigoA6:"#003eff3e",indigoA7:"#0037ed54",indigoA8:"#0034dc72",indigoA9:"#0031d2c1",indigoA10:"#002ec9cc",indigoA11:"#002bb7c5",indigoA12:"#001046e0"},indigoDark:{indigo1:"#11131f",indigo2:"#141726",indigo3:"#182449",indigo4:"#1d2e62",indigo5:"#253974",indigo6:"#304384",indigo7:"#3a4f97",indigo8:"#435db1",indigo9:"#3e63dd",indigo10:"#5472e4",indigo11:"#9eb1ff",indigo12:"#d6e1ff"},indigoDarkA:{indigoA1:"#1133ff0f",indigoA2:"#3354fa17",indigoA3:"#2f62ff3c",indigoA4:"#3566ff57",indigoA5:"#4171fd6b",indigoA6:"#5178fd7c",indigoA7:"#5a7fff90",indigoA8:"#5b81feac",indigoA9:"#4671ffdb",indigoA10:"#5c7efee3",indigoA11:"#9eb1ff",indigoA12:"#d6e1ff"},iris:{iris1:"#fdfdff",iris2:"#f8f8ff",iris3:"#f0f1fe",iris4:"#e6e7ff",iris5:"#dadcff",iris6:"#cbcdff",iris7:"#b8baf8",iris8:"#9b9ef0",iris9:"#5b5bd6",iris10:"#5151cd",iris11:"#5753c6",iris12:"#272962"},irisA:{irisA1:"#0000ff02",irisA2:"#0000ff07",irisA3:"#0011ee0f",irisA4:"#000bff19",irisA5:"#000eff25",irisA6:"#000aff34",irisA7:"#0008e647",irisA8:"#0008d964",irisA9:"#0000c0a4",irisA10:"#0000b6ae",irisA11:"#0600abac",irisA12:"#000246d8"},irisDark:{iris1:"#13131e",iris2:"#171625",iris3:"#202248",iris4:"#262a65",iris5:"#303374",iris6:"#3d3e82",iris7:"#4a4a95",iris8:"#5958b1",iris9:"#5b5bd6",iris10:"#6e6ade",iris11:"#b1a9ff",iris12:"#e0dffe"},irisDarkA:{irisA1:"#3636fe0e",irisA2:"#564bf916",irisA3:"#525bff3b",irisA4:"#4d58ff5a",irisA5:"#5b62fd6b",irisA6:"#6d6ffd7a",irisA7:"#7777fe8e",irisA8:"#7b7afeac",irisA9:"#6a6afed4",irisA10:"#7d79ffdc",irisA11:"#b1a9ff",irisA12:"#e1e0fffe"},jade:{jade1:"#fbfefd",jade2:"#f4fbf7",jade3:"#e6f7ed",jade4:"#d6f1e3",jade5:"#c3e9d7",jade6:"#acdec8",jade7:"#8bceb6",jade8:"#56ba9f",jade9:"#29a383",jade10:"#26997b",jade11:"#208368",jade12:"#1d3b31"},jadeA:{jadeA1:"#00c08004",jadeA2:"#00a3460b",jadeA3:"#00ae4819",jadeA4:"#00a85129",jadeA5:"#00a2553c",jadeA6:"#009a5753",jadeA7:"#00945f74",jadeA8:"#00976ea9",jadeA9:"#00916bd6",jadeA10:"#008764d9",jadeA11:"#007152df",jadeA12:"#002217e2"},jadeDark:{jade1:"#0d1512",jade2:"#121c18",jade3:"#0f2e22",jade4:"#0b3b2c",jade5:"#114837",jade6:"#1b5745",jade7:"#246854",jade8:"#2a7e68",jade9:"#29a383",jade10:"#27b08b",jade11:"#1fd8a4",jade12:"#adf0d4"},jadeDarkA:{jadeA1:"#00de4505",jadeA2:"#27fba60c",jadeA3:"#02f99920",jadeA4:"#00ffaa2d",jadeA5:"#11ffb63b",jadeA6:"#34ffc24b",jadeA7:"#45fdc75e",jadeA8:"#48ffcf75",jadeA9:"#38feca9d",jadeA10:"#31fec7ab",jadeA11:"#21fec0d6",jadeA12:"#b8ffe1ef"},lime:{lime1:"#fcfdfa",lime2:"#f8faf3",lime3:"#eef6d6",lime4:"#e2f0bd",lime5:"#d3e7a6",lime6:"#c2da91",lime7:"#abc978",lime8:"#8db654",lime9:"#bdee63",lime10:"#b0e64c",lime11:"#5c7c2f",lime12:"#37401c"},limeA:{limeA1:"#66990005",limeA2:"#6b95000c",limeA3:"#96c80029",limeA4:"#8fc60042",limeA5:"#81bb0059",limeA6:"#72aa006e",limeA7:"#61990087",limeA8:"#559200ab",limeA9:"#93e4009c",limeA10:"#8fdc00b3",limeA11:"#375f00d0",limeA12:"#1e2900e3"},limeDark:{lime1:"#11130c",lime2:"#151a10",lime3:"#1f2917",lime4:"#29371d",lime5:"#334423",lime6:"#3d522a",lime7:"#496231",lime8:"#577538",lime9:"#bdee63",lime10:"#d4ff70",lime11:"#bde56c",lime12:"#e3f7ba"},limeDarkA:{limeA1:"#11bb0003",limeA2:"#78f7000a",limeA3:"#9bfd4c1a",limeA4:"#a7fe5c29",limeA5:"#affe6537",limeA6:"#b2fe6d46",limeA7:"#b6ff6f57",limeA8:"#b6fd6d6c",limeA9:"#caff69ed",limeA10:"#d4ff70",limeA11:"#d1fe77e4",limeA12:"#e9febff7"},mauve:{mauve1:"#fdfcfd",mauve2:"#faf9fb",mauve3:"#f2eff3",mauve4:"#eae7ec",mauve5:"#e3dfe6",mauve6:"#dbd8e0",mauve7:"#d0cdd7",mauve8:"#bcbac7",mauve9:"#8e8c99",mauve10:"#84828e",mauve11:"#65636d",mauve12:"#211f26"},mauveA:{mauveA1:"#55005503",mauveA2:"#2b005506",mauveA3:"#30004010",mauveA4:"#20003618",mauveA5:"#20003820",mauveA6:"#14003527",mauveA7:"#10003332",mauveA8:"#08003145",mauveA9:"#05001d73",mauveA10:"#0500197d",mauveA11:"#0400119c",mauveA12:"#020008e0"},mauveDark:{mauve1:"#121113",mauve2:"#1a191b",mauve3:"#232225",mauve4:"#2b292d",mauve5:"#323035",mauve6:"#3c393f",mauve7:"#49474e",mauve8:"#625f69",mauve9:"#6f6d78",mauve10:"#7c7a85",mauve11:"#b5b2bc",mauve12:"#eeeef0"},mauveDarkA:{mauveA1:"#00000000",mauveA2:"#f5f4f609",mauveA3:"#ebeaf814",mauveA4:"#eee5f81d",mauveA5:"#efe6fe25",mauveA6:"#f1e6fd30",mauveA7:"#eee9ff40",mauveA8:"#eee7ff5d",mauveA9:"#eae6fd6e",mauveA10:"#ece9fd7c",mauveA11:"#f5f1ffb7",mauveA12:"#fdfdffef"},mint:{mint1:"#f9fefd",mint2:"#f2fbf9",mint3:"#ddf9f2",mint4:"#c8f4e9",mint5:"#b3ecde",mint6:"#9ce0d0",mint7:"#7ecfbd",mint8:"#4cbba5",mint9:"#86ead4",mint10:"#7de0cb",mint11:"#027864",mint12:"#16433c"},mintA:{mintA1:"#00d5aa06",mintA2:"#00b18a0d",mintA3:"#00d29e22",mintA4:"#00cc9937",mintA5:"#00c0914c",mintA6:"#00b08663",mintA7:"#00a17d81",mintA8:"#009e7fb3",mintA9:"#00d3a579",mintA10:"#00c39982",mintA11:"#007763fd",mintA12:"#00312ae9"},mintDark:{mint1:"#0e1515",mint2:"#0f1b1b",mint3:"#092c2b",mint4:"#003a38",mint5:"#004744",mint6:"#105650",mint7:"#1e685f",mint8:"#277f70",mint9:"#86ead4",mint10:"#a8f5e5",mint11:"#58d5ba",mint12:"#c4f5e1"},mintDarkA:{mintA1:"#00dede05",mintA2:"#00f9f90b",mintA3:"#00fff61d",mintA4:"#00fff42c",mintA5:"#00fff23a",mintA6:"#0effeb4a",mintA7:"#34fde55e",mintA8:"#41ffdf76",mintA9:"#92ffe7e9",mintA10:"#aefeedf5",mintA11:"#67ffded2",mintA12:"#cbfee9f5"},olive:{olive1:"#fcfdfc",olive2:"#f8faf8",olive3:"#eff1ef",olive4:"#e7e9e7",olive5:"#dfe2df",olive6:"#d7dad7",olive7:"#cccfcc",olive8:"#b9bcb8",olive9:"#898e87",olive10:"#7f847d",olive11:"#60655f",olive12:"#1d211c"},oliveA:{oliveA1:"#00550003",oliveA2:"#00490007",oliveA3:"#00200010",oliveA4:"#00160018",oliveA5:"#00180020",oliveA6:"#00140028",oliveA7:"#000f0033",oliveA8:"#040f0047",oliveA9:"#050f0078",oliveA10:"#040e0082",oliveA11:"#020a00a0",oliveA12:"#010600e3"},oliveDark:{olive1:"#111210",olive2:"#181917",olive3:"#212220",olive4:"#282a27",olive5:"#2f312e",olive6:"#383a36",olive7:"#454843",olive8:"#5c625b",olive9:"#687066",olive10:"#767d74",olive11:"#afb5ad",olive12:"#eceeec"},oliveDarkA:{oliveA1:"#00000000",oliveA2:"#f1f2f008",oliveA3:"#f4f5f312",oliveA4:"#f3fef21a",oliveA5:"#f2fbf122",oliveA6:"#f4faed2c",oliveA7:"#f2fced3b",oliveA8:"#edfdeb57",oliveA9:"#ebfde766",oliveA10:"#f0fdec74",oliveA11:"#f6fef4b0",oliveA12:"#fdfffded"},orange:{orange1:"#fefcfb",orange2:"#fff7ed",orange3:"#ffefd6",orange4:"#ffdfb5",orange5:"#ffd19a",orange6:"#ffc182",orange7:"#f5ae73",orange8:"#ec9455",orange9:"#f76b15",orange10:"#ef5f00",orange11:"#cc4e00",orange12:"#582d1d"},orangeA:{orangeA1:"#c0400004",orangeA2:"#ff8e0012",orangeA3:"#ff9c0029",orangeA4:"#ff91014a",orangeA5:"#ff8b0065",orangeA6:"#ff81007d",orangeA7:"#ed6c008c",orangeA8:"#e35f00aa",orangeA9:"#f65e00ea",orangeA10:"#ef5f00",orangeA11:"#cc4e00",orangeA12:"#431200e2"},orangeDark:{orange1:"#17120e",orange2:"#1e160f",orange3:"#331e0b",orange4:"#462100",orange5:"#562800",orange6:"#66350c",orange7:"#7e451d",orange8:"#a35829",orange9:"#f76b15",orange10:"#ff801f",orange11:"#ffa057",orange12:"#ffe0c2"},orangeDarkA:{orangeA1:"#ec360007",orangeA2:"#fe6d000e",orangeA3:"#fb6a0025",orangeA4:"#ff590039",orangeA5:"#ff61004a",orangeA6:"#fd75045c",orangeA7:"#ff832c75",orangeA8:"#fe84389d",orangeA9:"#fe6d15f7",orangeA10:"#ff801f",orangeA11:"#ffa057",orangeA12:"#ffe0c2"},pink:{pink1:"#fffcfe",pink2:"#fef7fb",pink3:"#fee9f5",pink4:"#fbdcef",pink5:"#f6cee7",pink6:"#efbfdd",pink7:"#e7acd0",pink8:"#dd93c2",pink9:"#d6409f",pink10:"#cf3897",pink11:"#c2298a",pink12:"#651249"},pinkA:{pinkA1:"#ff00aa03",pinkA2:"#e0008008",pinkA3:"#f4008c16",pinkA4:"#e2008b23",pinkA5:"#d1008331",pinkA6:"#c0007840",pinkA7:"#b6006f53",pinkA8:"#af006f6c",pinkA9:"#c8007fbf",pinkA10:"#c2007ac7",pinkA11:"#b60074d6",pinkA12:"#59003bed"},pinkDark:{pink1:"#191117",pink2:"#21121d",pink3:"#37172f",pink4:"#4b143d",pink5:"#591c47",pink6:"#692955",pink7:"#833869",pink8:"#a84885",pink9:"#d6409f",pink10:"#de51a8",pink11:"#ff8dcc",pink12:"#fdd1ea"},pinkDarkA:{pinkA1:"#f412bc09",pinkA2:"#f420bb12",pinkA3:"#fe37cc29",pinkA4:"#fc1ec43f",pinkA5:"#fd35c24e",pinkA6:"#fd51c75f",pinkA7:"#fd62c87b",pinkA8:"#ff68c8a2",pinkA9:"#fe49bcd4",pinkA10:"#ff5cc0dc",pinkA11:"#ff8dcc",pinkA12:"#ffd3ecfd"},plum:{plum1:"#fefcff",plum2:"#fdf7fd",plum3:"#fbebfb",plum4:"#f7def8",plum5:"#f2d1f3",plum6:"#e9c2ec",plum7:"#deade3",plum8:"#cf91d8",plum9:"#ab4aba",plum10:"#a144af",plum11:"#953ea3",plum12:"#53195d"},plumA:{plumA1:"#aa00ff03",plumA2:"#c000c008",plumA3:"#cc00cc14",plumA4:"#c200c921",plumA5:"#b700bd2e",plumA6:"#a400b03d",plumA7:"#9900a852",plumA8:"#9000a56e",plumA9:"#89009eb5",plumA10:"#7f0092bb",plumA11:"#730086c1",plumA12:"#40004be6"},plumDark:{plum1:"#181118",plum2:"#201320",plum3:"#351a35",plum4:"#451d47",plum5:"#512454",plum6:"#5e3061",plum7:"#734079",plum8:"#92549c",plum9:"#ab4aba",plum10:"#b658c4",plum11:"#e796f3",plum12:"#f4d4f4"},plumDarkA:{plumA1:"#f112f108",plumA2:"#f22ff211",plumA3:"#fd4cfd27",plumA4:"#f646ff3a",plumA5:"#f455ff48",plumA6:"#f66dff56",plumA7:"#f07cfd70",plumA8:"#ee84ff95",plumA9:"#e961feb6",plumA10:"#ed70ffc0",plumA11:"#f19cfef3",plumA12:"#feddfef4"},purple:{purple1:"#fefcfe",purple2:"#fbf7fe",purple3:"#f7edfe",purple4:"#f2e2fc",purple5:"#ead5f9",purple6:"#e0c4f4",purple7:"#d1afec",purple8:"#be93e4",purple9:"#8e4ec6",purple10:"#8347b9",purple11:"#8145b5",purple12:"#402060"},purpleA:{purpleA1:"#aa00aa03",purpleA2:"#8000e008",purpleA3:"#8e00f112",purpleA4:"#8d00e51d",purpleA5:"#8000db2a",purpleA6:"#7a01d03b",purpleA7:"#6d00c350",purpleA8:"#6600c06c",purpleA9:"#5c00adb1",purpleA10:"#53009eb8",purpleA11:"#52009aba",purpleA12:"#250049df"},purpleDark:{purple1:"#18111b",purple2:"#1e1523",purple3:"#301c3b",purple4:"#3d224e",purple5:"#48295c",purple6:"#54346b",purple7:"#664282",purple8:"#8457aa",purple9:"#8e4ec6",purple10:"#9a5cd0",purple11:"#d19dff",purple12:"#ecd9fa"},purpleDarkA:{purpleA1:"#b412f90b",purpleA2:"#b744f714",purpleA3:"#c150ff2d",purpleA4:"#bb53fd42",purpleA5:"#be5cfd51",purpleA6:"#c16dfd61",purpleA7:"#c378fd7a",purpleA8:"#c47effa4",purpleA9:"#b661ffc2",purpleA10:"#bc6fffcd",purpleA11:"#d19dff",purpleA12:"#f1ddfffa"},red:{red1:"#fffcfc",red2:"#fff7f7",red3:"#feebec",red4:"#ffdbdc",red5:"#ffcdce",red6:"#fdbdbe",red7:"#f4a9aa",red8:"#eb8e90",red9:"#e5484d",red10:"#dc3e42",red11:"#ce2c31",red12:"#641723"},redA:{redA1:"#ff000003",redA2:"#ff000008",redA3:"#f3000d14",redA4:"#ff000824",redA5:"#ff000632",redA6:"#f8000442",redA7:"#df000356",redA8:"#d2000571",redA9:"#db0007b7",redA10:"#d10005c1",redA11:"#c40006d3",redA12:"#55000de8"},redDark:{red1:"#191111",red2:"#201314",red3:"#3b1219",red4:"#500f1c",red5:"#611623",red6:"#72232d",red7:"#8c333a",red8:"#b54548",red9:"#e5484d",red10:"#ec5d5e",red11:"#ff9592",red12:"#ffd1d9"},redDarkA:{redA1:"#f4121209",redA2:"#f22f3e11",redA3:"#ff173f2d",redA4:"#fe0a3b44",redA5:"#ff204756",redA6:"#ff3e5668",redA7:"#ff536184",redA8:"#ff5d61b0",redA9:"#fe4e54e4",redA10:"#ff6465eb",redA11:"#ff9592",redA12:"#ffd1d9"},ruby:{ruby1:"#fffcfd",ruby2:"#fff7f8",ruby3:"#feeaed",ruby4:"#ffdce1",ruby5:"#ffced6",ruby6:"#f8bfc8",ruby7:"#efacb8",ruby8:"#e592a3",ruby9:"#e54666",ruby10:"#dc3b5d",ruby11:"#ca244d",ruby12:"#64172b"},rubyA:{rubyA1:"#ff005503",rubyA2:"#ff002008",rubyA3:"#f3002515",rubyA4:"#ff002523",rubyA5:"#ff002a31",rubyA6:"#e4002440",rubyA7:"#ce002553",rubyA8:"#c300286d",rubyA9:"#db002cb9",rubyA10:"#d2002cc4",rubyA11:"#c10030db",rubyA12:"#550016e8"},rubyDark:{ruby1:"#191113",ruby2:"#1e1517",ruby3:"#3a141e",ruby4:"#4e1325",ruby5:"#5e1a2e",ruby6:"#6f2539",ruby7:"#883447",ruby8:"#b3445a",ruby9:"#e54666",ruby10:"#ec5a72",ruby11:"#ff949d",ruby12:"#fed2e1"},rubyDarkA:{rubyA1:"#f4124a09",rubyA2:"#fe5a7f0e",rubyA3:"#ff235d2c",rubyA4:"#fd195e42",rubyA5:"#fe2d6b53",rubyA6:"#ff447665",rubyA7:"#ff577d80",rubyA8:"#ff5c7cae",rubyA9:"#fe4c70e4",rubyA10:"#ff617beb",rubyA11:"#ff949d",rubyA12:"#ffd3e2fe"},sage:{sage1:"#fbfdfc",sage2:"#f7f9f8",sage3:"#eef1f0",sage4:"#e6e9e8",sage5:"#dfe2e0",sage6:"#d7dad9",sage7:"#cbcfcd",sage8:"#b8bcba",sage9:"#868e8b",sage10:"#7c8481",sage11:"#5f6563",sage12:"#1a211e"},sageA:{sageA1:"#00804004",sageA2:"#00402008",sageA3:"#002d1e11",sageA4:"#001f1519",sageA5:"#00180820",sageA6:"#00140d28",sageA7:"#00140a34",sageA8:"#000f0847",sageA9:"#00110b79",sageA10:"#00100a83",sageA11:"#000a07a0",sageA12:"#000805e5"},sageDark:{sage1:"#101211",sage2:"#171918",sage3:"#202221",sage4:"#272a29",sage5:"#2e3130",sage6:"#373b39",sage7:"#444947",sage8:"#5b625f",sage9:"#63706b",sage10:"#717d79",sage11:"#adb5b2",sage12:"#eceeed"},sageDarkA:{sageA1:"#00000000",sageA2:"#f0f2f108",sageA3:"#f3f5f412",sageA4:"#f2fefd1a",sageA5:"#f1fbfa22",sageA6:"#edfbf42d",sageA7:"#edfcf73c",sageA8:"#ebfdf657",sageA9:"#dffdf266",sageA10:"#e5fdf674",sageA11:"#f4fefbb0",sageA12:"#fdfffeed"},sand:{sand1:"#fdfdfc",sand2:"#f9f9f8",sand3:"#f1f0ef",sand4:"#e9e8e6",sand5:"#e2e1de",sand6:"#dad9d6",sand7:"#cfceca",sand8:"#bcbbb5",sand9:"#8d8d86",sand10:"#82827c",sand11:"#63635e",sand12:"#21201c"},sandA:{sandA1:"#55550003",sandA2:"#25250007",sandA3:"#20100010",sandA4:"#1f150019",sandA5:"#1f180021",sandA6:"#19130029",sandA7:"#19140035",sandA8:"#1915014a",sandA9:"#0f0f0079",sandA10:"#0c0c0083",sandA11:"#080800a1",sandA12:"#060500e3"},sandDark:{sand1:"#111110",sand2:"#191918",sand3:"#222221",sand4:"#2a2a28",sand5:"#31312e",sand6:"#3b3a37",sand7:"#494844",sand8:"#62605b",sand9:"#6f6d66",sand10:"#7c7b74",sand11:"#b5b3ad",sand12:"#eeeeec"},sandDarkA:{sandA1:"#00000000",sandA2:"#f4f4f309",sandA3:"#f6f6f513",sandA4:"#fefef31b",sandA5:"#fbfbeb23",sandA6:"#fffaed2d",sandA7:"#fffbed3c",sandA8:"#fff9eb57",sandA9:"#fffae965",sandA10:"#fffdee73",sandA11:"#fffcf4b0",sandA12:"#fffffded"},sky:{sky1:"#f9feff",sky2:"#f1fafd",sky3:"#e1f6fd",sky4:"#d1f0fa",sky5:"#bee7f5",sky6:"#a9daed",sky7:"#8dcae3",sky8:"#60b3d7",sky9:"#7ce2fe",sky10:"#74daf8",sky11:"#00749e",sky12:"#1d3e56"},skyA:{skyA1:"#00d5ff06",skyA2:"#00a4db0e",skyA3:"#00b3ee1e",skyA4:"#00ace42e",skyA5:"#00a1d841",skyA6:"#0092ca56",skyA7:"#0089c172",skyA8:"#0085bf9f",skyA9:"#00c7fe83",skyA10:"#00bcf38b",skyA11:"#00749e",skyA12:"#002540e2"},skyDark:{sky1:"#0d141f",sky2:"#111a27",sky3:"#112840",sky4:"#113555",sky5:"#154467",sky6:"#1b537b",sky7:"#1f6692",sky8:"#197cae",sky9:"#7ce2fe",sky10:"#a8eeff",sky11:"#75c7f0",sky12:"#c2f3ff"},skyDarkA:{skyA1:"#0044ff0f",skyA2:"#1171fb18",skyA3:"#1184fc33",skyA4:"#128fff49",skyA5:"#1c9dfd5d",skyA6:"#28a5ff72",skyA7:"#2badfe8b",skyA8:"#1db2fea9",skyA9:"#7ce3fffe",skyA10:"#a8eeff",skyA11:"#7cd3ffef",skyA12:"#c2f3ff"},slate:{slate1:"#fcfcfd",slate2:"#f9f9fb",slate3:"#f0f0f3",slate4:"#e8e8ec",slate5:"#e0e1e6",slate6:"#d9d9e0",slate7:"#cdced6",slate8:"#b9bbc6",slate9:"#8b8d98",slate10:"#80838d",slate11:"#60646c",slate12:"#1c2024"},slateA:{slateA1:"#00005503",slateA2:"#00005506",slateA3:"#0000330f",slateA4:"#00002d17",slateA5:"#0009321f",slateA6:"#00002f26",slateA7:"#00062e32",slateA8:"#00083046",slateA9:"#00051d74",slateA10:"#00071b7f",slateA11:"#0007149f",slateA12:"#000509e3"},slateDark:{slate1:"#111113",slate2:"#18191b",slate3:"#212225",slate4:"#272a2d",slate5:"#2e3135",slate6:"#363a3f",slate7:"#43484e",slate8:"#5a6169",slate9:"#696e77",slate10:"#777b84",slate11:"#b0b4ba",slate12:"#edeef0"},slateDarkA:{slateA1:"#00000000",slateA2:"#d8f4f609",slateA3:"#ddeaf814",slateA4:"#d3edf81d",slateA5:"#d9edfe25",slateA6:"#d6ebfd30",slateA7:"#d9edff40",slateA8:"#d9edff5d",slateA9:"#dfebfd6d",slateA10:"#e5edfd7b",slateA11:"#f1f7feb5",slateA12:"#fcfdffef"},teal:{teal1:"#fafefd",teal2:"#f3fbf9",teal3:"#e0f8f3",teal4:"#ccf3ea",teal5:"#b8eae0",teal6:"#a1ded2",teal7:"#83cdc1",teal8:"#53b9ab",teal9:"#12a594",teal10:"#0d9b8a",teal11:"#008573",teal12:"#0d3d38"},tealA:{tealA1:"#00cc9905",tealA2:"#00aa800c",tealA3:"#00c69d1f",tealA4:"#00c39633",tealA5:"#00b49047",tealA6:"#00a6855e",tealA7:"#0099807c",tealA8:"#009783ac",tealA9:"#009e8ced",tealA10:"#009684f2",tealA11:"#008573",tealA12:"#00332df2"},tealDark:{teal1:"#0d1514",teal2:"#111c1b",teal3:"#0d2d2a",teal4:"#023b37",teal5:"#084843",teal6:"#145750",teal7:"#1c6961",teal8:"#207e73",teal9:"#12a594",teal10:"#0eb39e",teal11:"#0bd8b6",teal12:"#adf0dd"},tealDarkA:{tealA1:"#00deab05",tealA2:"#12fbe60c",tealA3:"#00ffe61e",tealA4:"#00ffe92d",tealA5:"#00ffea3b",tealA6:"#1cffe84b",tealA7:"#2efde85f",tealA8:"#32ffe775",tealA9:"#13ffe49f",tealA10:"#0dffe0ae",tealA11:"#0afed5d6",tealA12:"#b8ffebef"},tomato:{tomato1:"#fffcfc",tomato2:"#fff8f7",tomato3:"#feebe7",tomato4:"#ffdcd3",tomato5:"#ffcdc2",tomato6:"#fdbdaf",tomato7:"#f5a898",tomato8:"#ec8e7b",tomato9:"#e54d2e",tomato10:"#dd4425",tomato11:"#d13415",tomato12:"#5c271f"},tomatoA:{tomatoA1:"#ff000003",tomatoA2:"#ff200008",tomatoA3:"#f52b0018",tomatoA4:"#ff35002c",tomatoA5:"#ff2e003d",tomatoA6:"#f92d0050",tomatoA7:"#e7280067",tomatoA8:"#db250084",tomatoA9:"#df2600d1",tomatoA10:"#d72400da",tomatoA11:"#cd2200ea",tomatoA12:"#460900e0"},tomatoDark:{tomato1:"#181111",tomato2:"#1f1513",tomato3:"#391714",tomato4:"#4e1511",tomato5:"#5e1c16",tomato6:"#6e2920",tomato7:"#853a2d",tomato8:"#ac4d39",tomato9:"#e54d2e",tomato10:"#ec6142",tomato11:"#ff977d",tomato12:"#fbd3cb"},tomatoDarkA:{tomatoA1:"#f1121208",tomatoA2:"#ff55330f",tomatoA3:"#ff35232b",tomatoA4:"#fd201142",tomatoA5:"#fe332153",tomatoA6:"#ff4f3864",tomatoA7:"#fd644a7d",tomatoA8:"#fe6d4ea7",tomatoA9:"#fe5431e4",tomatoA10:"#ff6847eb",tomatoA11:"#ff977d",tomatoA12:"#ffd6cefb"},violet:{violet1:"#fdfcfe",violet2:"#faf8ff",violet3:"#f4f0fe",violet4:"#ebe4ff",violet5:"#e1d9ff",violet6:"#d4cafe",violet7:"#c2b5f5",violet8:"#aa99ec",violet9:"#6e56cf",violet10:"#654dc4",violet11:"#6550b9",violet12:"#2f265f"},violetA:{violetA1:"#5500aa03",violetA2:"#4900ff07",violetA3:"#4400ee0f",violetA4:"#4300ff1b",violetA5:"#3600ff26",violetA6:"#3100fb35",violetA7:"#2d01dd4a",violetA8:"#2b00d066",violetA9:"#2400b7a9",violetA10:"#2300abb2",violetA11:"#1f0099af",violetA12:"#0b0043d9"},violetDark:{violet1:"#14121f",violet2:"#1b1525",violet3:"#291f43",violet4:"#33255b",violet5:"#3c2e69",violet6:"#473876",violet7:"#56468b",violet8:"#6958ad",violet9:"#6e56cf",violet10:"#7d66d9",violet11:"#baa7ff",violet12:"#e2ddfe"},violetDarkA:{violetA1:"#4422ff0f",violetA2:"#853ff916",violetA3:"#8354fe36",violetA4:"#7d51fd50",violetA5:"#845ffd5f",violetA6:"#8f6cfd6d",violetA7:"#9879ff83",violetA8:"#977dfea8",violetA9:"#8668ffcc",violetA10:"#9176fed7",violetA11:"#baa7ff",violetA12:"#e3defffe"},yellow:{yellow1:"#fdfdf9",yellow2:"#fefce9",yellow3:"#fffab8",yellow4:"#fff394",yellow5:"#ffe770",yellow6:"#f3d768",yellow7:"#e4c767",yellow8:"#d5ae39",yellow9:"#ffe629",yellow10:"#ffdc00",yellow11:"#9e6c00",yellow12:"#473b1f"},yellowA:{yellowA1:"#aaaa0006",yellowA2:"#f4dd0016",yellowA3:"#ffee0047",yellowA4:"#ffe3016b",yellowA5:"#ffd5008f",yellowA6:"#ebbc0097",yellowA7:"#d2a10098",yellowA8:"#c99700c6",yellowA9:"#ffe100d6",yellowA10:"#ffdc00",yellowA11:"#9e6c00",yellowA12:"#2e2000e0"},yellowDark:{yellow1:"#14120b",yellow2:"#1b180f",yellow3:"#2d2305",yellow4:"#362b00",yellow5:"#433500",yellow6:"#524202",yellow7:"#665417",yellow8:"#836a21",yellow9:"#ffe629",yellow10:"#ffff57",yellow11:"#f5e147",yellow12:"#f6eeb4"},yellowDarkA:{yellowA1:"#d1510004",yellowA2:"#f9b4000b",yellowA3:"#ffaa001e",yellowA4:"#fdb70028",yellowA5:"#febb0036",yellowA6:"#fec40046",yellowA7:"#fdcb225c",yellowA8:"#fdca327b",yellowA9:"#ffe629",yellowA10:"#ffff57",yellowA11:"#fee949f5",yellowA12:"#fef6baf6"}},F$={dark:"dark",light:"light"},O$=Object.values(F$),$$={gray:"gray",mauve:"mauve",slate:"slate",sage:"sage",olive:"olive",sand:"sand"},E$=Object.values($$),U$={gray:"gray",gold:"gold",bronze:"bronze",brown:"brown",yellow:"yellow",amber:"amber",orange:"orange",tomato:"tomato",red:"red",ruby:"ruby",crimson:"crimson",pink:"pink",plum:"plum",purple:"purple",violet:"violet",iris:"iris",indigo:"indigo",blue:"blue",cyan:"cyan",teal:"teal",jade:"jade",green:"green",grass:"grass",lime:"lime",mint:"mint",sky:"sky"},P$=Object.values(U$);const A$=Object.keys(J$);const B$=({grayColor:e,accentColor:t,appearance:n})=>function(e,t){return A$.reduce(((n,i)=>{const o=At(J$,i),[l,r,a,s]=o.split("-");return"override"===l?(SS(n,i,r),n):"custom"===l?(SS(n,i,At(j$,`${r}${t===F$.dark?"Dark":""}${a}.${r}${a}${s}`)),n):l.startsWith("gray")||l.startsWith("accent")?(SS(n,i,At(e,l,re)(r)),n):n}),{})}(function({appearance:e,grayColor:t,accentColor:n}){const i=e===F$.dark?"Dark":"",o=j$[`${t}${i}`],l=j$[`${n}${i}`],r=j$[`${t}${i}A`],a=j$[`${n}${i}A`];return{gray:e=>At(o,`${t}${e}`)??"",grayA:e=>At(r,`${t}A${e}`)??"",accent:e=>At(l,`${n}${e}`)??"",accentA:e=>At(a,`${n}A${e}`)??""}}({appearance:n,grayColor:e,accentColor:t}),n),Q$=Qh`
  position: absolute;
  top: 46px;
  left: 16px;
  padding: 24px;
  background-color: var(--context-menu-background);
  border: 1px solid var(--context-menu-border);
  border-radius: 6px;
  width: 360px;
`,D$=Qh`
  color: var(--active);
  ${TL};
  margin-bottom: 24px;
`,_$=Qh`
  margin-top: 24px;
  color: var(--active);
  ${ML};
`,q$=Qh`
  margin-top: 12px;
  display: grid;
  grid-template-columns: repeat(10, minmax(0, 1fr));
  gap: 8px;
`,eE=Qh`
  border-radius: 9999px;
  width: 24px;
  height: 24px;
  cursor: pointer;
  border: 1px solid transparent;

  &.selected {
    outline: solid 2px var(--gray-color-12);
  }
`,tE=Qh`
  margin-top: 12px;
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 8px;
`,nE=Qh`
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  border: 1px solid var(--context-menu-border);
  border-radius: 6px;
  height: 32px;
  ${zL};

  &:hover {
    background-color: var(--column-hover);
  }

  &.selected {
    border-color: var(--gray-color-12);
  }
`,iE=Qh`
  width: 4px;
  height: 100%;
`,oE=(e,t)=>{const n=yL(t),{addUnsubscribe:i}=WL(),o=()=>{const{store:e}=n.value;e.dispatch(ag({[_w]:!1}))},l=()=>{const{store:e}=n.value,{editor:{openMap:t}}=e.state,i=!t[_w];e.dispatch(ag({[_w]:i})),i&&e.dispatch(ag({[Qw]:!1}))},r=e=>{const{emitter:t}=n.value;t.emit(LR({appearance:e}))};return Ts((()=>{const{shortcut$:e,emitter:t}=n.value;i(e.pipe(ub((({type:e})=>e===nL.stop))).subscribe(o),t.on({openThemeBuilder:l}))})),()=>{const{store:t}=n.value,{editor:{openMap:i}}=t.state;if(!i[_w])return null;const{theme:o}=e;return Ch`
      <div class=${["theme-builder",Q$]}>
        <div class=${D$}>Theme</div>
        <div class=${_$}>Accent color</div>
        <div class=${q$}>
          ${P$.map((e=>Ch`
              <span
                class=${[eE,{selected:e===o.accentColor}]}
                style=${{"background-color":At(j$,[e,`${e}9`])}}
                title=${e}
                @click=${()=>(e=>{const{emitter:t}=n.value;t.emit(LR({accentColor:e}))})(e)}
              ></span>
            `))}
        </div>
        <div class=${_$}>Gray color</div>
        <div class=${q$}>
          ${E$.map((e=>Ch`
              <span
                class=${[eE,{selected:e===o.grayColor}]}
                style=${{"background-color":At(j$,[e,`${e}9`])}}
                title=${e}
                @click=${()=>(e=>{const{emitter:t}=n.value;t.emit(LR({grayColor:e}))})(e)}
              ></span>
            `))}
        </div>
        <div class=${_$}>Appearance</div>
        <div class=${tE}>
          <div
            class=${[nE,{selected:o.appearance===F$.light}]}
            @click=${()=>r(F$.light)}
          >
            <${JY} prefix="mdi" name="white-balance-sunny" />
            <span class=${iE}></span>
            <span>Light</span>
          </div>
          <div
            class=${[nE,,{selected:o.appearance===F$.dark}]}
            @click=${()=>r(F$.dark)}
          >
            <${JY} prefix="mdi" name="weather-might" />
            <span class=${iE}></span>
            <span>Dark</span>
          </div>
        </div>
      </div>
    `}};const lE=Qh`
  position: absolute;
  z-index: 2147483647;
  bottom: 0;
  right: 0;
  display: flex;
  flex-direction: column;
  max-width: 390px;
  margin: 25px;

  &[data-pointer-none] {
    pointer-events: none;
  }

  .toast-move {
    transition: transform 0.3s;
  }

  .toast-container {
    display: flex;
    margin-top: 10px;
    justify-content: flex-end;
    animation: toastShowMove 0.3s ease;

    &[data-animation-one] {
      animation: none;
    }
  }

  .toast-container:first-child {
    margin-top: 0;
  }

  @keyframes toastShowMove {
    0% {
      transform: translateY(30px);
      opacity: 0;
    }
    100% {
      transform: translateY(0);
      opacity: 1;
    }
  }
`,rE=(e,t)=>{const n=yL(t),i=tp(),{addUnsubscribe:o}=WL(),l=Bs([]),r=new Set;!function(e,t,n){const i=new vw(e,t,n);Ns((()=>i.snapshot())),Ks((()=>i.play()))}(i,".toast-container","toast-move");return Ts((()=>{const{emitter:e}=n.value;o(e.on({openToast:({payload:e})=>{const t=Object.assign({close:zI(5e3)},e,{id:nr()});l.push(t),t.close.finally((()=>(e=>{const t=l.findIndex((t=>t.id===e));-1!==t&&(r.delete(e),l.splice(t,1))})(t.id)))}}))})),()=>Ch`
    <div
      class=${lE}
      ${np(i)}
      ?data-pointer-none=${0===l.length}
    >
      ${ap(l,(e=>e.id),(e=>Ch`
          <div
            class="toast-container"
            ?data-animation-one=${r.has(e.id)}
            @animationend=${()=>(e=>{r.add(e)})(e.id)}
          >
            ${e.message}
          </div>
        `))}
    </div>
  `},aE=Qh`
  display: flex;
  width: 100%;
  height: ${30}px;
  min-height: ${30}px;
  padding: 0 15px;
  align-items: center;
  white-space: nowrap;
  overflow: hidden;
  background-color: var(--toolbar-background);

  & > input {
    margin-right: 15px;
  }
`,sE=Qh`
  width: 10px;
  height: 100%;
`,cE=Qh`
  cursor: pointer;
  padding: 0 5px;
  display: flex;
  align-items: center;
  height: 100%;

  &.active {
    fill: var(--active);
  }
  &:hover {
    fill: var(--active);
  }

  &.undo-redo {
    cursor: not-allowed;
    fill: var(--foreground);
  }

  &.undo-redo.active {
    cursor: pointer;
    fill: var(--active);
  }
`,uE=Qh`
  display: flex;
  align-self: center;
  margin-left: auto;
  white-space: nowrap;
  ${zL};
`,dE=(e,t)=>{const n=yL(t),i=e=>{const t=e.target;if(!t)return;const{store:i}=n.value;i.dispatch(Uv({value:t.value}))},o=e=>{const t=e.target;if(!t)return;const i=Pf(t.value),{store:o}=n.value;t.value=i.toString(),o.dispatch(Pv({width:i,height:i}))},l=e=>{const t=e.target;if(!t)return;const i=Af(Number(Of(t.value))/100),{store:o}=n.value;t.value=Qf(i),o.dispatch(JG(i))},r=e=>{const{store:t}=n.value;t.dispatch(eZ({value:e}))},a=()=>{const{store:e}=n.value;e.undo()},s=()=>{const{store:e}=n.value;e.redo()},c=()=>{const{store:e}=n.value;e.dispatch(ZG())},u=()=>{const{emitter:e}=n.value;e.emit(SR())},d=()=>{const{emitter:e}=n.value;e.emit(RR())},p=()=>{const{store:e}=n.value,{editor:t}=e.state;(t.hasUndo||t.hasRedo)&&e.dispatch(ag({[eN]:!0}))};return()=>{const{store:t}=n.value,{settings:h,editor:m,doc:b}=t.state,f=m.openMap[Bw],y=m.openMap[Qw],g=m.openMap[eN],v=m.openMap[qw],Z=!(h.canvasType!==Fb.ERD||f||y||v||g||e.readonly);return Ch`
      <div
        class=${["toolbar",aE]}
        @mousedown=${c}
        @touchstart=${c}
      >
        <${iF}
          title="database name"
          placeholder="database name"
          width=${150}
          value=${h.databaseName}
          .onInput=${i}
        />
        <${iF}
          title="canvas size"
          placeholder="canvas size"
          width=${45}
          value=${h.width.toString()}
          numberOnly=${!0}
          .onChange=${o}
        />
        <${iF}
          title="zoom level"
          placeholder="zoom level"
          width=${45}
          value=${Qf(h.zoomLevel)}
          numberOnly=${!0}
          .onChange=${l}
        />
        <div class=${sE}></div>
        <div
          class=${[cE,{active:h.canvasType===Fb.ERD}]}
          title="Entity Relationship Diagram"
          @click=${()=>r(Fb.ERD)}
        >
          <${JY} name="diagram-project" size=${16} />
        </div>
        <div
          class=${[cE,{active:h.canvasType===Fb.visualization}]}
          title="Visualization"
          @click=${()=>r(Fb.visualization)}
        >
          <${JY} prefix="mdi" name="chart-scatter-plot" size=${16} />
        </div>
        <div
          class=${[cE,{active:h.canvasType===Fb.schemaSQL}]}
          title="Schema SQL"
          @click=${()=>r(Fb.schemaSQL)}
        >
          <${JY} prefix="mdi" name="database-export" size=${16} />
        </div>
        <div
          class=${[cE,{active:h.canvasType===Fb.generatorCode}]}
          title="Code Generator"
          @click=${()=>r(Fb.generatorCode)}
        >
          <${JY} name="file-code" size=${16} />
        </div>
        <div
          class=${[cE,{active:h.canvasType===Fb.settings}]}
          title="Settings"
          @click=${()=>r(Fb.settings)}
        >
          <${JY} name="gear" size=${16} />
        </div>
        <div class=${sE}></div>
        <div class=${cE} title="Search" @click=${u}>
          <${JY} name="magnifying-glass" size=${16} />
        </div>
        ${e.enableThemeBuilder?Ch`
              <div class=${cE} title="Theme" @click=${d}>
                <${JY} name="circle-half-stroke" size=${16} />
              </div>
            `:null}
        <div class=${sE}></div>
        ${Z?Ch`
              <div
                class=${["undo-redo",cE,{active:m.hasUndo}]}
                title="Undo"
                @click=${a}
              >
                <${JY} name="rotate-left" size=${16} />
              </div>
              <div
                class=${["undo-redo",cE,{active:m.hasRedo}]}
                title="Redo"
                @click=${s}
              >
                <${JY} name="rotate-right" size=${16} />
              </div>
              <div
                class=${["undo-redo",cE,{active:m.hasUndo||m.hasRedo}]}
                title="Time Travel"
                style=${{"max-width":"26px"}}
                @click=${p}
              >
                <${JY} prefix="mdi" name="av-timer" size=${20} />
              </div>
            `:null}
        <div class=${uE}>Table: ${b.tableIds.length}</div>
      </div>
    `}},pE=(e,t)=>{const n=yL(t);return()=>{const{column:t,selected:i}=e;return Ch`
      <div
        class=${["column-row",fw]}
        data-id=${t.id}
        ?data-selected=${i}
      >
        <${dw} keys=${t.ui.keys} />
        ${ap((()=>{const{store:t}=n.value,{settings:i}=t.state,{column:o,widthName:l,widthDataType:r,widthDefault:a,widthComment:s}=e;return i.columnOrder.map((e=>{let t=null;switch(e){case Ub.columnName:t=Ch`
              <div class="column-col">
                <${BT}
                  placeholder="column"
                  width=${l}
                  value=${o.name}
                />
              </div>
            `;break;case Ub.columnDefault:t=Zf(i.show,Eb.columnDefault)?Ch`
                  <div class="column-col">
                    <${BT}
                      placeholder="default"
                      width=${a}
                      value=${o.default}
                    />
                  </div>
                `:null;break;case Ub.columnComment:t=Zf(i.show,Eb.columnComment)?Ch`
                  <div class="column-col">
                    <${BT}
                      placeholder="comment"
                      width=${s}
                      value=${o.comment}
                    />
                  </div>
                `:null;break;case Ub.columnDataType:t=Zf(i.show,Eb.columnDataType)?Ch`
                  <div class="column-col">
                    <${cw}
                      tableId=${o.tableId}
                      columnId=${o.id}
                      width=${r}
                      value=${o.dataType}
                    />
                  </div>
                `:null;break;case Ub.columnNotNull:t=Zf(i.show,Eb.columnNotNull)?Ch`
                  <div class="column-col">
                    <${hw} options=${o.options} />
                  </div>
                `:null;break;case Ub.columnUnique:t=Zf(i.show,Eb.columnUnique)?Ch`
                  <div class="column-col">
                    <${bw}
                      checked=${Zf(o.options,rf.unique)}
                      width=${Nf}
                      text="UQ"
                      title="Unique"
                    />
                  </div>
                `:null;break;case Ub.columnAutoIncrement:t=Zf(i.show,Eb.columnAutoIncrement)?Ch`
                  <div class="column-col">
                    <${bw}
                      checked=${Zf(o.options,rf.autoIncrement)}
                      width=${Kf}
                      text="AI"
                      title="Auto Increment"
                    />
                  </div>
                `:null}return{columnType:e,template:t}})).filter((({template:e})=>!!e))})(),(({columnType:e})=>e),(({template:e})=>e))}
      </div>
    `}},hE=(e,t)=>{const n=yL(t);return()=>{const{store:t}=n.value,{settings:i,collections:o}=t.state,{table:l,columnId:r,x:a,y:s}=e,c=GZ(l,t.state),u=WZ(l),d=Dr(o).collection("tableColumnEntities").selectByIds(l.columnIds);return Ch`
      <div
        class=${["table",JL]}
        style=${{top:`${s}px`,left:`${a}px`,width:`${c.width}px`,height:`${u}px`,position:"fixed"}}
        data-id=${l.id}
      >
        <div class=${jL}>
          <div
            class=${["table-header-color",FL]}
            style=${{"background-color":l.ui.color}}
          ></div>
          <div class=${OL}></div>
          <div class=${$L}>
            <div class="input-padding">
              <${BT}
                placeholder="table"
                width=${l.ui.widthName}
                value=${l.name}
              />
            </div>
            ${Zf(i.show,Eb.tableComment)?Ch`
                  <div class="input-padding">
                    <${BT}
                      placeholder="comment"
                      width=${l.ui.widthComment}
                      value=${l.comment}
                    />
                  </div>
                `:null}
          </div>
        </div>
        <div>
          ${ap(d,(e=>e.id),(e=>Ch`
              <${pE}
                column=${e}
                selected=${e.id===r}
                widthName=${c.name}
                widthDataType=${c.dataType}
                widthDefault=${c.default}
                widthComment=${c.comment}
              />
            `))}
        </div>
      </div>
    `}},mE={table:"table",column:"column"};const bE=function e(){var t=new oN,n=[],i=[],o=az;function l(e){let l=t.get(e);if(void 0===l){if(o!==az)return o;t.set(e,l=n.push(e)-1)}return i[l%i.length]}return l.domain=function(e){if(!arguments.length)return n.slice();n=[],t=new oN;for(const i of e)t.has(i)||t.set(i,n.push(i)-1);return l},l.range=function(e){return arguments.length?(i=Array.from(e),l):i.slice()},l.unknown=function(e){return arguments.length?(o=e,l):o},l.copy=function(){return e(n,i).unknown(o)},rz.apply(l,arguments),l}(sz);function fE(e,t){const n=function({doc:{tableIds:e,relationshipIds:t},collections:n}){const i=Dr(n).collection("tableEntities").selectByIds(e),o=Dr(n).collection("relationshipEntities").selectByIds(t),l={nodes:[],links:[]},r=new Set;return i.forEach((e=>{l.nodes.push({id:e.id,name:e.name,group:mE.table}),Dr(n).collection("tableColumnEntities").selectByIds(e.columnIds).forEach((t=>{l.nodes.push({id:t.id,name:t.name,group:mE.column,tableId:e.id}),l.links.push({source:e.id,target:t.id})}))})),o.forEach((e=>{const{start:t,end:n}=e,i=`${t.tableId}-${n.tableId}`;t.tableId!==n.tableId&&!r.has(i)&&(l.links.push({source:t.tableId,target:n.tableId}),r.add(i))})),l}(e),i=n.links.map((e=>Object.create(e))),o=n.nodes.map((e=>Object.create(e))),l=nz(o).force("link",AM(i).id((e=>e.id))).force("charge",iz()).force("x",oz()).force("y",lz()),r=function(e){return IK(yN(e).call(document.documentElement))}("svg"),a=r.append("g").attr("stroke","#999").attr("stroke-opacity",.6).selectAll("line").data(i).join("line").attr("stroke-width",Math.sqrt(2)),s=r.append("g").attr("stroke","#fff").attr("stroke-width",1.5).selectAll("circle").data(o).join("circle").attr("r",5).attr("fill",(e=>bE(e.group))).call(function(e,t){return KK().on("start",((n,i)=>{n.active||e.alphaTarget(.3).restart(),i.fx=i.x,i.fy=i.y,t.onDragStart()})).on("drag",((e,t)=>{t.fx=e.x,t.fy=e.y})).on("end",((n,i)=>{n.active||e.alphaTarget(0),i.fx=null,i.fy=null,t.onDragEnd()}))}(l,t));return s.on("mouseenter",((e,i)=>{const o=n.nodes[i.index];let l=null,r=null;o.group===mE.table?l=o.id:o.group===mE.column&&o.tableId&&(l=o.tableId,r=o.id),t.onStartPreview(e,l,r)})),s.on("mouseleave",(()=>{t.onEndPreview()})),l.on("tick",(()=>{a.attr("x1",(e=>e.source.x)).attr("y1",(e=>e.source.y)).attr("x2",(e=>e.target.x)).attr("y2",(e=>e.target.y)),s.attr("cx",(e=>e.x)).attr("cy",(e=>e.y))})),r}const yE=Qh`
  position: relative;
  height: 100%;
  overflow: auto;
  background-color: var(--canvas-background);
`,gE=(e,t)=>{const n=yL(t),{addUnsubscribe:i}=WL(),o=Bs({preview:!1,drag:!1,table:null,columnId:null,x:0,y:0});let l=null;const r=()=>{const{store:e}=n.value,{editor:{viewport:t}}=e.state;null==l||l.attr("viewBox",[-t.width/2,-600,t.width,1200])};return Ys((()=>{const{store:e}=n.value,{editor:t}=e.state;l=fE(e.state,{onDragStart:()=>{o.drag=!0},onDragEnd:()=>{o.drag=!1},onStartPreview:(e,t,i)=>{if(!t)return;const{store:l}=n.value,{collections:r}=l.state,a=Dr(r).collection("tableEntities").selectById(t);a&&(o.columnId=i,o.table=a,o.x=e.clientX,o.y=e.clientY,o.preview=!0)},onEndPreview:()=>{o.preview=!1}}),r(),i(Qs(t.viewport).subscribe((e=>{"width"===e&&r()})),(()=>{null==l||l.remove(),l=null}))})),()=>{const e=o.table&&!o.drag&&o.preview;return Ch`
      <div class=${["scrollbar",yE]}>
        ${null==l?void 0:l.node()}
        ${e?Ch`
              <${hE}
                table=${o.table}
                columnId=${o.columnId}
                x=${o.x+20}
                y=${o.y}
              />
            `:null}
      </div>
    `}};var vE=["Shift","Meta","Alt","Control"],ZE="object"==typeof navigator?navigator.platform:"",xE=/Mac|iPod|iPhone|iPad/.test(ZE),XE=xE?"Meta":"Control",GE="Win32"===ZE?["Control","Alt"]:xE?["Alt"]:[];function IE(e,t){return"function"==typeof e.getModifierState&&(e.getModifierState(t)||GE.includes(t)&&e.getModifierState("AltGraph"))}function WE(e){return e.trim().split(" ").map((function(e){var t=e.split(/\b\+/),n=t.pop();return[t=t.map((function(e){return"$mod"===e?XE:e})),n]}))}function kE(e,t,n){var i;void 0===n&&(n={});var o=null!=(i=n.event)?i:"keydown",l=function(e,t){var n;void 0===t&&(t={});var i=null!=(n=t.timeout)?n:1e3,o=Object.keys(e).map((function(t){return[WE(t),e[t]]})),l=new Map,r=null;return function(e){e instanceof KeyboardEvent&&(o.forEach((function(t){var n=t[0],i=t[1],o=l.get(n)||n;!function(e,t){return!(t[1].toUpperCase()!==e.key.toUpperCase()&&t[1]!==e.code||t[0].find((function(t){return!IE(e,t)}))||vE.find((function(n){return!t[0].includes(n)&&t[1]!==n&&IE(e,n)})))}(e,o[0])?IE(e,e.key)||l.delete(n):o.length>1?l.set(n,o.slice(1)):(l.delete(n),i(e))})),r&&clearTimeout(r),r=setTimeout(l.clear.bind(l),i))}}(t,n);return e.addEventListener(o,l),function(){e.removeEventListener(o,l)}}
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const VE=Symbol("Comlink.proxy"),CE=Symbol("Comlink.endpoint"),SE=Symbol("Comlink.releaseProxy"),RE=Symbol("Comlink.finalizer"),LE=Symbol("Comlink.thrown"),YE=e=>"object"==typeof e&&null!==e||"function"==typeof e,TE={canHandle:e=>YE(e)&&e[VE],serialize(e){const{port1:t,port2:n}=new MessageChannel;return KE(e,t),[n,[n]]},deserialize:e=>(e.start(),ME(e))},wE={canHandle:e=>YE(e)&&LE in e,serialize({value:e}){let t;return t=e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[t,[]]},deserialize(e){throw e.isError?Object.assign(new Error(e.value.message),e.value):e.value}},NE=new Map([["proxy",TE],["throw",wE]]);function KE(e,t=globalThis,n=["*"]){t.addEventListener("message",(function i(o){if(!o||!o.data)return;if(!function(e,t){for(const n of e)if(t===n||"*"===n||n instanceof RegExp&&n.test(t))return!0;return!1}(n,o.origin))return void console.warn(`Invalid origin '${o.origin}' for comlink proxy`);const{id:l,type:r,path:a}=Object.assign({path:[]},o.data),s=(o.data.argumentList||[]).map(AE);let c;try{const t=a.slice(0,-1).reduce(((e,t)=>e[t]),e),n=a.reduce(((e,t)=>e[t]),e);switch(r){case"GET":c=n;break;case"SET":t[a.slice(-1)[0]]=AE(o.data.value),c=!0;break;case"APPLY":c=n.apply(t,s);break;case"CONSTRUCT":c=function(e){return Object.assign(e,{[VE]:!0})}(new n(...s));break;case"ENDPOINT":{const{port1:t,port2:n}=new MessageChannel;KE(e,n),c=function(e,t){return UE.set(e,t),e}(t,[t])}break;case"RELEASE":c=void 0;break;default:return}}catch(e){c={value:e,[LE]:0}}Promise.resolve(c).catch((e=>({value:e,[LE]:0}))).then((n=>{const[o,a]=PE(n);t.postMessage(Object.assign(Object.assign({},o),{id:l}),a),"RELEASE"===r&&(t.removeEventListener("message",i),HE(t),RE in e&&"function"==typeof e[RE]&&e[RE]())})).catch((e=>{const[n,i]=PE({value:new TypeError("Unserializable return value"),[LE]:0});t.postMessage(Object.assign(Object.assign({},n),{id:l}),i)}))})),t.start&&t.start()}function HE(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function ME(e,t){return OE(e,[],t)}function zE(e){if(e)throw new Error("Proxy has been released and is not useable")}function JE(e){return BE(e,{type:"RELEASE"}).then((()=>{HE(e)}))}const jE=new WeakMap,FE="FinalizationRegistry"in globalThis&&new FinalizationRegistry((e=>{const t=(jE.get(e)||0)-1;jE.set(e,t),0===t&&JE(e)}));function OE(e,t=[],n=function(){}){let i=!1;const o=new Proxy(n,{get(n,l){if(zE(i),l===SE)return()=>{(function(e){FE&&FE.unregister(e)})(o),JE(e),i=!0};if("then"===l){if(0===t.length)return{then:()=>o};const n=BE(e,{type:"GET",path:t.map((e=>e.toString()))}).then(AE);return n.then.bind(n)}return OE(e,[...t,l])},set(n,o,l){zE(i);const[r,a]=PE(l);return BE(e,{type:"SET",path:[...t,o].map((e=>e.toString())),value:r},a).then(AE)},apply(n,o,l){zE(i);const r=t[t.length-1];if(r===CE)return BE(e,{type:"ENDPOINT"}).then(AE);if("bind"===r)return OE(e,t.slice(0,-1));const[a,s]=EE(l);return BE(e,{type:"APPLY",path:t.map((e=>e.toString())),argumentList:a},s).then(AE)},construct(n,o){zE(i);const[l,r]=EE(o);return BE(e,{type:"CONSTRUCT",path:t.map((e=>e.toString())),argumentList:l},r).then(AE)}});return function(e,t){const n=(jE.get(t)||0)+1;jE.set(t,n),FE&&FE.register(e,t,e)}(o,e),o}function $E(e){return Array.prototype.concat.apply([],e)}function EE(e){const t=e.map(PE);return[t.map((e=>e[0])),$E(t.map((e=>e[1])))]}const UE=new WeakMap;function PE(e){for(const[t,n]of NE)if(n.canHandle(e)){const[i,o]=n.serialize(e);return[{type:"HANDLER",name:t,value:i},o]}return[{type:"RAW",value:e},UE.get(e)||[]]}function AE(e){switch(e.type){case"HANDLER":return NE.get(e.name).deserialize(e.value);case"RAW":return e.value}}function BE(e,t,n){return new Promise((i=>{const o=new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-");e.addEventListener("message",(function t(n){!n.data||!n.data.id||n.data.id!==o||(e.removeEventListener("message",t),i(n.data))})),e.start&&e.start(),e.postMessage(Object.assign({id:o},t),n)}))}const QE="KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDCiAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wCiAqL2NvbnN0IGVuPVN5bWJvbCgiQ29tbGluay5wcm94eSIpLHVzPVN5bWJvbCgiQ29tbGluay5lbmRwb2ludCIpLGNzPVN5bWJvbCgiQ29tbGluay5yZWxlYXNlUHJveHkiKSxTdD1TeW1ib2woIkNvbWxpbmsuZmluYWxpemVyIikscWU9U3ltYm9sKCJDb21saW5rLnRocm93biIpLHRuPXQ9PnR5cGVvZiB0PT0ib2JqZWN0IiYmdCE9PW51bGx8fHR5cGVvZiB0PT0iZnVuY3Rpb24iLGZzPXtjYW5IYW5kbGU6dD0+dG4odCkmJnRbZW5dLHNlcmlhbGl6ZSh0KXtjb25zdHtwb3J0MTplLHBvcnQyOm59PW5ldyBNZXNzYWdlQ2hhbm5lbDtyZXR1cm4gT3QodCxlKSxbbixbbl1dfSxkZXNlcmlhbGl6ZSh0KXtyZXR1cm4gdC5zdGFydCgpLHlzKHQpfX0sZHM9e2NhbkhhbmRsZTp0PT50bih0KSYmcWUgaW4gdCxzZXJpYWxpemUoe3ZhbHVlOnR9KXtsZXQgZTtyZXR1cm4gdCBpbnN0YW5jZW9mIEVycm9yP2U9e2lzRXJyb3I6ITAsdmFsdWU6e21lc3NhZ2U6dC5tZXNzYWdlLG5hbWU6dC5uYW1lLHN0YWNrOnQuc3RhY2t9fTplPXtpc0Vycm9yOiExLHZhbHVlOnR9LFtlLFtdXX0sZGVzZXJpYWxpemUodCl7dGhyb3cgdC5pc0Vycm9yP09iamVjdC5hc3NpZ24obmV3IEVycm9yKHQudmFsdWUubWVzc2FnZSksdC52YWx1ZSk6dC52YWx1ZX19LG5uPW5ldyBNYXAoW1sicHJveHkiLGZzXSxbInRocm93Iixkc11dKTtmdW5jdGlvbiBocyh0LGUpe2Zvcihjb25zdCBuIG9mIHQpaWYoZT09PW58fG49PT0iKiJ8fG4gaW5zdGFuY2VvZiBSZWdFeHAmJm4udGVzdChlKSlyZXR1cm4hMDtyZXR1cm4hMX1mdW5jdGlvbiBPdCh0LGU9Z2xvYmFsVGhpcyxuPVsiKiJdKXtlLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLGZ1bmN0aW9uIHIocyl7aWYoIXN8fCFzLmRhdGEpcmV0dXJuO2lmKCFocyhuLHMub3JpZ2luKSl7Y29uc29sZS53YXJuKGBJbnZhbGlkIG9yaWdpbiAnJHtzLm9yaWdpbn0nIGZvciBjb21saW5rIHByb3h5YCk7cmV0dXJufWNvbnN0e2lkOmksdHlwZTphLHBhdGg6b309T2JqZWN0LmFzc2lnbih7cGF0aDpbXX0scy5kYXRhKSxsPShzLmRhdGEuYXJndW1lbnRMaXN0fHxbXSkubWFwKGFlKTtsZXQgdTt0cnl7Y29uc3QgYz1vLnNsaWNlKDAsLTEpLnJlZHVjZSgocCxoKT0+cFtoXSx0KSxkPW8ucmVkdWNlKChwLGgpPT5wW2hdLHQpO3N3aXRjaChhKXtjYXNlIkdFVCI6dT1kO2JyZWFrO2Nhc2UiU0VUIjpjW28uc2xpY2UoLTEpWzBdXT1hZShzLmRhdGEudmFsdWUpLHU9ITA7YnJlYWs7Y2FzZSJBUFBMWSI6dT1kLmFwcGx5KGMsbCk7YnJlYWs7Y2FzZSJDT05TVFJVQ1QiOntjb25zdCBwPW5ldyBkKC4uLmwpO3U9U3MocCl9YnJlYWs7Y2FzZSJFTkRQT0lOVCI6e2NvbnN0e3BvcnQxOnAscG9ydDI6aH09bmV3IE1lc3NhZ2VDaGFubmVsO090KHQsaCksdT1UcyhwLFtwXSl9YnJlYWs7Y2FzZSJSRUxFQVNFIjp1PXZvaWQgMDticmVhaztkZWZhdWx0OnJldHVybn19Y2F0Y2goYyl7dT17dmFsdWU6YyxbcWVdOjB9fVByb21pc2UucmVzb2x2ZSh1KS5jYXRjaChjPT4oe3ZhbHVlOmMsW3FlXTowfSkpLnRoZW4oYz0+e2NvbnN0W2QscF09QmUoYyk7ZS5wb3N0TWVzc2FnZShPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZCkse2lkOml9KSxwKSxhPT09IlJFTEVBU0UiJiYoZS5yZW1vdmVFdmVudExpc3RlbmVyKCJtZXNzYWdlIixyKSxybihlKSxTdCBpbiB0JiZ0eXBlb2YgdFtTdF09PSJmdW5jdGlvbiImJnRbU3RdKCkpfSkuY2F0Y2goYz0+e2NvbnN0W2QscF09QmUoe3ZhbHVlOm5ldyBUeXBlRXJyb3IoIlVuc2VyaWFsaXphYmxlIHJldHVybiB2YWx1ZSIpLFtxZV06MH0pO2UucG9zdE1lc3NhZ2UoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGQpLHtpZDppfSkscCl9KX0pLGUuc3RhcnQmJmUuc3RhcnQoKX1mdW5jdGlvbiBtcyh0KXtyZXR1cm4gdC5jb25zdHJ1Y3Rvci5uYW1lPT09Ik1lc3NhZ2VQb3J0In1mdW5jdGlvbiBybih0KXttcyh0KSYmdC5jbG9zZSgpfWZ1bmN0aW9uIHlzKHQsZSl7cmV0dXJuIGt0KHQsW10sZSl9ZnVuY3Rpb24gWWUodCl7aWYodCl0aHJvdyBuZXcgRXJyb3IoIlByb3h5IGhhcyBiZWVuIHJlbGVhc2VkIGFuZCBpcyBub3QgdXNlYWJsZSIpfWZ1bmN0aW9uIHNuKHQpe3JldHVybiBnZSh0LHt0eXBlOiJSRUxFQVNFIn0pLnRoZW4oKCk9Pntybih0KX0pfWNvbnN0IEdlPW5ldyBXZWFrTWFwLEplPSJGaW5hbGl6YXRpb25SZWdpc3RyeSJpbiBnbG9iYWxUaGlzJiZuZXcgRmluYWxpemF0aW9uUmVnaXN0cnkodD0+e2NvbnN0IGU9KEdlLmdldCh0KXx8MCktMTtHZS5zZXQodCxlKSxlPT09MCYmc24odCl9KTtmdW5jdGlvbiBncyh0LGUpe2NvbnN0IG49KEdlLmdldChlKXx8MCkrMTtHZS5zZXQoZSxuKSxKZSYmSmUucmVnaXN0ZXIodCxlLHQpfWZ1bmN0aW9uIHBzKHQpe0plJiZKZS51bnJlZ2lzdGVyKHQpfWZ1bmN0aW9uIGt0KHQsZT1bXSxuPWZ1bmN0aW9uKCl7fSl7bGV0IHI9ITE7Y29uc3Qgcz1uZXcgUHJveHkobix7Z2V0KGksYSl7aWYoWWUociksYT09PWNzKXJldHVybigpPT57cHMocyksc24odCkscj0hMH07aWYoYT09PSJ0aGVuIil7aWYoZS5sZW5ndGg9PT0wKXJldHVybnt0aGVuOigpPT5zfTtjb25zdCBvPWdlKHQse3R5cGU6IkdFVCIscGF0aDplLm1hcChsPT5sLnRvU3RyaW5nKCkpfSkudGhlbihhZSk7cmV0dXJuIG8udGhlbi5iaW5kKG8pfXJldHVybiBrdCh0LFsuLi5lLGFdKX0sc2V0KGksYSxvKXtZZShyKTtjb25zdFtsLHVdPUJlKG8pO3JldHVybiBnZSh0LHt0eXBlOiJTRVQiLHBhdGg6Wy4uLmUsYV0ubWFwKGM9PmMudG9TdHJpbmcoKSksdmFsdWU6bH0sdSkudGhlbihhZSl9LGFwcGx5KGksYSxvKXtZZShyKTtjb25zdCBsPWVbZS5sZW5ndGgtMV07aWYobD09PXVzKXJldHVybiBnZSh0LHt0eXBlOiJFTkRQT0lOVCJ9KS50aGVuKGFlKTtpZihsPT09ImJpbmQiKXJldHVybiBrdCh0LGUuc2xpY2UoMCwtMSkpO2NvbnN0W3UsY109YW4obyk7cmV0dXJuIGdlKHQse3R5cGU6IkFQUExZIixwYXRoOmUubWFwKGQ9PmQudG9TdHJpbmcoKSksYXJndW1lbnRMaXN0OnV9LGMpLnRoZW4oYWUpfSxjb25zdHJ1Y3QoaSxhKXtZZShyKTtjb25zdFtvLGxdPWFuKGEpO3JldHVybiBnZSh0LHt0eXBlOiJDT05TVFJVQ1QiLHBhdGg6ZS5tYXAodT0+dS50b1N0cmluZygpKSxhcmd1bWVudExpc3Q6b30sbCkudGhlbihhZSl9fSk7cmV0dXJuIGdzKHMsdCksc31mdW5jdGlvbiB3cyh0KXtyZXR1cm4gQXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseShbXSx0KX1mdW5jdGlvbiBhbih0KXtjb25zdCBlPXQubWFwKEJlKTtyZXR1cm5bZS5tYXAobj0+blswXSksd3MoZS5tYXAobj0+blsxXSkpXX1jb25zdCBvbj1uZXcgV2Vha01hcDtmdW5jdGlvbiBUcyh0LGUpe3JldHVybiBvbi5zZXQodCxlKSx0fWZ1bmN0aW9uIFNzKHQpe3JldHVybiBPYmplY3QuYXNzaWduKHQse1tlbl06ITB9KX1mdW5jdGlvbiBCZSh0KXtmb3IoY29uc3RbZSxuXW9mIG5uKWlmKG4uY2FuSGFuZGxlKHQpKXtjb25zdFtyLHNdPW4uc2VyaWFsaXplKHQpO3JldHVyblt7dHlwZToiSEFORExFUiIsbmFtZTplLHZhbHVlOnJ9LHNdfXJldHVyblt7dHlwZToiUkFXIix2YWx1ZTp0fSxvbi5nZXQodCl8fFtdXX1mdW5jdGlvbiBhZSh0KXtzd2l0Y2godC50eXBlKXtjYXNlIkhBTkRMRVIiOnJldHVybiBubi5nZXQodC5uYW1lKS5kZXNlcmlhbGl6ZSh0LnZhbHVlKTtjYXNlIlJBVyI6cmV0dXJuIHQudmFsdWV9fWZ1bmN0aW9uIGdlKHQsZSxuKXtyZXR1cm4gbmV3IFByb21pc2Uocj0+e2NvbnN0IHM9T3MoKTt0LmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLGZ1bmN0aW9uIGkoYSl7IWEuZGF0YXx8IWEuZGF0YS5pZHx8YS5kYXRhLmlkIT09c3x8KHQucmVtb3ZlRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsaSkscihhLmRhdGEpKX0pLHQuc3RhcnQmJnQuc3RhcnQoKSx0LnBvc3RNZXNzYWdlKE9iamVjdC5hc3NpZ24oe2lkOnN9LGUpLG4pfSl9ZnVuY3Rpb24gT3MoKXtyZXR1cm4gbmV3IEFycmF5KDQpLmZpbGwoMCkubWFwKCgpPT5NYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpLnRvU3RyaW5nKDE2KSkuam9pbigiLSIpfXZhciBrcz10eXBlb2YgZ2xvYmFsPT0ib2JqZWN0IiYmZ2xvYmFsJiZnbG9iYWwuT2JqZWN0PT09T2JqZWN0JiZnbG9iYWwsYnM9dHlwZW9mIHNlbGY9PSJvYmplY3QiJiZzZWxmJiZzZWxmLk9iamVjdD09PU9iamVjdCYmc2VsZixidD1rc3x8YnN8fEZ1bmN0aW9uKCJyZXR1cm4gdGhpcyIpKCkscGU9YnQuU3ltYm9sLGxuPU9iamVjdC5wcm90b3R5cGUsdnM9bG4uaGFzT3duUHJvcGVydHksSXM9bG4udG9TdHJpbmcsQWU9cGU/cGUudG9TdHJpbmdUYWc6dm9pZCAwO2Z1bmN0aW9uIEVzKHQpe3ZhciBlPXZzLmNhbGwodCxBZSksbj10W0FlXTt0cnl7dFtBZV09dm9pZCAwO3ZhciByPSEwfWNhdGNoe312YXIgcz1Jcy5jYWxsKHQpO3JldHVybiByJiYoZT90W0FlXT1uOmRlbGV0ZSB0W0FlXSksc312YXIgTnM9T2JqZWN0LnByb3RvdHlwZSxNcz1Ocy50b1N0cmluZztmdW5jdGlvbiB4cyh0KXtyZXR1cm4gTXMuY2FsbCh0KX12YXIgRHM9IltvYmplY3QgTnVsbF0iLENzPSJbb2JqZWN0IFVuZGVmaW5lZF0iLHVuPXBlP3BlLnRvU3RyaW5nVGFnOnZvaWQgMDtmdW5jdGlvbiBjbih0KXtyZXR1cm4gdD09bnVsbD90PT09dm9pZCAwP0NzOkRzOnVuJiZ1biBpbiBPYmplY3QodCk/RXModCk6eHModCl9ZnVuY3Rpb24gdnQodCl7cmV0dXJuIHQhPW51bGwmJnR5cGVvZiB0PT0ib2JqZWN0In1mdW5jdGlvbiBGcyh0LGUpe2Zvcih2YXIgbj0tMSxyPXQ9PW51bGw/MDp0Lmxlbmd0aCxzPUFycmF5KHIpOysrbjxyOylzW25dPWUodFtuXSxuLHQpO3JldHVybiBzfXZhciBBcz1BcnJheS5pc0FycmF5O2Z1bmN0aW9uIGZuKHQpe3ZhciBlPXR5cGVvZiB0O3JldHVybiB0IT1udWxsJiYoZT09Im9iamVjdCJ8fGU9PSJmdW5jdGlvbiIpfWZ1bmN0aW9uIGRuKHQpe3JldHVybiB0fXZhciBWcz0iW29iamVjdCBBc3luY0Z1bmN0aW9uXSIsV3M9IltvYmplY3QgRnVuY3Rpb25dIixMcz0iW29iamVjdCBHZW5lcmF0b3JGdW5jdGlvbl0iLCRzPSJbb2JqZWN0IFByb3h5XSI7ZnVuY3Rpb24gaG4odCl7aWYoIWZuKHQpKXJldHVybiExO3ZhciBlPWNuKHQpO3JldHVybiBlPT1Xc3x8ZT09THN8fGU9PVZzfHxlPT0kc312YXIgSXQ9YnRbIl9fY29yZS1qc19zaGFyZWRfXyJdLG1uPWZ1bmN0aW9uKCl7dmFyIHQ9L1teLl0rJC8uZXhlYyhJdCYmSXQua2V5cyYmSXQua2V5cy5JRV9QUk9UT3x8IiIpO3JldHVybiB0PyJTeW1ib2woc3JjKV8xLiIrdDoiIn0oKTtmdW5jdGlvbiBfcyh0KXtyZXR1cm4hIW1uJiZtbiBpbiB0fXZhciB6cz1GdW5jdGlvbi5wcm90b3R5cGUsUnM9enMudG9TdHJpbmc7ZnVuY3Rpb24gWnModCl7aWYodCE9bnVsbCl7dHJ5e3JldHVybiBScy5jYWxsKHQpfWNhdGNoe310cnl7cmV0dXJuIHQrIiJ9Y2F0Y2h7fX1yZXR1cm4iIn12YXIgUHM9L1tcXF4kLiorPygpW1xde318XS9nLFVzPS9eXFtvYmplY3QgLis/Q29uc3RydWN0b3JcXSQvLEhzPUZ1bmN0aW9uLnByb3RvdHlwZSxqcz1PYmplY3QucHJvdG90eXBlLHFzPUhzLnRvU3RyaW5nLFlzPWpzLmhhc093blByb3BlcnR5LEdzPVJlZ0V4cCgiXiIrcXMuY2FsbChZcykucmVwbGFjZShQcywiXFwkJiIpLnJlcGxhY2UoL2hhc093blByb3BlcnR5fChmdW5jdGlvbikuKj8oPz1cXFwoKXwgZm9yIC4rPyg/PVxcXF0pL2csIiQxLio/IikrIiQiKTtmdW5jdGlvbiBKcyh0KXtpZighZm4odCl8fF9zKHQpKXJldHVybiExO3ZhciBlPWhuKHQpP0dzOlVzO3JldHVybiBlLnRlc3QoWnModCkpfWZ1bmN0aW9uIEJzKHQsZSl7cmV0dXJuIHQ9PW51bGw/dm9pZCAwOnRbZV19ZnVuY3Rpb24gRXQodCxlKXt2YXIgbj1Ccyh0LGUpO3JldHVybiBKcyhuKT9uOnZvaWQgMH1mdW5jdGlvbiBRcyh0LGUsbil7c3dpdGNoKG4ubGVuZ3RoKXtjYXNlIDA6cmV0dXJuIHQuY2FsbChlKTtjYXNlIDE6cmV0dXJuIHQuY2FsbChlLG5bMF0pO2Nhc2UgMjpyZXR1cm4gdC5jYWxsKGUsblswXSxuWzFdKTtjYXNlIDM6cmV0dXJuIHQuY2FsbChlLG5bMF0sblsxXSxuWzJdKX1yZXR1cm4gdC5hcHBseShlLG4pfXZhciBLcz04MDAsWHM9MTYsZWk9RGF0ZS5ub3c7ZnVuY3Rpb24gdGkodCl7dmFyIGU9MCxuPTA7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHI9ZWkoKSxzPVhzLShyLW4pO2lmKG49cixzPjApe2lmKCsrZT49S3MpcmV0dXJuIGFyZ3VtZW50c1swXX1lbHNlIGU9MDtyZXR1cm4gdC5hcHBseSh2b2lkIDAsYXJndW1lbnRzKX19ZnVuY3Rpb24gbmkodCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHR9fXZhciB5bj1mdW5jdGlvbigpe3RyeXt2YXIgdD1FdChPYmplY3QsImRlZmluZVByb3BlcnR5Iik7cmV0dXJuIHQoe30sIiIse30pLHR9Y2F0Y2h7fX0oKSxyaT15bj9mdW5jdGlvbih0LGUpe3JldHVybiB5bih0LCJ0b1N0cmluZyIse2NvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiExLHZhbHVlOm5pKGUpLHdyaXRhYmxlOiEwfSl9OmRuLHNpPXJpLGlpPXRpKHNpKTtmdW5jdGlvbiBhaSh0LGUsbixyKXtmb3IodmFyIHM9dC5sZW5ndGgsaT1uKyhyPzE6LTEpO3I/aS0tOisraTxzOylpZihlKHRbaV0saSx0KSlyZXR1cm4gaTtyZXR1cm4tMX1mdW5jdGlvbiBvaSh0KXtyZXR1cm4gdCE9PXR9ZnVuY3Rpb24gbGkodCxlLG4pe2Zvcih2YXIgcj1uLTEscz10Lmxlbmd0aDsrK3I8czspaWYodFtyXT09PWUpcmV0dXJuIHI7cmV0dXJuLTF9ZnVuY3Rpb24gdWkodCxlLG4pe3JldHVybiBlPT09ZT9saSh0LGUsbik6YWkodCxvaSxuKX1mdW5jdGlvbiBjaSh0LGUpe3ZhciBuPXQ9PW51bGw/MDp0Lmxlbmd0aDtyZXR1cm4hIW4mJnVpKHQsZSwwKT4tMX1mdW5jdGlvbiBmaSh0LGUpe3JldHVybiB0PT09ZXx8dCE9PXQmJmUhPT1lfXZhciBnbj1NYXRoLm1heDtmdW5jdGlvbiBkaSh0LGUsbil7cmV0dXJuIGU9Z24oZT09PXZvaWQgMD90Lmxlbmd0aC0xOmUsMCksZnVuY3Rpb24oKXtmb3IodmFyIHI9YXJndW1lbnRzLHM9LTEsaT1nbihyLmxlbmd0aC1lLDApLGE9QXJyYXkoaSk7KytzPGk7KWFbc109cltlK3NdO3M9LTE7Zm9yKHZhciBvPUFycmF5KGUrMSk7KytzPGU7KW9bc109cltzXTtyZXR1cm4gb1tlXT1uKGEpLFFzKHQsdGhpcyxvKX19ZnVuY3Rpb24gaGkodCxlKXtyZXR1cm4gaWkoZGkodCxlLGRuKSx0KyIiKX12YXIgbWk9OTAwNzE5OTI1NDc0MDk5MTtmdW5jdGlvbiB5aSh0KXtyZXR1cm4gdHlwZW9mIHQ9PSJudW1iZXIiJiZ0Pi0xJiZ0JTE9PTAmJnQ8PW1pfWZ1bmN0aW9uIGdpKHQpe3JldHVybiB0IT1udWxsJiZ5aSh0Lmxlbmd0aCkmJiFobih0KX12YXIgcGk9IltvYmplY3QgQXJndW1lbnRzXSI7ZnVuY3Rpb24gcG4odCl7cmV0dXJuIHZ0KHQpJiZjbih0KT09cGl9dmFyIHduPU9iamVjdC5wcm90b3R5cGUsd2k9d24uaGFzT3duUHJvcGVydHksVGk9d24ucHJvcGVydHlJc0VudW1lcmFibGUsU2k9cG4oZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzfSgpKT9wbjpmdW5jdGlvbih0KXtyZXR1cm4gdnQodCkmJndpLmNhbGwodCwiY2FsbGVlIikmJiFUaS5jYWxsKHQsImNhbGxlZSIpfTtmdW5jdGlvbiBPaSh0KXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIHQoZSl9fXZhciBWZT1FdChPYmplY3QsImNyZWF0ZSIpO2Z1bmN0aW9uIGtpKCl7dGhpcy5fX2RhdGFfXz1WZT9WZShudWxsKTp7fSx0aGlzLnNpemU9MH1mdW5jdGlvbiBiaSh0KXt2YXIgZT10aGlzLmhhcyh0KSYmZGVsZXRlIHRoaXMuX19kYXRhX19bdF07cmV0dXJuIHRoaXMuc2l6ZS09ZT8xOjAsZX12YXIgdmk9Il9fbG9kYXNoX2hhc2hfdW5kZWZpbmVkX18iLElpPU9iamVjdC5wcm90b3R5cGUsRWk9SWkuaGFzT3duUHJvcGVydHk7ZnVuY3Rpb24gTmkodCl7dmFyIGU9dGhpcy5fX2RhdGFfXztpZihWZSl7dmFyIG49ZVt0XTtyZXR1cm4gbj09PXZpP3ZvaWQgMDpufXJldHVybiBFaS5jYWxsKGUsdCk/ZVt0XTp2b2lkIDB9dmFyIE1pPU9iamVjdC5wcm90b3R5cGUseGk9TWkuaGFzT3duUHJvcGVydHk7ZnVuY3Rpb24gRGkodCl7dmFyIGU9dGhpcy5fX2RhdGFfXztyZXR1cm4gVmU/ZVt0XSE9PXZvaWQgMDp4aS5jYWxsKGUsdCl9dmFyIENpPSJfX2xvZGFzaF9oYXNoX3VuZGVmaW5lZF9fIjtmdW5jdGlvbiBGaSh0LGUpe3ZhciBuPXRoaXMuX19kYXRhX187cmV0dXJuIHRoaXMuc2l6ZSs9dGhpcy5oYXModCk/MDoxLG5bdF09VmUmJmU9PT12b2lkIDA/Q2k6ZSx0aGlzfWZ1bmN0aW9uIG9lKHQpe3ZhciBlPS0xLG49dD09bnVsbD8wOnQubGVuZ3RoO2Zvcih0aGlzLmNsZWFyKCk7KytlPG47KXt2YXIgcj10W2VdO3RoaXMuc2V0KHJbMF0sclsxXSl9fW9lLnByb3RvdHlwZS5jbGVhcj1raSxvZS5wcm90b3R5cGUuZGVsZXRlPWJpLG9lLnByb3RvdHlwZS5nZXQ9Tmksb2UucHJvdG90eXBlLmhhcz1EaSxvZS5wcm90b3R5cGUuc2V0PUZpO2Z1bmN0aW9uIEFpKCl7dGhpcy5fX2RhdGFfXz1bXSx0aGlzLnNpemU9MH1mdW5jdGlvbiBRZSh0LGUpe2Zvcih2YXIgbj10Lmxlbmd0aDtuLS07KWlmKGZpKHRbbl1bMF0sZSkpcmV0dXJuIG47cmV0dXJuLTF9dmFyIFZpPUFycmF5LnByb3RvdHlwZSxXaT1WaS5zcGxpY2U7ZnVuY3Rpb24gTGkodCl7dmFyIGU9dGhpcy5fX2RhdGFfXyxuPVFlKGUsdCk7aWYobjwwKXJldHVybiExO3ZhciByPWUubGVuZ3RoLTE7cmV0dXJuIG49PXI/ZS5wb3AoKTpXaS5jYWxsKGUsbiwxKSwtLXRoaXMuc2l6ZSwhMH1mdW5jdGlvbiAkaSh0KXt2YXIgZT10aGlzLl9fZGF0YV9fLG49UWUoZSx0KTtyZXR1cm4gbjwwP3ZvaWQgMDplW25dWzFdfWZ1bmN0aW9uIF9pKHQpe3JldHVybiBRZSh0aGlzLl9fZGF0YV9fLHQpPi0xfWZ1bmN0aW9uIHppKHQsZSl7dmFyIG49dGhpcy5fX2RhdGFfXyxyPVFlKG4sdCk7cmV0dXJuIHI8MD8oKyt0aGlzLnNpemUsbi5wdXNoKFt0LGVdKSk6bltyXVsxXT1lLHRoaXN9ZnVuY3Rpb24gd2UodCl7dmFyIGU9LTEsbj10PT1udWxsPzA6dC5sZW5ndGg7Zm9yKHRoaXMuY2xlYXIoKTsrK2U8bjspe3ZhciByPXRbZV07dGhpcy5zZXQoclswXSxyWzFdKX19d2UucHJvdG90eXBlLmNsZWFyPUFpLHdlLnByb3RvdHlwZS5kZWxldGU9TGksd2UucHJvdG90eXBlLmdldD0kaSx3ZS5wcm90b3R5cGUuaGFzPV9pLHdlLnByb3RvdHlwZS5zZXQ9emk7dmFyIFJpPUV0KGJ0LCJNYXAiKTtmdW5jdGlvbiBaaSgpe3RoaXMuc2l6ZT0wLHRoaXMuX19kYXRhX189e2hhc2g6bmV3IG9lLG1hcDpuZXcoUml8fHdlKSxzdHJpbmc6bmV3IG9lfX1mdW5jdGlvbiBQaSh0KXt2YXIgZT10eXBlb2YgdDtyZXR1cm4gZT09InN0cmluZyJ8fGU9PSJudW1iZXIifHxlPT0ic3ltYm9sInx8ZT09ImJvb2xlYW4iP3QhPT0iX19wcm90b19fIjp0PT09bnVsbH1mdW5jdGlvbiBLZSh0LGUpe3ZhciBuPXQuX19kYXRhX187cmV0dXJuIFBpKGUpP25bdHlwZW9mIGU9PSJzdHJpbmciPyJzdHJpbmciOiJoYXNoIl06bi5tYXB9ZnVuY3Rpb24gVWkodCl7dmFyIGU9S2UodGhpcyx0KS5kZWxldGUodCk7cmV0dXJuIHRoaXMuc2l6ZS09ZT8xOjAsZX1mdW5jdGlvbiBIaSh0KXtyZXR1cm4gS2UodGhpcyx0KS5nZXQodCl9ZnVuY3Rpb24gamkodCl7cmV0dXJuIEtlKHRoaXMsdCkuaGFzKHQpfWZ1bmN0aW9uIHFpKHQsZSl7dmFyIG49S2UodGhpcyx0KSxyPW4uc2l6ZTtyZXR1cm4gbi5zZXQodCxlKSx0aGlzLnNpemUrPW4uc2l6ZT09cj8wOjEsdGhpc31mdW5jdGlvbiBUZSh0KXt2YXIgZT0tMSxuPXQ9PW51bGw/MDp0Lmxlbmd0aDtmb3IodGhpcy5jbGVhcigpOysrZTxuOyl7dmFyIHI9dFtlXTt0aGlzLnNldChyWzBdLHJbMV0pfX1UZS5wcm90b3R5cGUuY2xlYXI9WmksVGUucHJvdG90eXBlLmRlbGV0ZT1VaSxUZS5wcm90b3R5cGUuZ2V0PUhpLFRlLnByb3RvdHlwZS5oYXM9amksVGUucHJvdG90eXBlLnNldD1xaTtmdW5jdGlvbiBZaSh0LGUpe2Zvcih2YXIgbj0tMSxyPWUubGVuZ3RoLHM9dC5sZW5ndGg7KytuPHI7KXRbcytuXT1lW25dO3JldHVybiB0fXZhciBUbj1wZT9wZS5pc0NvbmNhdFNwcmVhZGFibGU6dm9pZCAwO2Z1bmN0aW9uIEdpKHQpe3JldHVybiBBcyh0KXx8U2kodCl8fCEhKFRuJiZ0JiZ0W1RuXSl9ZnVuY3Rpb24gU24odCxlLG4scixzKXt2YXIgaT0tMSxhPXQubGVuZ3RoO2ZvcihufHwobj1HaSksc3x8KHM9W10pOysraTxhOyl7dmFyIG89dFtpXTtlPjAmJm4obyk/ZT4xP1NuKG8sZS0xLG4scixzKTpZaShzLG8pOnJ8fChzW3MubGVuZ3RoXT1vKX1yZXR1cm4gc312YXIgSmk9Il9fbG9kYXNoX2hhc2hfdW5kZWZpbmVkX18iO2Z1bmN0aW9uIEJpKHQpe3JldHVybiB0aGlzLl9fZGF0YV9fLnNldCh0LEppKSx0aGlzfWZ1bmN0aW9uIFFpKHQpe3JldHVybiB0aGlzLl9fZGF0YV9fLmhhcyh0KX1mdW5jdGlvbiBYZSh0KXt2YXIgZT0tMSxuPXQ9PW51bGw/MDp0Lmxlbmd0aDtmb3IodGhpcy5fX2RhdGFfXz1uZXcgVGU7KytlPG47KXRoaXMuYWRkKHRbZV0pfVhlLnByb3RvdHlwZS5hZGQ9WGUucHJvdG90eXBlLnB1c2g9QmksWGUucHJvdG90eXBlLmhhcz1RaTtmdW5jdGlvbiBLaSh0LGUpe3JldHVybiB0LmhhcyhlKX1mdW5jdGlvbiBPbih0KXtyZXR1cm4gdnQodCkmJmdpKHQpfWZ1bmN0aW9uIFhpKHQsZSxuKXtmb3IodmFyIHI9LTEscz10PT1udWxsPzA6dC5sZW5ndGg7KytyPHM7KWlmKG4oZSx0W3JdKSlyZXR1cm4hMDtyZXR1cm4hMX12YXIgZWE9MjAwO2Z1bmN0aW9uIHRhKHQsZSxuLHIpe3ZhciBzPS0xLGk9Y2ksYT0hMCxvPXQubGVuZ3RoLGw9W10sdT1lLmxlbmd0aDtpZighbylyZXR1cm4gbDtuJiYoZT1GcyhlLE9pKG4pKSkscj8oaT1YaSxhPSExKTplLmxlbmd0aD49ZWEmJihpPUtpLGE9ITEsZT1uZXcgWGUoZSkpO2U6Zm9yKDsrK3M8bzspe3ZhciBjPXRbc10sZD1uPT1udWxsP2M6bihjKTtpZihjPXJ8fGMhPT0wP2M6MCxhJiZkPT09ZCl7Zm9yKHZhciBwPXU7cC0tOylpZihlW3BdPT09ZCljb250aW51ZSBlO2wucHVzaChjKX1lbHNlIGkoZSxkLHIpfHxsLnB1c2goYyl9cmV0dXJuIGx9dmFyIG5hPWhpKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIE9uKHQpP3RhKHQsU24oZSwxLE9uLCEwKSk6W119KTtmdW5jdGlvbiAkKHQpe2NvbnN0IGU9bmV3IFNldCh0KTtyZXR1cm4gbj0+ZS5oYXMobil9Y29uc3QgV2U9dD0+ZT0+dHlwZW9mIGU9PT10LHJhPVdlKCJvYmplY3QiKSxOdD1XZSgiYm9vbGVhbiIpLEU9V2UoIm51bWJlciIpLEY9V2UoInN0cmluZyIpLHNhPVdlKCJ1bmRlZmluZWQiKSxrbj10PT50PT09bnVsbCxHPXQ9PmtuKHQpfHxzYSh0KSx7aXNBcnJheTpYfT1BcnJheSxVPXQ9PnJhKHQpJiYha24odCkmJiFYKHQpOygodCxlLG4pPT57bGV0IHI9KDI8PE1hdGgubG9nKHQubGVuZ3RoLTEpL01hdGguTE4yKS0xLHM9LX4oMS42KnIqZS90Lmxlbmd0aCk7cmV0dXJuKGk9ZSk9PntsZXQgYT0iIjtmb3IoOzspe2xldCBvPW4ocyksbD1zO2Zvcig7bC0tOylpZihhKz10W29bbF0mcl18fCIiLGEubGVuZ3RoPT09aSlyZXR1cm4gYX19fSkoInVzZWFuZG9tLTI2VDE5ODM0MFBYNzVweEpBQ0tWRVJZTUlOREJVU0hXT0xGX0dRWmJmZ2hqa2xxdnd5enJpY3QiLDIxLHQ9PntsZXQgZT1nbG9iYWxUaGlzLmNyeXB0bztyZXR1cm4gZT09PXZvaWQgMCYmKGU9cmVxdWlyZSgibm9kZTpjcnlwdG8iKS53ZWJjcnlwdG8pLGUuZ2V0UmFuZG9tVmFsdWVzKG5ldyBVaW50OEFycmF5KHQpKX0pO2NvbnN0IE10PSh0LGUpPT5uPT5NYXRoLm1pbihNYXRoLm1heChuLHQpLGUpOy8qIQogKiBAZGluZXVnL2VyZC1lZGl0b3Itc2NoZW1hCiAqIEB2ZXJzaW9uIDAuMS4wIHwgU3VuIE9jdCAyMCAyMDI0CiAqIEBhdXRob3IgU2V1bmdId2FuLUxlZSA8ZGluZXVnMkBnbWFpbC5jb20+CiAqIEBsaWNlbnNlIE1JVAogKi9mdW5jdGlvbiB3KHQsZSxuKXtyZXR1cm4gcj0+e2lmKCFuKXJldHVybjtjb25zdCBzPW5bcl07dChzKSYmKGVbcl09cyl9fWZ1bmN0aW9uIEgodCl7cmV0dXJuIGU9PkUoZSkmJnQuaW5jbHVkZXMoZSl9ZnVuY3Rpb24gU2UoKXtjb25zdCB0PURhdGUubm93KCk7cmV0dXJue3VwZGF0ZUF0OnQsY3JlYXRlQXQ6dH19ZnVuY3Rpb24gT2UodCxlKXtjb25zdCBuPXcoRSx0LGUpO24oInVwZGF0ZUF0IiksbigiY3JlYXRlQXQiKX1jb25zdCBpYT0oKT0+KHt0YWJsZUlkczpbXSxyZWxhdGlvbnNoaXBJZHM6W10saW5kZXhJZHM6W10sbWVtb0lkczpbXX0pO2Z1bmN0aW9uIGFhKHQpe2NvbnN0IGU9aWEoKTtpZighVSh0KXx8Ryh0KSlyZXR1cm4gZTtjb25zdCBuPXcoWCxlLHQpO3JldHVybiBuKCJ0YWJsZUlkcyIpLG4oInJlbGF0aW9uc2hpcElkcyIpLG4oImluZGV4SWRzIiksbigibWVtb0lkcyIpLGV9Y29uc3Qgb2E9KCk9Pih7aWQ6IiIsbmFtZToiIix0YWJsZUlkOiIiLGluZGV4Q29sdW1uSWRzOltdLHNlcUluZGV4Q29sdW1uSWRzOltdLHVuaXF1ZTohMSxtZXRhOlNlKCl9KTtmdW5jdGlvbiBsYSh0KXtjb25zdCBlPXt9O2lmKCFVKHQpfHxHKHQpKXJldHVybiBlO2Zvcihjb25zdCBuIG9mIE9iamVjdC52YWx1ZXModCkpe2lmKCFuKWNvbnRpbnVlO2NvbnN0IHI9b2EoKSxzPXcoRixyLG4pLGk9dyhOdCxyLG4pLGE9dyhYLHIsbik7cygiaWQiKSxzKCJuYW1lIikscygidGFibGVJZCIpLGkoInVuaXF1ZSIpLGEoImluZGV4Q29sdW1uSWRzIiksYSgic2VxSW5kZXhDb2x1bW5JZHMiKSxPZShyLm1ldGEsbi5tZXRhKSxyLmlkJiYoZVtyLmlkXT1yKX1yZXR1cm4gZX1jb25zdCBibj17QVNDOjEsREVTQzoyfSx1YT1PYmplY3QudmFsdWVzKGJuKSxjYT0oKT0+KHtpZDoiIixpbmRleElkOiIiLGNvbHVtbklkOiIiLG9yZGVyVHlwZTpibi5BU0MsbWV0YTpTZSgpfSk7ZnVuY3Rpb24gZmEodCl7Y29uc3QgZT17fTtpZighVSh0KXx8Ryh0KSlyZXR1cm4gZTtmb3IoY29uc3QgbiBvZiBPYmplY3QudmFsdWVzKHQpKXtpZighbiljb250aW51ZTtjb25zdCByPWNhKCkscz13KEYscixuKTtzKCJpZCIpLHMoImluZGV4SWQiKSxzKCJjb2x1bW5JZCIpLHcoSCh1YSkscixuKSgib3JkZXJUeXBlIiksT2Uoci5tZXRhLG4ubWV0YSksci5pZCYmKGVbci5pZF09cil9cmV0dXJuIGV9Y29uc3QgZGE9KCk9Pih7fSk7ZnVuY3Rpb24gaGEodCl7Y29uc3QgZT1kYSgpO2lmKCFVKHQpfHxHKHQpKXJldHVybiBlO2Zvcihjb25zdFtuLHJdb2YgT2JqZWN0LmVudHJpZXModCkpe2lmKCFYKHIpfHxyLmxlbmd0aCE9PTQpY29udGludWU7Y29uc3RbcyxpLGEsb109cjtpZihGKHMpJiZFKGkpJiZFKGEpJiZVKG8pKXtjb25zdCBsPXt9LHU9dyhFLGwsbyk7T2JqZWN0LmtleXMobykuZm9yRWFjaCh1KSxlW25dPVtzLGksYSxsXX19cmV0dXJuIGV9Y29uc3QgbWE9KCk9Pih7aWQ6IiIsdmFsdWU6IiIsdWk6e3g6MjAwLHk6MTAwLHpJbmRleDoyLHdpZHRoOjExNixoZWlnaHQ6MTAwLGNvbG9yOiIifSxtZXRhOlNlKCl9KTtmdW5jdGlvbiB5YSh0KXtjb25zdCBlPXt9O2lmKCFVKHQpfHxHKHQpKXJldHVybiBlO2Zvcihjb25zdCBuIG9mIE9iamVjdC52YWx1ZXModCkpe2lmKCFuKWNvbnRpbnVlO2NvbnN0IHI9bWEoKSxzPXcoRixyLG4pLGk9dyhFLHIudWksbi51aSksYT13KEYsci51aSxuLnVpKTtzKCJpZCIpLHMoInZhbHVlIiksYSgiY29sb3IiKSxpKCJ4IiksaSgieSIpLGkoInpJbmRleCIpLGkoIndpZHRoIiksaSgiaGVpZ2h0IiksT2Uoci5tZXRhLG4ubWV0YSksci5pZCYmKGVbci5pZF09cil9cmV0dXJuIGV9Y29uc3Qgdm49e1plcm9PbmU6MixaZXJvTjo0LE9uZU9ubHk6OCxPbmVOOjE2fSxnYT1PYmplY3QudmFsdWVzKHZuKSxJbj17cmluZzoxLGRhc2g6Mn0scGE9T2JqZWN0LnZhbHVlcyhJbikseHQ9e2xlZnQ6MSxyaWdodDoyLHRvcDo0LGJvdHRvbTo4fSxFbj1PYmplY3QudmFsdWVzKHh0KSx3YT0oKT0+KHtpZDoiIixpZGVudGlmaWNhdGlvbjohMSxyZWxhdGlvbnNoaXBUeXBlOnZuLlplcm9OLHN0YXJ0UmVsYXRpb25zaGlwVHlwZTpJbi5kYXNoLHN0YXJ0Ont0YWJsZUlkOiIiLGNvbHVtbklkczpbXSx4OjAseTowLGRpcmVjdGlvbjp4dC5ib3R0b219LGVuZDp7dGFibGVJZDoiIixjb2x1bW5JZHM6W10seDowLHk6MCxkaXJlY3Rpb246eHQuYm90dG9tfSxtZXRhOlNlKCl9KTtmdW5jdGlvbiBUYSh0KXtjb25zdCBlPXt9O2lmKCFVKHQpfHxHKHQpKXJldHVybiBlO2Zvcihjb25zdCBuIG9mIE9iamVjdC52YWx1ZXModCkpe2lmKCFuKWNvbnRpbnVlO2NvbnN0IHI9d2EoKSxzPXcoRixyLG4pLGk9dyhOdCxyLG4pLGE9dyhFLHIuc3RhcnQsbi5zdGFydCksbz13KEYsci5zdGFydCxuLnN0YXJ0KSxsPXcoRSxyLmVuZCxuLmVuZCksdT13KEYsci5lbmQsbi5lbmQpO3MoImlkIiksaSgiaWRlbnRpZmljYXRpb24iKSx3KEgoZ2EpLHIsbikoInJlbGF0aW9uc2hpcFR5cGUiKSx3KEgocGEpLHIsbikoInN0YXJ0UmVsYXRpb25zaGlwVHlwZSIpLG8oInRhYmxlSWQiKSxhKCJ4IiksYSgieSIpLHcoSChFbiksci5zdGFydCxuLnN0YXJ0KSgiZGlyZWN0aW9uIiksdyhYLHIuc3RhcnQsbi5zdGFydCkoImNvbHVtbklkcyIpLHUoInRhYmxlSWQiKSxsKCJ4IiksbCgieSIpLHcoSChFbiksci5lbmQsbi5lbmQpKCJkaXJlY3Rpb24iKSx3KFgsci5lbmQsbi5lbmQpKCJjb2x1bW5JZHMiKSxPZShyLm1ldGEsbi5tZXRhKSxyLmlkJiYoZVtyLmlkXT1yKX1yZXR1cm4gZX1jb25zdCBTYT17RVJEOiJFUkQiLHZpc3VhbGl6YXRpb246IkBkaW5ldWcvZXJkLWVkaXRvci9idWlsdGluLXZpc3VhbGl6YXRpb24iLHNjaGVtYVNRTDoiQGRpbmV1Zy9lcmQtZWRpdG9yL2J1aWx0aW4tc2NoZW1hLXNxbCIsZ2VuZXJhdG9yQ29kZToiQGRpbmV1Zy9lcmQtZWRpdG9yL2J1aWx0aW4tZ2VuZXJhdG9yLWNvZGUiLHNldHRpbmdzOiJzZXR0aW5ncyJ9LGxlPXt0YWJsZUNvbW1lbnQ6MSxjb2x1bW5Db21tZW50OjIsY29sdW1uRGF0YVR5cGU6NCxjb2x1bW5EZWZhdWx0OjgsY29sdW1uQXV0b0luY3JlbWVudDoxNixjb2x1bW5QcmltYXJ5S2V5OjMyLGNvbHVtblVuaXF1ZTo2NCxjb2x1bW5Ob3ROdWxsOjEyOCxyZWxhdGlvbnNoaXA6MjU2fSxlZT17Y29sdW1uTmFtZToxLGNvbHVtbkRhdGFUeXBlOjIsY29sdW1uTm90TnVsbDo0LGNvbHVtblVuaXF1ZTo4LGNvbHVtbkF1dG9JbmNyZW1lbnQ6MTYsY29sdW1uRGVmYXVsdDozMixjb2x1bW5Db21tZW50OjY0fSxObj1PYmplY3QudmFsdWVzKGVlKSxNbj17TWFyaWFEQjoxLE1TU1FMOjIsTXlTUUw6NCxPcmFjbGU6OCxQb3N0Z3JlU1FMOjE2LFNRTGl0ZTozMn0sT2E9T2JqZWN0LnZhbHVlcyhNbikseG49e0dyYXBoUUw6MSxjc2hhcnA6MixKYXZhOjQsS290bGluOjgsVHlwZVNjcmlwdDoxNixKUEE6MzIsU2NhbGE6NjR9LGthPU9iamVjdC52YWx1ZXMoeG4pLER0PXtub25lOjEsY2FtZWxDYXNlOjIscGFzY2FsQ2FzZTo0LHNuYWtlQ2FzZTo4fSxEbj1PYmplY3QudmFsdWVzKER0KSxDbj17bm9uZToxLGRvdWJsZVF1b3RlOjIsc2luZ2xlUXVvdGU6NCxiYWNrdGljazo4fSxiYT1PYmplY3QudmFsdWVzKENuKSx2YT0uMSxJYT0xLEVhPTJlMyxOYT0yZTQsTWE9bGUudGFibGVDb21tZW50fGxlLmNvbHVtbkNvbW1lbnR8bGUuY29sdW1uRGF0YVR5cGV8bGUuY29sdW1uRGVmYXVsdHxsZS5jb2x1bW5QcmltYXJ5S2V5fGxlLmNvbHVtbk5vdE51bGx8bGUucmVsYXRpb25zaGlwLHhhPSgpPT4oe3dpZHRoOjJlMyxoZWlnaHQ6MmUzLHNjcm9sbFRvcDowLHNjcm9sbExlZnQ6MCx6b29tTGV2ZWw6MSxzaG93Ok1hLGRhdGFiYXNlOk1uLk15U1FMLGRhdGFiYXNlTmFtZToiIixjYW52YXNUeXBlOlNhLkVSRCxsYW5ndWFnZTp4bi5HcmFwaFFMLHRhYmxlTmFtZUNhc2U6RHQucGFzY2FsQ2FzZSxjb2x1bW5OYW1lQ2FzZTpEdC5jYW1lbENhc2UsYnJhY2tldFR5cGU6Q24ubm9uZSxyZWxhdGlvbnNoaXBEYXRhVHlwZVN5bmM6ITAscmVsYXRpb25zaGlwT3B0aW1pemF0aW9uOiExLGNvbHVtbk9yZGVyOltlZS5jb2x1bW5OYW1lLGVlLmNvbHVtbkRhdGFUeXBlLGVlLmNvbHVtbk5vdE51bGwsZWUuY29sdW1uVW5pcXVlLGVlLmNvbHVtbkF1dG9JbmNyZW1lbnQsZWUuY29sdW1uRGVmYXVsdCxlZS5jb2x1bW5Db21tZW50XSxtYXhXaWR0aENvbW1lbnQ6LTEsaWdub3JlU2F2ZVNldHRpbmdzOjB9KSxGbj1NdChFYSxOYSksRGE9TXQodmEsSWEpLENhPU10KDYwLDIwMCk7ZnVuY3Rpb24gRmEodCl7Y29uc3QgZT14YSgpO2lmKCFVKHQpfHxHKHQpKXJldHVybiBlO2NvbnN0IG49dyhFLGUsdCkscj13KEYsZSx0KSxzPXcoTnQsZSx0KTtyZXR1cm4gRSh0LndpZHRoKSYmKGUud2lkdGg9Rm4odC53aWR0aCkpLEUodC5oZWlnaHQpJiYoZS5oZWlnaHQ9Rm4odC5oZWlnaHQpKSxFKHQuem9vbUxldmVsKSYmKGUuem9vbUxldmVsPURhKHQuem9vbUxldmVsKSksRSh0Lm1heFdpZHRoQ29tbWVudCkmJnQubWF4V2lkdGhDb21tZW50IT09LTEmJihlLm1heFdpZHRoQ29tbWVudD1DYSh0Lm1heFdpZHRoQ29tbWVudCkpLG4oInNjcm9sbFRvcCIpLG4oInNjcm9sbExlZnQiKSxuKCJzaG93IiksbigiaWdub3JlU2F2ZVNldHRpbmdzIikscigiZGF0YWJhc2VOYW1lIikscigiY2FudmFzVHlwZSIpLHMoInJlbGF0aW9uc2hpcERhdGFUeXBlU3luYyIpLHMoInJlbGF0aW9uc2hpcE9wdGltaXphdGlvbiIpLHcoSChPYSksZSx0KSgiZGF0YWJhc2UiKSx3KEgoa2EpLGUsdCkoImxhbmd1YWdlIiksdyhIKERuKSxlLHQpKCJ0YWJsZU5hbWVDYXNlIiksdyhIKERuKSxlLHQpKCJjb2x1bW5OYW1lQ2FzZSIpLHcoSChiYSksZSx0KSgiYnJhY2tldFR5cGUiKSxYKHQuY29sdW1uT3JkZXIpJiZObi5sZW5ndGg9PT10LmNvbHVtbk9yZGVyLmxlbmd0aCYmbmEoTm4sdC5jb2x1bW5PcmRlcikubGVuZ3RoPT09MCYmKGUuY29sdW1uT3JkZXI9dC5jb2x1bW5PcmRlciksZX1jb25zdCBBYT0oKT0+KHtpZDoiIixuYW1lOiIiLGNvbW1lbnQ6IiIsY29sdW1uSWRzOltdLHNlcUNvbHVtbklkczpbXSx1aTp7eDoyMDAseToxMDAsekluZGV4OjIsd2lkdGhOYW1lOjYwLHdpZHRoQ29tbWVudDo2MCxjb2xvcjoiIn0sbWV0YTpTZSgpfSk7ZnVuY3Rpb24gVmEodCl7Y29uc3QgZT17fTtpZighVSh0KXx8Ryh0KSlyZXR1cm4gZTtmb3IoY29uc3QgbiBvZiBPYmplY3QudmFsdWVzKHQpKXtpZighbiljb250aW51ZTtjb25zdCByPUFhKCkscz13KEYscixuKSxpPXcoWCxyLG4pLGE9dyhFLHIudWksbi51aSksbz13KEYsci51aSxuLnVpKTtzKCJpZCIpLHMoIm5hbWUiKSxzKCJjb21tZW50IiksaSgiY29sdW1uSWRzIiksaSgic2VxQ29sdW1uSWRzIiksbygiY29sb3IiKSxhKCJ4IiksYSgieSIpLGEoInpJbmRleCIpLGEoIndpZHRoTmFtZSIpLGEoIndpZHRoQ29tbWVudCIpLE9lKHIubWV0YSxuLm1ldGEpLHIuaWQmJihlW3IuaWRdPXIpfXJldHVybiBlfWNvbnN0IFdhPSgpPT4oe2lkOiIiLHRhYmxlSWQ6IiIsbmFtZToiIixjb21tZW50OiIiLGRhdGFUeXBlOiIiLGRlZmF1bHQ6IiIsb3B0aW9uczowLHVpOntrZXlzOjAsd2lkdGhOYW1lOjYwLHdpZHRoQ29tbWVudDo2MCx3aWR0aERhdGFUeXBlOjYwLHdpZHRoRGVmYXVsdDo2MH0sbWV0YTpTZSgpfSk7ZnVuY3Rpb24gTGEodCl7Y29uc3QgZT17fTtpZighVSh0KXx8Ryh0KSlyZXR1cm4gZTtmb3IoY29uc3QgbiBvZiBPYmplY3QudmFsdWVzKHQpKXtpZighbiljb250aW51ZTtjb25zdCByPVdhKCkscz13KEYscixuKSxpPXcoRSxyLG4pLGE9dyhFLHIudWksbi51aSk7cygiaWQiKSxzKCJ0YWJsZUlkIikscygibmFtZSIpLHMoImNvbW1lbnQiKSxzKCJkYXRhVHlwZSIpLHMoImRlZmF1bHQiKSxpKCJvcHRpb25zIiksYSgia2V5cyIpLGEoIndpZHRoTmFtZSIpLGEoIndpZHRoQ29tbWVudCIpLGEoIndpZHRoRGF0YVR5cGUiKSxhKCJ3aWR0aERlZmF1bHQiKSxPZShyLm1ldGEsbi5tZXRhKSxyLmlkJiYoZVtyLmlkXT1yKX1yZXR1cm4gZX1mdW5jdGlvbiAkYSh0KXt2YXIgZSxuLHIscyxpLGE7Y29uc3Qgbz10LGw9RmEoby5zZXR0aW5ncyksdT1hYShvLmRvYyksYz1oYShvLmx3dyksZD1WYSgoZT1vLmNvbGxlY3Rpb25zKT09bnVsbD92b2lkIDA6ZS50YWJsZUVudGl0aWVzKSxwPUxhKChuPW8uY29sbGVjdGlvbnMpPT1udWxsP3ZvaWQgMDpuLnRhYmxlQ29sdW1uRW50aXRpZXMpLGg9VGEoKHI9by5jb2xsZWN0aW9ucyk9PW51bGw/dm9pZCAwOnIucmVsYXRpb25zaGlwRW50aXRpZXMpLGs9bGEoKHM9by5jb2xsZWN0aW9ucyk9PW51bGw/dm9pZCAwOnMuaW5kZXhFbnRpdGllcyksUD1mYSgoaT1vLmNvbGxlY3Rpb25zKT09bnVsbD92b2lkIDA6aS5pbmRleENvbHVtbkVudGl0aWVzKSxNPXlhKChhPW8uY29sbGVjdGlvbnMpPT1udWxsP3ZvaWQgMDphLm1lbW9FbnRpdGllcyk7cmV0dXJueyRzY2hlbWE6Imh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9kaW5ldWcvZXJkLWVkaXRvci9tYWluL2pzb24tc2NoZW1hL3NjaGVtYS5qc29uIix2ZXJzaW9uOiIzLjAuMCIsc2V0dGluZ3M6bCxkb2M6dSxjb2xsZWN0aW9uczp7dGFibGVFbnRpdGllczpkLHRhYmxlQ29sdW1uRW50aXRpZXM6cCxyZWxhdGlvbnNoaXBFbnRpdGllczpoLGluZGV4RW50aXRpZXM6ayxpbmRleENvbHVtbkVudGl0aWVzOlAsbWVtb0VudGl0aWVzOk19LGx3dzpjfX1mdW5jdGlvbiBfYSh0KXtyZXR1cm5bdCwtMSwtMSx7fV19ZnVuY3Rpb24gQ3QodCxlLG4pe3JldHVybiB0W2VdfHwodFtlXT1fYShuKSx0W2VdKX1mdW5jdGlvbiB6YSh0LGUsbixyLHMpe2NvbnN0IGk9Q3QodCxuLHIpLGE9aVsxXSxvPWlbMl07YTxlJiYoaVsxXT1lKSxvPGUmJnMoKX1mdW5jdGlvbiBSYSh0LGUsbixyLHMpe2NvbnN0IGk9Q3QodCxuLHIpLGE9aVsyXSxvPWlbMV07YTxlJiYoaVsyXT1lKSxvPD1lJiZzKCl9ZnVuY3Rpb24gWmEodCxlLG4scixzLGkpe2NvbnN0IGE9Q3QodCxuLHIpOyhhWzNdW3NdPz8tMSk8PWUmJihhWzNdW3NdPWUsaSgpKX1jbGFzcyBQYXtjb25zdHJ1Y3RvcihlKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywiY29sbGVjdGlvbnMiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTplfSl9Y29sbGVjdGlvbihlKXtyZXR1cm4gbmV3IFVhKHRoaXMuY29sbGVjdGlvbnNbZV0sZSl9fWNsYXNzIFVhe2NvbnN0cnVjdG9yKGUsbil7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsImNvbGxlY3Rpb24iLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTplfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsImNvbGxlY3Rpb25LZXkiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpufSl9c2VsZWN0QnlJZChlKXtyZXR1cm4gdGhpcy5jb2xsZWN0aW9uW2VdfXNlbGVjdEJ5SWRzKGUpe3JldHVybiBlLmxlbmd0aCxlLm1hcChuPT50aGlzLnNlbGVjdEJ5SWQobikpLmZpbHRlcihCb29sZWFuKX1zZWxlY3RFbnRpdGllcygpe3JldHVybiB0aGlzLmNvbGxlY3Rpb259c2VsZWN0QWxsKCl7cmV0dXJuIE9iamVjdC52YWx1ZXModGhpcy5jb2xsZWN0aW9uKX1zZXRPbmUoZSl7cmV0dXJuIHRoaXMuY29sbGVjdGlvbltlLmlkXT1lLHRoaXN9c2V0TWFueShlKXtyZXR1cm4gZS5mb3JFYWNoKG49PnRoaXMuc2V0T25lKG4pKSx0aGlzfXNldEFsbChlKXtyZXR1cm4gdGhpcy5yZW1vdmVBbGwoKSx0aGlzLnNldE1hbnkoZSksdGhpc31hZGRPbmUoZSl7cmV0dXJuIHRoaXMuc2VsZWN0QnlJZChlLmlkKT90aGlzOih0aGlzLnNldE9uZShlKSx0aGlzKX1hZGRNYW55KGUpe3JldHVybiBlLmZvckVhY2gobj0+dGhpcy5hZGRPbmUobikpLHRoaXN9cmVtb3ZlT25lKGUpe3JldHVybiB0aGlzLnNlbGVjdEJ5SWQoZSkmJlJlZmxlY3QuZGVsZXRlUHJvcGVydHkodGhpcy5jb2xsZWN0aW9uLGUpLHRoaXN9cmVtb3ZlTWFueShlKXtyZXR1cm4gZS5mb3JFYWNoKG49PnRoaXMucmVtb3ZlT25lKG4pKSx0aGlzfXJlbW92ZUFsbCgpe3JldHVybiB0aGlzLmNvbGxlY3Rpb249e30sdGhpc311cGRhdGVPbmUoZSxuKXtjb25zdCByPXRoaXMuc2VsZWN0QnlJZChlKTtyZXR1cm4gciYmKG4ociksci5tZXRhLnVwZGF0ZUF0PURhdGUubm93KCkpLHRoaXN9dXBkYXRlTWFueShlLG4pe3JldHVybiBlLmZvckVhY2gocj0+dGhpcy51cGRhdGVPbmUocixuKSksdGhpc31nZXRPckNyZWF0ZShlLG4pe2NvbnN0IHI9dGhpcy5zZWxlY3RCeUlkKGUpO2lmKHIpcmV0dXJuIHI7Y29uc3Qgcz1uKGUpO3JldHVybiB0aGlzLnNldE9uZShzKSx0aGlzLnNlbGVjdEJ5SWQoZSl9YWRkT3BlcmF0b3IoZSxuLHIscyl7cmV0dXJuIHphKGUsbixyLHRoaXMuY29sbGVjdGlvbktleSxzKSx0aGlzfXJlbW92ZU9wZXJhdG9yKGUsbixyLHMpe3JldHVybiBSYShlLG4scix0aGlzLmNvbGxlY3Rpb25LZXkscyksdGhpc31yZXBsYWNlT3BlcmF0b3IoZSxuLHIscyxpKXtyZXR1cm4gWmEoZSxuLHIsdGhpcy5jb2xsZWN0aW9uS2V5LHMsaSksdGhpc319Y29uc3QgQT10PT5uZXcgUGEodCk7Y2xhc3MgdWUgZXh0ZW5kcyBFcnJvcnt9Y2xhc3MgSGEgZXh0ZW5kcyB1ZXtjb25zdHJ1Y3RvcihlKXtzdXBlcihgSW52YWxpZCBEYXRlVGltZTogJHtlLnRvTWVzc2FnZSgpfWApfX1jbGFzcyBqYSBleHRlbmRzIHVle2NvbnN0cnVjdG9yKGUpe3N1cGVyKGBJbnZhbGlkIEludGVydmFsOiAke2UudG9NZXNzYWdlKCl9YCl9fWNsYXNzIHFhIGV4dGVuZHMgdWV7Y29uc3RydWN0b3IoZSl7c3VwZXIoYEludmFsaWQgRHVyYXRpb246ICR7ZS50b01lc3NhZ2UoKX1gKX19Y2xhc3Mga2UgZXh0ZW5kcyB1ZXt9Y2xhc3MgQW4gZXh0ZW5kcyB1ZXtjb25zdHJ1Y3RvcihlKXtzdXBlcihgSW52YWxpZCB1bml0ICR7ZX1gKX19Y2xhc3MgRCBleHRlbmRzIHVle31jbGFzcyB0ZSBleHRlbmRzIHVle2NvbnN0cnVjdG9yKCl7c3VwZXIoIlpvbmUgaXMgYW4gYWJzdHJhY3QgY2xhc3MiKX19Y29uc3QgZj0ibnVtZXJpYyIsXz0ic2hvcnQiLEM9ImxvbmciLGV0PXt5ZWFyOmYsbW9udGg6ZixkYXk6Zn0sVm49e3llYXI6Zixtb250aDpfLGRheTpmfSxZYT17eWVhcjpmLG1vbnRoOl8sZGF5OmYsd2Vla2RheTpffSxXbj17eWVhcjpmLG1vbnRoOkMsZGF5OmZ9LExuPXt5ZWFyOmYsbW9udGg6QyxkYXk6Zix3ZWVrZGF5OkN9LCRuPXtob3VyOmYsbWludXRlOmZ9LF9uPXtob3VyOmYsbWludXRlOmYsc2Vjb25kOmZ9LHpuPXtob3VyOmYsbWludXRlOmYsc2Vjb25kOmYsdGltZVpvbmVOYW1lOl99LFJuPXtob3VyOmYsbWludXRlOmYsc2Vjb25kOmYsdGltZVpvbmVOYW1lOkN9LFpuPXtob3VyOmYsbWludXRlOmYsaG91ckN5Y2xlOiJoMjMifSxQbj17aG91cjpmLG1pbnV0ZTpmLHNlY29uZDpmLGhvdXJDeWNsZToiaDIzIn0sVW49e2hvdXI6ZixtaW51dGU6ZixzZWNvbmQ6Zixob3VyQ3ljbGU6ImgyMyIsdGltZVpvbmVOYW1lOl99LEhuPXtob3VyOmYsbWludXRlOmYsc2Vjb25kOmYsaG91ckN5Y2xlOiJoMjMiLHRpbWVab25lTmFtZTpDfSxqbj17eWVhcjpmLG1vbnRoOmYsZGF5OmYsaG91cjpmLG1pbnV0ZTpmfSxxbj17eWVhcjpmLG1vbnRoOmYsZGF5OmYsaG91cjpmLG1pbnV0ZTpmLHNlY29uZDpmfSxZbj17eWVhcjpmLG1vbnRoOl8sZGF5OmYsaG91cjpmLG1pbnV0ZTpmfSxHbj17eWVhcjpmLG1vbnRoOl8sZGF5OmYsaG91cjpmLG1pbnV0ZTpmLHNlY29uZDpmfSxHYT17eWVhcjpmLG1vbnRoOl8sZGF5OmYsd2Vla2RheTpfLGhvdXI6ZixtaW51dGU6Zn0sSm49e3llYXI6Zixtb250aDpDLGRheTpmLGhvdXI6ZixtaW51dGU6Zix0aW1lWm9uZU5hbWU6X30sQm49e3llYXI6Zixtb250aDpDLGRheTpmLGhvdXI6ZixtaW51dGU6ZixzZWNvbmQ6Zix0aW1lWm9uZU5hbWU6X30sUW49e3llYXI6Zixtb250aDpDLGRheTpmLHdlZWtkYXk6Qyxob3VyOmYsbWludXRlOmYsdGltZVpvbmVOYW1lOkN9LEtuPXt5ZWFyOmYsbW9udGg6QyxkYXk6Zix3ZWVrZGF5OkMsaG91cjpmLG1pbnV0ZTpmLHNlY29uZDpmLHRpbWVab25lTmFtZTpDfTtjbGFzcyBMZXtnZXQgdHlwZSgpe3Rocm93IG5ldyB0ZX1nZXQgbmFtZSgpe3Rocm93IG5ldyB0ZX1nZXQgaWFuYU5hbWUoKXtyZXR1cm4gdGhpcy5uYW1lfWdldCBpc1VuaXZlcnNhbCgpe3Rocm93IG5ldyB0ZX1vZmZzZXROYW1lKGUsbil7dGhyb3cgbmV3IHRlfWZvcm1hdE9mZnNldChlLG4pe3Rocm93IG5ldyB0ZX1vZmZzZXQoZSl7dGhyb3cgbmV3IHRlfWVxdWFscyhlKXt0aHJvdyBuZXcgdGV9Z2V0IGlzVmFsaWQoKXt0aHJvdyBuZXcgdGV9fWxldCBGdD1udWxsO2NsYXNzIHR0IGV4dGVuZHMgTGV7c3RhdGljIGdldCBpbnN0YW5jZSgpe3JldHVybiBGdD09PW51bGwmJihGdD1uZXcgdHQpLEZ0fWdldCB0eXBlKCl7cmV0dXJuInN5c3RlbSJ9Z2V0IG5hbWUoKXtyZXR1cm4gbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQoKS5yZXNvbHZlZE9wdGlvbnMoKS50aW1lWm9uZX1nZXQgaXNVbml2ZXJzYWwoKXtyZXR1cm4hMX1vZmZzZXROYW1lKGUse2Zvcm1hdDpuLGxvY2FsZTpyfSl7cmV0dXJuIGtyKGUsbixyKX1mb3JtYXRPZmZzZXQoZSxuKXtyZXR1cm4gUmUodGhpcy5vZmZzZXQoZSksbil9b2Zmc2V0KGUpe3JldHVybi1uZXcgRGF0ZShlKS5nZXRUaW1lem9uZU9mZnNldCgpfWVxdWFscyhlKXtyZXR1cm4gZS50eXBlPT09InN5c3RlbSJ9Z2V0IGlzVmFsaWQoKXtyZXR1cm4hMH19bGV0IG50PXt9O2Z1bmN0aW9uIEphKHQpe3JldHVybiBudFt0XXx8KG50W3RdPW5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KCJlbi1VUyIse2hvdXIxMjohMSx0aW1lWm9uZTp0LHllYXI6Im51bWVyaWMiLG1vbnRoOiIyLWRpZ2l0IixkYXk6IjItZGlnaXQiLGhvdXI6IjItZGlnaXQiLG1pbnV0ZToiMi1kaWdpdCIsc2Vjb25kOiIyLWRpZ2l0IixlcmE6InNob3J0In0pKSxudFt0XX1jb25zdCBCYT17eWVhcjowLG1vbnRoOjEsZGF5OjIsZXJhOjMsaG91cjo0LG1pbnV0ZTo1LHNlY29uZDo2fTtmdW5jdGlvbiBRYSh0LGUpe2NvbnN0IG49dC5mb3JtYXQoZSkucmVwbGFjZSgvXHUyMDBFL2csIiIpLHI9LyhcZCspXC8oXGQrKVwvKFxkKykgKEFEfEJDKSw/IChcZCspOihcZCspOihcZCspLy5leGVjKG4pLFsscyxpLGEsbyxsLHUsY109cjtyZXR1cm5bYSxzLGksbyxsLHUsY119ZnVuY3Rpb24gS2EodCxlKXtjb25zdCBuPXQuZm9ybWF0VG9QYXJ0cyhlKSxyPVtdO2ZvcihsZXQgcz0wO3M8bi5sZW5ndGg7cysrKXtjb25zdHt0eXBlOmksdmFsdWU6YX09bltzXSxvPUJhW2ldO2k9PT0iZXJhIj9yW29dPWE6eShvKXx8KHJbb109cGFyc2VJbnQoYSwxMCkpfXJldHVybiByfWxldCBydD17fTtjbGFzcyBKIGV4dGVuZHMgTGV7c3RhdGljIGNyZWF0ZShlKXtyZXR1cm4gcnRbZV18fChydFtlXT1uZXcgSihlKSkscnRbZV19c3RhdGljIHJlc2V0Q2FjaGUoKXtydD17fSxudD17fX1zdGF0aWMgaXNWYWxpZFNwZWNpZmllcihlKXtyZXR1cm4gdGhpcy5pc1ZhbGlkWm9uZShlKX1zdGF0aWMgaXNWYWxpZFpvbmUoZSl7aWYoIWUpcmV0dXJuITE7dHJ5e3JldHVybiBuZXcgSW50bC5EYXRlVGltZUZvcm1hdCgiZW4tVVMiLHt0aW1lWm9uZTplfSkuZm9ybWF0KCksITB9Y2F0Y2h7cmV0dXJuITF9fWNvbnN0cnVjdG9yKGUpe3N1cGVyKCksdGhpcy56b25lTmFtZT1lLHRoaXMudmFsaWQ9Si5pc1ZhbGlkWm9uZShlKX1nZXQgdHlwZSgpe3JldHVybiJpYW5hIn1nZXQgbmFtZSgpe3JldHVybiB0aGlzLnpvbmVOYW1lfWdldCBpc1VuaXZlcnNhbCgpe3JldHVybiExfW9mZnNldE5hbWUoZSx7Zm9ybWF0Om4sbG9jYWxlOnJ9KXtyZXR1cm4ga3IoZSxuLHIsdGhpcy5uYW1lKX1mb3JtYXRPZmZzZXQoZSxuKXtyZXR1cm4gUmUodGhpcy5vZmZzZXQoZSksbil9b2Zmc2V0KGUpe2NvbnN0IG49bmV3IERhdGUoZSk7aWYoaXNOYU4obikpcmV0dXJuIE5hTjtjb25zdCByPUphKHRoaXMubmFtZSk7bGV0W3MsaSxhLG8sbCx1LGNdPXIuZm9ybWF0VG9QYXJ0cz9LYShyLG4pOlFhKHIsbik7bz09PSJCQyImJihzPS1NYXRoLmFicyhzKSsxKTtjb25zdCBwPWx0KHt5ZWFyOnMsbW9udGg6aSxkYXk6YSxob3VyOmw9PT0yND8wOmwsbWludXRlOnUsc2Vjb25kOmMsbWlsbGlzZWNvbmQ6MH0pO2xldCBoPStuO2NvbnN0IGs9aCUxZTM7cmV0dXJuIGgtPWs+PTA/azoxZTMraywocC1oKS8oNjAqMWUzKX1lcXVhbHMoZSl7cmV0dXJuIGUudHlwZT09PSJpYW5hIiYmZS5uYW1lPT09dGhpcy5uYW1lfWdldCBpc1ZhbGlkKCl7cmV0dXJuIHRoaXMudmFsaWR9fWxldCBYbj17fTtmdW5jdGlvbiBYYSh0LGU9e30pe2NvbnN0IG49SlNPTi5zdHJpbmdpZnkoW3QsZV0pO2xldCByPVhuW25dO3JldHVybiByfHwocj1uZXcgSW50bC5MaXN0Rm9ybWF0KHQsZSksWG5bbl09cikscn1sZXQgQXQ9e307ZnVuY3Rpb24gVnQodCxlPXt9KXtjb25zdCBuPUpTT04uc3RyaW5naWZ5KFt0LGVdKTtsZXQgcj1BdFtuXTtyZXR1cm4gcnx8KHI9bmV3IEludGwuRGF0ZVRpbWVGb3JtYXQodCxlKSxBdFtuXT1yKSxyfWxldCBXdD17fTtmdW5jdGlvbiBlbyh0LGU9e30pe2NvbnN0IG49SlNPTi5zdHJpbmdpZnkoW3QsZV0pO2xldCByPVd0W25dO3JldHVybiByfHwocj1uZXcgSW50bC5OdW1iZXJGb3JtYXQodCxlKSxXdFtuXT1yKSxyfWxldCBMdD17fTtmdW5jdGlvbiB0byh0LGU9e30pe2NvbnN0e2Jhc2U6biwuLi5yfT1lLHM9SlNPTi5zdHJpbmdpZnkoW3Qscl0pO2xldCBpPUx0W3NdO3JldHVybiBpfHwoaT1uZXcgSW50bC5SZWxhdGl2ZVRpbWVGb3JtYXQodCxlKSxMdFtzXT1pKSxpfWxldCAkZT1udWxsO2Z1bmN0aW9uIG5vKCl7cmV0dXJuICRlfHwoJGU9bmV3IEludGwuRGF0ZVRpbWVGb3JtYXQoKS5yZXNvbHZlZE9wdGlvbnMoKS5sb2NhbGUsJGUpfWxldCBlcj17fTtmdW5jdGlvbiBybyh0KXtsZXQgZT1lclt0XTtpZighZSl7Y29uc3Qgbj1uZXcgSW50bC5Mb2NhbGUodCk7ZT0iZ2V0V2Vla0luZm8iaW4gbj9uLmdldFdlZWtJbmZvKCk6bi53ZWVrSW5mbyxlclt0XT1lfXJldHVybiBlfWZ1bmN0aW9uIHNvKHQpe2NvbnN0IGU9dC5pbmRleE9mKCIteC0iKTtlIT09LTEmJih0PXQuc3Vic3RyaW5nKDAsZSkpO2NvbnN0IG49dC5pbmRleE9mKCItdS0iKTtpZihuPT09LTEpcmV0dXJuW3RdO3tsZXQgcixzO3RyeXtyPVZ0KHQpLnJlc29sdmVkT3B0aW9ucygpLHM9dH1jYXRjaHtjb25zdCBsPXQuc3Vic3RyaW5nKDAsbik7cj1WdChsKS5yZXNvbHZlZE9wdGlvbnMoKSxzPWx9Y29uc3R7bnVtYmVyaW5nU3lzdGVtOmksY2FsZW5kYXI6YX09cjtyZXR1cm5bcyxpLGFdfX1mdW5jdGlvbiBpbyh0LGUsbil7cmV0dXJuKG58fGUpJiYodC5pbmNsdWRlcygiLXUtIil8fCh0Kz0iLXUiKSxuJiYodCs9YC1jYS0ke259YCksZSYmKHQrPWAtbnUtJHtlfWApKSx0fWZ1bmN0aW9uIGFvKHQpe2NvbnN0IGU9W107Zm9yKGxldCBuPTE7bjw9MTI7bisrKXtjb25zdCByPWcudXRjKDIwMDksbiwxKTtlLnB1c2godChyKSl9cmV0dXJuIGV9ZnVuY3Rpb24gb28odCl7Y29uc3QgZT1bXTtmb3IobGV0IG49MTtuPD03O24rKyl7Y29uc3Qgcj1nLnV0YygyMDE2LDExLDEzK24pO2UucHVzaCh0KHIpKX1yZXR1cm4gZX1mdW5jdGlvbiBzdCh0LGUsbixyKXtjb25zdCBzPXQubGlzdGluZ01vZGUoKTtyZXR1cm4gcz09PSJlcnJvciI/bnVsbDpzPT09ImVuIj9uKGUpOnIoZSl9ZnVuY3Rpb24gbG8odCl7cmV0dXJuIHQubnVtYmVyaW5nU3lzdGVtJiZ0Lm51bWJlcmluZ1N5c3RlbSE9PSJsYXRuIj8hMTp0Lm51bWJlcmluZ1N5c3RlbT09PSJsYXRuInx8IXQubG9jYWxlfHx0LmxvY2FsZS5zdGFydHNXaXRoKCJlbiIpfHxuZXcgSW50bC5EYXRlVGltZUZvcm1hdCh0LmludGwpLnJlc29sdmVkT3B0aW9ucygpLm51bWJlcmluZ1N5c3RlbT09PSJsYXRuIn1jbGFzcyB1b3tjb25zdHJ1Y3RvcihlLG4scil7dGhpcy5wYWRUbz1yLnBhZFRvfHwwLHRoaXMuZmxvb3I9ci5mbG9vcnx8ITE7Y29uc3R7cGFkVG86cyxmbG9vcjppLC4uLmF9PXI7aWYoIW58fE9iamVjdC5rZXlzKGEpLmxlbmd0aD4wKXtjb25zdCBvPXt1c2VHcm91cGluZzohMSwuLi5yfTtyLnBhZFRvPjAmJihvLm1pbmltdW1JbnRlZ2VyRGlnaXRzPXIucGFkVG8pLHRoaXMuaW5mPWVvKGUsbyl9fWZvcm1hdChlKXtpZih0aGlzLmluZil7Y29uc3Qgbj10aGlzLmZsb29yP01hdGguZmxvb3IoZSk6ZTtyZXR1cm4gdGhpcy5pbmYuZm9ybWF0KG4pfWVsc2V7Y29uc3Qgbj10aGlzLmZsb29yP01hdGguZmxvb3IoZSk6VXQoZSwzKTtyZXR1cm4gSShuLHRoaXMucGFkVG8pfX19Y2xhc3MgY297Y29uc3RydWN0b3IoZSxuLHIpe3RoaXMub3B0cz1yLHRoaXMub3JpZ2luYWxab25lPXZvaWQgMDtsZXQgcztpZih0aGlzLm9wdHMudGltZVpvbmUpdGhpcy5kdD1lO2Vsc2UgaWYoZS56b25lLnR5cGU9PT0iZml4ZWQiKXtjb25zdCBhPS0xKihlLm9mZnNldC82MCksbz1hPj0wP2BFdGMvR01UKyR7YX1gOmBFdGMvR01UJHthfWA7ZS5vZmZzZXQhPT0wJiZKLmNyZWF0ZShvKS52YWxpZD8ocz1vLHRoaXMuZHQ9ZSk6KHM9IlVUQyIsdGhpcy5kdD1lLm9mZnNldD09PTA/ZTplLnNldFpvbmUoIlVUQyIpLnBsdXMoe21pbnV0ZXM6ZS5vZmZzZXR9KSx0aGlzLm9yaWdpbmFsWm9uZT1lLnpvbmUpfWVsc2UgZS56b25lLnR5cGU9PT0ic3lzdGVtIj90aGlzLmR0PWU6ZS56b25lLnR5cGU9PT0iaWFuYSI/KHRoaXMuZHQ9ZSxzPWUuem9uZS5uYW1lKToocz0iVVRDIix0aGlzLmR0PWUuc2V0Wm9uZSgiVVRDIikucGx1cyh7bWludXRlczplLm9mZnNldH0pLHRoaXMub3JpZ2luYWxab25lPWUuem9uZSk7Y29uc3QgaT17Li4udGhpcy5vcHRzfTtpLnRpbWVab25lPWkudGltZVpvbmV8fHMsdGhpcy5kdGY9VnQobixpKX1mb3JtYXQoKXtyZXR1cm4gdGhpcy5vcmlnaW5hbFpvbmU/dGhpcy5mb3JtYXRUb1BhcnRzKCkubWFwKCh7dmFsdWU6ZX0pPT5lKS5qb2luKCIiKTp0aGlzLmR0Zi5mb3JtYXQodGhpcy5kdC50b0pTRGF0ZSgpKX1mb3JtYXRUb1BhcnRzKCl7Y29uc3QgZT10aGlzLmR0Zi5mb3JtYXRUb1BhcnRzKHRoaXMuZHQudG9KU0RhdGUoKSk7cmV0dXJuIHRoaXMub3JpZ2luYWxab25lP2UubWFwKG49PntpZihuLnR5cGU9PT0idGltZVpvbmVOYW1lIil7Y29uc3Qgcj10aGlzLm9yaWdpbmFsWm9uZS5vZmZzZXROYW1lKHRoaXMuZHQudHMse2xvY2FsZTp0aGlzLmR0LmxvY2FsZSxmb3JtYXQ6dGhpcy5vcHRzLnRpbWVab25lTmFtZX0pO3JldHVybnsuLi5uLHZhbHVlOnJ9fWVsc2UgcmV0dXJuIG59KTplfXJlc29sdmVkT3B0aW9ucygpe3JldHVybiB0aGlzLmR0Zi5yZXNvbHZlZE9wdGlvbnMoKX19Y2xhc3MgZm97Y29uc3RydWN0b3IoZSxuLHIpe3RoaXMub3B0cz17c3R5bGU6ImxvbmciLC4uLnJ9LCFuJiZ3cigpJiYodGhpcy5ydGY9dG8oZSxyKSl9Zm9ybWF0KGUsbil7cmV0dXJuIHRoaXMucnRmP3RoaXMucnRmLmZvcm1hdChlLG4pOkZvKG4sZSx0aGlzLm9wdHMubnVtZXJpYyx0aGlzLm9wdHMuc3R5bGUhPT0ibG9uZyIpfWZvcm1hdFRvUGFydHMoZSxuKXtyZXR1cm4gdGhpcy5ydGY/dGhpcy5ydGYuZm9ybWF0VG9QYXJ0cyhlLG4pOltdfX1jb25zdCBobz17Zmlyc3REYXk6MSxtaW5pbWFsRGF5czo0LHdlZWtlbmQ6WzYsN119O2NsYXNzIE97c3RhdGljIGZyb21PcHRzKGUpe3JldHVybiBPLmNyZWF0ZShlLmxvY2FsZSxlLm51bWJlcmluZ1N5c3RlbSxlLm91dHB1dENhbGVuZGFyLGUud2Vla1NldHRpbmdzLGUuZGVmYXVsdFRvRU4pfXN0YXRpYyBjcmVhdGUoZSxuLHIscyxpPSExKXtjb25zdCBhPWV8fHYuZGVmYXVsdExvY2FsZSxvPWF8fChpPyJlbi1VUyI6bm8oKSksbD1ufHx2LmRlZmF1bHROdW1iZXJpbmdTeXN0ZW0sdT1yfHx2LmRlZmF1bHRPdXRwdXRDYWxlbmRhcixjPVp0KHMpfHx2LmRlZmF1bHRXZWVrU2V0dGluZ3M7cmV0dXJuIG5ldyBPKG8sbCx1LGMsYSl9c3RhdGljIHJlc2V0Q2FjaGUoKXskZT1udWxsLEF0PXt9LFd0PXt9LEx0PXt9fXN0YXRpYyBmcm9tT2JqZWN0KHtsb2NhbGU6ZSxudW1iZXJpbmdTeXN0ZW06bixvdXRwdXRDYWxlbmRhcjpyLHdlZWtTZXR0aW5nczpzfT17fSl7cmV0dXJuIE8uY3JlYXRlKGUsbixyLHMpfWNvbnN0cnVjdG9yKGUsbixyLHMsaSl7Y29uc3RbYSxvLGxdPXNvKGUpO3RoaXMubG9jYWxlPWEsdGhpcy5udW1iZXJpbmdTeXN0ZW09bnx8b3x8bnVsbCx0aGlzLm91dHB1dENhbGVuZGFyPXJ8fGx8fG51bGwsdGhpcy53ZWVrU2V0dGluZ3M9cyx0aGlzLmludGw9aW8odGhpcy5sb2NhbGUsdGhpcy5udW1iZXJpbmdTeXN0ZW0sdGhpcy5vdXRwdXRDYWxlbmRhciksdGhpcy53ZWVrZGF5c0NhY2hlPXtmb3JtYXQ6e30sc3RhbmRhbG9uZTp7fX0sdGhpcy5tb250aHNDYWNoZT17Zm9ybWF0Ont9LHN0YW5kYWxvbmU6e319LHRoaXMubWVyaWRpZW1DYWNoZT1udWxsLHRoaXMuZXJhQ2FjaGU9e30sdGhpcy5zcGVjaWZpZWRMb2NhbGU9aSx0aGlzLmZhc3ROdW1iZXJzQ2FjaGVkPW51bGx9Z2V0IGZhc3ROdW1iZXJzKCl7cmV0dXJuIHRoaXMuZmFzdE51bWJlcnNDYWNoZWQ9PW51bGwmJih0aGlzLmZhc3ROdW1iZXJzQ2FjaGVkPWxvKHRoaXMpKSx0aGlzLmZhc3ROdW1iZXJzQ2FjaGVkfWxpc3RpbmdNb2RlKCl7Y29uc3QgZT10aGlzLmlzRW5nbGlzaCgpLG49KHRoaXMubnVtYmVyaW5nU3lzdGVtPT09bnVsbHx8dGhpcy5udW1iZXJpbmdTeXN0ZW09PT0ibGF0biIpJiYodGhpcy5vdXRwdXRDYWxlbmRhcj09PW51bGx8fHRoaXMub3V0cHV0Q2FsZW5kYXI9PT0iZ3JlZ29yeSIpO3JldHVybiBlJiZuPyJlbiI6ImludGwifWNsb25lKGUpe3JldHVybiFlfHxPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhlKS5sZW5ndGg9PT0wP3RoaXM6Ty5jcmVhdGUoZS5sb2NhbGV8fHRoaXMuc3BlY2lmaWVkTG9jYWxlLGUubnVtYmVyaW5nU3lzdGVtfHx0aGlzLm51bWJlcmluZ1N5c3RlbSxlLm91dHB1dENhbGVuZGFyfHx0aGlzLm91dHB1dENhbGVuZGFyLFp0KGUud2Vla1NldHRpbmdzKXx8dGhpcy53ZWVrU2V0dGluZ3MsZS5kZWZhdWx0VG9FTnx8ITEpfXJlZGVmYXVsdFRvRU4oZT17fSl7cmV0dXJuIHRoaXMuY2xvbmUoey4uLmUsZGVmYXVsdFRvRU46ITB9KX1yZWRlZmF1bHRUb1N5c3RlbShlPXt9KXtyZXR1cm4gdGhpcy5jbG9uZSh7Li4uZSxkZWZhdWx0VG9FTjohMX0pfW1vbnRocyhlLG49ITEpe3JldHVybiBzdCh0aGlzLGUsSXIsKCk9Pntjb25zdCByPW4/e21vbnRoOmUsZGF5OiJudW1lcmljIn06e21vbnRoOmV9LHM9bj8iZm9ybWF0Ijoic3RhbmRhbG9uZSI7cmV0dXJuIHRoaXMubW9udGhzQ2FjaGVbc11bZV18fCh0aGlzLm1vbnRoc0NhY2hlW3NdW2VdPWFvKGk9PnRoaXMuZXh0cmFjdChpLHIsIm1vbnRoIikpKSx0aGlzLm1vbnRoc0NhY2hlW3NdW2VdfSl9d2Vla2RheXMoZSxuPSExKXtyZXR1cm4gc3QodGhpcyxlLE1yLCgpPT57Y29uc3Qgcj1uP3t3ZWVrZGF5OmUseWVhcjoibnVtZXJpYyIsbW9udGg6ImxvbmciLGRheToibnVtZXJpYyJ9Ont3ZWVrZGF5OmV9LHM9bj8iZm9ybWF0Ijoic3RhbmRhbG9uZSI7cmV0dXJuIHRoaXMud2Vla2RheXNDYWNoZVtzXVtlXXx8KHRoaXMud2Vla2RheXNDYWNoZVtzXVtlXT1vbyhpPT50aGlzLmV4dHJhY3QoaSxyLCJ3ZWVrZGF5IikpKSx0aGlzLndlZWtkYXlzQ2FjaGVbc11bZV19KX1tZXJpZGllbXMoKXtyZXR1cm4gc3QodGhpcyx2b2lkIDAsKCk9PnhyLCgpPT57aWYoIXRoaXMubWVyaWRpZW1DYWNoZSl7Y29uc3QgZT17aG91cjoibnVtZXJpYyIsaG91ckN5Y2xlOiJoMTIifTt0aGlzLm1lcmlkaWVtQ2FjaGU9W2cudXRjKDIwMTYsMTEsMTMsOSksZy51dGMoMjAxNiwxMSwxMywxOSldLm1hcChuPT50aGlzLmV4dHJhY3QobixlLCJkYXlwZXJpb2QiKSl9cmV0dXJuIHRoaXMubWVyaWRpZW1DYWNoZX0pfWVyYXMoZSl7cmV0dXJuIHN0KHRoaXMsZSxEciwoKT0+e2NvbnN0IG49e2VyYTplfTtyZXR1cm4gdGhpcy5lcmFDYWNoZVtlXXx8KHRoaXMuZXJhQ2FjaGVbZV09W2cudXRjKC00MCwxLDEpLGcudXRjKDIwMTcsMSwxKV0ubWFwKHI9PnRoaXMuZXh0cmFjdChyLG4sImVyYSIpKSksdGhpcy5lcmFDYWNoZVtlXX0pfWV4dHJhY3QoZSxuLHIpe2NvbnN0IHM9dGhpcy5kdEZvcm1hdHRlcihlLG4pLGk9cy5mb3JtYXRUb1BhcnRzKCksYT1pLmZpbmQobz0+by50eXBlLnRvTG93ZXJDYXNlKCk9PT1yKTtyZXR1cm4gYT9hLnZhbHVlOm51bGx9bnVtYmVyRm9ybWF0dGVyKGU9e30pe3JldHVybiBuZXcgdW8odGhpcy5pbnRsLGUuZm9yY2VTaW1wbGV8fHRoaXMuZmFzdE51bWJlcnMsZSl9ZHRGb3JtYXR0ZXIoZSxuPXt9KXtyZXR1cm4gbmV3IGNvKGUsdGhpcy5pbnRsLG4pfXJlbEZvcm1hdHRlcihlPXt9KXtyZXR1cm4gbmV3IGZvKHRoaXMuaW50bCx0aGlzLmlzRW5nbGlzaCgpLGUpfWxpc3RGb3JtYXR0ZXIoZT17fSl7cmV0dXJuIFhhKHRoaXMuaW50bCxlKX1pc0VuZ2xpc2goKXtyZXR1cm4gdGhpcy5sb2NhbGU9PT0iZW4ifHx0aGlzLmxvY2FsZS50b0xvd2VyQ2FzZSgpPT09ImVuLXVzInx8bmV3IEludGwuRGF0ZVRpbWVGb3JtYXQodGhpcy5pbnRsKS5yZXNvbHZlZE9wdGlvbnMoKS5sb2NhbGUuc3RhcnRzV2l0aCgiZW4tdXMiKX1nZXRXZWVrU2V0dGluZ3MoKXtyZXR1cm4gdGhpcy53ZWVrU2V0dGluZ3M/dGhpcy53ZWVrU2V0dGluZ3M6VHIoKT9ybyh0aGlzLmxvY2FsZSk6aG99Z2V0U3RhcnRPZldlZWsoKXtyZXR1cm4gdGhpcy5nZXRXZWVrU2V0dGluZ3MoKS5maXJzdERheX1nZXRNaW5EYXlzSW5GaXJzdFdlZWsoKXtyZXR1cm4gdGhpcy5nZXRXZWVrU2V0dGluZ3MoKS5taW5pbWFsRGF5c31nZXRXZWVrZW5kRGF5cygpe3JldHVybiB0aGlzLmdldFdlZWtTZXR0aW5ncygpLndlZWtlbmR9ZXF1YWxzKGUpe3JldHVybiB0aGlzLmxvY2FsZT09PWUubG9jYWxlJiZ0aGlzLm51bWJlcmluZ1N5c3RlbT09PWUubnVtYmVyaW5nU3lzdGVtJiZ0aGlzLm91dHB1dENhbGVuZGFyPT09ZS5vdXRwdXRDYWxlbmRhcn19bGV0ICR0PW51bGw7Y2xhc3MgeCBleHRlbmRzIExle3N0YXRpYyBnZXQgdXRjSW5zdGFuY2UoKXtyZXR1cm4gJHQ9PT1udWxsJiYoJHQ9bmV3IHgoMCkpLCR0fXN0YXRpYyBpbnN0YW5jZShlKXtyZXR1cm4gZT09PTA/eC51dGNJbnN0YW5jZTpuZXcgeChlKX1zdGF0aWMgcGFyc2VTcGVjaWZpZXIoZSl7aWYoZSl7Y29uc3Qgbj1lLm1hdGNoKC9edXRjKD86KFsrLV1cZHsxLDJ9KSg/OjooXGR7Mn0pKT8pPyQvaSk7aWYobilyZXR1cm4gbmV3IHgodXQoblsxXSxuWzJdKSl9cmV0dXJuIG51bGx9Y29uc3RydWN0b3IoZSl7c3VwZXIoKSx0aGlzLmZpeGVkPWV9Z2V0IHR5cGUoKXtyZXR1cm4iZml4ZWQifWdldCBuYW1lKCl7cmV0dXJuIHRoaXMuZml4ZWQ9PT0wPyJVVEMiOmBVVEMke1JlKHRoaXMuZml4ZWQsIm5hcnJvdyIpfWB9Z2V0IGlhbmFOYW1lKCl7cmV0dXJuIHRoaXMuZml4ZWQ9PT0wPyJFdGMvVVRDIjpgRXRjL0dNVCR7UmUoLXRoaXMuZml4ZWQsIm5hcnJvdyIpfWB9b2Zmc2V0TmFtZSgpe3JldHVybiB0aGlzLm5hbWV9Zm9ybWF0T2Zmc2V0KGUsbil7cmV0dXJuIFJlKHRoaXMuZml4ZWQsbil9Z2V0IGlzVW5pdmVyc2FsKCl7cmV0dXJuITB9b2Zmc2V0KCl7cmV0dXJuIHRoaXMuZml4ZWR9ZXF1YWxzKGUpe3JldHVybiBlLnR5cGU9PT0iZml4ZWQiJiZlLmZpeGVkPT09dGhpcy5maXhlZH1nZXQgaXNWYWxpZCgpe3JldHVybiEwfX1jbGFzcyBtbyBleHRlbmRzIExle2NvbnN0cnVjdG9yKGUpe3N1cGVyKCksdGhpcy56b25lTmFtZT1lfWdldCB0eXBlKCl7cmV0dXJuImludmFsaWQifWdldCBuYW1lKCl7cmV0dXJuIHRoaXMuem9uZU5hbWV9Z2V0IGlzVW5pdmVyc2FsKCl7cmV0dXJuITF9b2Zmc2V0TmFtZSgpe3JldHVybiBudWxsfWZvcm1hdE9mZnNldCgpe3JldHVybiIifW9mZnNldCgpe3JldHVybiBOYU59ZXF1YWxzKCl7cmV0dXJuITF9Z2V0IGlzVmFsaWQoKXtyZXR1cm4hMX19ZnVuY3Rpb24gbmUodCxlKXtpZih5KHQpfHx0PT09bnVsbClyZXR1cm4gZTtpZih0IGluc3RhbmNlb2YgTGUpcmV0dXJuIHQ7aWYocG8odCkpe2NvbnN0IG49dC50b0xvd2VyQ2FzZSgpO3JldHVybiBuPT09ImRlZmF1bHQiP2U6bj09PSJsb2NhbCJ8fG49PT0ic3lzdGVtIj90dC5pbnN0YW5jZTpuPT09InV0YyJ8fG49PT0iZ210Ij94LnV0Y0luc3RhbmNlOngucGFyc2VTcGVjaWZpZXIobil8fEouY3JlYXRlKHQpfWVsc2UgcmV0dXJuIGNlKHQpP3guaW5zdGFuY2UodCk6dHlwZW9mIHQ9PSJvYmplY3QiJiYib2Zmc2V0ImluIHQmJnR5cGVvZiB0Lm9mZnNldD09ImZ1bmN0aW9uIj90Om5ldyBtbyh0KX1sZXQgdHI9KCk9PkRhdGUubm93KCksbnI9InN5c3RlbSIscnI9bnVsbCxzcj1udWxsLGlyPW51bGwsYXI9NjAsb3IsbHI9bnVsbDtjbGFzcyB2e3N0YXRpYyBnZXQgbm93KCl7cmV0dXJuIHRyfXN0YXRpYyBzZXQgbm93KGUpe3RyPWV9c3RhdGljIHNldCBkZWZhdWx0Wm9uZShlKXtucj1lfXN0YXRpYyBnZXQgZGVmYXVsdFpvbmUoKXtyZXR1cm4gbmUobnIsdHQuaW5zdGFuY2UpfXN0YXRpYyBnZXQgZGVmYXVsdExvY2FsZSgpe3JldHVybiBycn1zdGF0aWMgc2V0IGRlZmF1bHRMb2NhbGUoZSl7cnI9ZX1zdGF0aWMgZ2V0IGRlZmF1bHROdW1iZXJpbmdTeXN0ZW0oKXtyZXR1cm4gc3J9c3RhdGljIHNldCBkZWZhdWx0TnVtYmVyaW5nU3lzdGVtKGUpe3NyPWV9c3RhdGljIGdldCBkZWZhdWx0T3V0cHV0Q2FsZW5kYXIoKXtyZXR1cm4gaXJ9c3RhdGljIHNldCBkZWZhdWx0T3V0cHV0Q2FsZW5kYXIoZSl7aXI9ZX1zdGF0aWMgZ2V0IGRlZmF1bHRXZWVrU2V0dGluZ3MoKXtyZXR1cm4gbHJ9c3RhdGljIHNldCBkZWZhdWx0V2Vla1NldHRpbmdzKGUpe2xyPVp0KGUpfXN0YXRpYyBnZXQgdHdvRGlnaXRDdXRvZmZZZWFyKCl7cmV0dXJuIGFyfXN0YXRpYyBzZXQgdHdvRGlnaXRDdXRvZmZZZWFyKGUpe2FyPWUlMTAwfXN0YXRpYyBnZXQgdGhyb3dPbkludmFsaWQoKXtyZXR1cm4gb3J9c3RhdGljIHNldCB0aHJvd09uSW52YWxpZChlKXtvcj1lfXN0YXRpYyByZXNldENhY2hlcygpe08ucmVzZXRDYWNoZSgpLEoucmVzZXRDYWNoZSgpfX1jbGFzcyB6e2NvbnN0cnVjdG9yKGUsbil7dGhpcy5yZWFzb249ZSx0aGlzLmV4cGxhbmF0aW9uPW59dG9NZXNzYWdlKCl7cmV0dXJuIHRoaXMuZXhwbGFuYXRpb24/YCR7dGhpcy5yZWFzb259OiAke3RoaXMuZXhwbGFuYXRpb259YDp0aGlzLnJlYXNvbn19Y29uc3QgdXI9WzAsMzEsNTksOTAsMTIwLDE1MSwxODEsMjEyLDI0MywyNzMsMzA0LDMzNF0sY3I9WzAsMzEsNjAsOTEsMTIxLDE1MiwxODIsMjEzLDI0NCwyNzQsMzA1LDMzNV07ZnVuY3Rpb24gVih0LGUpe3JldHVybiBuZXcgeigidW5pdCBvdXQgb2YgcmFuZ2UiLGB5b3Ugc3BlY2lmaWVkICR7ZX0gKG9mIHR5cGUgJHt0eXBlb2YgZX0pIGFzIGEgJHt0fSwgd2hpY2ggaXMgaW52YWxpZGApfWZ1bmN0aW9uIF90KHQsZSxuKXtjb25zdCByPW5ldyBEYXRlKERhdGUuVVRDKHQsZS0xLG4pKTt0PDEwMCYmdD49MCYmci5zZXRVVENGdWxsWWVhcihyLmdldFVUQ0Z1bGxZZWFyKCktMTkwMCk7Y29uc3Qgcz1yLmdldFVUQ0RheSgpO3JldHVybiBzPT09MD83OnN9ZnVuY3Rpb24gZnIodCxlLG4pe3JldHVybiBuKyhfZSh0KT9jcjp1cilbZS0xXX1mdW5jdGlvbiBkcih0LGUpe2NvbnN0IG49X2UodCk/Y3I6dXIscj1uLmZpbmRJbmRleChpPT5pPGUpLHM9ZS1uW3JdO3JldHVybnttb250aDpyKzEsZGF5OnN9fWZ1bmN0aW9uIHp0KHQsZSl7cmV0dXJuKHQtZSs3KSU3KzF9ZnVuY3Rpb24gaXQodCxlPTQsbj0xKXtjb25zdHt5ZWFyOnIsbW9udGg6cyxkYXk6aX09dCxhPWZyKHIscyxpKSxvPXp0KF90KHIscyxpKSxuKTtsZXQgbD1NYXRoLmZsb29yKChhLW8rMTQtZSkvNyksdTtyZXR1cm4gbDwxPyh1PXItMSxsPXplKHUsZSxuKSk6bD56ZShyLGUsbik/KHU9cisxLGw9MSk6dT1yLHt3ZWVrWWVhcjp1LHdlZWtOdW1iZXI6bCx3ZWVrZGF5Om8sLi4uZnQodCl9fWZ1bmN0aW9uIGhyKHQsZT00LG49MSl7Y29uc3R7d2Vla1llYXI6cix3ZWVrTnVtYmVyOnMsd2Vla2RheTppfT10LGE9enQoX3QociwxLGUpLG4pLG89dmUocik7bGV0IGw9cyo3K2ktYS03K2UsdTtsPDE/KHU9ci0xLGwrPXZlKHUpKTpsPm8/KHU9cisxLGwtPXZlKHIpKTp1PXI7Y29uc3R7bW9udGg6YyxkYXk6ZH09ZHIodSxsKTtyZXR1cm57eWVhcjp1LG1vbnRoOmMsZGF5OmQsLi4uZnQodCl9fWZ1bmN0aW9uIFJ0KHQpe2NvbnN0e3llYXI6ZSxtb250aDpuLGRheTpyfT10LHM9ZnIoZSxuLHIpO3JldHVybnt5ZWFyOmUsb3JkaW5hbDpzLC4uLmZ0KHQpfX1mdW5jdGlvbiBtcih0KXtjb25zdHt5ZWFyOmUsb3JkaW5hbDpufT10LHttb250aDpyLGRheTpzfT1kcihlLG4pO3JldHVybnt5ZWFyOmUsbW9udGg6cixkYXk6cywuLi5mdCh0KX19ZnVuY3Rpb24geXIodCxlKXtpZigheSh0LmxvY2FsV2Vla2RheSl8fCF5KHQubG9jYWxXZWVrTnVtYmVyKXx8IXkodC5sb2NhbFdlZWtZZWFyKSl7aWYoIXkodC53ZWVrZGF5KXx8IXkodC53ZWVrTnVtYmVyKXx8IXkodC53ZWVrWWVhcikpdGhyb3cgbmV3IGtlKCJDYW5ub3QgbWl4IGxvY2FsZS1iYXNlZCB3ZWVrIGZpZWxkcyB3aXRoIElTTy1iYXNlZCB3ZWVrIGZpZWxkcyIpO3JldHVybiB5KHQubG9jYWxXZWVrZGF5KXx8KHQud2Vla2RheT10LmxvY2FsV2Vla2RheSkseSh0LmxvY2FsV2Vla051bWJlcil8fCh0LndlZWtOdW1iZXI9dC5sb2NhbFdlZWtOdW1iZXIpLHkodC5sb2NhbFdlZWtZZWFyKXx8KHQud2Vla1llYXI9dC5sb2NhbFdlZWtZZWFyKSxkZWxldGUgdC5sb2NhbFdlZWtkYXksZGVsZXRlIHQubG9jYWxXZWVrTnVtYmVyLGRlbGV0ZSB0LmxvY2FsV2Vla1llYXIse21pbkRheXNJbkZpcnN0V2VlazplLmdldE1pbkRheXNJbkZpcnN0V2VlaygpLHN0YXJ0T2ZXZWVrOmUuZ2V0U3RhcnRPZldlZWsoKX19ZWxzZSByZXR1cm57bWluRGF5c0luRmlyc3RXZWVrOjQsc3RhcnRPZldlZWs6MX19ZnVuY3Rpb24geW8odCxlPTQsbj0xKXtjb25zdCByPWF0KHQud2Vla1llYXIpLHM9Vyh0LndlZWtOdW1iZXIsMSx6ZSh0LndlZWtZZWFyLGUsbikpLGk9Vyh0LndlZWtkYXksMSw3KTtyZXR1cm4gcj9zP2k/ITE6Vigid2Vla2RheSIsdC53ZWVrZGF5KTpWKCJ3ZWVrIix0LndlZWtOdW1iZXIpOlYoIndlZWtZZWFyIix0LndlZWtZZWFyKX1mdW5jdGlvbiBnbyh0KXtjb25zdCBlPWF0KHQueWVhciksbj1XKHQub3JkaW5hbCwxLHZlKHQueWVhcikpO3JldHVybiBlP24/ITE6Vigib3JkaW5hbCIsdC5vcmRpbmFsKTpWKCJ5ZWFyIix0LnllYXIpfWZ1bmN0aW9uIGdyKHQpe2NvbnN0IGU9YXQodC55ZWFyKSxuPVcodC5tb250aCwxLDEyKSxyPVcodC5kYXksMSxvdCh0LnllYXIsdC5tb250aCkpO3JldHVybiBlP24/cj8hMTpWKCJkYXkiLHQuZGF5KTpWKCJtb250aCIsdC5tb250aCk6VigieWVhciIsdC55ZWFyKX1mdW5jdGlvbiBwcih0KXtjb25zdHtob3VyOmUsbWludXRlOm4sc2Vjb25kOnIsbWlsbGlzZWNvbmQ6c309dCxpPVcoZSwwLDIzKXx8ZT09PTI0JiZuPT09MCYmcj09PTAmJnM9PT0wLGE9VyhuLDAsNTkpLG89VyhyLDAsNTkpLGw9VyhzLDAsOTk5KTtyZXR1cm4gaT9hP28/bD8hMTpWKCJtaWxsaXNlY29uZCIscyk6Vigic2Vjb25kIixyKTpWKCJtaW51dGUiLG4pOlYoImhvdXIiLGUpfWZ1bmN0aW9uIHkodCl7cmV0dXJuIHR5cGVvZiB0PiJ1In1mdW5jdGlvbiBjZSh0KXtyZXR1cm4gdHlwZW9mIHQ9PSJudW1iZXIifWZ1bmN0aW9uIGF0KHQpe3JldHVybiB0eXBlb2YgdD09Im51bWJlciImJnQlMT09PTB9ZnVuY3Rpb24gcG8odCl7cmV0dXJuIHR5cGVvZiB0PT0ic3RyaW5nIn1mdW5jdGlvbiB3byh0KXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpPT09IltvYmplY3QgRGF0ZV0ifWZ1bmN0aW9uIHdyKCl7dHJ5e3JldHVybiB0eXBlb2YgSW50bDwidSImJiEhSW50bC5SZWxhdGl2ZVRpbWVGb3JtYXR9Y2F0Y2h7cmV0dXJuITF9fWZ1bmN0aW9uIFRyKCl7dHJ5e3JldHVybiB0eXBlb2YgSW50bDwidSImJiEhSW50bC5Mb2NhbGUmJigid2Vla0luZm8iaW4gSW50bC5Mb2NhbGUucHJvdG90eXBlfHwiZ2V0V2Vla0luZm8iaW4gSW50bC5Mb2NhbGUucHJvdG90eXBlKX1jYXRjaHtyZXR1cm4hMX19ZnVuY3Rpb24gVG8odCl7cmV0dXJuIEFycmF5LmlzQXJyYXkodCk/dDpbdF19ZnVuY3Rpb24gU3IodCxlLG4pe2lmKHQubGVuZ3RoIT09MClyZXR1cm4gdC5yZWR1Y2UoKHIscyk9Pntjb25zdCBpPVtlKHMpLHNdO3JldHVybiByJiZuKHJbMF0saVswXSk9PT1yWzBdP3I6aX0sbnVsbClbMV19ZnVuY3Rpb24gU28odCxlKXtyZXR1cm4gZS5yZWR1Y2UoKG4scik9PihuW3JdPXRbcl0sbikse30pfWZ1bmN0aW9uIGJlKHQsZSl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LGUpfWZ1bmN0aW9uIFp0KHQpe2lmKHQ9PW51bGwpcmV0dXJuIG51bGw7aWYodHlwZW9mIHQhPSJvYmplY3QiKXRocm93IG5ldyBEKCJXZWVrIHNldHRpbmdzIG11c3QgYmUgYW4gb2JqZWN0Iik7aWYoIVcodC5maXJzdERheSwxLDcpfHwhVyh0Lm1pbmltYWxEYXlzLDEsNyl8fCFBcnJheS5pc0FycmF5KHQud2Vla2VuZCl8fHQud2Vla2VuZC5zb21lKGU9PiFXKGUsMSw3KSkpdGhyb3cgbmV3IEQoIkludmFsaWQgd2VlayBzZXR0aW5ncyIpO3JldHVybntmaXJzdERheTp0LmZpcnN0RGF5LG1pbmltYWxEYXlzOnQubWluaW1hbERheXMsd2Vla2VuZDpBcnJheS5mcm9tKHQud2Vla2VuZCl9fWZ1bmN0aW9uIFcodCxlLG4pe3JldHVybiBhdCh0KSYmdD49ZSYmdDw9bn1mdW5jdGlvbiBPbyh0LGUpe3JldHVybiB0LWUqTWF0aC5mbG9vcih0L2UpfWZ1bmN0aW9uIEkodCxlPTIpe2NvbnN0IG49dDwwO2xldCByO3JldHVybiBuP3I9Ii0iKygiIistdCkucGFkU3RhcnQoZSwiMCIpOnI9KCIiK3QpLnBhZFN0YXJ0KGUsIjAiKSxyfWZ1bmN0aW9uIHJlKHQpe2lmKCEoeSh0KXx8dD09PW51bGx8fHQ9PT0iIikpcmV0dXJuIHBhcnNlSW50KHQsMTApfWZ1bmN0aW9uIGZlKHQpe2lmKCEoeSh0KXx8dD09PW51bGx8fHQ9PT0iIikpcmV0dXJuIHBhcnNlRmxvYXQodCl9ZnVuY3Rpb24gUHQodCl7aWYoISh5KHQpfHx0PT09bnVsbHx8dD09PSIiKSl7Y29uc3QgZT1wYXJzZUZsb2F0KCIwLiIrdCkqMWUzO3JldHVybiBNYXRoLmZsb29yKGUpfX1mdW5jdGlvbiBVdCh0LGUsbj0hMSl7Y29uc3Qgcj0xMCoqZTtyZXR1cm4obj9NYXRoLnRydW5jOk1hdGgucm91bmQpKHQqcikvcn1mdW5jdGlvbiBfZSh0KXtyZXR1cm4gdCU0PT09MCYmKHQlMTAwIT09MHx8dCU0MDA9PT0wKX1mdW5jdGlvbiB2ZSh0KXtyZXR1cm4gX2UodCk/MzY2OjM2NX1mdW5jdGlvbiBvdCh0LGUpe2NvbnN0IG49T28oZS0xLDEyKSsxLHI9dCsoZS1uKS8xMjtyZXR1cm4gbj09PTI/X2Uocik/Mjk6Mjg6WzMxLG51bGwsMzEsMzAsMzEsMzAsMzEsMzEsMzAsMzEsMzAsMzFdW24tMV19ZnVuY3Rpb24gbHQodCl7bGV0IGU9RGF0ZS5VVEModC55ZWFyLHQubW9udGgtMSx0LmRheSx0LmhvdXIsdC5taW51dGUsdC5zZWNvbmQsdC5taWxsaXNlY29uZCk7cmV0dXJuIHQueWVhcjwxMDAmJnQueWVhcj49MCYmKGU9bmV3IERhdGUoZSksZS5zZXRVVENGdWxsWWVhcih0LnllYXIsdC5tb250aC0xLHQuZGF5KSksK2V9ZnVuY3Rpb24gT3IodCxlLG4pe3JldHVybi16dChfdCh0LDEsZSksbikrZS0xfWZ1bmN0aW9uIHplKHQsZT00LG49MSl7Y29uc3Qgcj1Pcih0LGUsbikscz1Pcih0KzEsZSxuKTtyZXR1cm4odmUodCktcitzKS83fWZ1bmN0aW9uIEh0KHQpe3JldHVybiB0Pjk5P3Q6dD52LnR3b0RpZ2l0Q3V0b2ZmWWVhcj8xOTAwK3Q6MmUzK3R9ZnVuY3Rpb24ga3IodCxlLG4scj1udWxsKXtjb25zdCBzPW5ldyBEYXRlKHQpLGk9e2hvdXJDeWNsZToiaDIzIix5ZWFyOiJudW1lcmljIixtb250aDoiMi1kaWdpdCIsZGF5OiIyLWRpZ2l0Iixob3VyOiIyLWRpZ2l0IixtaW51dGU6IjItZGlnaXQifTtyJiYoaS50aW1lWm9uZT1yKTtjb25zdCBhPXt0aW1lWm9uZU5hbWU6ZSwuLi5pfSxvPW5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KG4sYSkuZm9ybWF0VG9QYXJ0cyhzKS5maW5kKGw9PmwudHlwZS50b0xvd2VyQ2FzZSgpPT09InRpbWV6b25lbmFtZSIpO3JldHVybiBvP28udmFsdWU6bnVsbH1mdW5jdGlvbiB1dCh0LGUpe2xldCBuPXBhcnNlSW50KHQsMTApO051bWJlci5pc05hTihuKSYmKG49MCk7Y29uc3Qgcj1wYXJzZUludChlLDEwKXx8MCxzPW48MHx8T2JqZWN0LmlzKG4sLTApPy1yOnI7cmV0dXJuIG4qNjArc31mdW5jdGlvbiBicih0KXtjb25zdCBlPU51bWJlcih0KTtpZih0eXBlb2YgdD09ImJvb2xlYW4ifHx0PT09IiJ8fE51bWJlci5pc05hTihlKSl0aHJvdyBuZXcgRChgSW52YWxpZCB1bml0IHZhbHVlICR7dH1gKTtyZXR1cm4gZX1mdW5jdGlvbiBjdCh0LGUpe2NvbnN0IG49e307Zm9yKGNvbnN0IHIgaW4gdClpZihiZSh0LHIpKXtjb25zdCBzPXRbcl07aWYocz09bnVsbCljb250aW51ZTtuW2UocildPWJyKHMpfXJldHVybiBufWZ1bmN0aW9uIFJlKHQsZSl7Y29uc3Qgbj1NYXRoLnRydW5jKE1hdGguYWJzKHQvNjApKSxyPU1hdGgudHJ1bmMoTWF0aC5hYnModCU2MCkpLHM9dD49MD8iKyI6Ii0iO3N3aXRjaChlKXtjYXNlInNob3J0IjpyZXR1cm5gJHtzfSR7SShuLDIpfToke0kociwyKX1gO2Nhc2UibmFycm93IjpyZXR1cm5gJHtzfSR7bn0ke3I+MD9gOiR7cn1gOiIifWA7Y2FzZSJ0ZWNoaWUiOnJldHVybmAke3N9JHtJKG4sMil9JHtJKHIsMil9YDtkZWZhdWx0OnRocm93IG5ldyBSYW5nZUVycm9yKGBWYWx1ZSBmb3JtYXQgJHtlfSBpcyBvdXQgb2YgcmFuZ2UgZm9yIHByb3BlcnR5IGZvcm1hdGApfX1mdW5jdGlvbiBmdCh0KXtyZXR1cm4gU28odCxbImhvdXIiLCJtaW51dGUiLCJzZWNvbmQiLCJtaWxsaXNlY29uZCJdKX1jb25zdCBrbz1bIkphbnVhcnkiLCJGZWJydWFyeSIsIk1hcmNoIiwiQXByaWwiLCJNYXkiLCJKdW5lIiwiSnVseSIsIkF1Z3VzdCIsIlNlcHRlbWJlciIsIk9jdG9iZXIiLCJOb3ZlbWJlciIsIkRlY2VtYmVyIl0sdnI9WyJKYW4iLCJGZWIiLCJNYXIiLCJBcHIiLCJNYXkiLCJKdW4iLCJKdWwiLCJBdWciLCJTZXAiLCJPY3QiLCJOb3YiLCJEZWMiXSxibz1bIkoiLCJGIiwiTSIsIkEiLCJNIiwiSiIsIkoiLCJBIiwiUyIsIk8iLCJOIiwiRCJdO2Z1bmN0aW9uIElyKHQpe3N3aXRjaCh0KXtjYXNlIm5hcnJvdyI6cmV0dXJuWy4uLmJvXTtjYXNlInNob3J0IjpyZXR1cm5bLi4udnJdO2Nhc2UibG9uZyI6cmV0dXJuWy4uLmtvXTtjYXNlIm51bWVyaWMiOnJldHVyblsiMSIsIjIiLCIzIiwiNCIsIjUiLCI2IiwiNyIsIjgiLCI5IiwiMTAiLCIxMSIsIjEyIl07Y2FzZSIyLWRpZ2l0IjpyZXR1cm5bIjAxIiwiMDIiLCIwMyIsIjA0IiwiMDUiLCIwNiIsIjA3IiwiMDgiLCIwOSIsIjEwIiwiMTEiLCIxMiJdO2RlZmF1bHQ6cmV0dXJuIG51bGx9fWNvbnN0IEVyPVsiTW9uZGF5IiwiVHVlc2RheSIsIldlZG5lc2RheSIsIlRodXJzZGF5IiwiRnJpZGF5IiwiU2F0dXJkYXkiLCJTdW5kYXkiXSxOcj1bIk1vbiIsIlR1ZSIsIldlZCIsIlRodSIsIkZyaSIsIlNhdCIsIlN1biJdLHZvPVsiTSIsIlQiLCJXIiwiVCIsIkYiLCJTIiwiUyJdO2Z1bmN0aW9uIE1yKHQpe3N3aXRjaCh0KXtjYXNlIm5hcnJvdyI6cmV0dXJuWy4uLnZvXTtjYXNlInNob3J0IjpyZXR1cm5bLi4uTnJdO2Nhc2UibG9uZyI6cmV0dXJuWy4uLkVyXTtjYXNlIm51bWVyaWMiOnJldHVyblsiMSIsIjIiLCIzIiwiNCIsIjUiLCI2IiwiNyJdO2RlZmF1bHQ6cmV0dXJuIG51bGx9fWNvbnN0IHhyPVsiQU0iLCJQTSJdLElvPVsiQmVmb3JlIENocmlzdCIsIkFubm8gRG9taW5pIl0sRW89WyJCQyIsIkFEIl0sTm89WyJCIiwiQSJdO2Z1bmN0aW9uIERyKHQpe3N3aXRjaCh0KXtjYXNlIm5hcnJvdyI6cmV0dXJuWy4uLk5vXTtjYXNlInNob3J0IjpyZXR1cm5bLi4uRW9dO2Nhc2UibG9uZyI6cmV0dXJuWy4uLklvXTtkZWZhdWx0OnJldHVybiBudWxsfX1mdW5jdGlvbiBNbyh0KXtyZXR1cm4geHJbdC5ob3VyPDEyPzA6MV19ZnVuY3Rpb24geG8odCxlKXtyZXR1cm4gTXIoZSlbdC53ZWVrZGF5LTFdfWZ1bmN0aW9uIERvKHQsZSl7cmV0dXJuIElyKGUpW3QubW9udGgtMV19ZnVuY3Rpb24gQ28odCxlKXtyZXR1cm4gRHIoZSlbdC55ZWFyPDA/MDoxXX1mdW5jdGlvbiBGbyh0LGUsbj0iYWx3YXlzIixyPSExKXtjb25zdCBzPXt5ZWFyczpbInllYXIiLCJ5ci4iXSxxdWFydGVyczpbInF1YXJ0ZXIiLCJxdHIuIl0sbW9udGhzOlsibW9udGgiLCJtby4iXSx3ZWVrczpbIndlZWsiLCJ3ay4iXSxkYXlzOlsiZGF5IiwiZGF5IiwiZGF5cyJdLGhvdXJzOlsiaG91ciIsImhyLiJdLG1pbnV0ZXM6WyJtaW51dGUiLCJtaW4uIl0sc2Vjb25kczpbInNlY29uZCIsInNlYy4iXX0saT1bImhvdXJzIiwibWludXRlcyIsInNlY29uZHMiXS5pbmRleE9mKHQpPT09LTE7aWYobj09PSJhdXRvIiYmaSl7Y29uc3QgZD10PT09ImRheXMiO3N3aXRjaChlKXtjYXNlIDE6cmV0dXJuIGQ/InRvbW9ycm93IjpgbmV4dCAke3NbdF1bMF19YDtjYXNlLTE6cmV0dXJuIGQ/Inllc3RlcmRheSI6YGxhc3QgJHtzW3RdWzBdfWA7Y2FzZSAwOnJldHVybiBkPyJ0b2RheSI6YHRoaXMgJHtzW3RdWzBdfWB9fWNvbnN0IGE9T2JqZWN0LmlzKGUsLTApfHxlPDAsbz1NYXRoLmFicyhlKSxsPW89PT0xLHU9c1t0XSxjPXI/bD91WzFdOnVbMl18fHVbMV06bD9zW3RdWzBdOnQ7cmV0dXJuIGE/YCR7b30gJHtjfSBhZ29gOmBpbiAke299ICR7Y31gfWZ1bmN0aW9uIENyKHQsZSl7bGV0IG49IiI7Zm9yKGNvbnN0IHIgb2YgdClyLmxpdGVyYWw/bis9ci52YWw6bis9ZShyLnZhbCk7cmV0dXJuIG59Y29uc3QgQW89e0Q6ZXQsREQ6Vm4sREREOlduLEREREQ6TG4sdDokbix0dDpfbix0dHQ6em4sdHR0dDpSbixUOlpuLFRUOlBuLFRUVDpVbixUVFRUOkhuLGY6am4sZmY6WW4sZmZmOkpuLGZmZmY6UW4sRjpxbixGRjpHbixGRkY6Qm4sRkZGRjpLbn07Y2xhc3MgTntzdGF0aWMgY3JlYXRlKGUsbj17fSl7cmV0dXJuIG5ldyBOKGUsbil9c3RhdGljIHBhcnNlRm9ybWF0KGUpe2xldCBuPW51bGwscj0iIixzPSExO2NvbnN0IGk9W107Zm9yKGxldCBhPTA7YTxlLmxlbmd0aDthKyspe2NvbnN0IG89ZS5jaGFyQXQoYSk7bz09PSInIj8oci5sZW5ndGg+MCYmaS5wdXNoKHtsaXRlcmFsOnN8fC9eXHMrJC8udGVzdChyKSx2YWw6cn0pLG49bnVsbCxyPSIiLHM9IXMpOnN8fG89PT1uP3IrPW86KHIubGVuZ3RoPjAmJmkucHVzaCh7bGl0ZXJhbDovXlxzKyQvLnRlc3QociksdmFsOnJ9KSxyPW8sbj1vKX1yZXR1cm4gci5sZW5ndGg+MCYmaS5wdXNoKHtsaXRlcmFsOnN8fC9eXHMrJC8udGVzdChyKSx2YWw6cn0pLGl9c3RhdGljIG1hY3JvVG9rZW5Ub0Zvcm1hdE9wdHMoZSl7cmV0dXJuIEFvW2VdfWNvbnN0cnVjdG9yKGUsbil7dGhpcy5vcHRzPW4sdGhpcy5sb2M9ZSx0aGlzLnN5c3RlbUxvYz1udWxsfWZvcm1hdFdpdGhTeXN0ZW1EZWZhdWx0KGUsbil7cmV0dXJuIHRoaXMuc3lzdGVtTG9jPT09bnVsbCYmKHRoaXMuc3lzdGVtTG9jPXRoaXMubG9jLnJlZGVmYXVsdFRvU3lzdGVtKCkpLHRoaXMuc3lzdGVtTG9jLmR0Rm9ybWF0dGVyKGUsey4uLnRoaXMub3B0cywuLi5ufSkuZm9ybWF0KCl9ZHRGb3JtYXR0ZXIoZSxuPXt9KXtyZXR1cm4gdGhpcy5sb2MuZHRGb3JtYXR0ZXIoZSx7Li4udGhpcy5vcHRzLC4uLm59KX1mb3JtYXREYXRlVGltZShlLG4pe3JldHVybiB0aGlzLmR0Rm9ybWF0dGVyKGUsbikuZm9ybWF0KCl9Zm9ybWF0RGF0ZVRpbWVQYXJ0cyhlLG4pe3JldHVybiB0aGlzLmR0Rm9ybWF0dGVyKGUsbikuZm9ybWF0VG9QYXJ0cygpfWZvcm1hdEludGVydmFsKGUsbil7cmV0dXJuIHRoaXMuZHRGb3JtYXR0ZXIoZS5zdGFydCxuKS5kdGYuZm9ybWF0UmFuZ2UoZS5zdGFydC50b0pTRGF0ZSgpLGUuZW5kLnRvSlNEYXRlKCkpfXJlc29sdmVkT3B0aW9ucyhlLG4pe3JldHVybiB0aGlzLmR0Rm9ybWF0dGVyKGUsbikucmVzb2x2ZWRPcHRpb25zKCl9bnVtKGUsbj0wKXtpZih0aGlzLm9wdHMuZm9yY2VTaW1wbGUpcmV0dXJuIEkoZSxuKTtjb25zdCByPXsuLi50aGlzLm9wdHN9O3JldHVybiBuPjAmJihyLnBhZFRvPW4pLHRoaXMubG9jLm51bWJlckZvcm1hdHRlcihyKS5mb3JtYXQoZSl9Zm9ybWF0RGF0ZVRpbWVGcm9tU3RyaW5nKGUsbil7Y29uc3Qgcj10aGlzLmxvYy5saXN0aW5nTW9kZSgpPT09ImVuIixzPXRoaXMubG9jLm91dHB1dENhbGVuZGFyJiZ0aGlzLmxvYy5vdXRwdXRDYWxlbmRhciE9PSJncmVnb3J5IixpPShoLGspPT50aGlzLmxvYy5leHRyYWN0KGUsaCxrKSxhPWg9PmUuaXNPZmZzZXRGaXhlZCYmZS5vZmZzZXQ9PT0wJiZoLmFsbG93Wj8iWiI6ZS5pc1ZhbGlkP2Uuem9uZS5mb3JtYXRPZmZzZXQoZS50cyxoLmZvcm1hdCk6IiIsbz0oKT0+cj9NbyhlKTppKHtob3VyOiJudW1lcmljIixob3VyQ3ljbGU6ImgxMiJ9LCJkYXlwZXJpb2QiKSxsPShoLGspPT5yP0RvKGUsaCk6aShrP3ttb250aDpofTp7bW9udGg6aCxkYXk6Im51bWVyaWMifSwibW9udGgiKSx1PShoLGspPT5yP3hvKGUsaCk6aShrP3t3ZWVrZGF5Omh9Ont3ZWVrZGF5OmgsbW9udGg6ImxvbmciLGRheToibnVtZXJpYyJ9LCJ3ZWVrZGF5IiksYz1oPT57Y29uc3Qgaz1OLm1hY3JvVG9rZW5Ub0Zvcm1hdE9wdHMoaCk7cmV0dXJuIGs/dGhpcy5mb3JtYXRXaXRoU3lzdGVtRGVmYXVsdChlLGspOmh9LGQ9aD0+cj9DbyhlLGgpOmkoe2VyYTpofSwiZXJhIikscD1oPT57c3dpdGNoKGgpe2Nhc2UiUyI6cmV0dXJuIHRoaXMubnVtKGUubWlsbGlzZWNvbmQpO2Nhc2UidSI6Y2FzZSJTU1MiOnJldHVybiB0aGlzLm51bShlLm1pbGxpc2Vjb25kLDMpO2Nhc2UicyI6cmV0dXJuIHRoaXMubnVtKGUuc2Vjb25kKTtjYXNlInNzIjpyZXR1cm4gdGhpcy5udW0oZS5zZWNvbmQsMik7Y2FzZSJ1dSI6cmV0dXJuIHRoaXMubnVtKE1hdGguZmxvb3IoZS5taWxsaXNlY29uZC8xMCksMik7Y2FzZSJ1dXUiOnJldHVybiB0aGlzLm51bShNYXRoLmZsb29yKGUubWlsbGlzZWNvbmQvMTAwKSk7Y2FzZSJtIjpyZXR1cm4gdGhpcy5udW0oZS5taW51dGUpO2Nhc2UibW0iOnJldHVybiB0aGlzLm51bShlLm1pbnV0ZSwyKTtjYXNlImgiOnJldHVybiB0aGlzLm51bShlLmhvdXIlMTI9PT0wPzEyOmUuaG91ciUxMik7Y2FzZSJoaCI6cmV0dXJuIHRoaXMubnVtKGUuaG91ciUxMj09PTA/MTI6ZS5ob3VyJTEyLDIpO2Nhc2UiSCI6cmV0dXJuIHRoaXMubnVtKGUuaG91cik7Y2FzZSJISCI6cmV0dXJuIHRoaXMubnVtKGUuaG91ciwyKTtjYXNlIloiOnJldHVybiBhKHtmb3JtYXQ6Im5hcnJvdyIsYWxsb3daOnRoaXMub3B0cy5hbGxvd1p9KTtjYXNlIlpaIjpyZXR1cm4gYSh7Zm9ybWF0OiJzaG9ydCIsYWxsb3daOnRoaXMub3B0cy5hbGxvd1p9KTtjYXNlIlpaWiI6cmV0dXJuIGEoe2Zvcm1hdDoidGVjaGllIixhbGxvd1o6dGhpcy5vcHRzLmFsbG93Wn0pO2Nhc2UiWlpaWiI6cmV0dXJuIGUuem9uZS5vZmZzZXROYW1lKGUudHMse2Zvcm1hdDoic2hvcnQiLGxvY2FsZTp0aGlzLmxvYy5sb2NhbGV9KTtjYXNlIlpaWlpaIjpyZXR1cm4gZS56b25lLm9mZnNldE5hbWUoZS50cyx7Zm9ybWF0OiJsb25nIixsb2NhbGU6dGhpcy5sb2MubG9jYWxlfSk7Y2FzZSJ6IjpyZXR1cm4gZS56b25lTmFtZTtjYXNlImEiOnJldHVybiBvKCk7Y2FzZSJkIjpyZXR1cm4gcz9pKHtkYXk6Im51bWVyaWMifSwiZGF5Iik6dGhpcy5udW0oZS5kYXkpO2Nhc2UiZGQiOnJldHVybiBzP2koe2RheToiMi1kaWdpdCJ9LCJkYXkiKTp0aGlzLm51bShlLmRheSwyKTtjYXNlImMiOnJldHVybiB0aGlzLm51bShlLndlZWtkYXkpO2Nhc2UiY2NjIjpyZXR1cm4gdSgic2hvcnQiLCEwKTtjYXNlImNjY2MiOnJldHVybiB1KCJsb25nIiwhMCk7Y2FzZSJjY2NjYyI6cmV0dXJuIHUoIm5hcnJvdyIsITApO2Nhc2UiRSI6cmV0dXJuIHRoaXMubnVtKGUud2Vla2RheSk7Y2FzZSJFRUUiOnJldHVybiB1KCJzaG9ydCIsITEpO2Nhc2UiRUVFRSI6cmV0dXJuIHUoImxvbmciLCExKTtjYXNlIkVFRUVFIjpyZXR1cm4gdSgibmFycm93IiwhMSk7Y2FzZSJMIjpyZXR1cm4gcz9pKHttb250aDoibnVtZXJpYyIsZGF5OiJudW1lcmljIn0sIm1vbnRoIik6dGhpcy5udW0oZS5tb250aCk7Y2FzZSJMTCI6cmV0dXJuIHM/aSh7bW9udGg6IjItZGlnaXQiLGRheToibnVtZXJpYyJ9LCJtb250aCIpOnRoaXMubnVtKGUubW9udGgsMik7Y2FzZSJMTEwiOnJldHVybiBsKCJzaG9ydCIsITApO2Nhc2UiTExMTCI6cmV0dXJuIGwoImxvbmciLCEwKTtjYXNlIkxMTExMIjpyZXR1cm4gbCgibmFycm93IiwhMCk7Y2FzZSJNIjpyZXR1cm4gcz9pKHttb250aDoibnVtZXJpYyJ9LCJtb250aCIpOnRoaXMubnVtKGUubW9udGgpO2Nhc2UiTU0iOnJldHVybiBzP2koe21vbnRoOiIyLWRpZ2l0In0sIm1vbnRoIik6dGhpcy5udW0oZS5tb250aCwyKTtjYXNlIk1NTSI6cmV0dXJuIGwoInNob3J0IiwhMSk7Y2FzZSJNTU1NIjpyZXR1cm4gbCgibG9uZyIsITEpO2Nhc2UiTU1NTU0iOnJldHVybiBsKCJuYXJyb3ciLCExKTtjYXNlInkiOnJldHVybiBzP2koe3llYXI6Im51bWVyaWMifSwieWVhciIpOnRoaXMubnVtKGUueWVhcik7Y2FzZSJ5eSI6cmV0dXJuIHM/aSh7eWVhcjoiMi1kaWdpdCJ9LCJ5ZWFyIik6dGhpcy5udW0oZS55ZWFyLnRvU3RyaW5nKCkuc2xpY2UoLTIpLDIpO2Nhc2UieXl5eSI6cmV0dXJuIHM/aSh7eWVhcjoibnVtZXJpYyJ9LCJ5ZWFyIik6dGhpcy5udW0oZS55ZWFyLDQpO2Nhc2UieXl5eXl5IjpyZXR1cm4gcz9pKHt5ZWFyOiJudW1lcmljIn0sInllYXIiKTp0aGlzLm51bShlLnllYXIsNik7Y2FzZSJHIjpyZXR1cm4gZCgic2hvcnQiKTtjYXNlIkdHIjpyZXR1cm4gZCgibG9uZyIpO2Nhc2UiR0dHR0ciOnJldHVybiBkKCJuYXJyb3ciKTtjYXNlImtrIjpyZXR1cm4gdGhpcy5udW0oZS53ZWVrWWVhci50b1N0cmluZygpLnNsaWNlKC0yKSwyKTtjYXNlImtra2siOnJldHVybiB0aGlzLm51bShlLndlZWtZZWFyLDQpO2Nhc2UiVyI6cmV0dXJuIHRoaXMubnVtKGUud2Vla051bWJlcik7Y2FzZSJXVyI6cmV0dXJuIHRoaXMubnVtKGUud2Vla051bWJlciwyKTtjYXNlIm4iOnJldHVybiB0aGlzLm51bShlLmxvY2FsV2Vla051bWJlcik7Y2FzZSJubiI6cmV0dXJuIHRoaXMubnVtKGUubG9jYWxXZWVrTnVtYmVyLDIpO2Nhc2UiaWkiOnJldHVybiB0aGlzLm51bShlLmxvY2FsV2Vla1llYXIudG9TdHJpbmcoKS5zbGljZSgtMiksMik7Y2FzZSJpaWlpIjpyZXR1cm4gdGhpcy5udW0oZS5sb2NhbFdlZWtZZWFyLDQpO2Nhc2UibyI6cmV0dXJuIHRoaXMubnVtKGUub3JkaW5hbCk7Y2FzZSJvb28iOnJldHVybiB0aGlzLm51bShlLm9yZGluYWwsMyk7Y2FzZSJxIjpyZXR1cm4gdGhpcy5udW0oZS5xdWFydGVyKTtjYXNlInFxIjpyZXR1cm4gdGhpcy5udW0oZS5xdWFydGVyLDIpO2Nhc2UiWCI6cmV0dXJuIHRoaXMubnVtKE1hdGguZmxvb3IoZS50cy8xZTMpKTtjYXNlIngiOnJldHVybiB0aGlzLm51bShlLnRzKTtkZWZhdWx0OnJldHVybiBjKGgpfX07cmV0dXJuIENyKE4ucGFyc2VGb3JtYXQobikscCl9Zm9ybWF0RHVyYXRpb25Gcm9tU3RyaW5nKGUsbil7Y29uc3Qgcj1sPT57c3dpdGNoKGxbMF0pe2Nhc2UiUyI6cmV0dXJuIm1pbGxpc2Vjb25kIjtjYXNlInMiOnJldHVybiJzZWNvbmQiO2Nhc2UibSI6cmV0dXJuIm1pbnV0ZSI7Y2FzZSJoIjpyZXR1cm4iaG91ciI7Y2FzZSJkIjpyZXR1cm4iZGF5IjtjYXNlInciOnJldHVybiJ3ZWVrIjtjYXNlIk0iOnJldHVybiJtb250aCI7Y2FzZSJ5IjpyZXR1cm4ieWVhciI7ZGVmYXVsdDpyZXR1cm4gbnVsbH19LHM9bD0+dT0+e2NvbnN0IGM9cih1KTtyZXR1cm4gYz90aGlzLm51bShsLmdldChjKSx1Lmxlbmd0aCk6dX0saT1OLnBhcnNlRm9ybWF0KG4pLGE9aS5yZWR1Y2UoKGwse2xpdGVyYWw6dSx2YWw6Y30pPT51P2w6bC5jb25jYXQoYyksW10pLG89ZS5zaGlmdFRvKC4uLmEubWFwKHIpLmZpbHRlcihsPT5sKSk7cmV0dXJuIENyKGkscyhvKSl9fWNvbnN0IEZyPS9bQS1aYS16XystXXsxLDI1Nn0oPzo6P1wvW0EtWmEtejAtOV8rLV17MSwyNTZ9KD86XC9bQS1aYS16MC05XystXXsxLDI1Nn0pPyk/LztmdW5jdGlvbiBJZSguLi50KXtjb25zdCBlPXQucmVkdWNlKChuLHIpPT5uK3Iuc291cmNlLCIiKTtyZXR1cm4gUmVnRXhwKGBeJHtlfSRgKX1mdW5jdGlvbiBFZSguLi50KXtyZXR1cm4gZT0+dC5yZWR1Y2UoKFtuLHIsc10saSk9Pntjb25zdFthLG8sbF09aShlLHMpO3JldHVyblt7Li4ubiwuLi5hfSxvfHxyLGxdfSxbe30sbnVsbCwxXSkuc2xpY2UoMCwyKX1mdW5jdGlvbiBOZSh0LC4uLmUpe2lmKHQ9PW51bGwpcmV0dXJuW251bGwsbnVsbF07Zm9yKGNvbnN0W24scl1vZiBlKXtjb25zdCBzPW4uZXhlYyh0KTtpZihzKXJldHVybiByKHMpfXJldHVybltudWxsLG51bGxdfWZ1bmN0aW9uIEFyKC4uLnQpe3JldHVybihlLG4pPT57Y29uc3Qgcj17fTtsZXQgcztmb3Iocz0wO3M8dC5sZW5ndGg7cysrKXJbdFtzXV09cmUoZVtuK3NdKTtyZXR1cm5bcixudWxsLG4rc119fWNvbnN0IFZyPS8oPzooWil8KFsrLV1cZFxkKSg/Ojo/KFxkXGQpKT8pLyxWbz1gKD86JHtWci5zb3VyY2V9Pyg/OlxcWygke0ZyLnNvdXJjZX0pXFxdKT8pP2AsanQ9LyhcZFxkKSg/Ojo/KFxkXGQpKD86Oj8oXGRcZCkoPzpbLixdKFxkezEsMzB9KSk/KT8pPy8sV3I9UmVnRXhwKGAke2p0LnNvdXJjZX0ke1ZvfWApLHF0PVJlZ0V4cChgKD86VCR7V3Iuc291cmNlfSk/YCksV289LyhbKy1dXGR7Nn18XGR7NH0pKD86LT8oXGRcZCkoPzotPyhcZFxkKSk/KT8vLExvPS8oXGR7NH0pLT9XKFxkXGQpKD86LT8oXGQpKT8vLCRvPS8oXGR7NH0pLT8oXGR7M30pLyxfbz1Bcigid2Vla1llYXIiLCJ3ZWVrTnVtYmVyIiwid2Vla0RheSIpLHpvPUFyKCJ5ZWFyIiwib3JkaW5hbCIpLFJvPS8oXGR7NH0pLShcZFxkKS0oXGRcZCkvLExyPVJlZ0V4cChgJHtqdC5zb3VyY2V9ID8oPzoke1ZyLnNvdXJjZX18KCR7RnIuc291cmNlfSkpP2ApLFpvPVJlZ0V4cChgKD86ICR7THIuc291cmNlfSk/YCk7ZnVuY3Rpb24gTWUodCxlLG4pe2NvbnN0IHI9dFtlXTtyZXR1cm4geShyKT9uOnJlKHIpfWZ1bmN0aW9uIFBvKHQsZSl7cmV0dXJuW3t5ZWFyOk1lKHQsZSksbW9udGg6TWUodCxlKzEsMSksZGF5Ok1lKHQsZSsyLDEpfSxudWxsLGUrM119ZnVuY3Rpb24geGUodCxlKXtyZXR1cm5be2hvdXJzOk1lKHQsZSwwKSxtaW51dGVzOk1lKHQsZSsxLDApLHNlY29uZHM6TWUodCxlKzIsMCksbWlsbGlzZWNvbmRzOlB0KHRbZSszXSl9LG51bGwsZSs0XX1mdW5jdGlvbiBaZSh0LGUpe2NvbnN0IG49IXRbZV0mJiF0W2UrMV0scj11dCh0W2UrMV0sdFtlKzJdKSxzPW4/bnVsbDp4Lmluc3RhbmNlKHIpO3JldHVyblt7fSxzLGUrM119ZnVuY3Rpb24gUGUodCxlKXtjb25zdCBuPXRbZV0/Si5jcmVhdGUodFtlXSk6bnVsbDtyZXR1cm5be30sbixlKzFdfWNvbnN0IFVvPVJlZ0V4cChgXlQ/JHtqdC5zb3VyY2V9JGApLEhvPS9eLT9QKD86KD86KC0/XGR7MSwyMH0oPzpcLlxkezEsMjB9KT8pWSk/KD86KC0/XGR7MSwyMH0oPzpcLlxkezEsMjB9KT8pTSk/KD86KC0/XGR7MSwyMH0oPzpcLlxkezEsMjB9KT8pVyk/KD86KC0/XGR7MSwyMH0oPzpcLlxkezEsMjB9KT8pRCk/KD86VCg/OigtP1xkezEsMjB9KD86XC5cZHsxLDIwfSk/KUgpPyg/OigtP1xkezEsMjB9KD86XC5cZHsxLDIwfSk/KU0pPyg/OigtP1xkezEsMjB9KSg/OlsuLF0oLT9cZHsxLDIwfSkpP1MpPyk/KSQvO2Z1bmN0aW9uIGpvKHQpe2NvbnN0W2UsbixyLHMsaSxhLG8sbCx1XT10LGM9ZVswXT09PSItIixkPWwmJmxbMF09PT0iLSIscD0oaCxrPSExKT0+aCE9PXZvaWQgMCYmKGt8fGgmJmMpPy1oOmg7cmV0dXJuW3t5ZWFyczpwKGZlKG4pKSxtb250aHM6cChmZShyKSksd2Vla3M6cChmZShzKSksZGF5czpwKGZlKGkpKSxob3VyczpwKGZlKGEpKSxtaW51dGVzOnAoZmUobykpLHNlY29uZHM6cChmZShsKSxsPT09Ii0wIiksbWlsbGlzZWNvbmRzOnAoUHQodSksZCl9XX1jb25zdCBxbz17R01UOjAsRURUOi00KjYwLEVTVDotNSo2MCxDRFQ6LTUqNjAsQ1NUOi02KjYwLE1EVDotNio2MCxNU1Q6LTcqNjAsUERUOi03KjYwLFBTVDotOCo2MH07ZnVuY3Rpb24gWXQodCxlLG4scixzLGksYSl7Y29uc3Qgbz17eWVhcjplLmxlbmd0aD09PTI/SHQocmUoZSkpOnJlKGUpLG1vbnRoOnZyLmluZGV4T2YobikrMSxkYXk6cmUociksaG91cjpyZShzKSxtaW51dGU6cmUoaSl9O3JldHVybiBhJiYoby5zZWNvbmQ9cmUoYSkpLHQmJihvLndlZWtkYXk9dC5sZW5ndGg+Mz9Fci5pbmRleE9mKHQpKzE6TnIuaW5kZXhPZih0KSsxKSxvfWNvbnN0IFlvPS9eKD86KE1vbnxUdWV8V2VkfFRodXxGcml8U2F0fFN1biksXHMpPyhcZHsxLDJ9KVxzKEphbnxGZWJ8TWFyfEFwcnxNYXl8SnVufEp1bHxBdWd8U2VwfE9jdHxOb3Z8RGVjKVxzKFxkezIsNH0pXHMoXGRcZCk6KFxkXGQpKD86OihcZFxkKSk/XHMoPzooVVR8R01UfFtFQ01QXVtTRF1UKXwoW1p6XSl8KD86KFsrLV1cZFxkKShcZFxkKSkpJC87ZnVuY3Rpb24gR28odCl7Y29uc3RbLGUsbixyLHMsaSxhLG8sbCx1LGMsZF09dCxwPVl0KGUscyxyLG4saSxhLG8pO2xldCBoO3JldHVybiBsP2g9cW9bbF06dT9oPTA6aD11dChjLGQpLFtwLG5ldyB4KGgpXX1mdW5jdGlvbiBKbyh0KXtyZXR1cm4gdC5yZXBsYWNlKC9cKFteKCldKlwpfFtcblx0XS9nLCIgIikucmVwbGFjZSgvKFxzXHMrKS9nLCIgIikudHJpbSgpfWNvbnN0IEJvPS9eKE1vbnxUdWV8V2VkfFRodXxGcml8U2F0fFN1biksIChcZFxkKSAoSmFufEZlYnxNYXJ8QXByfE1heXxKdW58SnVsfEF1Z3xTZXB8T2N0fE5vdnxEZWMpIChcZHs0fSkgKFxkXGQpOihcZFxkKTooXGRcZCkgR01UJC8sUW89L14oTW9uZGF5fFR1ZXNkYXl8V2VkbmVzZGF5fFRodXJzZGF5fEZyaWRheXxTYXR1cmRheXxTdW5kYXkpLCAoXGRcZCktKEphbnxGZWJ8TWFyfEFwcnxNYXl8SnVufEp1bHxBdWd8U2VwfE9jdHxOb3Z8RGVjKS0oXGRcZCkgKFxkXGQpOihcZFxkKTooXGRcZCkgR01UJC8sS289L14oTW9ufFR1ZXxXZWR8VGh1fEZyaXxTYXR8U3VuKSAoSmFufEZlYnxNYXJ8QXByfE1heXxKdW58SnVsfEF1Z3xTZXB8T2N0fE5vdnxEZWMpICggXGR8XGRcZCkgKFxkXGQpOihcZFxkKTooXGRcZCkgKFxkezR9KSQvO2Z1bmN0aW9uICRyKHQpe2NvbnN0WyxlLG4scixzLGksYSxvXT10O3JldHVybltZdChlLHMscixuLGksYSxvKSx4LnV0Y0luc3RhbmNlXX1mdW5jdGlvbiBYbyh0KXtjb25zdFssZSxuLHIscyxpLGEsb109dDtyZXR1cm5bWXQoZSxvLG4scixzLGksYSkseC51dGNJbnN0YW5jZV19Y29uc3QgZWw9SWUoV28scXQpLHRsPUllKExvLHF0KSxubD1JZSgkbyxxdCkscmw9SWUoV3IpLF9yPUVlKFBvLHhlLFplLFBlKSxzbD1FZShfbyx4ZSxaZSxQZSksaWw9RWUoem8seGUsWmUsUGUpLGFsPUVlKHhlLFplLFBlKTtmdW5jdGlvbiBvbCh0KXtyZXR1cm4gTmUodCxbZWwsX3JdLFt0bCxzbF0sW25sLGlsXSxbcmwsYWxdKX1mdW5jdGlvbiBsbCh0KXtyZXR1cm4gTmUoSm8odCksW1lvLEdvXSl9ZnVuY3Rpb24gdWwodCl7cmV0dXJuIE5lKHQsW0JvLCRyXSxbUW8sJHJdLFtLbyxYb10pfWZ1bmN0aW9uIGNsKHQpe3JldHVybiBOZSh0LFtIbyxqb10pfWNvbnN0IGZsPUVlKHhlKTtmdW5jdGlvbiBkbCh0KXtyZXR1cm4gTmUodCxbVW8sZmxdKX1jb25zdCBobD1JZShSbyxabyksbWw9SWUoTHIpLHlsPUVlKHhlLFplLFBlKTtmdW5jdGlvbiBnbCh0KXtyZXR1cm4gTmUodCxbaGwsX3JdLFttbCx5bF0pfWNvbnN0IHpyPSJJbnZhbGlkIER1cmF0aW9uIixScj17d2Vla3M6e2RheXM6Nyxob3Vyczo3KjI0LG1pbnV0ZXM6NyoyNCo2MCxzZWNvbmRzOjcqMjQqNjAqNjAsbWlsbGlzZWNvbmRzOjcqMjQqNjAqNjAqMWUzfSxkYXlzOntob3VyczoyNCxtaW51dGVzOjI0KjYwLHNlY29uZHM6MjQqNjAqNjAsbWlsbGlzZWNvbmRzOjI0KjYwKjYwKjFlM30saG91cnM6e21pbnV0ZXM6NjAsc2Vjb25kczo2MCo2MCxtaWxsaXNlY29uZHM6NjAqNjAqMWUzfSxtaW51dGVzOntzZWNvbmRzOjYwLG1pbGxpc2Vjb25kczo2MCoxZTN9LHNlY29uZHM6e21pbGxpc2Vjb25kczoxZTN9fSxwbD17eWVhcnM6e3F1YXJ0ZXJzOjQsbW9udGhzOjEyLHdlZWtzOjUyLGRheXM6MzY1LGhvdXJzOjM2NSoyNCxtaW51dGVzOjM2NSoyNCo2MCxzZWNvbmRzOjM2NSoyNCo2MCo2MCxtaWxsaXNlY29uZHM6MzY1KjI0KjYwKjYwKjFlM30scXVhcnRlcnM6e21vbnRoczozLHdlZWtzOjEzLGRheXM6OTEsaG91cnM6OTEqMjQsbWludXRlczo5MSoyNCo2MCxzZWNvbmRzOjkxKjI0KjYwKjYwLG1pbGxpc2Vjb25kczo5MSoyNCo2MCo2MCoxZTN9LG1vbnRoczp7d2Vla3M6NCxkYXlzOjMwLGhvdXJzOjMwKjI0LG1pbnV0ZXM6MzAqMjQqNjAsc2Vjb25kczozMCoyNCo2MCo2MCxtaWxsaXNlY29uZHM6MzAqMjQqNjAqNjAqMWUzfSwuLi5Scn0sTD0xNDYwOTcvNDAwLERlPTE0NjA5Ny80ODAwLHdsPXt5ZWFyczp7cXVhcnRlcnM6NCxtb250aHM6MTIsd2Vla3M6TC83LGRheXM6TCxob3VyczpMKjI0LG1pbnV0ZXM6TCoyNCo2MCxzZWNvbmRzOkwqMjQqNjAqNjAsbWlsbGlzZWNvbmRzOkwqMjQqNjAqNjAqMWUzfSxxdWFydGVyczp7bW9udGhzOjMsd2Vla3M6TC8yOCxkYXlzOkwvNCxob3VyczpMKjI0LzQsbWludXRlczpMKjI0KjYwLzQsc2Vjb25kczpMKjI0KjYwKjYwLzQsbWlsbGlzZWNvbmRzOkwqMjQqNjAqNjAqMWUzLzR9LG1vbnRoczp7d2Vla3M6RGUvNyxkYXlzOkRlLGhvdXJzOkRlKjI0LG1pbnV0ZXM6RGUqMjQqNjAsc2Vjb25kczpEZSoyNCo2MCo2MCxtaWxsaXNlY29uZHM6RGUqMjQqNjAqNjAqMWUzfSwuLi5Scn0sZGU9WyJ5ZWFycyIsInF1YXJ0ZXJzIiwibW9udGhzIiwid2Vla3MiLCJkYXlzIiwiaG91cnMiLCJtaW51dGVzIiwic2Vjb25kcyIsIm1pbGxpc2Vjb25kcyJdLFRsPWRlLnNsaWNlKDApLnJldmVyc2UoKTtmdW5jdGlvbiBzZSh0LGUsbj0hMSl7Y29uc3Qgcj17dmFsdWVzOm4/ZS52YWx1ZXM6ey4uLnQudmFsdWVzLC4uLmUudmFsdWVzfHx7fX0sbG9jOnQubG9jLmNsb25lKGUubG9jKSxjb252ZXJzaW9uQWNjdXJhY3k6ZS5jb252ZXJzaW9uQWNjdXJhY3l8fHQuY29udmVyc2lvbkFjY3VyYWN5LG1hdHJpeDplLm1hdHJpeHx8dC5tYXRyaXh9O3JldHVybiBuZXcgVChyKX1mdW5jdGlvbiBacih0LGUpe2xldCBuPWUubWlsbGlzZWNvbmRzPz8wO2Zvcihjb25zdCByIG9mIFRsLnNsaWNlKDEpKWVbcl0mJihuKz1lW3JdKnRbcl0ubWlsbGlzZWNvbmRzKTtyZXR1cm4gbn1mdW5jdGlvbiBQcih0LGUpe2NvbnN0IG49WnIodCxlKTwwPy0xOjE7ZGUucmVkdWNlUmlnaHQoKHIscyk9PntpZih5KGVbc10pKXJldHVybiByO2lmKHIpe2NvbnN0IGk9ZVtyXSpuLGE9dFtzXVtyXSxvPU1hdGguZmxvb3IoaS9hKTtlW3NdKz1vKm4sZVtyXS09byphKm59cmV0dXJuIHN9LG51bGwpLGRlLnJlZHVjZSgocixzKT0+e2lmKHkoZVtzXSkpcmV0dXJuIHI7aWYocil7Y29uc3QgaT1lW3JdJTE7ZVtyXS09aSxlW3NdKz1pKnRbcl1bc119cmV0dXJuIHN9LG51bGwpfWZ1bmN0aW9uIFNsKHQpe2NvbnN0IGU9e307Zm9yKGNvbnN0W24scl1vZiBPYmplY3QuZW50cmllcyh0KSlyIT09MCYmKGVbbl09cik7cmV0dXJuIGV9Y2xhc3MgVHtjb25zdHJ1Y3RvcihlKXtjb25zdCBuPWUuY29udmVyc2lvbkFjY3VyYWN5PT09Imxvbmd0ZXJtInx8ITE7bGV0IHI9bj93bDpwbDtlLm1hdHJpeCYmKHI9ZS5tYXRyaXgpLHRoaXMudmFsdWVzPWUudmFsdWVzLHRoaXMubG9jPWUubG9jfHxPLmNyZWF0ZSgpLHRoaXMuY29udmVyc2lvbkFjY3VyYWN5PW4/Imxvbmd0ZXJtIjoiY2FzdWFsIix0aGlzLmludmFsaWQ9ZS5pbnZhbGlkfHxudWxsLHRoaXMubWF0cml4PXIsdGhpcy5pc0x1eG9uRHVyYXRpb249ITB9c3RhdGljIGZyb21NaWxsaXMoZSxuKXtyZXR1cm4gVC5mcm9tT2JqZWN0KHttaWxsaXNlY29uZHM6ZX0sbil9c3RhdGljIGZyb21PYmplY3QoZSxuPXt9KXtpZihlPT1udWxsfHx0eXBlb2YgZSE9Im9iamVjdCIpdGhyb3cgbmV3IEQoYER1cmF0aW9uLmZyb21PYmplY3Q6IGFyZ3VtZW50IGV4cGVjdGVkIHRvIGJlIGFuIG9iamVjdCwgZ290ICR7ZT09PW51bGw/Im51bGwiOnR5cGVvZiBlfWApO3JldHVybiBuZXcgVCh7dmFsdWVzOmN0KGUsVC5ub3JtYWxpemVVbml0KSxsb2M6Ty5mcm9tT2JqZWN0KG4pLGNvbnZlcnNpb25BY2N1cmFjeTpuLmNvbnZlcnNpb25BY2N1cmFjeSxtYXRyaXg6bi5tYXRyaXh9KX1zdGF0aWMgZnJvbUR1cmF0aW9uTGlrZShlKXtpZihjZShlKSlyZXR1cm4gVC5mcm9tTWlsbGlzKGUpO2lmKFQuaXNEdXJhdGlvbihlKSlyZXR1cm4gZTtpZih0eXBlb2YgZT09Im9iamVjdCIpcmV0dXJuIFQuZnJvbU9iamVjdChlKTt0aHJvdyBuZXcgRChgVW5rbm93biBkdXJhdGlvbiBhcmd1bWVudCAke2V9IG9mIHR5cGUgJHt0eXBlb2YgZX1gKX1zdGF0aWMgZnJvbUlTTyhlLG4pe2NvbnN0W3JdPWNsKGUpO3JldHVybiByP1QuZnJvbU9iamVjdChyLG4pOlQuaW52YWxpZCgidW5wYXJzYWJsZSIsYHRoZSBpbnB1dCAiJHtlfSIgY2FuJ3QgYmUgcGFyc2VkIGFzIElTTyA4NjAxYCl9c3RhdGljIGZyb21JU09UaW1lKGUsbil7Y29uc3Rbcl09ZGwoZSk7cmV0dXJuIHI/VC5mcm9tT2JqZWN0KHIsbik6VC5pbnZhbGlkKCJ1bnBhcnNhYmxlIixgdGhlIGlucHV0ICIke2V9IiBjYW4ndCBiZSBwYXJzZWQgYXMgSVNPIDg2MDFgKX1zdGF0aWMgaW52YWxpZChlLG49bnVsbCl7aWYoIWUpdGhyb3cgbmV3IEQoIm5lZWQgdG8gc3BlY2lmeSBhIHJlYXNvbiB0aGUgRHVyYXRpb24gaXMgaW52YWxpZCIpO2NvbnN0IHI9ZSBpbnN0YW5jZW9mIHo/ZTpuZXcgeihlLG4pO2lmKHYudGhyb3dPbkludmFsaWQpdGhyb3cgbmV3IHFhKHIpO3JldHVybiBuZXcgVCh7aW52YWxpZDpyfSl9c3RhdGljIG5vcm1hbGl6ZVVuaXQoZSl7Y29uc3Qgbj17eWVhcjoieWVhcnMiLHllYXJzOiJ5ZWFycyIscXVhcnRlcjoicXVhcnRlcnMiLHF1YXJ0ZXJzOiJxdWFydGVycyIsbW9udGg6Im1vbnRocyIsbW9udGhzOiJtb250aHMiLHdlZWs6IndlZWtzIix3ZWVrczoid2Vla3MiLGRheToiZGF5cyIsZGF5czoiZGF5cyIsaG91cjoiaG91cnMiLGhvdXJzOiJob3VycyIsbWludXRlOiJtaW51dGVzIixtaW51dGVzOiJtaW51dGVzIixzZWNvbmQ6InNlY29uZHMiLHNlY29uZHM6InNlY29uZHMiLG1pbGxpc2Vjb25kOiJtaWxsaXNlY29uZHMiLG1pbGxpc2Vjb25kczoibWlsbGlzZWNvbmRzIn1bZSYmZS50b0xvd2VyQ2FzZSgpXTtpZighbil0aHJvdyBuZXcgQW4oZSk7cmV0dXJuIG59c3RhdGljIGlzRHVyYXRpb24oZSl7cmV0dXJuIGUmJmUuaXNMdXhvbkR1cmF0aW9ufHwhMX1nZXQgbG9jYWxlKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLmxvYy5sb2NhbGU6bnVsbH1nZXQgbnVtYmVyaW5nU3lzdGVtKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLmxvYy5udW1iZXJpbmdTeXN0ZW06bnVsbH10b0Zvcm1hdChlLG49e30pe2NvbnN0IHI9ey4uLm4sZmxvb3I6bi5yb3VuZCE9PSExJiZuLmZsb29yIT09ITF9O3JldHVybiB0aGlzLmlzVmFsaWQ/Ti5jcmVhdGUodGhpcy5sb2MscikuZm9ybWF0RHVyYXRpb25Gcm9tU3RyaW5nKHRoaXMsZSk6enJ9dG9IdW1hbihlPXt9KXtpZighdGhpcy5pc1ZhbGlkKXJldHVybiB6cjtjb25zdCBuPWRlLm1hcChyPT57Y29uc3Qgcz10aGlzLnZhbHVlc1tyXTtyZXR1cm4geShzKT9udWxsOnRoaXMubG9jLm51bWJlckZvcm1hdHRlcih7c3R5bGU6InVuaXQiLHVuaXREaXNwbGF5OiJsb25nIiwuLi5lLHVuaXQ6ci5zbGljZSgwLC0xKX0pLmZvcm1hdChzKX0pLmZpbHRlcihyPT5yKTtyZXR1cm4gdGhpcy5sb2MubGlzdEZvcm1hdHRlcih7dHlwZToiY29uanVuY3Rpb24iLHN0eWxlOmUubGlzdFN0eWxlfHwibmFycm93IiwuLi5lfSkuZm9ybWF0KG4pfXRvT2JqZWN0KCl7cmV0dXJuIHRoaXMuaXNWYWxpZD97Li4udGhpcy52YWx1ZXN9Ont9fXRvSVNPKCl7aWYoIXRoaXMuaXNWYWxpZClyZXR1cm4gbnVsbDtsZXQgZT0iUCI7cmV0dXJuIHRoaXMueWVhcnMhPT0wJiYoZSs9dGhpcy55ZWFycysiWSIpLCh0aGlzLm1vbnRocyE9PTB8fHRoaXMucXVhcnRlcnMhPT0wKSYmKGUrPXRoaXMubW9udGhzK3RoaXMucXVhcnRlcnMqMysiTSIpLHRoaXMud2Vla3MhPT0wJiYoZSs9dGhpcy53ZWVrcysiVyIpLHRoaXMuZGF5cyE9PTAmJihlKz10aGlzLmRheXMrIkQiKSwodGhpcy5ob3VycyE9PTB8fHRoaXMubWludXRlcyE9PTB8fHRoaXMuc2Vjb25kcyE9PTB8fHRoaXMubWlsbGlzZWNvbmRzIT09MCkmJihlKz0iVCIpLHRoaXMuaG91cnMhPT0wJiYoZSs9dGhpcy5ob3VycysiSCIpLHRoaXMubWludXRlcyE9PTAmJihlKz10aGlzLm1pbnV0ZXMrIk0iKSwodGhpcy5zZWNvbmRzIT09MHx8dGhpcy5taWxsaXNlY29uZHMhPT0wKSYmKGUrPVV0KHRoaXMuc2Vjb25kcyt0aGlzLm1pbGxpc2Vjb25kcy8xZTMsMykrIlMiKSxlPT09IlAiJiYoZSs9IlQwUyIpLGV9dG9JU09UaW1lKGU9e30pe2lmKCF0aGlzLmlzVmFsaWQpcmV0dXJuIG51bGw7Y29uc3Qgbj10aGlzLnRvTWlsbGlzKCk7cmV0dXJuIG48MHx8bj49ODY0ZTU/bnVsbDooZT17c3VwcHJlc3NNaWxsaXNlY29uZHM6ITEsc3VwcHJlc3NTZWNvbmRzOiExLGluY2x1ZGVQcmVmaXg6ITEsZm9ybWF0OiJleHRlbmRlZCIsLi4uZSxpbmNsdWRlT2Zmc2V0OiExfSxnLmZyb21NaWxsaXMobix7em9uZToiVVRDIn0pLnRvSVNPVGltZShlKSl9dG9KU09OKCl7cmV0dXJuIHRoaXMudG9JU08oKX10b1N0cmluZygpe3JldHVybiB0aGlzLnRvSVNPKCl9W1N5bWJvbC5mb3IoIm5vZGVqcy51dGlsLmluc3BlY3QuY3VzdG9tIildKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD9gRHVyYXRpb24geyB2YWx1ZXM6ICR7SlNPTi5zdHJpbmdpZnkodGhpcy52YWx1ZXMpfSB9YDpgRHVyYXRpb24geyBJbnZhbGlkLCByZWFzb246ICR7dGhpcy5pbnZhbGlkUmVhc29ufSB9YH10b01pbGxpcygpe3JldHVybiB0aGlzLmlzVmFsaWQ/WnIodGhpcy5tYXRyaXgsdGhpcy52YWx1ZXMpOk5hTn12YWx1ZU9mKCl7cmV0dXJuIHRoaXMudG9NaWxsaXMoKX1wbHVzKGUpe2lmKCF0aGlzLmlzVmFsaWQpcmV0dXJuIHRoaXM7Y29uc3Qgbj1ULmZyb21EdXJhdGlvbkxpa2UoZSkscj17fTtmb3IoY29uc3QgcyBvZiBkZSkoYmUobi52YWx1ZXMscyl8fGJlKHRoaXMudmFsdWVzLHMpKSYmKHJbc109bi5nZXQocykrdGhpcy5nZXQocykpO3JldHVybiBzZSh0aGlzLHt2YWx1ZXM6cn0sITApfW1pbnVzKGUpe2lmKCF0aGlzLmlzVmFsaWQpcmV0dXJuIHRoaXM7Y29uc3Qgbj1ULmZyb21EdXJhdGlvbkxpa2UoZSk7cmV0dXJuIHRoaXMucGx1cyhuLm5lZ2F0ZSgpKX1tYXBVbml0cyhlKXtpZighdGhpcy5pc1ZhbGlkKXJldHVybiB0aGlzO2NvbnN0IG49e307Zm9yKGNvbnN0IHIgb2YgT2JqZWN0LmtleXModGhpcy52YWx1ZXMpKW5bcl09YnIoZSh0aGlzLnZhbHVlc1tyXSxyKSk7cmV0dXJuIHNlKHRoaXMse3ZhbHVlczpufSwhMCl9Z2V0KGUpe3JldHVybiB0aGlzW1Qubm9ybWFsaXplVW5pdChlKV19c2V0KGUpe2lmKCF0aGlzLmlzVmFsaWQpcmV0dXJuIHRoaXM7Y29uc3Qgbj17Li4udGhpcy52YWx1ZXMsLi4uY3QoZSxULm5vcm1hbGl6ZVVuaXQpfTtyZXR1cm4gc2UodGhpcyx7dmFsdWVzOm59KX1yZWNvbmZpZ3VyZSh7bG9jYWxlOmUsbnVtYmVyaW5nU3lzdGVtOm4sY29udmVyc2lvbkFjY3VyYWN5OnIsbWF0cml4OnN9PXt9KXtjb25zdCBhPXtsb2M6dGhpcy5sb2MuY2xvbmUoe2xvY2FsZTplLG51bWJlcmluZ1N5c3RlbTpufSksbWF0cml4OnMsY29udmVyc2lvbkFjY3VyYWN5OnJ9O3JldHVybiBzZSh0aGlzLGEpfWFzKGUpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy5zaGlmdFRvKGUpLmdldChlKTpOYU59bm9ybWFsaXplKCl7aWYoIXRoaXMuaXNWYWxpZClyZXR1cm4gdGhpcztjb25zdCBlPXRoaXMudG9PYmplY3QoKTtyZXR1cm4gUHIodGhpcy5tYXRyaXgsZSksc2UodGhpcyx7dmFsdWVzOmV9LCEwKX1yZXNjYWxlKCl7aWYoIXRoaXMuaXNWYWxpZClyZXR1cm4gdGhpcztjb25zdCBlPVNsKHRoaXMubm9ybWFsaXplKCkuc2hpZnRUb0FsbCgpLnRvT2JqZWN0KCkpO3JldHVybiBzZSh0aGlzLHt2YWx1ZXM6ZX0sITApfXNoaWZ0VG8oLi4uZSl7aWYoIXRoaXMuaXNWYWxpZClyZXR1cm4gdGhpcztpZihlLmxlbmd0aD09PTApcmV0dXJuIHRoaXM7ZT1lLm1hcChhPT5ULm5vcm1hbGl6ZVVuaXQoYSkpO2NvbnN0IG49e30scj17fSxzPXRoaXMudG9PYmplY3QoKTtsZXQgaTtmb3IoY29uc3QgYSBvZiBkZSlpZihlLmluZGV4T2YoYSk+PTApe2k9YTtsZXQgbz0wO2Zvcihjb25zdCB1IGluIHIpbys9dGhpcy5tYXRyaXhbdV1bYV0qclt1XSxyW3VdPTA7Y2Uoc1thXSkmJihvKz1zW2FdKTtjb25zdCBsPU1hdGgudHJ1bmMobyk7blthXT1sLHJbYV09KG8qMWUzLWwqMWUzKS8xZTN9ZWxzZSBjZShzW2FdKSYmKHJbYV09c1thXSk7Zm9yKGNvbnN0IGEgaW4gcilyW2FdIT09MCYmKG5baV0rPWE9PT1pP3JbYV06clthXS90aGlzLm1hdHJpeFtpXVthXSk7cmV0dXJuIFByKHRoaXMubWF0cml4LG4pLHNlKHRoaXMse3ZhbHVlczpufSwhMCl9c2hpZnRUb0FsbCgpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy5zaGlmdFRvKCJ5ZWFycyIsIm1vbnRocyIsIndlZWtzIiwiZGF5cyIsImhvdXJzIiwibWludXRlcyIsInNlY29uZHMiLCJtaWxsaXNlY29uZHMiKTp0aGlzfW5lZ2F0ZSgpe2lmKCF0aGlzLmlzVmFsaWQpcmV0dXJuIHRoaXM7Y29uc3QgZT17fTtmb3IoY29uc3QgbiBvZiBPYmplY3Qua2V5cyh0aGlzLnZhbHVlcykpZVtuXT10aGlzLnZhbHVlc1tuXT09PTA/MDotdGhpcy52YWx1ZXNbbl07cmV0dXJuIHNlKHRoaXMse3ZhbHVlczplfSwhMCl9Z2V0IHllYXJzKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLnZhbHVlcy55ZWFyc3x8MDpOYU59Z2V0IHF1YXJ0ZXJzKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLnZhbHVlcy5xdWFydGVyc3x8MDpOYU59Z2V0IG1vbnRocygpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy52YWx1ZXMubW9udGhzfHwwOk5hTn1nZXQgd2Vla3MoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMudmFsdWVzLndlZWtzfHwwOk5hTn1nZXQgZGF5cygpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy52YWx1ZXMuZGF5c3x8MDpOYU59Z2V0IGhvdXJzKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLnZhbHVlcy5ob3Vyc3x8MDpOYU59Z2V0IG1pbnV0ZXMoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMudmFsdWVzLm1pbnV0ZXN8fDA6TmFOfWdldCBzZWNvbmRzKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLnZhbHVlcy5zZWNvbmRzfHwwOk5hTn1nZXQgbWlsbGlzZWNvbmRzKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLnZhbHVlcy5taWxsaXNlY29uZHN8fDA6TmFOfWdldCBpc1ZhbGlkKCl7cmV0dXJuIHRoaXMuaW52YWxpZD09PW51bGx9Z2V0IGludmFsaWRSZWFzb24oKXtyZXR1cm4gdGhpcy5pbnZhbGlkP3RoaXMuaW52YWxpZC5yZWFzb246bnVsbH1nZXQgaW52YWxpZEV4cGxhbmF0aW9uKCl7cmV0dXJuIHRoaXMuaW52YWxpZD90aGlzLmludmFsaWQuZXhwbGFuYXRpb246bnVsbH1lcXVhbHMoZSl7aWYoIXRoaXMuaXNWYWxpZHx8IWUuaXNWYWxpZHx8IXRoaXMubG9jLmVxdWFscyhlLmxvYykpcmV0dXJuITE7ZnVuY3Rpb24gbihyLHMpe3JldHVybiByPT09dm9pZCAwfHxyPT09MD9zPT09dm9pZCAwfHxzPT09MDpyPT09c31mb3IoY29uc3QgciBvZiBkZSlpZighbih0aGlzLnZhbHVlc1tyXSxlLnZhbHVlc1tyXSkpcmV0dXJuITE7cmV0dXJuITB9fWNvbnN0IENlPSJJbnZhbGlkIEludGVydmFsIjtmdW5jdGlvbiBPbCh0LGUpe3JldHVybiF0fHwhdC5pc1ZhbGlkP2IuaW52YWxpZCgibWlzc2luZyBvciBpbnZhbGlkIHN0YXJ0Iik6IWV8fCFlLmlzVmFsaWQ/Yi5pbnZhbGlkKCJtaXNzaW5nIG9yIGludmFsaWQgZW5kIik6ZTx0P2IuaW52YWxpZCgiZW5kIGJlZm9yZSBzdGFydCIsYFRoZSBlbmQgb2YgYW4gaW50ZXJ2YWwgbXVzdCBiZSBhZnRlciBpdHMgc3RhcnQsIGJ1dCB5b3UgaGFkIHN0YXJ0PSR7dC50b0lTTygpfSBhbmQgZW5kPSR7ZS50b0lTTygpfWApOm51bGx9Y2xhc3MgYntjb25zdHJ1Y3RvcihlKXt0aGlzLnM9ZS5zdGFydCx0aGlzLmU9ZS5lbmQsdGhpcy5pbnZhbGlkPWUuaW52YWxpZHx8bnVsbCx0aGlzLmlzTHV4b25JbnRlcnZhbD0hMH1zdGF0aWMgaW52YWxpZChlLG49bnVsbCl7aWYoIWUpdGhyb3cgbmV3IEQoIm5lZWQgdG8gc3BlY2lmeSBhIHJlYXNvbiB0aGUgSW50ZXJ2YWwgaXMgaW52YWxpZCIpO2NvbnN0IHI9ZSBpbnN0YW5jZW9mIHo/ZTpuZXcgeihlLG4pO2lmKHYudGhyb3dPbkludmFsaWQpdGhyb3cgbmV3IGphKHIpO3JldHVybiBuZXcgYih7aW52YWxpZDpyfSl9c3RhdGljIGZyb21EYXRlVGltZXMoZSxuKXtjb25zdCByPUhlKGUpLHM9SGUobiksaT1PbChyLHMpO3JldHVybiBpPz9uZXcgYih7c3RhcnQ6cixlbmQ6c30pfXN0YXRpYyBhZnRlcihlLG4pe2NvbnN0IHI9VC5mcm9tRHVyYXRpb25MaWtlKG4pLHM9SGUoZSk7cmV0dXJuIGIuZnJvbURhdGVUaW1lcyhzLHMucGx1cyhyKSl9c3RhdGljIGJlZm9yZShlLG4pe2NvbnN0IHI9VC5mcm9tRHVyYXRpb25MaWtlKG4pLHM9SGUoZSk7cmV0dXJuIGIuZnJvbURhdGVUaW1lcyhzLm1pbnVzKHIpLHMpfXN0YXRpYyBmcm9tSVNPKGUsbil7Y29uc3RbcixzXT0oZXx8IiIpLnNwbGl0KCIvIiwyKTtpZihyJiZzKXtsZXQgaSxhO3RyeXtpPWcuZnJvbUlTTyhyLG4pLGE9aS5pc1ZhbGlkfWNhdGNoe2E9ITF9bGV0IG8sbDt0cnl7bz1nLmZyb21JU08ocyxuKSxsPW8uaXNWYWxpZH1jYXRjaHtsPSExfWlmKGEmJmwpcmV0dXJuIGIuZnJvbURhdGVUaW1lcyhpLG8pO2lmKGEpe2NvbnN0IHU9VC5mcm9tSVNPKHMsbik7aWYodS5pc1ZhbGlkKXJldHVybiBiLmFmdGVyKGksdSl9ZWxzZSBpZihsKXtjb25zdCB1PVQuZnJvbUlTTyhyLG4pO2lmKHUuaXNWYWxpZClyZXR1cm4gYi5iZWZvcmUobyx1KX19cmV0dXJuIGIuaW52YWxpZCgidW5wYXJzYWJsZSIsYHRoZSBpbnB1dCAiJHtlfSIgY2FuJ3QgYmUgcGFyc2VkIGFzIElTTyA4NjAxYCl9c3RhdGljIGlzSW50ZXJ2YWwoZSl7cmV0dXJuIGUmJmUuaXNMdXhvbkludGVydmFsfHwhMX1nZXQgc3RhcnQoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMuczpudWxsfWdldCBlbmQoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMuZTpudWxsfWdldCBpc1ZhbGlkKCl7cmV0dXJuIHRoaXMuaW52YWxpZFJlYXNvbj09PW51bGx9Z2V0IGludmFsaWRSZWFzb24oKXtyZXR1cm4gdGhpcy5pbnZhbGlkP3RoaXMuaW52YWxpZC5yZWFzb246bnVsbH1nZXQgaW52YWxpZEV4cGxhbmF0aW9uKCl7cmV0dXJuIHRoaXMuaW52YWxpZD90aGlzLmludmFsaWQuZXhwbGFuYXRpb246bnVsbH1sZW5ndGgoZT0ibWlsbGlzZWNvbmRzIil7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLnRvRHVyYXRpb24oZSkuZ2V0KGUpOk5hTn1jb3VudChlPSJtaWxsaXNlY29uZHMiLG4pe2lmKCF0aGlzLmlzVmFsaWQpcmV0dXJuIE5hTjtjb25zdCByPXRoaXMuc3RhcnQuc3RhcnRPZihlLG4pO2xldCBzO3JldHVybiBuIT1udWxsJiZuLnVzZUxvY2FsZVdlZWtzP3M9dGhpcy5lbmQucmVjb25maWd1cmUoe2xvY2FsZTpyLmxvY2FsZX0pOnM9dGhpcy5lbmQscz1zLnN0YXJ0T2YoZSxuKSxNYXRoLmZsb29yKHMuZGlmZihyLGUpLmdldChlKSkrKHMudmFsdWVPZigpIT09dGhpcy5lbmQudmFsdWVPZigpKX1oYXNTYW1lKGUpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy5pc0VtcHR5KCl8fHRoaXMuZS5taW51cygxKS5oYXNTYW1lKHRoaXMucyxlKTohMX1pc0VtcHR5KCl7cmV0dXJuIHRoaXMucy52YWx1ZU9mKCk9PT10aGlzLmUudmFsdWVPZigpfWlzQWZ0ZXIoZSl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLnM+ZTohMX1pc0JlZm9yZShlKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMuZTw9ZTohMX1jb250YWlucyhlKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMuczw9ZSYmdGhpcy5lPmU6ITF9c2V0KHtzdGFydDplLGVuZDpufT17fSl7cmV0dXJuIHRoaXMuaXNWYWxpZD9iLmZyb21EYXRlVGltZXMoZXx8dGhpcy5zLG58fHRoaXMuZSk6dGhpc31zcGxpdEF0KC4uLmUpe2lmKCF0aGlzLmlzVmFsaWQpcmV0dXJuW107Y29uc3Qgbj1lLm1hcChIZSkuZmlsdGVyKGE9PnRoaXMuY29udGFpbnMoYSkpLnNvcnQoKGEsbyk9PmEudG9NaWxsaXMoKS1vLnRvTWlsbGlzKCkpLHI9W107bGV0e3N9PXRoaXMsaT0wO2Zvcig7czx0aGlzLmU7KXtjb25zdCBhPW5baV18fHRoaXMuZSxvPSthPit0aGlzLmU/dGhpcy5lOmE7ci5wdXNoKGIuZnJvbURhdGVUaW1lcyhzLG8pKSxzPW8saSs9MX1yZXR1cm4gcn1zcGxpdEJ5KGUpe2NvbnN0IG49VC5mcm9tRHVyYXRpb25MaWtlKGUpO2lmKCF0aGlzLmlzVmFsaWR8fCFuLmlzVmFsaWR8fG4uYXMoIm1pbGxpc2Vjb25kcyIpPT09MClyZXR1cm5bXTtsZXR7czpyfT10aGlzLHM9MSxpO2NvbnN0IGE9W107Zm9yKDtyPHRoaXMuZTspe2NvbnN0IG89dGhpcy5zdGFydC5wbHVzKG4ubWFwVW5pdHMobD0+bCpzKSk7aT0rbz4rdGhpcy5lP3RoaXMuZTpvLGEucHVzaChiLmZyb21EYXRlVGltZXMocixpKSkscj1pLHMrPTF9cmV0dXJuIGF9ZGl2aWRlRXF1YWxseShlKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMuc3BsaXRCeSh0aGlzLmxlbmd0aCgpL2UpLnNsaWNlKDAsZSk6W119b3ZlcmxhcHMoZSl7cmV0dXJuIHRoaXMuZT5lLnMmJnRoaXMuczxlLmV9YWJ1dHNTdGFydChlKXtyZXR1cm4gdGhpcy5pc1ZhbGlkPyt0aGlzLmU9PStlLnM6ITF9YWJ1dHNFbmQoZSl7cmV0dXJuIHRoaXMuaXNWYWxpZD8rZS5lPT0rdGhpcy5zOiExfWVuZ3VsZnMoZSl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLnM8PWUucyYmdGhpcy5lPj1lLmU6ITF9ZXF1YWxzKGUpe3JldHVybiF0aGlzLmlzVmFsaWR8fCFlLmlzVmFsaWQ/ITE6dGhpcy5zLmVxdWFscyhlLnMpJiZ0aGlzLmUuZXF1YWxzKGUuZSl9aW50ZXJzZWN0aW9uKGUpe2lmKCF0aGlzLmlzVmFsaWQpcmV0dXJuIHRoaXM7Y29uc3Qgbj10aGlzLnM+ZS5zP3RoaXMuczplLnMscj10aGlzLmU8ZS5lP3RoaXMuZTplLmU7cmV0dXJuIG4+PXI/bnVsbDpiLmZyb21EYXRlVGltZXMobixyKX11bmlvbihlKXtpZighdGhpcy5pc1ZhbGlkKXJldHVybiB0aGlzO2NvbnN0IG49dGhpcy5zPGUucz90aGlzLnM6ZS5zLHI9dGhpcy5lPmUuZT90aGlzLmU6ZS5lO3JldHVybiBiLmZyb21EYXRlVGltZXMobixyKX1zdGF0aWMgbWVyZ2UoZSl7Y29uc3RbbixyXT1lLnNvcnQoKHMsaSk9PnMucy1pLnMpLnJlZHVjZSgoW3MsaV0sYSk9Pmk/aS5vdmVybGFwcyhhKXx8aS5hYnV0c1N0YXJ0KGEpP1tzLGkudW5pb24oYSldOltzLmNvbmNhdChbaV0pLGFdOltzLGFdLFtbXSxudWxsXSk7cmV0dXJuIHImJm4ucHVzaChyKSxufXN0YXRpYyB4b3IoZSl7bGV0IG49bnVsbCxyPTA7Y29uc3Qgcz1bXSxpPWUubWFwKGw9Plt7dGltZTpsLnMsdHlwZToicyJ9LHt0aW1lOmwuZSx0eXBlOiJlIn1dKSxhPUFycmF5LnByb3RvdHlwZS5jb25jYXQoLi4uaSksbz1hLnNvcnQoKGwsdSk9PmwudGltZS11LnRpbWUpO2Zvcihjb25zdCBsIG9mIG8pcis9bC50eXBlPT09InMiPzE6LTEscj09PTE/bj1sLnRpbWU6KG4mJituIT0rbC50aW1lJiZzLnB1c2goYi5mcm9tRGF0ZVRpbWVzKG4sbC50aW1lKSksbj1udWxsKTtyZXR1cm4gYi5tZXJnZShzKX1kaWZmZXJlbmNlKC4uLmUpe3JldHVybiBiLnhvcihbdGhpc10uY29uY2F0KGUpKS5tYXAobj0+dGhpcy5pbnRlcnNlY3Rpb24obikpLmZpbHRlcihuPT5uJiYhbi5pc0VtcHR5KCkpfXRvU3RyaW5nKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD9gWyR7dGhpcy5zLnRvSVNPKCl9IOKAkyAke3RoaXMuZS50b0lTTygpfSlgOkNlfVtTeW1ib2wuZm9yKCJub2RlanMudXRpbC5pbnNwZWN0LmN1c3RvbSIpXSgpe3JldHVybiB0aGlzLmlzVmFsaWQ/YEludGVydmFsIHsgc3RhcnQ6ICR7dGhpcy5zLnRvSVNPKCl9LCBlbmQ6ICR7dGhpcy5lLnRvSVNPKCl9IH1gOmBJbnRlcnZhbCB7IEludmFsaWQsIHJlYXNvbjogJHt0aGlzLmludmFsaWRSZWFzb259IH1gfXRvTG9jYWxlU3RyaW5nKGU9ZXQsbj17fSl7cmV0dXJuIHRoaXMuaXNWYWxpZD9OLmNyZWF0ZSh0aGlzLnMubG9jLmNsb25lKG4pLGUpLmZvcm1hdEludGVydmFsKHRoaXMpOkNlfXRvSVNPKGUpe3JldHVybiB0aGlzLmlzVmFsaWQ/YCR7dGhpcy5zLnRvSVNPKGUpfS8ke3RoaXMuZS50b0lTTyhlKX1gOkNlfXRvSVNPRGF0ZSgpe3JldHVybiB0aGlzLmlzVmFsaWQ/YCR7dGhpcy5zLnRvSVNPRGF0ZSgpfS8ke3RoaXMuZS50b0lTT0RhdGUoKX1gOkNlfXRvSVNPVGltZShlKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP2Ake3RoaXMucy50b0lTT1RpbWUoZSl9LyR7dGhpcy5lLnRvSVNPVGltZShlKX1gOkNlfXRvRm9ybWF0KGUse3NlcGFyYXRvcjpuPSIg4oCTICJ9PXt9KXtyZXR1cm4gdGhpcy5pc1ZhbGlkP2Ake3RoaXMucy50b0Zvcm1hdChlKX0ke259JHt0aGlzLmUudG9Gb3JtYXQoZSl9YDpDZX10b0R1cmF0aW9uKGUsbil7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLmUuZGlmZih0aGlzLnMsZSxuKTpULmludmFsaWQodGhpcy5pbnZhbGlkUmVhc29uKX1tYXBFbmRwb2ludHMoZSl7cmV0dXJuIGIuZnJvbURhdGVUaW1lcyhlKHRoaXMucyksZSh0aGlzLmUpKX19Y2xhc3MgZHR7c3RhdGljIGhhc0RTVChlPXYuZGVmYXVsdFpvbmUpe2NvbnN0IG49Zy5ub3coKS5zZXRab25lKGUpLnNldCh7bW9udGg6MTJ9KTtyZXR1cm4hZS5pc1VuaXZlcnNhbCYmbi5vZmZzZXQhPT1uLnNldCh7bW9udGg6Nn0pLm9mZnNldH1zdGF0aWMgaXNWYWxpZElBTkFab25lKGUpe3JldHVybiBKLmlzVmFsaWRab25lKGUpfXN0YXRpYyBub3JtYWxpemVab25lKGUpe3JldHVybiBuZShlLHYuZGVmYXVsdFpvbmUpfXN0YXRpYyBnZXRTdGFydE9mV2Vlayh7bG9jYWxlOmU9bnVsbCxsb2NPYmo6bj1udWxsfT17fSl7cmV0dXJuKG58fE8uY3JlYXRlKGUpKS5nZXRTdGFydE9mV2VlaygpfXN0YXRpYyBnZXRNaW5pbXVtRGF5c0luRmlyc3RXZWVrKHtsb2NhbGU6ZT1udWxsLGxvY09iajpuPW51bGx9PXt9KXtyZXR1cm4obnx8Ty5jcmVhdGUoZSkpLmdldE1pbkRheXNJbkZpcnN0V2VlaygpfXN0YXRpYyBnZXRXZWVrZW5kV2Vla2RheXMoe2xvY2FsZTplPW51bGwsbG9jT2JqOm49bnVsbH09e30pe3JldHVybihufHxPLmNyZWF0ZShlKSkuZ2V0V2Vla2VuZERheXMoKS5zbGljZSgpfXN0YXRpYyBtb250aHMoZT0ibG9uZyIse2xvY2FsZTpuPW51bGwsbnVtYmVyaW5nU3lzdGVtOnI9bnVsbCxsb2NPYmo6cz1udWxsLG91dHB1dENhbGVuZGFyOmk9ImdyZWdvcnkifT17fSl7cmV0dXJuKHN8fE8uY3JlYXRlKG4scixpKSkubW9udGhzKGUpfXN0YXRpYyBtb250aHNGb3JtYXQoZT0ibG9uZyIse2xvY2FsZTpuPW51bGwsbnVtYmVyaW5nU3lzdGVtOnI9bnVsbCxsb2NPYmo6cz1udWxsLG91dHB1dENhbGVuZGFyOmk9ImdyZWdvcnkifT17fSl7cmV0dXJuKHN8fE8uY3JlYXRlKG4scixpKSkubW9udGhzKGUsITApfXN0YXRpYyB3ZWVrZGF5cyhlPSJsb25nIix7bG9jYWxlOm49bnVsbCxudW1iZXJpbmdTeXN0ZW06cj1udWxsLGxvY09iajpzPW51bGx9PXt9KXtyZXR1cm4oc3x8Ty5jcmVhdGUobixyLG51bGwpKS53ZWVrZGF5cyhlKX1zdGF0aWMgd2Vla2RheXNGb3JtYXQoZT0ibG9uZyIse2xvY2FsZTpuPW51bGwsbnVtYmVyaW5nU3lzdGVtOnI9bnVsbCxsb2NPYmo6cz1udWxsfT17fSl7cmV0dXJuKHN8fE8uY3JlYXRlKG4scixudWxsKSkud2Vla2RheXMoZSwhMCl9c3RhdGljIG1lcmlkaWVtcyh7bG9jYWxlOmU9bnVsbH09e30pe3JldHVybiBPLmNyZWF0ZShlKS5tZXJpZGllbXMoKX1zdGF0aWMgZXJhcyhlPSJzaG9ydCIse2xvY2FsZTpuPW51bGx9PXt9KXtyZXR1cm4gTy5jcmVhdGUobixudWxsLCJncmVnb3J5IikuZXJhcyhlKX1zdGF0aWMgZmVhdHVyZXMoKXtyZXR1cm57cmVsYXRpdmU6d3IoKSxsb2NhbGVXZWVrOlRyKCl9fX1mdW5jdGlvbiBVcih0LGUpe2NvbnN0IG49cz0+cy50b1VUQygwLHtrZWVwTG9jYWxUaW1lOiEwfSkuc3RhcnRPZigiZGF5IikudmFsdWVPZigpLHI9bihlKS1uKHQpO3JldHVybiBNYXRoLmZsb29yKFQuZnJvbU1pbGxpcyhyKS5hcygiZGF5cyIpKX1mdW5jdGlvbiBrbCh0LGUsbil7Y29uc3Qgcj1bWyJ5ZWFycyIsKGwsdSk9PnUueWVhci1sLnllYXJdLFsicXVhcnRlcnMiLChsLHUpPT51LnF1YXJ0ZXItbC5xdWFydGVyKyh1LnllYXItbC55ZWFyKSo0XSxbIm1vbnRocyIsKGwsdSk9PnUubW9udGgtbC5tb250aCsodS55ZWFyLWwueWVhcikqMTJdLFsid2Vla3MiLChsLHUpPT57Y29uc3QgYz1VcihsLHUpO3JldHVybihjLWMlNykvN31dLFsiZGF5cyIsVXJdXSxzPXt9LGk9dDtsZXQgYSxvO2Zvcihjb25zdFtsLHVdb2YgciluLmluZGV4T2YobCk+PTAmJihhPWwsc1tsXT11KHQsZSksbz1pLnBsdXMocyksbz5lPyhzW2xdLS0sdD1pLnBsdXMocyksdD5lJiYobz10LHNbbF0tLSx0PWkucGx1cyhzKSkpOnQ9byk7cmV0dXJuW3QscyxvLGFdfWZ1bmN0aW9uIGJsKHQsZSxuLHIpe2xldFtzLGksYSxvXT1rbCh0LGUsbik7Y29uc3QgbD1lLXMsdT1uLmZpbHRlcihkPT5bImhvdXJzIiwibWludXRlcyIsInNlY29uZHMiLCJtaWxsaXNlY29uZHMiXS5pbmRleE9mKGQpPj0wKTt1Lmxlbmd0aD09PTAmJihhPGUmJihhPXMucGx1cyh7W29dOjF9KSksYSE9PXMmJihpW29dPShpW29dfHwwKStsLyhhLXMpKSk7Y29uc3QgYz1ULmZyb21PYmplY3QoaSxyKTtyZXR1cm4gdS5sZW5ndGg+MD9ULmZyb21NaWxsaXMobCxyKS5zaGlmdFRvKC4uLnUpLnBsdXMoYyk6Y31jb25zdCBHdD17YXJhYjoiW9mgLdmpXSIsYXJhYmV4dDoiW9uwLdu5XSIsYmFsaToiW+GtkC3hrZldIixiZW5nOiJb4KemLeCnr10iLGRldmE6IlvgpaYt4KWvXSIsZnVsbHdpZGU6IlvvvJAt77yZXSIsZ3VqcjoiW+Crpi3gq69dIixoYW5pZGVjOiJb44CHfOS4gHzkuox85LiJfOWbm3zkupR85YWtfOS4g3zlhat85LmdXSIsa2htcjoiW+GfoC3hn6ldIixrbmRhOiJb4LOmLeCzr10iLGxhb286Ilvgu5At4LuZXSIsbGltYjoiW+Glhi3hpY9dIixtbHltOiJb4LWmLeC1r10iLG1vbmc6IlvhoJAt4aCZXSIsbXltcjoiW+GBgC3hgYldIixvcnlhOiJb4K2mLeCtr10iLHRhbWxkZWM6Ilvgr6Yt4K+vXSIsdGVsdToiW+Cxpi3gsa9dIix0aGFpOiJb4LmQLeC5mV0iLHRpYnQ6IlvgvKAt4LypXSIsbGF0bjoiXFxkIn0sSHI9e2FyYWI6WzE2MzIsMTY0MV0sYXJhYmV4dDpbMTc3NiwxNzg1XSxiYWxpOls2OTkyLDcwMDFdLGJlbmc6WzI1MzQsMjU0M10sZGV2YTpbMjQwNiwyNDE1XSxmdWxsd2lkZTpbNjUyOTYsNjUzMDNdLGd1anI6WzI3OTAsMjc5OV0sa2htcjpbNjExMiw2MTIxXSxrbmRhOlszMzAyLDMzMTFdLGxhb286WzM3OTIsMzgwMV0sbGltYjpbNjQ3MCw2NDc5XSxtbHltOlszNDMwLDM0MzldLG1vbmc6WzYxNjAsNjE2OV0sbXltcjpbNDE2MCw0MTY5XSxvcnlhOlsyOTE4LDI5MjddLHRhbWxkZWM6WzMwNDYsMzA1NV0sdGVsdTpbMzE3NCwzMTgzXSx0aGFpOlszNjY0LDM2NzNdLHRpYnQ6WzM4NzIsMzg4MV19LHZsPUd0LmhhbmlkZWMucmVwbGFjZSgvW1xbfFxdXS9nLCIiKS5zcGxpdCgiIik7ZnVuY3Rpb24gSWwodCl7bGV0IGU9cGFyc2VJbnQodCwxMCk7aWYoaXNOYU4oZSkpe2U9IiI7Zm9yKGxldCBuPTA7bjx0Lmxlbmd0aDtuKyspe2NvbnN0IHI9dC5jaGFyQ29kZUF0KG4pO2lmKHRbbl0uc2VhcmNoKEd0LmhhbmlkZWMpIT09LTEpZSs9dmwuaW5kZXhPZih0W25dKTtlbHNlIGZvcihjb25zdCBzIGluIEhyKXtjb25zdFtpLGFdPUhyW3NdO3I+PWkmJnI8PWEmJihlKz1yLWkpfX1yZXR1cm4gcGFyc2VJbnQoZSwxMCl9ZWxzZSByZXR1cm4gZX1mdW5jdGlvbiBSKHtudW1iZXJpbmdTeXN0ZW06dH0sZT0iIil7cmV0dXJuIG5ldyBSZWdFeHAoYCR7R3RbdHx8ImxhdG4iXX0ke2V9YCl9Y29uc3QgRWw9Im1pc3NpbmcgSW50bC5EYXRlVGltZUZvcm1hdC5mb3JtYXRUb1BhcnRzIHN1cHBvcnQiO2Z1bmN0aW9uIFModCxlPW49Pm4pe3JldHVybntyZWdleDp0LGRlc2VyOihbbl0pPT5lKElsKG4pKX19Y29uc3QganI9IlsgwqBdIixxcj1uZXcgUmVnRXhwKGpyLCJnIik7ZnVuY3Rpb24gTmwodCl7cmV0dXJuIHQucmVwbGFjZSgvXC4vZywiXFwuPyIpLnJlcGxhY2UocXIsanIpfWZ1bmN0aW9uIFlyKHQpe3JldHVybiB0LnJlcGxhY2UoL1wuL2csIiIpLnJlcGxhY2UocXIsIiAiKS50b0xvd2VyQ2FzZSgpfWZ1bmN0aW9uIFoodCxlKXtyZXR1cm4gdD09PW51bGw/bnVsbDp7cmVnZXg6UmVnRXhwKHQubWFwKE5sKS5qb2luKCJ8IikpLGRlc2VyOihbbl0pPT50LmZpbmRJbmRleChyPT5ZcihuKT09PVlyKHIpKStlfX1mdW5jdGlvbiBHcih0LGUpe3JldHVybntyZWdleDp0LGRlc2VyOihbLG4scl0pPT51dChuLHIpLGdyb3VwczplfX1mdW5jdGlvbiBodCh0KXtyZXR1cm57cmVnZXg6dCxkZXNlcjooW2VdKT0+ZX19ZnVuY3Rpb24gTWwodCl7cmV0dXJuIHQucmVwbGFjZSgvW1wtXFtcXXt9KCkqKz8uLFxcXF4kfCNcc10vZywiXFwkJiIpfWZ1bmN0aW9uIHhsKHQsZSl7Y29uc3Qgbj1SKGUpLHI9UihlLCJ7Mn0iKSxzPVIoZSwiezN9IiksaT1SKGUsIns0fSIpLGE9UihlLCJ7Nn0iKSxvPVIoZSwiezEsMn0iKSxsPVIoZSwiezEsM30iKSx1PVIoZSwiezEsNn0iKSxjPVIoZSwiezEsOX0iKSxkPVIoZSwiezIsNH0iKSxwPVIoZSwiezQsNn0iKSxoPU09Pih7cmVnZXg6UmVnRXhwKE1sKE0udmFsKSksZGVzZXI6KFtqXSk9PmosbGl0ZXJhbDohMH0pLFA9KE09PntpZih0LmxpdGVyYWwpcmV0dXJuIGgoTSk7c3dpdGNoKE0udmFsKXtjYXNlIkciOnJldHVybiBaKGUuZXJhcygic2hvcnQiKSwwKTtjYXNlIkdHIjpyZXR1cm4gWihlLmVyYXMoImxvbmciKSwwKTtjYXNlInkiOnJldHVybiBTKHUpO2Nhc2UieXkiOnJldHVybiBTKGQsSHQpO2Nhc2UieXl5eSI6cmV0dXJuIFMoaSk7Y2FzZSJ5eXl5eSI6cmV0dXJuIFMocCk7Y2FzZSJ5eXl5eXkiOnJldHVybiBTKGEpO2Nhc2UiTSI6cmV0dXJuIFMobyk7Y2FzZSJNTSI6cmV0dXJuIFMocik7Y2FzZSJNTU0iOnJldHVybiBaKGUubW9udGhzKCJzaG9ydCIsITApLDEpO2Nhc2UiTU1NTSI6cmV0dXJuIFooZS5tb250aHMoImxvbmciLCEwKSwxKTtjYXNlIkwiOnJldHVybiBTKG8pO2Nhc2UiTEwiOnJldHVybiBTKHIpO2Nhc2UiTExMIjpyZXR1cm4gWihlLm1vbnRocygic2hvcnQiLCExKSwxKTtjYXNlIkxMTEwiOnJldHVybiBaKGUubW9udGhzKCJsb25nIiwhMSksMSk7Y2FzZSJkIjpyZXR1cm4gUyhvKTtjYXNlImRkIjpyZXR1cm4gUyhyKTtjYXNlIm8iOnJldHVybiBTKGwpO2Nhc2Uib29vIjpyZXR1cm4gUyhzKTtjYXNlIkhIIjpyZXR1cm4gUyhyKTtjYXNlIkgiOnJldHVybiBTKG8pO2Nhc2UiaGgiOnJldHVybiBTKHIpO2Nhc2UiaCI6cmV0dXJuIFMobyk7Y2FzZSJtbSI6cmV0dXJuIFMocik7Y2FzZSJtIjpyZXR1cm4gUyhvKTtjYXNlInEiOnJldHVybiBTKG8pO2Nhc2UicXEiOnJldHVybiBTKHIpO2Nhc2UicyI6cmV0dXJuIFMobyk7Y2FzZSJzcyI6cmV0dXJuIFMocik7Y2FzZSJTIjpyZXR1cm4gUyhsKTtjYXNlIlNTUyI6cmV0dXJuIFMocyk7Y2FzZSJ1IjpyZXR1cm4gaHQoYyk7Y2FzZSJ1dSI6cmV0dXJuIGh0KG8pO2Nhc2UidXV1IjpyZXR1cm4gUyhuKTtjYXNlImEiOnJldHVybiBaKGUubWVyaWRpZW1zKCksMCk7Y2FzZSJra2trIjpyZXR1cm4gUyhpKTtjYXNlImtrIjpyZXR1cm4gUyhkLEh0KTtjYXNlIlciOnJldHVybiBTKG8pO2Nhc2UiV1ciOnJldHVybiBTKHIpO2Nhc2UiRSI6Y2FzZSJjIjpyZXR1cm4gUyhuKTtjYXNlIkVFRSI6cmV0dXJuIFooZS53ZWVrZGF5cygic2hvcnQiLCExKSwxKTtjYXNlIkVFRUUiOnJldHVybiBaKGUud2Vla2RheXMoImxvbmciLCExKSwxKTtjYXNlImNjYyI6cmV0dXJuIFooZS53ZWVrZGF5cygic2hvcnQiLCEwKSwxKTtjYXNlImNjY2MiOnJldHVybiBaKGUud2Vla2RheXMoImxvbmciLCEwKSwxKTtjYXNlIloiOmNhc2UiWloiOnJldHVybiBHcihuZXcgUmVnRXhwKGAoWystXSR7by5zb3VyY2V9KSg/OjooJHtyLnNvdXJjZX0pKT9gKSwyKTtjYXNlIlpaWiI6cmV0dXJuIEdyKG5ldyBSZWdFeHAoYChbKy1dJHtvLnNvdXJjZX0pKCR7ci5zb3VyY2V9KT9gKSwyKTtjYXNlInoiOnJldHVybiBodCgvW2Etel8rLS9dezEsMjU2fT8vaSk7Y2FzZSIgIjpyZXR1cm4gaHQoL1teXFNcblxyXS8pO2RlZmF1bHQ6cmV0dXJuIGgoTSl9fSkodCl8fHtpbnZhbGlkUmVhc29uOkVsfTtyZXR1cm4gUC50b2tlbj10LFB9Y29uc3QgRGw9e3llYXI6eyIyLWRpZ2l0IjoieXkiLG51bWVyaWM6Inl5eXl5In0sbW9udGg6e251bWVyaWM6Ik0iLCIyLWRpZ2l0IjoiTU0iLHNob3J0OiJNTU0iLGxvbmc6Ik1NTU0ifSxkYXk6e251bWVyaWM6ImQiLCIyLWRpZ2l0IjoiZGQifSx3ZWVrZGF5OntzaG9ydDoiRUVFIixsb25nOiJFRUVFIn0sZGF5cGVyaW9kOiJhIixkYXlQZXJpb2Q6ImEiLGhvdXIxMjp7bnVtZXJpYzoiaCIsIjItZGlnaXQiOiJoaCJ9LGhvdXIyNDp7bnVtZXJpYzoiSCIsIjItZGlnaXQiOiJISCJ9LG1pbnV0ZTp7bnVtZXJpYzoibSIsIjItZGlnaXQiOiJtbSJ9LHNlY29uZDp7bnVtZXJpYzoicyIsIjItZGlnaXQiOiJzcyJ9LHRpbWVab25lTmFtZTp7bG9uZzoiWlpaWloiLHNob3J0OiJaWloifX07ZnVuY3Rpb24gQ2wodCxlLG4pe2NvbnN0e3R5cGU6cix2YWx1ZTpzfT10O2lmKHI9PT0ibGl0ZXJhbCIpe2NvbnN0IGw9L15ccyskLy50ZXN0KHMpO3JldHVybntsaXRlcmFsOiFsLHZhbDpsPyIgIjpzfX1jb25zdCBpPWVbcl07bGV0IGE9cjtyPT09ImhvdXIiJiYoZS5ob3VyMTIhPW51bGw/YT1lLmhvdXIxMj8iaG91cjEyIjoiaG91cjI0IjplLmhvdXJDeWNsZSE9bnVsbD9lLmhvdXJDeWNsZT09PSJoMTEifHxlLmhvdXJDeWNsZT09PSJoMTIiP2E9ImhvdXIxMiI6YT0iaG91cjI0IjphPW4uaG91cjEyPyJob3VyMTIiOiJob3VyMjQiKTtsZXQgbz1EbFthXTtpZih0eXBlb2Ygbz09Im9iamVjdCImJihvPW9baV0pLG8pcmV0dXJue2xpdGVyYWw6ITEsdmFsOm99fWZ1bmN0aW9uIEZsKHQpe3JldHVybltgXiR7dC5tYXAobj0+bi5yZWdleCkucmVkdWNlKChuLHIpPT5gJHtufSgke3Iuc291cmNlfSlgLCIiKX0kYCx0XX1mdW5jdGlvbiBBbCh0LGUsbil7Y29uc3Qgcj10Lm1hdGNoKGUpO2lmKHIpe2NvbnN0IHM9e307bGV0IGk9MTtmb3IoY29uc3QgYSBpbiBuKWlmKGJlKG4sYSkpe2NvbnN0IG89blthXSxsPW8uZ3JvdXBzP28uZ3JvdXBzKzE6MTshby5saXRlcmFsJiZvLnRva2VuJiYoc1tvLnRva2VuLnZhbFswXV09by5kZXNlcihyLnNsaWNlKGksaStsKSkpLGkrPWx9cmV0dXJuW3Isc119ZWxzZSByZXR1cm5bcix7fV19ZnVuY3Rpb24gVmwodCl7Y29uc3QgZT1pPT57c3dpdGNoKGkpe2Nhc2UiUyI6cmV0dXJuIm1pbGxpc2Vjb25kIjtjYXNlInMiOnJldHVybiJzZWNvbmQiO2Nhc2UibSI6cmV0dXJuIm1pbnV0ZSI7Y2FzZSJoIjpjYXNlIkgiOnJldHVybiJob3VyIjtjYXNlImQiOnJldHVybiJkYXkiO2Nhc2UibyI6cmV0dXJuIm9yZGluYWwiO2Nhc2UiTCI6Y2FzZSJNIjpyZXR1cm4ibW9udGgiO2Nhc2UieSI6cmV0dXJuInllYXIiO2Nhc2UiRSI6Y2FzZSJjIjpyZXR1cm4id2Vla2RheSI7Y2FzZSJXIjpyZXR1cm4id2Vla051bWJlciI7Y2FzZSJrIjpyZXR1cm4id2Vla1llYXIiO2Nhc2UicSI6cmV0dXJuInF1YXJ0ZXIiO2RlZmF1bHQ6cmV0dXJuIG51bGx9fTtsZXQgbj1udWxsLHI7cmV0dXJuIHkodC56KXx8KG49Si5jcmVhdGUodC56KSkseSh0LlopfHwobnx8KG49bmV3IHgodC5aKSkscj10LlopLHkodC5xKXx8KHQuTT0odC5xLTEpKjMrMSkseSh0LmgpfHwodC5oPDEyJiZ0LmE9PT0xP3QuaCs9MTI6dC5oPT09MTImJnQuYT09PTAmJih0Lmg9MCkpLHQuRz09PTAmJnQueSYmKHQueT0tdC55KSx5KHQudSl8fCh0LlM9UHQodC51KSksW09iamVjdC5rZXlzKHQpLnJlZHVjZSgoaSxhKT0+e2NvbnN0IG89ZShhKTtyZXR1cm4gbyYmKGlbb109dFthXSksaX0se30pLG4scl19bGV0IEp0PW51bGw7ZnVuY3Rpb24gV2woKXtyZXR1cm4gSnR8fChKdD1nLmZyb21NaWxsaXMoMTU1NTU1NTU1NTU1NSkpLEp0fWZ1bmN0aW9uIExsKHQsZSl7aWYodC5saXRlcmFsKXJldHVybiB0O2NvbnN0IG49Ti5tYWNyb1Rva2VuVG9Gb3JtYXRPcHRzKHQudmFsKSxyPVFyKG4sZSk7cmV0dXJuIHI9PW51bGx8fHIuaW5jbHVkZXModm9pZCAwKT90OnJ9ZnVuY3Rpb24gSnIodCxlKXtyZXR1cm4gQXJyYXkucHJvdG90eXBlLmNvbmNhdCguLi50Lm1hcChuPT5MbChuLGUpKSl9ZnVuY3Rpb24gQnIodCxlLG4pe2NvbnN0IHI9SnIoTi5wYXJzZUZvcm1hdChuKSx0KSxzPXIubWFwKGE9PnhsKGEsdCkpLGk9cy5maW5kKGE9PmEuaW52YWxpZFJlYXNvbik7aWYoaSlyZXR1cm57aW5wdXQ6ZSx0b2tlbnM6cixpbnZhbGlkUmVhc29uOmkuaW52YWxpZFJlYXNvbn07e2NvbnN0W2Esb109RmwocyksbD1SZWdFeHAoYSwiaSIpLFt1LGNdPUFsKGUsbCxvKSxbZCxwLGhdPWM/VmwoYyk6W251bGwsbnVsbCx2b2lkIDBdO2lmKGJlKGMsImEiKSYmYmUoYywiSCIpKXRocm93IG5ldyBrZSgiQ2FuJ3QgaW5jbHVkZSBtZXJpZGllbSB3aGVuIHNwZWNpZnlpbmcgMjQtaG91ciBmb3JtYXQiKTtyZXR1cm57aW5wdXQ6ZSx0b2tlbnM6cixyZWdleDpsLHJhd01hdGNoZXM6dSxtYXRjaGVzOmMscmVzdWx0OmQsem9uZTpwLHNwZWNpZmljT2Zmc2V0Omh9fX1mdW5jdGlvbiAkbCh0LGUsbil7Y29uc3R7cmVzdWx0OnIsem9uZTpzLHNwZWNpZmljT2Zmc2V0OmksaW52YWxpZFJlYXNvbjphfT1Ccih0LGUsbik7cmV0dXJuW3IscyxpLGFdfWZ1bmN0aW9uIFFyKHQsZSl7aWYoIXQpcmV0dXJuIG51bGw7Y29uc3Qgcj1OLmNyZWF0ZShlLHQpLmR0Rm9ybWF0dGVyKFdsKCkpLHM9ci5mb3JtYXRUb1BhcnRzKCksaT1yLnJlc29sdmVkT3B0aW9ucygpO3JldHVybiBzLm1hcChhPT5DbChhLHQsaSkpfWNvbnN0IEJ0PSJJbnZhbGlkIERhdGVUaW1lIixLcj04NjRlMTM7ZnVuY3Rpb24gbXQodCl7cmV0dXJuIG5ldyB6KCJ1bnN1cHBvcnRlZCB6b25lIixgdGhlIHpvbmUgIiR7dC5uYW1lfSIgaXMgbm90IHN1cHBvcnRlZGApfWZ1bmN0aW9uIFF0KHQpe3JldHVybiB0LndlZWtEYXRhPT09bnVsbCYmKHQud2Vla0RhdGE9aXQodC5jKSksdC53ZWVrRGF0YX1mdW5jdGlvbiBLdCh0KXtyZXR1cm4gdC5sb2NhbFdlZWtEYXRhPT09bnVsbCYmKHQubG9jYWxXZWVrRGF0YT1pdCh0LmMsdC5sb2MuZ2V0TWluRGF5c0luRmlyc3RXZWVrKCksdC5sb2MuZ2V0U3RhcnRPZldlZWsoKSkpLHQubG9jYWxXZWVrRGF0YX1mdW5jdGlvbiBoZSh0LGUpe2NvbnN0IG49e3RzOnQudHMsem9uZTp0LnpvbmUsYzp0LmMsbzp0Lm8sbG9jOnQubG9jLGludmFsaWQ6dC5pbnZhbGlkfTtyZXR1cm4gbmV3IGcoey4uLm4sLi4uZSxvbGQ6bn0pfWZ1bmN0aW9uIFhyKHQsZSxuKXtsZXQgcj10LWUqNjAqMWUzO2NvbnN0IHM9bi5vZmZzZXQocik7aWYoZT09PXMpcmV0dXJuW3IsZV07ci09KHMtZSkqNjAqMWUzO2NvbnN0IGk9bi5vZmZzZXQocik7cmV0dXJuIHM9PT1pP1tyLHNdOlt0LU1hdGgubWluKHMsaSkqNjAqMWUzLE1hdGgubWF4KHMsaSldfWZ1bmN0aW9uIHl0KHQsZSl7dCs9ZSo2MCoxZTM7Y29uc3Qgbj1uZXcgRGF0ZSh0KTtyZXR1cm57eWVhcjpuLmdldFVUQ0Z1bGxZZWFyKCksbW9udGg6bi5nZXRVVENNb250aCgpKzEsZGF5Om4uZ2V0VVRDRGF0ZSgpLGhvdXI6bi5nZXRVVENIb3VycygpLG1pbnV0ZTpuLmdldFVUQ01pbnV0ZXMoKSxzZWNvbmQ6bi5nZXRVVENTZWNvbmRzKCksbWlsbGlzZWNvbmQ6bi5nZXRVVENNaWxsaXNlY29uZHMoKX19ZnVuY3Rpb24gZ3QodCxlLG4pe3JldHVybiBYcihsdCh0KSxlLG4pfWZ1bmN0aW9uIGVzKHQsZSl7Y29uc3Qgbj10Lm8scj10LmMueWVhcitNYXRoLnRydW5jKGUueWVhcnMpLHM9dC5jLm1vbnRoK01hdGgudHJ1bmMoZS5tb250aHMpK01hdGgudHJ1bmMoZS5xdWFydGVycykqMyxpPXsuLi50LmMseWVhcjpyLG1vbnRoOnMsZGF5Ok1hdGgubWluKHQuYy5kYXksb3QocixzKSkrTWF0aC50cnVuYyhlLmRheXMpK01hdGgudHJ1bmMoZS53ZWVrcykqN30sYT1ULmZyb21PYmplY3Qoe3llYXJzOmUueWVhcnMtTWF0aC50cnVuYyhlLnllYXJzKSxxdWFydGVyczplLnF1YXJ0ZXJzLU1hdGgudHJ1bmMoZS5xdWFydGVycyksbW9udGhzOmUubW9udGhzLU1hdGgudHJ1bmMoZS5tb250aHMpLHdlZWtzOmUud2Vla3MtTWF0aC50cnVuYyhlLndlZWtzKSxkYXlzOmUuZGF5cy1NYXRoLnRydW5jKGUuZGF5cyksaG91cnM6ZS5ob3VycyxtaW51dGVzOmUubWludXRlcyxzZWNvbmRzOmUuc2Vjb25kcyxtaWxsaXNlY29uZHM6ZS5taWxsaXNlY29uZHN9KS5hcygibWlsbGlzZWNvbmRzIiksbz1sdChpKTtsZXRbbCx1XT1YcihvLG4sdC56b25lKTtyZXR1cm4gYSE9PTAmJihsKz1hLHU9dC56b25lLm9mZnNldChsKSkse3RzOmwsbzp1fX1mdW5jdGlvbiBVZSh0LGUsbixyLHMsaSl7Y29uc3R7c2V0Wm9uZTphLHpvbmU6b309bjtpZih0JiZPYmplY3Qua2V5cyh0KS5sZW5ndGghPT0wfHxlKXtjb25zdCBsPWV8fG8sdT1nLmZyb21PYmplY3QodCx7Li4ubix6b25lOmwsc3BlY2lmaWNPZmZzZXQ6aX0pO3JldHVybiBhP3U6dS5zZXRab25lKG8pfWVsc2UgcmV0dXJuIGcuaW52YWxpZChuZXcgeigidW5wYXJzYWJsZSIsYHRoZSBpbnB1dCAiJHtzfSIgY2FuJ3QgYmUgcGFyc2VkIGFzICR7cn1gKSl9ZnVuY3Rpb24gcHQodCxlLG49ITApe3JldHVybiB0LmlzVmFsaWQ/Ti5jcmVhdGUoTy5jcmVhdGUoImVuLVVTIikse2FsbG93WjpuLGZvcmNlU2ltcGxlOiEwfSkuZm9ybWF0RGF0ZVRpbWVGcm9tU3RyaW5nKHQsZSk6bnVsbH1mdW5jdGlvbiBYdCh0LGUpe2NvbnN0IG49dC5jLnllYXI+OTk5OXx8dC5jLnllYXI8MDtsZXQgcj0iIjtyZXR1cm4gbiYmdC5jLnllYXI+PTAmJihyKz0iKyIpLHIrPUkodC5jLnllYXIsbj82OjQpLGU/KHIrPSItIixyKz1JKHQuYy5tb250aCkscis9Ii0iLHIrPUkodC5jLmRheSkpOihyKz1JKHQuYy5tb250aCkscis9SSh0LmMuZGF5KSkscn1mdW5jdGlvbiB0cyh0LGUsbixyLHMsaSl7bGV0IGE9SSh0LmMuaG91cik7cmV0dXJuIGU/KGErPSI6IixhKz1JKHQuYy5taW51dGUpLCh0LmMubWlsbGlzZWNvbmQhPT0wfHx0LmMuc2Vjb25kIT09MHx8IW4pJiYoYSs9IjoiKSk6YSs9SSh0LmMubWludXRlKSwodC5jLm1pbGxpc2Vjb25kIT09MHx8dC5jLnNlY29uZCE9PTB8fCFuKSYmKGErPUkodC5jLnNlY29uZCksKHQuYy5taWxsaXNlY29uZCE9PTB8fCFyKSYmKGErPSIuIixhKz1JKHQuYy5taWxsaXNlY29uZCwzKSkpLHMmJih0LmlzT2Zmc2V0Rml4ZWQmJnQub2Zmc2V0PT09MCYmIWk/YSs9IloiOnQubzwwPyhhKz0iLSIsYSs9SShNYXRoLnRydW5jKC10Lm8vNjApKSxhKz0iOiIsYSs9SShNYXRoLnRydW5jKC10Lm8lNjApKSk6KGErPSIrIixhKz1JKE1hdGgudHJ1bmModC5vLzYwKSksYSs9IjoiLGErPUkoTWF0aC50cnVuYyh0Lm8lNjApKSkpLGkmJihhKz0iWyIrdC56b25lLmlhbmFOYW1lKyJdIiksYX1jb25zdCBucz17bW9udGg6MSxkYXk6MSxob3VyOjAsbWludXRlOjAsc2Vjb25kOjAsbWlsbGlzZWNvbmQ6MH0sX2w9e3dlZWtOdW1iZXI6MSx3ZWVrZGF5OjEsaG91cjowLG1pbnV0ZTowLHNlY29uZDowLG1pbGxpc2Vjb25kOjB9LHpsPXtvcmRpbmFsOjEsaG91cjowLG1pbnV0ZTowLHNlY29uZDowLG1pbGxpc2Vjb25kOjB9LHJzPVsieWVhciIsIm1vbnRoIiwiZGF5IiwiaG91ciIsIm1pbnV0ZSIsInNlY29uZCIsIm1pbGxpc2Vjb25kIl0sUmw9WyJ3ZWVrWWVhciIsIndlZWtOdW1iZXIiLCJ3ZWVrZGF5IiwiaG91ciIsIm1pbnV0ZSIsInNlY29uZCIsIm1pbGxpc2Vjb25kIl0sWmw9WyJ5ZWFyIiwib3JkaW5hbCIsImhvdXIiLCJtaW51dGUiLCJzZWNvbmQiLCJtaWxsaXNlY29uZCJdO2Z1bmN0aW9uIFBsKHQpe2NvbnN0IGU9e3llYXI6InllYXIiLHllYXJzOiJ5ZWFyIixtb250aDoibW9udGgiLG1vbnRoczoibW9udGgiLGRheToiZGF5IixkYXlzOiJkYXkiLGhvdXI6ImhvdXIiLGhvdXJzOiJob3VyIixtaW51dGU6Im1pbnV0ZSIsbWludXRlczoibWludXRlIixxdWFydGVyOiJxdWFydGVyIixxdWFydGVyczoicXVhcnRlciIsc2Vjb25kOiJzZWNvbmQiLHNlY29uZHM6InNlY29uZCIsbWlsbGlzZWNvbmQ6Im1pbGxpc2Vjb25kIixtaWxsaXNlY29uZHM6Im1pbGxpc2Vjb25kIix3ZWVrZGF5OiJ3ZWVrZGF5Iix3ZWVrZGF5czoid2Vla2RheSIsd2Vla251bWJlcjoid2Vla051bWJlciIsd2Vla3NudW1iZXI6IndlZWtOdW1iZXIiLHdlZWtudW1iZXJzOiJ3ZWVrTnVtYmVyIix3ZWVreWVhcjoid2Vla1llYXIiLHdlZWt5ZWFyczoid2Vla1llYXIiLG9yZGluYWw6Im9yZGluYWwifVt0LnRvTG93ZXJDYXNlKCldO2lmKCFlKXRocm93IG5ldyBBbih0KTtyZXR1cm4gZX1mdW5jdGlvbiBzcyh0KXtzd2l0Y2godC50b0xvd2VyQ2FzZSgpKXtjYXNlImxvY2Fsd2Vla2RheSI6Y2FzZSJsb2NhbHdlZWtkYXlzIjpyZXR1cm4ibG9jYWxXZWVrZGF5IjtjYXNlImxvY2Fsd2Vla251bWJlciI6Y2FzZSJsb2NhbHdlZWtudW1iZXJzIjpyZXR1cm4ibG9jYWxXZWVrTnVtYmVyIjtjYXNlImxvY2Fsd2Vla3llYXIiOmNhc2UibG9jYWx3ZWVreWVhcnMiOnJldHVybiJsb2NhbFdlZWtZZWFyIjtkZWZhdWx0OnJldHVybiBQbCh0KX19ZnVuY3Rpb24gaXModCxlKXtjb25zdCBuPW5lKGUuem9uZSx2LmRlZmF1bHRab25lKSxyPU8uZnJvbU9iamVjdChlKSxzPXYubm93KCk7bGV0IGksYTtpZih5KHQueWVhcikpaT1zO2Vsc2V7Zm9yKGNvbnN0IHUgb2YgcnMpeSh0W3VdKSYmKHRbdV09bnNbdV0pO2NvbnN0IG89Z3IodCl8fHByKHQpO2lmKG8pcmV0dXJuIGcuaW52YWxpZChvKTtjb25zdCBsPW4ub2Zmc2V0KHMpO1tpLGFdPWd0KHQsbCxuKX1yZXR1cm4gbmV3IGcoe3RzOmksem9uZTpuLGxvYzpyLG86YX0pfWZ1bmN0aW9uIGFzKHQsZSxuKXtjb25zdCByPXkobi5yb3VuZCk/ITA6bi5yb3VuZCxzPShhLG8pPT4oYT1VdChhLHJ8fG4uY2FsZW5kYXJ5PzA6MiwhMCksZS5sb2MuY2xvbmUobikucmVsRm9ybWF0dGVyKG4pLmZvcm1hdChhLG8pKSxpPWE9Pm4uY2FsZW5kYXJ5P2UuaGFzU2FtZSh0LGEpPzA6ZS5zdGFydE9mKGEpLmRpZmYodC5zdGFydE9mKGEpLGEpLmdldChhKTplLmRpZmYodCxhKS5nZXQoYSk7aWYobi51bml0KXJldHVybiBzKGkobi51bml0KSxuLnVuaXQpO2Zvcihjb25zdCBhIG9mIG4udW5pdHMpe2NvbnN0IG89aShhKTtpZihNYXRoLmFicyhvKT49MSlyZXR1cm4gcyhvLGEpfXJldHVybiBzKHQ+ZT8tMDowLG4udW5pdHNbbi51bml0cy5sZW5ndGgtMV0pfWZ1bmN0aW9uIG9zKHQpe2xldCBlPXt9LG47cmV0dXJuIHQubGVuZ3RoPjAmJnR5cGVvZiB0W3QubGVuZ3RoLTFdPT0ib2JqZWN0Ij8oZT10W3QubGVuZ3RoLTFdLG49QXJyYXkuZnJvbSh0KS5zbGljZSgwLHQubGVuZ3RoLTEpKTpuPUFycmF5LmZyb20odCksW2Usbl19Y2xhc3MgZ3tjb25zdHJ1Y3RvcihlKXtjb25zdCBuPWUuem9uZXx8di5kZWZhdWx0Wm9uZTtsZXQgcj1lLmludmFsaWR8fChOdW1iZXIuaXNOYU4oZS50cyk/bmV3IHooImludmFsaWQgaW5wdXQiKTpudWxsKXx8KG4uaXNWYWxpZD9udWxsOm10KG4pKTt0aGlzLnRzPXkoZS50cyk/di5ub3coKTplLnRzO2xldCBzPW51bGwsaT1udWxsO2lmKCFyKWlmKGUub2xkJiZlLm9sZC50cz09PXRoaXMudHMmJmUub2xkLnpvbmUuZXF1YWxzKG4pKVtzLGldPVtlLm9sZC5jLGUub2xkLm9dO2Vsc2V7Y29uc3Qgbz1uLm9mZnNldCh0aGlzLnRzKTtzPXl0KHRoaXMudHMsbykscj1OdW1iZXIuaXNOYU4ocy55ZWFyKT9uZXcgeigiaW52YWxpZCBpbnB1dCIpOm51bGwscz1yP251bGw6cyxpPXI/bnVsbDpvfXRoaXMuX3pvbmU9bix0aGlzLmxvYz1lLmxvY3x8Ty5jcmVhdGUoKSx0aGlzLmludmFsaWQ9cix0aGlzLndlZWtEYXRhPW51bGwsdGhpcy5sb2NhbFdlZWtEYXRhPW51bGwsdGhpcy5jPXMsdGhpcy5vPWksdGhpcy5pc0x1eG9uRGF0ZVRpbWU9ITB9c3RhdGljIG5vdygpe3JldHVybiBuZXcgZyh7fSl9c3RhdGljIGxvY2FsKCl7Y29uc3RbZSxuXT1vcyhhcmd1bWVudHMpLFtyLHMsaSxhLG8sbCx1XT1uO3JldHVybiBpcyh7eWVhcjpyLG1vbnRoOnMsZGF5OmksaG91cjphLG1pbnV0ZTpvLHNlY29uZDpsLG1pbGxpc2Vjb25kOnV9LGUpfXN0YXRpYyB1dGMoKXtjb25zdFtlLG5dPW9zKGFyZ3VtZW50cyksW3IscyxpLGEsbyxsLHVdPW47cmV0dXJuIGUuem9uZT14LnV0Y0luc3RhbmNlLGlzKHt5ZWFyOnIsbW9udGg6cyxkYXk6aSxob3VyOmEsbWludXRlOm8sc2Vjb25kOmwsbWlsbGlzZWNvbmQ6dX0sZSl9c3RhdGljIGZyb21KU0RhdGUoZSxuPXt9KXtjb25zdCByPXdvKGUpP2UudmFsdWVPZigpOk5hTjtpZihOdW1iZXIuaXNOYU4ocikpcmV0dXJuIGcuaW52YWxpZCgiaW52YWxpZCBpbnB1dCIpO2NvbnN0IHM9bmUobi56b25lLHYuZGVmYXVsdFpvbmUpO3JldHVybiBzLmlzVmFsaWQ/bmV3IGcoe3RzOnIsem9uZTpzLGxvYzpPLmZyb21PYmplY3Qobil9KTpnLmludmFsaWQobXQocykpfXN0YXRpYyBmcm9tTWlsbGlzKGUsbj17fSl7aWYoY2UoZSkpcmV0dXJuIGU8LUtyfHxlPktyP2cuaW52YWxpZCgiVGltZXN0YW1wIG91dCBvZiByYW5nZSIpOm5ldyBnKHt0czplLHpvbmU6bmUobi56b25lLHYuZGVmYXVsdFpvbmUpLGxvYzpPLmZyb21PYmplY3Qobil9KTt0aHJvdyBuZXcgRChgZnJvbU1pbGxpcyByZXF1aXJlcyBhIG51bWVyaWNhbCBpbnB1dCwgYnV0IHJlY2VpdmVkIGEgJHt0eXBlb2YgZX0gd2l0aCB2YWx1ZSAke2V9YCl9c3RhdGljIGZyb21TZWNvbmRzKGUsbj17fSl7aWYoY2UoZSkpcmV0dXJuIG5ldyBnKHt0czplKjFlMyx6b25lOm5lKG4uem9uZSx2LmRlZmF1bHRab25lKSxsb2M6Ty5mcm9tT2JqZWN0KG4pfSk7dGhyb3cgbmV3IEQoImZyb21TZWNvbmRzIHJlcXVpcmVzIGEgbnVtZXJpY2FsIGlucHV0Iil9c3RhdGljIGZyb21PYmplY3QoZSxuPXt9KXtlPWV8fHt9O2NvbnN0IHI9bmUobi56b25lLHYuZGVmYXVsdFpvbmUpO2lmKCFyLmlzVmFsaWQpcmV0dXJuIGcuaW52YWxpZChtdChyKSk7Y29uc3Qgcz1PLmZyb21PYmplY3QobiksaT1jdChlLHNzKSx7bWluRGF5c0luRmlyc3RXZWVrOmEsc3RhcnRPZldlZWs6b309eXIoaSxzKSxsPXYubm93KCksdT15KG4uc3BlY2lmaWNPZmZzZXQpP3Iub2Zmc2V0KGwpOm4uc3BlY2lmaWNPZmZzZXQsYz0heShpLm9yZGluYWwpLGQ9IXkoaS55ZWFyKSxwPSF5KGkubW9udGgpfHwheShpLmRheSksaD1kfHxwLGs9aS53ZWVrWWVhcnx8aS53ZWVrTnVtYmVyO2lmKChofHxjKSYmayl0aHJvdyBuZXcga2UoIkNhbid0IG1peCB3ZWVrWWVhci93ZWVrTnVtYmVyIHVuaXRzIHdpdGggeWVhci9tb250aC9kYXkgb3Igb3JkaW5hbHMiKTtpZihwJiZjKXRocm93IG5ldyBrZSgiQ2FuJ3QgbWl4IG9yZGluYWwgZGF0ZXMgd2l0aCBtb250aC9kYXkiKTtjb25zdCBQPWt8fGkud2Vla2RheSYmIWg7bGV0IE0saixCPXl0KGwsdSk7UD8oTT1SbCxqPV9sLEI9aXQoQixhLG8pKTpjPyhNPVpsLGo9emwsQj1SdChCKSk6KE09cnMsaj1ucyk7bGV0IEZlPSExO2Zvcihjb25zdCBLIG9mIE0pe2NvbnN0IFR0PWlbS107eShUdCk/RmU/aVtLXT1qW0tdOmlbS109QltLXTpGZT0hMH1jb25zdCB3dD1QP3lvKGksYSxvKTpjP2dvKGkpOmdyKGkpLHE9d3R8fHByKGkpO2lmKHEpcmV0dXJuIGcuaW52YWxpZChxKTtjb25zdCBtZT1QP2hyKGksYSxvKTpjP21yKGkpOmksW3llLGllXT1ndChtZSx1LHIpLFE9bmV3IGcoe3RzOnllLHpvbmU6cixvOmllLGxvYzpzfSk7cmV0dXJuIGkud2Vla2RheSYmaCYmZS53ZWVrZGF5IT09US53ZWVrZGF5P2cuaW52YWxpZCgibWlzbWF0Y2hlZCB3ZWVrZGF5IixgeW91IGNhbid0IHNwZWNpZnkgYm90aCBhIHdlZWtkYXkgb2YgJHtpLndlZWtkYXl9IGFuZCBhIGRhdGUgb2YgJHtRLnRvSVNPKCl9YCk6UX1zdGF0aWMgZnJvbUlTTyhlLG49e30pe2NvbnN0W3Isc109b2woZSk7cmV0dXJuIFVlKHIscyxuLCJJU08gODYwMSIsZSl9c3RhdGljIGZyb21SRkMyODIyKGUsbj17fSl7Y29uc3RbcixzXT1sbChlKTtyZXR1cm4gVWUocixzLG4sIlJGQyAyODIyIixlKX1zdGF0aWMgZnJvbUhUVFAoZSxuPXt9KXtjb25zdFtyLHNdPXVsKGUpO3JldHVybiBVZShyLHMsbiwiSFRUUCIsbil9c3RhdGljIGZyb21Gb3JtYXQoZSxuLHI9e30pe2lmKHkoZSl8fHkobikpdGhyb3cgbmV3IEQoImZyb21Gb3JtYXQgcmVxdWlyZXMgYW4gaW5wdXQgc3RyaW5nIGFuZCBhIGZvcm1hdCIpO2NvbnN0e2xvY2FsZTpzPW51bGwsbnVtYmVyaW5nU3lzdGVtOmk9bnVsbH09cixhPU8uZnJvbU9wdHMoe2xvY2FsZTpzLG51bWJlcmluZ1N5c3RlbTppLGRlZmF1bHRUb0VOOiEwfSksW28sbCx1LGNdPSRsKGEsZSxuKTtyZXR1cm4gYz9nLmludmFsaWQoYyk6VWUobyxsLHIsYGZvcm1hdCAke259YCxlLHUpfXN0YXRpYyBmcm9tU3RyaW5nKGUsbixyPXt9KXtyZXR1cm4gZy5mcm9tRm9ybWF0KGUsbixyKX1zdGF0aWMgZnJvbVNRTChlLG49e30pe2NvbnN0W3Isc109Z2woZSk7cmV0dXJuIFVlKHIscyxuLCJTUUwiLGUpfXN0YXRpYyBpbnZhbGlkKGUsbj1udWxsKXtpZighZSl0aHJvdyBuZXcgRCgibmVlZCB0byBzcGVjaWZ5IGEgcmVhc29uIHRoZSBEYXRlVGltZSBpcyBpbnZhbGlkIik7Y29uc3Qgcj1lIGluc3RhbmNlb2Ygej9lOm5ldyB6KGUsbik7aWYodi50aHJvd09uSW52YWxpZCl0aHJvdyBuZXcgSGEocik7cmV0dXJuIG5ldyBnKHtpbnZhbGlkOnJ9KX1zdGF0aWMgaXNEYXRlVGltZShlKXtyZXR1cm4gZSYmZS5pc0x1eG9uRGF0ZVRpbWV8fCExfXN0YXRpYyBwYXJzZUZvcm1hdEZvck9wdHMoZSxuPXt9KXtjb25zdCByPVFyKGUsTy5mcm9tT2JqZWN0KG4pKTtyZXR1cm4gcj9yLm1hcChzPT5zP3MudmFsOm51bGwpLmpvaW4oIiIpOm51bGx9c3RhdGljIGV4cGFuZEZvcm1hdChlLG49e30pe3JldHVybiBKcihOLnBhcnNlRm9ybWF0KGUpLE8uZnJvbU9iamVjdChuKSkubWFwKHM9PnMudmFsKS5qb2luKCIiKX1nZXQoZSl7cmV0dXJuIHRoaXNbZV19Z2V0IGlzVmFsaWQoKXtyZXR1cm4gdGhpcy5pbnZhbGlkPT09bnVsbH1nZXQgaW52YWxpZFJlYXNvbigpe3JldHVybiB0aGlzLmludmFsaWQ/dGhpcy5pbnZhbGlkLnJlYXNvbjpudWxsfWdldCBpbnZhbGlkRXhwbGFuYXRpb24oKXtyZXR1cm4gdGhpcy5pbnZhbGlkP3RoaXMuaW52YWxpZC5leHBsYW5hdGlvbjpudWxsfWdldCBsb2NhbGUoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMubG9jLmxvY2FsZTpudWxsfWdldCBudW1iZXJpbmdTeXN0ZW0oKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMubG9jLm51bWJlcmluZ1N5c3RlbTpudWxsfWdldCBvdXRwdXRDYWxlbmRhcigpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy5sb2Mub3V0cHV0Q2FsZW5kYXI6bnVsbH1nZXQgem9uZSgpe3JldHVybiB0aGlzLl96b25lfWdldCB6b25lTmFtZSgpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy56b25lLm5hbWU6bnVsbH1nZXQgeWVhcigpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy5jLnllYXI6TmFOfWdldCBxdWFydGVyKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD9NYXRoLmNlaWwodGhpcy5jLm1vbnRoLzMpOk5hTn1nZXQgbW9udGgoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMuYy5tb250aDpOYU59Z2V0IGRheSgpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy5jLmRheTpOYU59Z2V0IGhvdXIoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMuYy5ob3VyOk5hTn1nZXQgbWludXRlKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLmMubWludXRlOk5hTn1nZXQgc2Vjb25kKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLmMuc2Vjb25kOk5hTn1nZXQgbWlsbGlzZWNvbmQoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMuYy5taWxsaXNlY29uZDpOYU59Z2V0IHdlZWtZZWFyKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD9RdCh0aGlzKS53ZWVrWWVhcjpOYU59Z2V0IHdlZWtOdW1iZXIoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP1F0KHRoaXMpLndlZWtOdW1iZXI6TmFOfWdldCB3ZWVrZGF5KCl7cmV0dXJuIHRoaXMuaXNWYWxpZD9RdCh0aGlzKS53ZWVrZGF5Ok5hTn1nZXQgaXNXZWVrZW5kKCl7cmV0dXJuIHRoaXMuaXNWYWxpZCYmdGhpcy5sb2MuZ2V0V2Vla2VuZERheXMoKS5pbmNsdWRlcyh0aGlzLndlZWtkYXkpfWdldCBsb2NhbFdlZWtkYXkoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP0t0KHRoaXMpLndlZWtkYXk6TmFOfWdldCBsb2NhbFdlZWtOdW1iZXIoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP0t0KHRoaXMpLndlZWtOdW1iZXI6TmFOfWdldCBsb2NhbFdlZWtZZWFyKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD9LdCh0aGlzKS53ZWVrWWVhcjpOYU59Z2V0IG9yZGluYWwoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP1J0KHRoaXMuYykub3JkaW5hbDpOYU59Z2V0IG1vbnRoU2hvcnQoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP2R0Lm1vbnRocygic2hvcnQiLHtsb2NPYmo6dGhpcy5sb2N9KVt0aGlzLm1vbnRoLTFdOm51bGx9Z2V0IG1vbnRoTG9uZygpe3JldHVybiB0aGlzLmlzVmFsaWQ/ZHQubW9udGhzKCJsb25nIix7bG9jT2JqOnRoaXMubG9jfSlbdGhpcy5tb250aC0xXTpudWxsfWdldCB3ZWVrZGF5U2hvcnQoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP2R0LndlZWtkYXlzKCJzaG9ydCIse2xvY09iajp0aGlzLmxvY30pW3RoaXMud2Vla2RheS0xXTpudWxsfWdldCB3ZWVrZGF5TG9uZygpe3JldHVybiB0aGlzLmlzVmFsaWQ/ZHQud2Vla2RheXMoImxvbmciLHtsb2NPYmo6dGhpcy5sb2N9KVt0aGlzLndlZWtkYXktMV06bnVsbH1nZXQgb2Zmc2V0KCl7cmV0dXJuIHRoaXMuaXNWYWxpZD8rdGhpcy5vOk5hTn1nZXQgb2Zmc2V0TmFtZVNob3J0KCl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLnpvbmUub2Zmc2V0TmFtZSh0aGlzLnRzLHtmb3JtYXQ6InNob3J0Iixsb2NhbGU6dGhpcy5sb2NhbGV9KTpudWxsfWdldCBvZmZzZXROYW1lTG9uZygpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy56b25lLm9mZnNldE5hbWUodGhpcy50cyx7Zm9ybWF0OiJsb25nIixsb2NhbGU6dGhpcy5sb2NhbGV9KTpudWxsfWdldCBpc09mZnNldEZpeGVkKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLnpvbmUuaXNVbml2ZXJzYWw6bnVsbH1nZXQgaXNJbkRTVCgpe3JldHVybiB0aGlzLmlzT2Zmc2V0Rml4ZWQ/ITE6dGhpcy5vZmZzZXQ+dGhpcy5zZXQoe21vbnRoOjEsZGF5OjF9KS5vZmZzZXR8fHRoaXMub2Zmc2V0PnRoaXMuc2V0KHttb250aDo1fSkub2Zmc2V0fWdldFBvc3NpYmxlT2Zmc2V0cygpe2lmKCF0aGlzLmlzVmFsaWR8fHRoaXMuaXNPZmZzZXRGaXhlZClyZXR1cm5bdGhpc107Y29uc3QgZT04NjRlNSxuPTZlNCxyPWx0KHRoaXMuYykscz10aGlzLnpvbmUub2Zmc2V0KHItZSksaT10aGlzLnpvbmUub2Zmc2V0KHIrZSksYT10aGlzLnpvbmUub2Zmc2V0KHItcypuKSxvPXRoaXMuem9uZS5vZmZzZXQoci1pKm4pO2lmKGE9PT1vKXJldHVyblt0aGlzXTtjb25zdCBsPXItYSpuLHU9ci1vKm4sYz15dChsLGEpLGQ9eXQodSxvKTtyZXR1cm4gYy5ob3VyPT09ZC5ob3VyJiZjLm1pbnV0ZT09PWQubWludXRlJiZjLnNlY29uZD09PWQuc2Vjb25kJiZjLm1pbGxpc2Vjb25kPT09ZC5taWxsaXNlY29uZD9baGUodGhpcyx7dHM6bH0pLGhlKHRoaXMse3RzOnV9KV06W3RoaXNdfWdldCBpc0luTGVhcFllYXIoKXtyZXR1cm4gX2UodGhpcy55ZWFyKX1nZXQgZGF5c0luTW9udGgoKXtyZXR1cm4gb3QodGhpcy55ZWFyLHRoaXMubW9udGgpfWdldCBkYXlzSW5ZZWFyKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD92ZSh0aGlzLnllYXIpOk5hTn1nZXQgd2Vla3NJbldlZWtZZWFyKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD96ZSh0aGlzLndlZWtZZWFyKTpOYU59Z2V0IHdlZWtzSW5Mb2NhbFdlZWtZZWFyKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD96ZSh0aGlzLmxvY2FsV2Vla1llYXIsdGhpcy5sb2MuZ2V0TWluRGF5c0luRmlyc3RXZWVrKCksdGhpcy5sb2MuZ2V0U3RhcnRPZldlZWsoKSk6TmFOfXJlc29sdmVkTG9jYWxlT3B0aW9ucyhlPXt9KXtjb25zdHtsb2NhbGU6bixudW1iZXJpbmdTeXN0ZW06cixjYWxlbmRhcjpzfT1OLmNyZWF0ZSh0aGlzLmxvYy5jbG9uZShlKSxlKS5yZXNvbHZlZE9wdGlvbnModGhpcyk7cmV0dXJue2xvY2FsZTpuLG51bWJlcmluZ1N5c3RlbTpyLG91dHB1dENhbGVuZGFyOnN9fXRvVVRDKGU9MCxuPXt9KXtyZXR1cm4gdGhpcy5zZXRab25lKHguaW5zdGFuY2UoZSksbil9dG9Mb2NhbCgpe3JldHVybiB0aGlzLnNldFpvbmUodi5kZWZhdWx0Wm9uZSl9c2V0Wm9uZShlLHtrZWVwTG9jYWxUaW1lOm49ITEsa2VlcENhbGVuZGFyVGltZTpyPSExfT17fSl7aWYoZT1uZShlLHYuZGVmYXVsdFpvbmUpLGUuZXF1YWxzKHRoaXMuem9uZSkpcmV0dXJuIHRoaXM7aWYoZS5pc1ZhbGlkKXtsZXQgcz10aGlzLnRzO2lmKG58fHIpe2NvbnN0IGk9ZS5vZmZzZXQodGhpcy50cyksYT10aGlzLnRvT2JqZWN0KCk7W3NdPWd0KGEsaSxlKX1yZXR1cm4gaGUodGhpcyx7dHM6cyx6b25lOmV9KX1lbHNlIHJldHVybiBnLmludmFsaWQobXQoZSkpfXJlY29uZmlndXJlKHtsb2NhbGU6ZSxudW1iZXJpbmdTeXN0ZW06bixvdXRwdXRDYWxlbmRhcjpyfT17fSl7Y29uc3Qgcz10aGlzLmxvYy5jbG9uZSh7bG9jYWxlOmUsbnVtYmVyaW5nU3lzdGVtOm4sb3V0cHV0Q2FsZW5kYXI6cn0pO3JldHVybiBoZSh0aGlzLHtsb2M6c30pfXNldExvY2FsZShlKXtyZXR1cm4gdGhpcy5yZWNvbmZpZ3VyZSh7bG9jYWxlOmV9KX1zZXQoZSl7aWYoIXRoaXMuaXNWYWxpZClyZXR1cm4gdGhpcztjb25zdCBuPWN0KGUsc3MpLHttaW5EYXlzSW5GaXJzdFdlZWs6cixzdGFydE9mV2VlazpzfT15cihuLHRoaXMubG9jKSxpPSF5KG4ud2Vla1llYXIpfHwheShuLndlZWtOdW1iZXIpfHwheShuLndlZWtkYXkpLGE9IXkobi5vcmRpbmFsKSxvPSF5KG4ueWVhciksbD0heShuLm1vbnRoKXx8IXkobi5kYXkpLHU9b3x8bCxjPW4ud2Vla1llYXJ8fG4ud2Vla051bWJlcjtpZigodXx8YSkmJmMpdGhyb3cgbmV3IGtlKCJDYW4ndCBtaXggd2Vla1llYXIvd2Vla051bWJlciB1bml0cyB3aXRoIHllYXIvbW9udGgvZGF5IG9yIG9yZGluYWxzIik7aWYobCYmYSl0aHJvdyBuZXcga2UoIkNhbid0IG1peCBvcmRpbmFsIGRhdGVzIHdpdGggbW9udGgvZGF5Iik7bGV0IGQ7aT9kPWhyKHsuLi5pdCh0aGlzLmMscixzKSwuLi5ufSxyLHMpOnkobi5vcmRpbmFsKT8oZD17Li4udGhpcy50b09iamVjdCgpLC4uLm59LHkobi5kYXkpJiYoZC5kYXk9TWF0aC5taW4ob3QoZC55ZWFyLGQubW9udGgpLGQuZGF5KSkpOmQ9bXIoey4uLlJ0KHRoaXMuYyksLi4ubn0pO2NvbnN0W3AsaF09Z3QoZCx0aGlzLm8sdGhpcy56b25lKTtyZXR1cm4gaGUodGhpcyx7dHM6cCxvOmh9KX1wbHVzKGUpe2lmKCF0aGlzLmlzVmFsaWQpcmV0dXJuIHRoaXM7Y29uc3Qgbj1ULmZyb21EdXJhdGlvbkxpa2UoZSk7cmV0dXJuIGhlKHRoaXMsZXModGhpcyxuKSl9bWludXMoZSl7aWYoIXRoaXMuaXNWYWxpZClyZXR1cm4gdGhpcztjb25zdCBuPVQuZnJvbUR1cmF0aW9uTGlrZShlKS5uZWdhdGUoKTtyZXR1cm4gaGUodGhpcyxlcyh0aGlzLG4pKX1zdGFydE9mKGUse3VzZUxvY2FsZVdlZWtzOm49ITF9PXt9KXtpZighdGhpcy5pc1ZhbGlkKXJldHVybiB0aGlzO2NvbnN0IHI9e30scz1ULm5vcm1hbGl6ZVVuaXQoZSk7c3dpdGNoKHMpe2Nhc2UieWVhcnMiOnIubW9udGg9MTtjYXNlInF1YXJ0ZXJzIjpjYXNlIm1vbnRocyI6ci5kYXk9MTtjYXNlIndlZWtzIjpjYXNlImRheXMiOnIuaG91cj0wO2Nhc2UiaG91cnMiOnIubWludXRlPTA7Y2FzZSJtaW51dGVzIjpyLnNlY29uZD0wO2Nhc2Uic2Vjb25kcyI6ci5taWxsaXNlY29uZD0wO2JyZWFrfWlmKHM9PT0id2Vla3MiKWlmKG4pe2NvbnN0IGk9dGhpcy5sb2MuZ2V0U3RhcnRPZldlZWsoKSx7d2Vla2RheTphfT10aGlzO2E8aSYmKHIud2Vla051bWJlcj10aGlzLndlZWtOdW1iZXItMSksci53ZWVrZGF5PWl9ZWxzZSByLndlZWtkYXk9MTtpZihzPT09InF1YXJ0ZXJzIil7Y29uc3QgaT1NYXRoLmNlaWwodGhpcy5tb250aC8zKTtyLm1vbnRoPShpLTEpKjMrMX1yZXR1cm4gdGhpcy5zZXQocil9ZW5kT2YoZSxuKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMucGx1cyh7W2VdOjF9KS5zdGFydE9mKGUsbikubWludXMoMSk6dGhpc310b0Zvcm1hdChlLG49e30pe3JldHVybiB0aGlzLmlzVmFsaWQ/Ti5jcmVhdGUodGhpcy5sb2MucmVkZWZhdWx0VG9FTihuKSkuZm9ybWF0RGF0ZVRpbWVGcm9tU3RyaW5nKHRoaXMsZSk6QnR9dG9Mb2NhbGVTdHJpbmcoZT1ldCxuPXt9KXtyZXR1cm4gdGhpcy5pc1ZhbGlkP04uY3JlYXRlKHRoaXMubG9jLmNsb25lKG4pLGUpLmZvcm1hdERhdGVUaW1lKHRoaXMpOkJ0fXRvTG9jYWxlUGFydHMoZT17fSl7cmV0dXJuIHRoaXMuaXNWYWxpZD9OLmNyZWF0ZSh0aGlzLmxvYy5jbG9uZShlKSxlKS5mb3JtYXREYXRlVGltZVBhcnRzKHRoaXMpOltdfXRvSVNPKHtmb3JtYXQ6ZT0iZXh0ZW5kZWQiLHN1cHByZXNzU2Vjb25kczpuPSExLHN1cHByZXNzTWlsbGlzZWNvbmRzOnI9ITEsaW5jbHVkZU9mZnNldDpzPSEwLGV4dGVuZGVkWm9uZTppPSExfT17fSl7aWYoIXRoaXMuaXNWYWxpZClyZXR1cm4gbnVsbDtjb25zdCBhPWU9PT0iZXh0ZW5kZWQiO2xldCBvPVh0KHRoaXMsYSk7cmV0dXJuIG8rPSJUIixvKz10cyh0aGlzLGEsbixyLHMsaSksb310b0lTT0RhdGUoe2Zvcm1hdDplPSJleHRlbmRlZCJ9PXt9KXtyZXR1cm4gdGhpcy5pc1ZhbGlkP1h0KHRoaXMsZT09PSJleHRlbmRlZCIpOm51bGx9dG9JU09XZWVrRGF0ZSgpe3JldHVybiBwdCh0aGlzLCJra2trLSdXJ1dXLWMiKX10b0lTT1RpbWUoe3N1cHByZXNzTWlsbGlzZWNvbmRzOmU9ITEsc3VwcHJlc3NTZWNvbmRzOm49ITEsaW5jbHVkZU9mZnNldDpyPSEwLGluY2x1ZGVQcmVmaXg6cz0hMSxleHRlbmRlZFpvbmU6aT0hMSxmb3JtYXQ6YT0iZXh0ZW5kZWQifT17fSl7cmV0dXJuIHRoaXMuaXNWYWxpZD8ocz8iVCI6IiIpK3RzKHRoaXMsYT09PSJleHRlbmRlZCIsbixlLHIsaSk6bnVsbH10b1JGQzI4MjIoKXtyZXR1cm4gcHQodGhpcywiRUVFLCBkZCBMTEwgeXl5eSBISDptbTpzcyBaWloiLCExKX10b0hUVFAoKXtyZXR1cm4gcHQodGhpcy50b1VUQygpLCJFRUUsIGRkIExMTCB5eXl5IEhIOm1tOnNzICdHTVQnIil9dG9TUUxEYXRlKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD9YdCh0aGlzLCEwKTpudWxsfXRvU1FMVGltZSh7aW5jbHVkZU9mZnNldDplPSEwLGluY2x1ZGVab25lOm49ITEsaW5jbHVkZU9mZnNldFNwYWNlOnI9ITB9PXt9KXtsZXQgcz0iSEg6bW06c3MuU1NTIjtyZXR1cm4obnx8ZSkmJihyJiYocys9IiAiKSxuP3MrPSJ6IjplJiYocys9IlpaIikpLHB0KHRoaXMscywhMCl9dG9TUUwoZT17fSl7cmV0dXJuIHRoaXMuaXNWYWxpZD9gJHt0aGlzLnRvU1FMRGF0ZSgpfSAke3RoaXMudG9TUUxUaW1lKGUpfWA6bnVsbH10b1N0cmluZygpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy50b0lTTygpOkJ0fVtTeW1ib2wuZm9yKCJub2RlanMudXRpbC5pbnNwZWN0LmN1c3RvbSIpXSgpe3JldHVybiB0aGlzLmlzVmFsaWQ/YERhdGVUaW1lIHsgdHM6ICR7dGhpcy50b0lTTygpfSwgem9uZTogJHt0aGlzLnpvbmUubmFtZX0sIGxvY2FsZTogJHt0aGlzLmxvY2FsZX0gfWA6YERhdGVUaW1lIHsgSW52YWxpZCwgcmVhc29uOiAke3RoaXMuaW52YWxpZFJlYXNvbn0gfWB9dmFsdWVPZigpe3JldHVybiB0aGlzLnRvTWlsbGlzKCl9dG9NaWxsaXMoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMudHM6TmFOfXRvU2Vjb25kcygpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy50cy8xZTM6TmFOfXRvVW5peEludGVnZXIoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP01hdGguZmxvb3IodGhpcy50cy8xZTMpOk5hTn10b0pTT04oKXtyZXR1cm4gdGhpcy50b0lTTygpfXRvQlNPTigpe3JldHVybiB0aGlzLnRvSlNEYXRlKCl9dG9PYmplY3QoZT17fSl7aWYoIXRoaXMuaXNWYWxpZClyZXR1cm57fTtjb25zdCBuPXsuLi50aGlzLmN9O3JldHVybiBlLmluY2x1ZGVDb25maWcmJihuLm91dHB1dENhbGVuZGFyPXRoaXMub3V0cHV0Q2FsZW5kYXIsbi5udW1iZXJpbmdTeXN0ZW09dGhpcy5sb2MubnVtYmVyaW5nU3lzdGVtLG4ubG9jYWxlPXRoaXMubG9jLmxvY2FsZSksbn10b0pTRGF0ZSgpe3JldHVybiBuZXcgRGF0ZSh0aGlzLmlzVmFsaWQ/dGhpcy50czpOYU4pfWRpZmYoZSxuPSJtaWxsaXNlY29uZHMiLHI9e30pe2lmKCF0aGlzLmlzVmFsaWR8fCFlLmlzVmFsaWQpcmV0dXJuIFQuaW52YWxpZCgiY3JlYXRlZCBieSBkaWZmaW5nIGFuIGludmFsaWQgRGF0ZVRpbWUiKTtjb25zdCBzPXtsb2NhbGU6dGhpcy5sb2NhbGUsbnVtYmVyaW5nU3lzdGVtOnRoaXMubnVtYmVyaW5nU3lzdGVtLC4uLnJ9LGk9VG8obikubWFwKFQubm9ybWFsaXplVW5pdCksYT1lLnZhbHVlT2YoKT50aGlzLnZhbHVlT2YoKSxvPWE/dGhpczplLGw9YT9lOnRoaXMsdT1ibChvLGwsaSxzKTtyZXR1cm4gYT91Lm5lZ2F0ZSgpOnV9ZGlmZk5vdyhlPSJtaWxsaXNlY29uZHMiLG49e30pe3JldHVybiB0aGlzLmRpZmYoZy5ub3coKSxlLG4pfXVudGlsKGUpe3JldHVybiB0aGlzLmlzVmFsaWQ/Yi5mcm9tRGF0ZVRpbWVzKHRoaXMsZSk6dGhpc31oYXNTYW1lKGUsbixyKXtpZighdGhpcy5pc1ZhbGlkKXJldHVybiExO2NvbnN0IHM9ZS52YWx1ZU9mKCksaT10aGlzLnNldFpvbmUoZS56b25lLHtrZWVwTG9jYWxUaW1lOiEwfSk7cmV0dXJuIGkuc3RhcnRPZihuLHIpPD1zJiZzPD1pLmVuZE9mKG4scil9ZXF1YWxzKGUpe3JldHVybiB0aGlzLmlzVmFsaWQmJmUuaXNWYWxpZCYmdGhpcy52YWx1ZU9mKCk9PT1lLnZhbHVlT2YoKSYmdGhpcy56b25lLmVxdWFscyhlLnpvbmUpJiZ0aGlzLmxvYy5lcXVhbHMoZS5sb2MpfXRvUmVsYXRpdmUoZT17fSl7aWYoIXRoaXMuaXNWYWxpZClyZXR1cm4gbnVsbDtjb25zdCBuPWUuYmFzZXx8Zy5mcm9tT2JqZWN0KHt9LHt6b25lOnRoaXMuem9uZX0pLHI9ZS5wYWRkaW5nP3RoaXM8bj8tZS5wYWRkaW5nOmUucGFkZGluZzowO2xldCBzPVsieWVhcnMiLCJtb250aHMiLCJkYXlzIiwiaG91cnMiLCJtaW51dGVzIiwic2Vjb25kcyJdLGk9ZS51bml0O3JldHVybiBBcnJheS5pc0FycmF5KGUudW5pdCkmJihzPWUudW5pdCxpPXZvaWQgMCksYXMobix0aGlzLnBsdXMociksey4uLmUsbnVtZXJpYzoiYWx3YXlzIix1bml0czpzLHVuaXQ6aX0pfXRvUmVsYXRpdmVDYWxlbmRhcihlPXt9KXtyZXR1cm4gdGhpcy5pc1ZhbGlkP2FzKGUuYmFzZXx8Zy5mcm9tT2JqZWN0KHt9LHt6b25lOnRoaXMuem9uZX0pLHRoaXMsey4uLmUsbnVtZXJpYzoiYXV0byIsdW5pdHM6WyJ5ZWFycyIsIm1vbnRocyIsImRheXMiXSxjYWxlbmRhcnk6ITB9KTpudWxsfXN0YXRpYyBtaW4oLi4uZSl7aWYoIWUuZXZlcnkoZy5pc0RhdGVUaW1lKSl0aHJvdyBuZXcgRCgibWluIHJlcXVpcmVzIGFsbCBhcmd1bWVudHMgYmUgRGF0ZVRpbWVzIik7cmV0dXJuIFNyKGUsbj0+bi52YWx1ZU9mKCksTWF0aC5taW4pfXN0YXRpYyBtYXgoLi4uZSl7aWYoIWUuZXZlcnkoZy5pc0RhdGVUaW1lKSl0aHJvdyBuZXcgRCgibWF4IHJlcXVpcmVzIGFsbCBhcmd1bWVudHMgYmUgRGF0ZVRpbWVzIik7cmV0dXJuIFNyKGUsbj0+bi52YWx1ZU9mKCksTWF0aC5tYXgpfXN0YXRpYyBmcm9tRm9ybWF0RXhwbGFpbihlLG4scj17fSl7Y29uc3R7bG9jYWxlOnM9bnVsbCxudW1iZXJpbmdTeXN0ZW06aT1udWxsfT1yLGE9Ty5mcm9tT3B0cyh7bG9jYWxlOnMsbnVtYmVyaW5nU3lzdGVtOmksZGVmYXVsdFRvRU46ITB9KTtyZXR1cm4gQnIoYSxlLG4pfXN0YXRpYyBmcm9tU3RyaW5nRXhwbGFpbihlLG4scj17fSl7cmV0dXJuIGcuZnJvbUZvcm1hdEV4cGxhaW4oZSxuLHIpfXN0YXRpYyBnZXQgREFURV9TSE9SVCgpe3JldHVybiBldH1zdGF0aWMgZ2V0IERBVEVfTUVEKCl7cmV0dXJuIFZufXN0YXRpYyBnZXQgREFURV9NRURfV0lUSF9XRUVLREFZKCl7cmV0dXJuIFlhfXN0YXRpYyBnZXQgREFURV9GVUxMKCl7cmV0dXJuIFdufXN0YXRpYyBnZXQgREFURV9IVUdFKCl7cmV0dXJuIExufXN0YXRpYyBnZXQgVElNRV9TSU1QTEUoKXtyZXR1cm4gJG59c3RhdGljIGdldCBUSU1FX1dJVEhfU0VDT05EUygpe3JldHVybiBfbn1zdGF0aWMgZ2V0IFRJTUVfV0lUSF9TSE9SVF9PRkZTRVQoKXtyZXR1cm4gem59c3RhdGljIGdldCBUSU1FX1dJVEhfTE9OR19PRkZTRVQoKXtyZXR1cm4gUm59c3RhdGljIGdldCBUSU1FXzI0X1NJTVBMRSgpe3JldHVybiBabn1zdGF0aWMgZ2V0IFRJTUVfMjRfV0lUSF9TRUNPTkRTKCl7cmV0dXJuIFBufXN0YXRpYyBnZXQgVElNRV8yNF9XSVRIX1NIT1JUX09GRlNFVCgpe3JldHVybiBVbn1zdGF0aWMgZ2V0IFRJTUVfMjRfV0lUSF9MT05HX09GRlNFVCgpe3JldHVybiBIbn1zdGF0aWMgZ2V0IERBVEVUSU1FX1NIT1JUKCl7cmV0dXJuIGpufXN0YXRpYyBnZXQgREFURVRJTUVfU0hPUlRfV0lUSF9TRUNPTkRTKCl7cmV0dXJuIHFufXN0YXRpYyBnZXQgREFURVRJTUVfTUVEKCl7cmV0dXJuIFlufXN0YXRpYyBnZXQgREFURVRJTUVfTUVEX1dJVEhfU0VDT05EUygpe3JldHVybiBHbn1zdGF0aWMgZ2V0IERBVEVUSU1FX01FRF9XSVRIX1dFRUtEQVkoKXtyZXR1cm4gR2F9c3RhdGljIGdldCBEQVRFVElNRV9GVUxMKCl7cmV0dXJuIEpufXN0YXRpYyBnZXQgREFURVRJTUVfRlVMTF9XSVRIX1NFQ09ORFMoKXtyZXR1cm4gQm59c3RhdGljIGdldCBEQVRFVElNRV9IVUdFKCl7cmV0dXJuIFFufXN0YXRpYyBnZXQgREFURVRJTUVfSFVHRV9XSVRIX1NFQ09ORFMoKXtyZXR1cm4gS259fWZ1bmN0aW9uIEhlKHQpe2lmKGcuaXNEYXRlVGltZSh0KSlyZXR1cm4gdDtpZih0JiZ0LnZhbHVlT2YmJmNlKHQudmFsdWVPZigpKSlyZXR1cm4gZy5mcm9tSlNEYXRlKHQpO2lmKHQmJnR5cGVvZiB0PT0ib2JqZWN0IilyZXR1cm4gZy5mcm9tT2JqZWN0KHQpO3Rocm93IG5ldyBEKGBVbmtub3duIGRhdGV0aW1lIGFyZ3VtZW50OiAke3R9LCBvZiB0eXBlICR7dHlwZW9mIHR9YCl9ZnVuY3Rpb24gVWwoe2NvbGxlY3Rpb25zOnQsbHd3OmV9LHt0YWJsZUlkczpuLHRhYmxlQ29sdW1uSWRzOnIscmVsYXRpb25zaGlwSWRzOnMsaW5kZXhJZHM6aSxpbmRleENvbHVtbklkczphLG1lbW9JZHM6b30pe0EodCkuY29sbGVjdGlvbigidGFibGVFbnRpdGllcyIpLnJlbW92ZU1hbnkobiksQSh0KS5jb2xsZWN0aW9uKCJ0YWJsZUNvbHVtbkVudGl0aWVzIikucmVtb3ZlTWFueShyKSxBKHQpLmNvbGxlY3Rpb24oInJlbGF0aW9uc2hpcEVudGl0aWVzIikucmVtb3ZlTWFueShzKSxBKHQpLmNvbGxlY3Rpb24oImluZGV4RW50aXRpZXMiKS5yZW1vdmVNYW55KGkpLEEodCkuY29sbGVjdGlvbigiaW5kZXhDb2x1bW5FbnRpdGllcyIpLnJlbW92ZU1hbnkoYSksQSh0KS5jb2xsZWN0aW9uKCJtZW1vRW50aXRpZXMiKS5yZW1vdmVNYW55KG8pLFsuLi5uLC4uLnIsLi4ucywuLi5pLC4uLmEsLi4ub10uZm9yRWFjaChsPT5SZWZsZWN0LmRlbGV0ZVByb3BlcnR5KGUsbCkpfWNvbnN0IEhsPTMsamw9JChbInRhYmxlRW50aXRpZXMiLCJ0YWJsZUNvbHVtbkVudGl0aWVzIiwicmVsYXRpb25zaGlwRW50aXRpZXMiLCJpbmRleEVudGl0aWVzIiwiaW5kZXhDb2x1bW5FbnRpdGllcyIsIm1lbW9FbnRpdGllcyJdKTtjbGFzcyBxbHthc3luYyBydW4oZSl7Y29uc3Qgbj1KU09OLnBhcnNlKGUpLHI9JGEobikse2RvYzp7dGFibGVJZHM6cyxtZW1vSWRzOmksaW5kZXhJZHM6YSxyZWxhdGlvbnNoaXBJZHM6b30sY29sbGVjdGlvbnM6bCxsd3c6dX09cixjPSQocyksZD0kKGkpLHA9JChhKSxoPSQobyksaz1ZbChnLm5vdygpKSxQPUEobCkuY29sbGVjdGlvbigidGFibGVFbnRpdGllcyIpLE09QShsKS5jb2xsZWN0aW9uKCJ0YWJsZUNvbHVtbkVudGl0aWVzIiksaj1BKGwpLmNvbGxlY3Rpb24oImluZGV4RW50aXRpZXMiKSxCPUEobCkuY29sbGVjdGlvbigiaW5kZXhDb2x1bW5FbnRpdGllcyIpLEZlPUEobCkuY29sbGVjdGlvbigicmVsYXRpb25zaGlwRW50aXRpZXMiKSx3dD1BKGwpLmNvbGxlY3Rpb24oIm1lbW9FbnRpdGllcyIpLHE9bmV3IFNldChQLnNlbGVjdEFsbCgpLmZpbHRlcihrKGMpKS5tYXAoKHtpZDptfSk9Pm0pKSxtZT1uZXcgU2V0LHllPW5ldyBTZXQoRmUuc2VsZWN0QWxsKCkuZmlsdGVyKGsoaCkpLm1hcCgoe2lkOm19KT0+bSkpLGllPW5ldyBTZXQoai5zZWxlY3RBbGwoKS5maWx0ZXIoayhwKSkubWFwKCh7aWQ6bX0pPT5tKSksUT1uZXcgU2V0LEs9bmV3IFNldCh3dC5zZWxlY3RBbGwoKS5maWx0ZXIoayhkKSkubWFwKCh7aWQ6bX0pPT5tKSk7TS5zZWxlY3RBbGwoKS5maWx0ZXIoKHt0YWJsZUlkOm19KT0+cS5oYXMobSkpLmZvckVhY2goKHtpZDptfSk9Pm1lLmFkZChtKSksRmUuc2VsZWN0QWxsKCkuZmlsdGVyKCh7aWQ6bSxzdGFydDpZLGVuZDpqZX0pPT4heWUuaGFzKG0pJiYocS5oYXMoWS50YWJsZUlkKXx8cS5oYXMoamUudGFibGVJZCkpKS5mb3JFYWNoKCh7aWQ6bX0pPT55ZS5hZGQobSkpLGouc2VsZWN0QWxsKCkuZmlsdGVyKCh7aWQ6bSx0YWJsZUlkOll9KT0+IWllLmhhcyhtKSYmcS5oYXMoWSkpLmZvckVhY2goKHtpZDptfSk9PmllLmFkZChtKSksQi5zZWxlY3RBbGwoKS5maWx0ZXIoKHtpbmRleElkOm19KT0+aWUuaGFzKG0pKS5mb3JFYWNoKCh7aWQ6bX0pPT5RLmFkZChtKSksVWwocix7dGFibGVJZHM6Wy4uLnFdLHRhYmxlQ29sdW1uSWRzOlsuLi5tZV0scmVsYXRpb25zaGlwSWRzOlsuLi55ZV0saW5kZXhJZHM6Wy4uLmllXSxpbmRleENvbHVtbklkczpbLi4uUV0sbWVtb0lkczpbLi4uS119KTtjb25zdCBUdD0kKFAuc2VsZWN0QWxsKCkubWFwKCh7aWQ6bX0pPT5tKSksSmw9JChNLnNlbGVjdEFsbCgpLm1hcCgoe2lkOm19KT0+bSkpLGxzPSQoai5zZWxlY3RBbGwoKS5tYXAoKHtpZDptfSk9Pm0pKSxCbD0kKEIuc2VsZWN0QWxsKCkubWFwKCh7aWQ6bX0pPT5tKSksUWw9JChGZS5zZWxlY3RBbGwoKS5tYXAoKHtpZDptfSk9Pm0pKSxLbD0kKHd0LnNlbGVjdEFsbCgpLm1hcCgoe2lkOm19KT0+bSkpO3JldHVybiBNLnNlbGVjdEFsbCgpLmZpbHRlcigoe3RhYmxlSWQ6bSxpZDpZLG1ldGE6amV9KT0+IVR0KG0pJiZrKCgpPT4hMSkoe2lkOlksbWV0YTpqZX0pKS5mb3JFYWNoKCh7aWQ6bX0pPT5tZS5hZGQobSkpLEIuc2VsZWN0QWxsKCkuZmlsdGVyKCh7aW5kZXhJZDptLGlkOlksbWV0YTpqZX0pPT4hbHMobSkmJmsoKCk9PiExKSh7aWQ6WSxtZXRhOmplfSkpLmZvckVhY2goKHtpZDptfSk9PlEuYWRkKG0pKSxPYmplY3QuZW50cmllcyh1KS5mb3JFYWNoKChbbSxbWV1dKT0+e2lmKGpsKFkpKXN3aXRjaChZKXtjYXNlInRhYmxlRW50aXRpZXMiOiFUdChtKSYmcS5hZGQobSk7YnJlYWs7Y2FzZSJ0YWJsZUNvbHVtbkVudGl0aWVzIjohSmwobSkmJm1lLmFkZChtKTticmVhaztjYXNlInJlbGF0aW9uc2hpcEVudGl0aWVzIjohUWwobSkmJnllLmFkZChtKTticmVhaztjYXNlImluZGV4RW50aXRpZXMiOiFscyhtKSYmaWUuYWRkKG0pO2JyZWFrO2Nhc2UiaW5kZXhDb2x1bW5FbnRpdGllcyI6IUJsKG0pJiZRLmFkZChtKTticmVhaztjYXNlIm1lbW9FbnRpdGllcyI6IUtsKG0pJiZLLmFkZChtKTticmVha319KSx7dGFibGVJZHM6Wy4uLnFdLHRhYmxlQ29sdW1uSWRzOlsuLi5tZV0scmVsYXRpb25zaGlwSWRzOlsuLi55ZV0saW5kZXhJZHM6Wy4uLmllXSxpbmRleENvbHVtbklkczpbLi4uUV0sbWVtb0lkczpbLi4uS119fX1jb25zdCBZbD10PT5lPT4oe2lkOm4sbWV0YTpyfSk9PntpZihlKG4pKXJldHVybiExO2NvbnN0IHM9TWF0aC5mbG9vcih0LmRpZmYoZy5mcm9tTWlsbGlzKHIudXBkYXRlQXQpLCJkYXlzIikudG9PYmplY3QoKS5kYXlzPz8wKTtyZXR1cm4gSGw8c30sR2w9bmV3IHFsO3NlbGYub25jb25uZWN0PXQ9Pntjb25zdCBlPXQucG9ydHNbMF07T3QoR2wsZSl9fSkoKTsK";function DE(e){return new SharedWorker("data:text/javascript;base64,"+QE,{name:null==e?void 0:e.name})}const _E="KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDCiAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wCiAqL2NvbnN0IGVuPVN5bWJvbCgiQ29tbGluay5wcm94eSIpLHVzPVN5bWJvbCgiQ29tbGluay5lbmRwb2ludCIpLGNzPVN5bWJvbCgiQ29tbGluay5yZWxlYXNlUHJveHkiKSxTdD1TeW1ib2woIkNvbWxpbmsuZmluYWxpemVyIikscWU9U3ltYm9sKCJDb21saW5rLnRocm93biIpLHRuPXQ9PnR5cGVvZiB0PT0ib2JqZWN0IiYmdCE9PW51bGx8fHR5cGVvZiB0PT0iZnVuY3Rpb24iLGZzPXtjYW5IYW5kbGU6dD0+dG4odCkmJnRbZW5dLHNlcmlhbGl6ZSh0KXtjb25zdHtwb3J0MTplLHBvcnQyOm59PW5ldyBNZXNzYWdlQ2hhbm5lbDtyZXR1cm4gT3QodCxlKSxbbixbbl1dfSxkZXNlcmlhbGl6ZSh0KXtyZXR1cm4gdC5zdGFydCgpLHlzKHQpfX0sZHM9e2NhbkhhbmRsZTp0PT50bih0KSYmcWUgaW4gdCxzZXJpYWxpemUoe3ZhbHVlOnR9KXtsZXQgZTtyZXR1cm4gdCBpbnN0YW5jZW9mIEVycm9yP2U9e2lzRXJyb3I6ITAsdmFsdWU6e21lc3NhZ2U6dC5tZXNzYWdlLG5hbWU6dC5uYW1lLHN0YWNrOnQuc3RhY2t9fTplPXtpc0Vycm9yOiExLHZhbHVlOnR9LFtlLFtdXX0sZGVzZXJpYWxpemUodCl7dGhyb3cgdC5pc0Vycm9yP09iamVjdC5hc3NpZ24obmV3IEVycm9yKHQudmFsdWUubWVzc2FnZSksdC52YWx1ZSk6dC52YWx1ZX19LG5uPW5ldyBNYXAoW1sicHJveHkiLGZzXSxbInRocm93Iixkc11dKTtmdW5jdGlvbiBocyh0LGUpe2Zvcihjb25zdCBuIG9mIHQpaWYoZT09PW58fG49PT0iKiJ8fG4gaW5zdGFuY2VvZiBSZWdFeHAmJm4udGVzdChlKSlyZXR1cm4hMDtyZXR1cm4hMX1mdW5jdGlvbiBPdCh0LGU9Z2xvYmFsVGhpcyxuPVsiKiJdKXtlLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLGZ1bmN0aW9uIHIocyl7aWYoIXN8fCFzLmRhdGEpcmV0dXJuO2lmKCFocyhuLHMub3JpZ2luKSl7Y29uc29sZS53YXJuKGBJbnZhbGlkIG9yaWdpbiAnJHtzLm9yaWdpbn0nIGZvciBjb21saW5rIHByb3h5YCk7cmV0dXJufWNvbnN0e2lkOmksdHlwZTphLHBhdGg6b309T2JqZWN0LmFzc2lnbih7cGF0aDpbXX0scy5kYXRhKSxsPShzLmRhdGEuYXJndW1lbnRMaXN0fHxbXSkubWFwKGFlKTtsZXQgdTt0cnl7Y29uc3QgYz1vLnNsaWNlKDAsLTEpLnJlZHVjZSgodyxoKT0+d1toXSx0KSxkPW8ucmVkdWNlKCh3LGgpPT53W2hdLHQpO3N3aXRjaChhKXtjYXNlIkdFVCI6dT1kO2JyZWFrO2Nhc2UiU0VUIjpjW28uc2xpY2UoLTEpWzBdXT1hZShzLmRhdGEudmFsdWUpLHU9ITA7YnJlYWs7Y2FzZSJBUFBMWSI6dT1kLmFwcGx5KGMsbCk7YnJlYWs7Y2FzZSJDT05TVFJVQ1QiOntjb25zdCB3PW5ldyBkKC4uLmwpO3U9U3Modyl9YnJlYWs7Y2FzZSJFTkRQT0lOVCI6e2NvbnN0e3BvcnQxOncscG9ydDI6aH09bmV3IE1lc3NhZ2VDaGFubmVsO090KHQsaCksdT1Ucyh3LFt3XSl9YnJlYWs7Y2FzZSJSRUxFQVNFIjp1PXZvaWQgMDticmVhaztkZWZhdWx0OnJldHVybn19Y2F0Y2goYyl7dT17dmFsdWU6YyxbcWVdOjB9fVByb21pc2UucmVzb2x2ZSh1KS5jYXRjaChjPT4oe3ZhbHVlOmMsW3FlXTowfSkpLnRoZW4oYz0+e2NvbnN0W2Qsd109QmUoYyk7ZS5wb3N0TWVzc2FnZShPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZCkse2lkOml9KSx3KSxhPT09IlJFTEVBU0UiJiYoZS5yZW1vdmVFdmVudExpc3RlbmVyKCJtZXNzYWdlIixyKSxybihlKSxTdCBpbiB0JiZ0eXBlb2YgdFtTdF09PSJmdW5jdGlvbiImJnRbU3RdKCkpfSkuY2F0Y2goYz0+e2NvbnN0W2Qsd109QmUoe3ZhbHVlOm5ldyBUeXBlRXJyb3IoIlVuc2VyaWFsaXphYmxlIHJldHVybiB2YWx1ZSIpLFtxZV06MH0pO2UucG9zdE1lc3NhZ2UoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGQpLHtpZDppfSksdyl9KX0pLGUuc3RhcnQmJmUuc3RhcnQoKX1mdW5jdGlvbiBtcyh0KXtyZXR1cm4gdC5jb25zdHJ1Y3Rvci5uYW1lPT09Ik1lc3NhZ2VQb3J0In1mdW5jdGlvbiBybih0KXttcyh0KSYmdC5jbG9zZSgpfWZ1bmN0aW9uIHlzKHQsZSl7cmV0dXJuIGt0KHQsW10sZSl9ZnVuY3Rpb24gWWUodCl7aWYodCl0aHJvdyBuZXcgRXJyb3IoIlByb3h5IGhhcyBiZWVuIHJlbGVhc2VkIGFuZCBpcyBub3QgdXNlYWJsZSIpfWZ1bmN0aW9uIHNuKHQpe3JldHVybiBnZSh0LHt0eXBlOiJSRUxFQVNFIn0pLnRoZW4oKCk9Pntybih0KX0pfWNvbnN0IEdlPW5ldyBXZWFrTWFwLEplPSJGaW5hbGl6YXRpb25SZWdpc3RyeSJpbiBnbG9iYWxUaGlzJiZuZXcgRmluYWxpemF0aW9uUmVnaXN0cnkodD0+e2NvbnN0IGU9KEdlLmdldCh0KXx8MCktMTtHZS5zZXQodCxlKSxlPT09MCYmc24odCl9KTtmdW5jdGlvbiBncyh0LGUpe2NvbnN0IG49KEdlLmdldChlKXx8MCkrMTtHZS5zZXQoZSxuKSxKZSYmSmUucmVnaXN0ZXIodCxlLHQpfWZ1bmN0aW9uIHdzKHQpe0plJiZKZS51bnJlZ2lzdGVyKHQpfWZ1bmN0aW9uIGt0KHQsZT1bXSxuPWZ1bmN0aW9uKCl7fSl7bGV0IHI9ITE7Y29uc3Qgcz1uZXcgUHJveHkobix7Z2V0KGksYSl7aWYoWWUociksYT09PWNzKXJldHVybigpPT57d3Mocyksc24odCkscj0hMH07aWYoYT09PSJ0aGVuIil7aWYoZS5sZW5ndGg9PT0wKXJldHVybnt0aGVuOigpPT5zfTtjb25zdCBvPWdlKHQse3R5cGU6IkdFVCIscGF0aDplLm1hcChsPT5sLnRvU3RyaW5nKCkpfSkudGhlbihhZSk7cmV0dXJuIG8udGhlbi5iaW5kKG8pfXJldHVybiBrdCh0LFsuLi5lLGFdKX0sc2V0KGksYSxvKXtZZShyKTtjb25zdFtsLHVdPUJlKG8pO3JldHVybiBnZSh0LHt0eXBlOiJTRVQiLHBhdGg6Wy4uLmUsYV0ubWFwKGM9PmMudG9TdHJpbmcoKSksdmFsdWU6bH0sdSkudGhlbihhZSl9LGFwcGx5KGksYSxvKXtZZShyKTtjb25zdCBsPWVbZS5sZW5ndGgtMV07aWYobD09PXVzKXJldHVybiBnZSh0LHt0eXBlOiJFTkRQT0lOVCJ9KS50aGVuKGFlKTtpZihsPT09ImJpbmQiKXJldHVybiBrdCh0LGUuc2xpY2UoMCwtMSkpO2NvbnN0W3UsY109YW4obyk7cmV0dXJuIGdlKHQse3R5cGU6IkFQUExZIixwYXRoOmUubWFwKGQ9PmQudG9TdHJpbmcoKSksYXJndW1lbnRMaXN0OnV9LGMpLnRoZW4oYWUpfSxjb25zdHJ1Y3QoaSxhKXtZZShyKTtjb25zdFtvLGxdPWFuKGEpO3JldHVybiBnZSh0LHt0eXBlOiJDT05TVFJVQ1QiLHBhdGg6ZS5tYXAodT0+dS50b1N0cmluZygpKSxhcmd1bWVudExpc3Q6b30sbCkudGhlbihhZSl9fSk7cmV0dXJuIGdzKHMsdCksc31mdW5jdGlvbiBwcyh0KXtyZXR1cm4gQXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseShbXSx0KX1mdW5jdGlvbiBhbih0KXtjb25zdCBlPXQubWFwKEJlKTtyZXR1cm5bZS5tYXAobj0+blswXSkscHMoZS5tYXAobj0+blsxXSkpXX1jb25zdCBvbj1uZXcgV2Vha01hcDtmdW5jdGlvbiBUcyh0LGUpe3JldHVybiBvbi5zZXQodCxlKSx0fWZ1bmN0aW9uIFNzKHQpe3JldHVybiBPYmplY3QuYXNzaWduKHQse1tlbl06ITB9KX1mdW5jdGlvbiBCZSh0KXtmb3IoY29uc3RbZSxuXW9mIG5uKWlmKG4uY2FuSGFuZGxlKHQpKXtjb25zdFtyLHNdPW4uc2VyaWFsaXplKHQpO3JldHVyblt7dHlwZToiSEFORExFUiIsbmFtZTplLHZhbHVlOnJ9LHNdfXJldHVyblt7dHlwZToiUkFXIix2YWx1ZTp0fSxvbi5nZXQodCl8fFtdXX1mdW5jdGlvbiBhZSh0KXtzd2l0Y2godC50eXBlKXtjYXNlIkhBTkRMRVIiOnJldHVybiBubi5nZXQodC5uYW1lKS5kZXNlcmlhbGl6ZSh0LnZhbHVlKTtjYXNlIlJBVyI6cmV0dXJuIHQudmFsdWV9fWZ1bmN0aW9uIGdlKHQsZSxuKXtyZXR1cm4gbmV3IFByb21pc2Uocj0+e2NvbnN0IHM9T3MoKTt0LmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLGZ1bmN0aW9uIGkoYSl7IWEuZGF0YXx8IWEuZGF0YS5pZHx8YS5kYXRhLmlkIT09c3x8KHQucmVtb3ZlRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsaSkscihhLmRhdGEpKX0pLHQuc3RhcnQmJnQuc3RhcnQoKSx0LnBvc3RNZXNzYWdlKE9iamVjdC5hc3NpZ24oe2lkOnN9LGUpLG4pfSl9ZnVuY3Rpb24gT3MoKXtyZXR1cm4gbmV3IEFycmF5KDQpLmZpbGwoMCkubWFwKCgpPT5NYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpLnRvU3RyaW5nKDE2KSkuam9pbigiLSIpfXZhciBrcz10eXBlb2YgZ2xvYmFsPT0ib2JqZWN0IiYmZ2xvYmFsJiZnbG9iYWwuT2JqZWN0PT09T2JqZWN0JiZnbG9iYWwsYnM9dHlwZW9mIHNlbGY9PSJvYmplY3QiJiZzZWxmJiZzZWxmLk9iamVjdD09PU9iamVjdCYmc2VsZixidD1rc3x8YnN8fEZ1bmN0aW9uKCJyZXR1cm4gdGhpcyIpKCksd2U9YnQuU3ltYm9sLGxuPU9iamVjdC5wcm90b3R5cGUsdnM9bG4uaGFzT3duUHJvcGVydHksSXM9bG4udG9TdHJpbmcsQWU9d2U/d2UudG9TdHJpbmdUYWc6dm9pZCAwO2Z1bmN0aW9uIEVzKHQpe3ZhciBlPXZzLmNhbGwodCxBZSksbj10W0FlXTt0cnl7dFtBZV09dm9pZCAwO3ZhciByPSEwfWNhdGNoe312YXIgcz1Jcy5jYWxsKHQpO3JldHVybiByJiYoZT90W0FlXT1uOmRlbGV0ZSB0W0FlXSksc312YXIgTnM9T2JqZWN0LnByb3RvdHlwZSxNcz1Ocy50b1N0cmluZztmdW5jdGlvbiB4cyh0KXtyZXR1cm4gTXMuY2FsbCh0KX12YXIgRHM9IltvYmplY3QgTnVsbF0iLENzPSJbb2JqZWN0IFVuZGVmaW5lZF0iLHVuPXdlP3dlLnRvU3RyaW5nVGFnOnZvaWQgMDtmdW5jdGlvbiBjbih0KXtyZXR1cm4gdD09bnVsbD90PT09dm9pZCAwP0NzOkRzOnVuJiZ1biBpbiBPYmplY3QodCk/RXModCk6eHModCl9ZnVuY3Rpb24gdnQodCl7cmV0dXJuIHQhPW51bGwmJnR5cGVvZiB0PT0ib2JqZWN0In1mdW5jdGlvbiBGcyh0LGUpe2Zvcih2YXIgbj0tMSxyPXQ9PW51bGw/MDp0Lmxlbmd0aCxzPUFycmF5KHIpOysrbjxyOylzW25dPWUodFtuXSxuLHQpO3JldHVybiBzfXZhciBBcz1BcnJheS5pc0FycmF5O2Z1bmN0aW9uIGZuKHQpe3ZhciBlPXR5cGVvZiB0O3JldHVybiB0IT1udWxsJiYoZT09Im9iamVjdCJ8fGU9PSJmdW5jdGlvbiIpfWZ1bmN0aW9uIGRuKHQpe3JldHVybiB0fXZhciBWcz0iW29iamVjdCBBc3luY0Z1bmN0aW9uXSIsV3M9IltvYmplY3QgRnVuY3Rpb25dIixMcz0iW29iamVjdCBHZW5lcmF0b3JGdW5jdGlvbl0iLCRzPSJbb2JqZWN0IFByb3h5XSI7ZnVuY3Rpb24gaG4odCl7aWYoIWZuKHQpKXJldHVybiExO3ZhciBlPWNuKHQpO3JldHVybiBlPT1Xc3x8ZT09THN8fGU9PVZzfHxlPT0kc312YXIgSXQ9YnRbIl9fY29yZS1qc19zaGFyZWRfXyJdLG1uPWZ1bmN0aW9uKCl7dmFyIHQ9L1teLl0rJC8uZXhlYyhJdCYmSXQua2V5cyYmSXQua2V5cy5JRV9QUk9UT3x8IiIpO3JldHVybiB0PyJTeW1ib2woc3JjKV8xLiIrdDoiIn0oKTtmdW5jdGlvbiBfcyh0KXtyZXR1cm4hIW1uJiZtbiBpbiB0fXZhciB6cz1GdW5jdGlvbi5wcm90b3R5cGUsUnM9enMudG9TdHJpbmc7ZnVuY3Rpb24gWnModCl7aWYodCE9bnVsbCl7dHJ5e3JldHVybiBScy5jYWxsKHQpfWNhdGNoe310cnl7cmV0dXJuIHQrIiJ9Y2F0Y2h7fX1yZXR1cm4iIn12YXIgUHM9L1tcXF4kLiorPygpW1xde318XS9nLFVzPS9eXFtvYmplY3QgLis/Q29uc3RydWN0b3JcXSQvLEhzPUZ1bmN0aW9uLnByb3RvdHlwZSxqcz1PYmplY3QucHJvdG90eXBlLHFzPUhzLnRvU3RyaW5nLFlzPWpzLmhhc093blByb3BlcnR5LEdzPVJlZ0V4cCgiXiIrcXMuY2FsbChZcykucmVwbGFjZShQcywiXFwkJiIpLnJlcGxhY2UoL2hhc093blByb3BlcnR5fChmdW5jdGlvbikuKj8oPz1cXFwoKXwgZm9yIC4rPyg/PVxcXF0pL2csIiQxLio/IikrIiQiKTtmdW5jdGlvbiBKcyh0KXtpZighZm4odCl8fF9zKHQpKXJldHVybiExO3ZhciBlPWhuKHQpP0dzOlVzO3JldHVybiBlLnRlc3QoWnModCkpfWZ1bmN0aW9uIEJzKHQsZSl7cmV0dXJuIHQ9PW51bGw/dm9pZCAwOnRbZV19ZnVuY3Rpb24gRXQodCxlKXt2YXIgbj1Ccyh0LGUpO3JldHVybiBKcyhuKT9uOnZvaWQgMH1mdW5jdGlvbiBRcyh0LGUsbil7c3dpdGNoKG4ubGVuZ3RoKXtjYXNlIDA6cmV0dXJuIHQuY2FsbChlKTtjYXNlIDE6cmV0dXJuIHQuY2FsbChlLG5bMF0pO2Nhc2UgMjpyZXR1cm4gdC5jYWxsKGUsblswXSxuWzFdKTtjYXNlIDM6cmV0dXJuIHQuY2FsbChlLG5bMF0sblsxXSxuWzJdKX1yZXR1cm4gdC5hcHBseShlLG4pfXZhciBLcz04MDAsWHM9MTYsZWk9RGF0ZS5ub3c7ZnVuY3Rpb24gdGkodCl7dmFyIGU9MCxuPTA7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHI9ZWkoKSxzPVhzLShyLW4pO2lmKG49cixzPjApe2lmKCsrZT49S3MpcmV0dXJuIGFyZ3VtZW50c1swXX1lbHNlIGU9MDtyZXR1cm4gdC5hcHBseSh2b2lkIDAsYXJndW1lbnRzKX19ZnVuY3Rpb24gbmkodCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHR9fXZhciB5bj1mdW5jdGlvbigpe3RyeXt2YXIgdD1FdChPYmplY3QsImRlZmluZVByb3BlcnR5Iik7cmV0dXJuIHQoe30sIiIse30pLHR9Y2F0Y2h7fX0oKSxyaT15bj9mdW5jdGlvbih0LGUpe3JldHVybiB5bih0LCJ0b1N0cmluZyIse2NvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiExLHZhbHVlOm5pKGUpLHdyaXRhYmxlOiEwfSl9OmRuLHNpPXJpLGlpPXRpKHNpKTtmdW5jdGlvbiBhaSh0LGUsbixyKXtmb3IodmFyIHM9dC5sZW5ndGgsaT1uKyhyPzE6LTEpO3I/aS0tOisraTxzOylpZihlKHRbaV0saSx0KSlyZXR1cm4gaTtyZXR1cm4tMX1mdW5jdGlvbiBvaSh0KXtyZXR1cm4gdCE9PXR9ZnVuY3Rpb24gbGkodCxlLG4pe2Zvcih2YXIgcj1uLTEscz10Lmxlbmd0aDsrK3I8czspaWYodFtyXT09PWUpcmV0dXJuIHI7cmV0dXJuLTF9ZnVuY3Rpb24gdWkodCxlLG4pe3JldHVybiBlPT09ZT9saSh0LGUsbik6YWkodCxvaSxuKX1mdW5jdGlvbiBjaSh0LGUpe3ZhciBuPXQ9PW51bGw/MDp0Lmxlbmd0aDtyZXR1cm4hIW4mJnVpKHQsZSwwKT4tMX1mdW5jdGlvbiBmaSh0LGUpe3JldHVybiB0PT09ZXx8dCE9PXQmJmUhPT1lfXZhciBnbj1NYXRoLm1heDtmdW5jdGlvbiBkaSh0LGUsbil7cmV0dXJuIGU9Z24oZT09PXZvaWQgMD90Lmxlbmd0aC0xOmUsMCksZnVuY3Rpb24oKXtmb3IodmFyIHI9YXJndW1lbnRzLHM9LTEsaT1nbihyLmxlbmd0aC1lLDApLGE9QXJyYXkoaSk7KytzPGk7KWFbc109cltlK3NdO3M9LTE7Zm9yKHZhciBvPUFycmF5KGUrMSk7KytzPGU7KW9bc109cltzXTtyZXR1cm4gb1tlXT1uKGEpLFFzKHQsdGhpcyxvKX19ZnVuY3Rpb24gaGkodCxlKXtyZXR1cm4gaWkoZGkodCxlLGRuKSx0KyIiKX12YXIgbWk9OTAwNzE5OTI1NDc0MDk5MTtmdW5jdGlvbiB5aSh0KXtyZXR1cm4gdHlwZW9mIHQ9PSJudW1iZXIiJiZ0Pi0xJiZ0JTE9PTAmJnQ8PW1pfWZ1bmN0aW9uIGdpKHQpe3JldHVybiB0IT1udWxsJiZ5aSh0Lmxlbmd0aCkmJiFobih0KX12YXIgd2k9IltvYmplY3QgQXJndW1lbnRzXSI7ZnVuY3Rpb24gd24odCl7cmV0dXJuIHZ0KHQpJiZjbih0KT09d2l9dmFyIHBuPU9iamVjdC5wcm90b3R5cGUscGk9cG4uaGFzT3duUHJvcGVydHksVGk9cG4ucHJvcGVydHlJc0VudW1lcmFibGUsU2k9d24oZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzfSgpKT93bjpmdW5jdGlvbih0KXtyZXR1cm4gdnQodCkmJnBpLmNhbGwodCwiY2FsbGVlIikmJiFUaS5jYWxsKHQsImNhbGxlZSIpfTtmdW5jdGlvbiBPaSh0KXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIHQoZSl9fXZhciBWZT1FdChPYmplY3QsImNyZWF0ZSIpO2Z1bmN0aW9uIGtpKCl7dGhpcy5fX2RhdGFfXz1WZT9WZShudWxsKTp7fSx0aGlzLnNpemU9MH1mdW5jdGlvbiBiaSh0KXt2YXIgZT10aGlzLmhhcyh0KSYmZGVsZXRlIHRoaXMuX19kYXRhX19bdF07cmV0dXJuIHRoaXMuc2l6ZS09ZT8xOjAsZX12YXIgdmk9Il9fbG9kYXNoX2hhc2hfdW5kZWZpbmVkX18iLElpPU9iamVjdC5wcm90b3R5cGUsRWk9SWkuaGFzT3duUHJvcGVydHk7ZnVuY3Rpb24gTmkodCl7dmFyIGU9dGhpcy5fX2RhdGFfXztpZihWZSl7dmFyIG49ZVt0XTtyZXR1cm4gbj09PXZpP3ZvaWQgMDpufXJldHVybiBFaS5jYWxsKGUsdCk/ZVt0XTp2b2lkIDB9dmFyIE1pPU9iamVjdC5wcm90b3R5cGUseGk9TWkuaGFzT3duUHJvcGVydHk7ZnVuY3Rpb24gRGkodCl7dmFyIGU9dGhpcy5fX2RhdGFfXztyZXR1cm4gVmU/ZVt0XSE9PXZvaWQgMDp4aS5jYWxsKGUsdCl9dmFyIENpPSJfX2xvZGFzaF9oYXNoX3VuZGVmaW5lZF9fIjtmdW5jdGlvbiBGaSh0LGUpe3ZhciBuPXRoaXMuX19kYXRhX187cmV0dXJuIHRoaXMuc2l6ZSs9dGhpcy5oYXModCk/MDoxLG5bdF09VmUmJmU9PT12b2lkIDA/Q2k6ZSx0aGlzfWZ1bmN0aW9uIG9lKHQpe3ZhciBlPS0xLG49dD09bnVsbD8wOnQubGVuZ3RoO2Zvcih0aGlzLmNsZWFyKCk7KytlPG47KXt2YXIgcj10W2VdO3RoaXMuc2V0KHJbMF0sclsxXSl9fW9lLnByb3RvdHlwZS5jbGVhcj1raSxvZS5wcm90b3R5cGUuZGVsZXRlPWJpLG9lLnByb3RvdHlwZS5nZXQ9Tmksb2UucHJvdG90eXBlLmhhcz1EaSxvZS5wcm90b3R5cGUuc2V0PUZpO2Z1bmN0aW9uIEFpKCl7dGhpcy5fX2RhdGFfXz1bXSx0aGlzLnNpemU9MH1mdW5jdGlvbiBRZSh0LGUpe2Zvcih2YXIgbj10Lmxlbmd0aDtuLS07KWlmKGZpKHRbbl1bMF0sZSkpcmV0dXJuIG47cmV0dXJuLTF9dmFyIFZpPUFycmF5LnByb3RvdHlwZSxXaT1WaS5zcGxpY2U7ZnVuY3Rpb24gTGkodCl7dmFyIGU9dGhpcy5fX2RhdGFfXyxuPVFlKGUsdCk7aWYobjwwKXJldHVybiExO3ZhciByPWUubGVuZ3RoLTE7cmV0dXJuIG49PXI/ZS5wb3AoKTpXaS5jYWxsKGUsbiwxKSwtLXRoaXMuc2l6ZSwhMH1mdW5jdGlvbiAkaSh0KXt2YXIgZT10aGlzLl9fZGF0YV9fLG49UWUoZSx0KTtyZXR1cm4gbjwwP3ZvaWQgMDplW25dWzFdfWZ1bmN0aW9uIF9pKHQpe3JldHVybiBRZSh0aGlzLl9fZGF0YV9fLHQpPi0xfWZ1bmN0aW9uIHppKHQsZSl7dmFyIG49dGhpcy5fX2RhdGFfXyxyPVFlKG4sdCk7cmV0dXJuIHI8MD8oKyt0aGlzLnNpemUsbi5wdXNoKFt0LGVdKSk6bltyXVsxXT1lLHRoaXN9ZnVuY3Rpb24gcGUodCl7dmFyIGU9LTEsbj10PT1udWxsPzA6dC5sZW5ndGg7Zm9yKHRoaXMuY2xlYXIoKTsrK2U8bjspe3ZhciByPXRbZV07dGhpcy5zZXQoclswXSxyWzFdKX19cGUucHJvdG90eXBlLmNsZWFyPUFpLHBlLnByb3RvdHlwZS5kZWxldGU9TGkscGUucHJvdG90eXBlLmdldD0kaSxwZS5wcm90b3R5cGUuaGFzPV9pLHBlLnByb3RvdHlwZS5zZXQ9emk7dmFyIFJpPUV0KGJ0LCJNYXAiKTtmdW5jdGlvbiBaaSgpe3RoaXMuc2l6ZT0wLHRoaXMuX19kYXRhX189e2hhc2g6bmV3IG9lLG1hcDpuZXcoUml8fHBlKSxzdHJpbmc6bmV3IG9lfX1mdW5jdGlvbiBQaSh0KXt2YXIgZT10eXBlb2YgdDtyZXR1cm4gZT09InN0cmluZyJ8fGU9PSJudW1iZXIifHxlPT0ic3ltYm9sInx8ZT09ImJvb2xlYW4iP3QhPT0iX19wcm90b19fIjp0PT09bnVsbH1mdW5jdGlvbiBLZSh0LGUpe3ZhciBuPXQuX19kYXRhX187cmV0dXJuIFBpKGUpP25bdHlwZW9mIGU9PSJzdHJpbmciPyJzdHJpbmciOiJoYXNoIl06bi5tYXB9ZnVuY3Rpb24gVWkodCl7dmFyIGU9S2UodGhpcyx0KS5kZWxldGUodCk7cmV0dXJuIHRoaXMuc2l6ZS09ZT8xOjAsZX1mdW5jdGlvbiBIaSh0KXtyZXR1cm4gS2UodGhpcyx0KS5nZXQodCl9ZnVuY3Rpb24gamkodCl7cmV0dXJuIEtlKHRoaXMsdCkuaGFzKHQpfWZ1bmN0aW9uIHFpKHQsZSl7dmFyIG49S2UodGhpcyx0KSxyPW4uc2l6ZTtyZXR1cm4gbi5zZXQodCxlKSx0aGlzLnNpemUrPW4uc2l6ZT09cj8wOjEsdGhpc31mdW5jdGlvbiBUZSh0KXt2YXIgZT0tMSxuPXQ9PW51bGw/MDp0Lmxlbmd0aDtmb3IodGhpcy5jbGVhcigpOysrZTxuOyl7dmFyIHI9dFtlXTt0aGlzLnNldChyWzBdLHJbMV0pfX1UZS5wcm90b3R5cGUuY2xlYXI9WmksVGUucHJvdG90eXBlLmRlbGV0ZT1VaSxUZS5wcm90b3R5cGUuZ2V0PUhpLFRlLnByb3RvdHlwZS5oYXM9amksVGUucHJvdG90eXBlLnNldD1xaTtmdW5jdGlvbiBZaSh0LGUpe2Zvcih2YXIgbj0tMSxyPWUubGVuZ3RoLHM9dC5sZW5ndGg7KytuPHI7KXRbcytuXT1lW25dO3JldHVybiB0fXZhciBUbj13ZT93ZS5pc0NvbmNhdFNwcmVhZGFibGU6dm9pZCAwO2Z1bmN0aW9uIEdpKHQpe3JldHVybiBBcyh0KXx8U2kodCl8fCEhKFRuJiZ0JiZ0W1RuXSl9ZnVuY3Rpb24gU24odCxlLG4scixzKXt2YXIgaT0tMSxhPXQubGVuZ3RoO2ZvcihufHwobj1HaSksc3x8KHM9W10pOysraTxhOyl7dmFyIG89dFtpXTtlPjAmJm4obyk/ZT4xP1NuKG8sZS0xLG4scixzKTpZaShzLG8pOnJ8fChzW3MubGVuZ3RoXT1vKX1yZXR1cm4gc312YXIgSmk9Il9fbG9kYXNoX2hhc2hfdW5kZWZpbmVkX18iO2Z1bmN0aW9uIEJpKHQpe3JldHVybiB0aGlzLl9fZGF0YV9fLnNldCh0LEppKSx0aGlzfWZ1bmN0aW9uIFFpKHQpe3JldHVybiB0aGlzLl9fZGF0YV9fLmhhcyh0KX1mdW5jdGlvbiBYZSh0KXt2YXIgZT0tMSxuPXQ9PW51bGw/MDp0Lmxlbmd0aDtmb3IodGhpcy5fX2RhdGFfXz1uZXcgVGU7KytlPG47KXRoaXMuYWRkKHRbZV0pfVhlLnByb3RvdHlwZS5hZGQ9WGUucHJvdG90eXBlLnB1c2g9QmksWGUucHJvdG90eXBlLmhhcz1RaTtmdW5jdGlvbiBLaSh0LGUpe3JldHVybiB0LmhhcyhlKX1mdW5jdGlvbiBPbih0KXtyZXR1cm4gdnQodCkmJmdpKHQpfWZ1bmN0aW9uIFhpKHQsZSxuKXtmb3IodmFyIHI9LTEscz10PT1udWxsPzA6dC5sZW5ndGg7KytyPHM7KWlmKG4oZSx0W3JdKSlyZXR1cm4hMDtyZXR1cm4hMX12YXIgZWE9MjAwO2Z1bmN0aW9uIHRhKHQsZSxuLHIpe3ZhciBzPS0xLGk9Y2ksYT0hMCxvPXQubGVuZ3RoLGw9W10sdT1lLmxlbmd0aDtpZighbylyZXR1cm4gbDtuJiYoZT1GcyhlLE9pKG4pKSkscj8oaT1YaSxhPSExKTplLmxlbmd0aD49ZWEmJihpPUtpLGE9ITEsZT1uZXcgWGUoZSkpO2U6Zm9yKDsrK3M8bzspe3ZhciBjPXRbc10sZD1uPT1udWxsP2M6bihjKTtpZihjPXJ8fGMhPT0wP2M6MCxhJiZkPT09ZCl7Zm9yKHZhciB3PXU7dy0tOylpZihlW3ddPT09ZCljb250aW51ZSBlO2wucHVzaChjKX1lbHNlIGkoZSxkLHIpfHxsLnB1c2goYyl9cmV0dXJuIGx9dmFyIG5hPWhpKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIE9uKHQpP3RhKHQsU24oZSwxLE9uLCEwKSk6W119KTtmdW5jdGlvbiAkKHQpe2NvbnN0IGU9bmV3IFNldCh0KTtyZXR1cm4gbj0+ZS5oYXMobil9Y29uc3QgV2U9dD0+ZT0+dHlwZW9mIGU9PT10LHJhPVdlKCJvYmplY3QiKSxOdD1XZSgiYm9vbGVhbiIpLEU9V2UoIm51bWJlciIpLEY9V2UoInN0cmluZyIpLHNhPVdlKCJ1bmRlZmluZWQiKSxrbj10PT50PT09bnVsbCxHPXQ9PmtuKHQpfHxzYSh0KSx7aXNBcnJheTpYfT1BcnJheSxVPXQ9PnJhKHQpJiYha24odCkmJiFYKHQpOygodCxlLG4pPT57bGV0IHI9KDI8PE1hdGgubG9nKHQubGVuZ3RoLTEpL01hdGguTE4yKS0xLHM9LX4oMS42KnIqZS90Lmxlbmd0aCk7cmV0dXJuKGk9ZSk9PntsZXQgYT0iIjtmb3IoOzspe2xldCBvPW4ocyksbD1zO2Zvcig7bC0tOylpZihhKz10W29bbF0mcl18fCIiLGEubGVuZ3RoPT09aSlyZXR1cm4gYX19fSkoInVzZWFuZG9tLTI2VDE5ODM0MFBYNzVweEpBQ0tWRVJZTUlOREJVU0hXT0xGX0dRWmJmZ2hqa2xxdnd5enJpY3QiLDIxLHQ9PntsZXQgZT1nbG9iYWxUaGlzLmNyeXB0bztyZXR1cm4gZT09PXZvaWQgMCYmKGU9cmVxdWlyZSgibm9kZTpjcnlwdG8iKS53ZWJjcnlwdG8pLGUuZ2V0UmFuZG9tVmFsdWVzKG5ldyBVaW50OEFycmF5KHQpKX0pO2NvbnN0IE10PSh0LGUpPT5uPT5NYXRoLm1pbihNYXRoLm1heChuLHQpLGUpOy8qIQogKiBAZGluZXVnL2VyZC1lZGl0b3Itc2NoZW1hCiAqIEB2ZXJzaW9uIDAuMS4wIHwgU3VuIE9jdCAyMCAyMDI0CiAqIEBhdXRob3IgU2V1bmdId2FuLUxlZSA8ZGluZXVnMkBnbWFpbC5jb20+CiAqIEBsaWNlbnNlIE1JVAogKi9mdW5jdGlvbiBwKHQsZSxuKXtyZXR1cm4gcj0+e2lmKCFuKXJldHVybjtjb25zdCBzPW5bcl07dChzKSYmKGVbcl09cyl9fWZ1bmN0aW9uIEgodCl7cmV0dXJuIGU9PkUoZSkmJnQuaW5jbHVkZXMoZSl9ZnVuY3Rpb24gU2UoKXtjb25zdCB0PURhdGUubm93KCk7cmV0dXJue3VwZGF0ZUF0OnQsY3JlYXRlQXQ6dH19ZnVuY3Rpb24gT2UodCxlKXtjb25zdCBuPXAoRSx0LGUpO24oInVwZGF0ZUF0IiksbigiY3JlYXRlQXQiKX1jb25zdCBpYT0oKT0+KHt0YWJsZUlkczpbXSxyZWxhdGlvbnNoaXBJZHM6W10saW5kZXhJZHM6W10sbWVtb0lkczpbXX0pO2Z1bmN0aW9uIGFhKHQpe2NvbnN0IGU9aWEoKTtpZighVSh0KXx8Ryh0KSlyZXR1cm4gZTtjb25zdCBuPXAoWCxlLHQpO3JldHVybiBuKCJ0YWJsZUlkcyIpLG4oInJlbGF0aW9uc2hpcElkcyIpLG4oImluZGV4SWRzIiksbigibWVtb0lkcyIpLGV9Y29uc3Qgb2E9KCk9Pih7aWQ6IiIsbmFtZToiIix0YWJsZUlkOiIiLGluZGV4Q29sdW1uSWRzOltdLHNlcUluZGV4Q29sdW1uSWRzOltdLHVuaXF1ZTohMSxtZXRhOlNlKCl9KTtmdW5jdGlvbiBsYSh0KXtjb25zdCBlPXt9O2lmKCFVKHQpfHxHKHQpKXJldHVybiBlO2Zvcihjb25zdCBuIG9mIE9iamVjdC52YWx1ZXModCkpe2lmKCFuKWNvbnRpbnVlO2NvbnN0IHI9b2EoKSxzPXAoRixyLG4pLGk9cChOdCxyLG4pLGE9cChYLHIsbik7cygiaWQiKSxzKCJuYW1lIikscygidGFibGVJZCIpLGkoInVuaXF1ZSIpLGEoImluZGV4Q29sdW1uSWRzIiksYSgic2VxSW5kZXhDb2x1bW5JZHMiKSxPZShyLm1ldGEsbi5tZXRhKSxyLmlkJiYoZVtyLmlkXT1yKX1yZXR1cm4gZX1jb25zdCBibj17QVNDOjEsREVTQzoyfSx1YT1PYmplY3QudmFsdWVzKGJuKSxjYT0oKT0+KHtpZDoiIixpbmRleElkOiIiLGNvbHVtbklkOiIiLG9yZGVyVHlwZTpibi5BU0MsbWV0YTpTZSgpfSk7ZnVuY3Rpb24gZmEodCl7Y29uc3QgZT17fTtpZighVSh0KXx8Ryh0KSlyZXR1cm4gZTtmb3IoY29uc3QgbiBvZiBPYmplY3QudmFsdWVzKHQpKXtpZighbiljb250aW51ZTtjb25zdCByPWNhKCkscz1wKEYscixuKTtzKCJpZCIpLHMoImluZGV4SWQiKSxzKCJjb2x1bW5JZCIpLHAoSCh1YSkscixuKSgib3JkZXJUeXBlIiksT2Uoci5tZXRhLG4ubWV0YSksci5pZCYmKGVbci5pZF09cil9cmV0dXJuIGV9Y29uc3QgZGE9KCk9Pih7fSk7ZnVuY3Rpb24gaGEodCl7Y29uc3QgZT1kYSgpO2lmKCFVKHQpfHxHKHQpKXJldHVybiBlO2Zvcihjb25zdFtuLHJdb2YgT2JqZWN0LmVudHJpZXModCkpe2lmKCFYKHIpfHxyLmxlbmd0aCE9PTQpY29udGludWU7Y29uc3RbcyxpLGEsb109cjtpZihGKHMpJiZFKGkpJiZFKGEpJiZVKG8pKXtjb25zdCBsPXt9LHU9cChFLGwsbyk7T2JqZWN0LmtleXMobykuZm9yRWFjaCh1KSxlW25dPVtzLGksYSxsXX19cmV0dXJuIGV9Y29uc3QgbWE9KCk9Pih7aWQ6IiIsdmFsdWU6IiIsdWk6e3g6MjAwLHk6MTAwLHpJbmRleDoyLHdpZHRoOjExNixoZWlnaHQ6MTAwLGNvbG9yOiIifSxtZXRhOlNlKCl9KTtmdW5jdGlvbiB5YSh0KXtjb25zdCBlPXt9O2lmKCFVKHQpfHxHKHQpKXJldHVybiBlO2Zvcihjb25zdCBuIG9mIE9iamVjdC52YWx1ZXModCkpe2lmKCFuKWNvbnRpbnVlO2NvbnN0IHI9bWEoKSxzPXAoRixyLG4pLGk9cChFLHIudWksbi51aSksYT1wKEYsci51aSxuLnVpKTtzKCJpZCIpLHMoInZhbHVlIiksYSgiY29sb3IiKSxpKCJ4IiksaSgieSIpLGkoInpJbmRleCIpLGkoIndpZHRoIiksaSgiaGVpZ2h0IiksT2Uoci5tZXRhLG4ubWV0YSksci5pZCYmKGVbci5pZF09cil9cmV0dXJuIGV9Y29uc3Qgdm49e1plcm9PbmU6MixaZXJvTjo0LE9uZU9ubHk6OCxPbmVOOjE2fSxnYT1PYmplY3QudmFsdWVzKHZuKSxJbj17cmluZzoxLGRhc2g6Mn0sd2E9T2JqZWN0LnZhbHVlcyhJbikseHQ9e2xlZnQ6MSxyaWdodDoyLHRvcDo0LGJvdHRvbTo4fSxFbj1PYmplY3QudmFsdWVzKHh0KSxwYT0oKT0+KHtpZDoiIixpZGVudGlmaWNhdGlvbjohMSxyZWxhdGlvbnNoaXBUeXBlOnZuLlplcm9OLHN0YXJ0UmVsYXRpb25zaGlwVHlwZTpJbi5kYXNoLHN0YXJ0Ont0YWJsZUlkOiIiLGNvbHVtbklkczpbXSx4OjAseTowLGRpcmVjdGlvbjp4dC5ib3R0b219LGVuZDp7dGFibGVJZDoiIixjb2x1bW5JZHM6W10seDowLHk6MCxkaXJlY3Rpb246eHQuYm90dG9tfSxtZXRhOlNlKCl9KTtmdW5jdGlvbiBUYSh0KXtjb25zdCBlPXt9O2lmKCFVKHQpfHxHKHQpKXJldHVybiBlO2Zvcihjb25zdCBuIG9mIE9iamVjdC52YWx1ZXModCkpe2lmKCFuKWNvbnRpbnVlO2NvbnN0IHI9cGEoKSxzPXAoRixyLG4pLGk9cChOdCxyLG4pLGE9cChFLHIuc3RhcnQsbi5zdGFydCksbz1wKEYsci5zdGFydCxuLnN0YXJ0KSxsPXAoRSxyLmVuZCxuLmVuZCksdT1wKEYsci5lbmQsbi5lbmQpO3MoImlkIiksaSgiaWRlbnRpZmljYXRpb24iKSxwKEgoZ2EpLHIsbikoInJlbGF0aW9uc2hpcFR5cGUiKSxwKEgod2EpLHIsbikoInN0YXJ0UmVsYXRpb25zaGlwVHlwZSIpLG8oInRhYmxlSWQiKSxhKCJ4IiksYSgieSIpLHAoSChFbiksci5zdGFydCxuLnN0YXJ0KSgiZGlyZWN0aW9uIikscChYLHIuc3RhcnQsbi5zdGFydCkoImNvbHVtbklkcyIpLHUoInRhYmxlSWQiKSxsKCJ4IiksbCgieSIpLHAoSChFbiksci5lbmQsbi5lbmQpKCJkaXJlY3Rpb24iKSxwKFgsci5lbmQsbi5lbmQpKCJjb2x1bW5JZHMiKSxPZShyLm1ldGEsbi5tZXRhKSxyLmlkJiYoZVtyLmlkXT1yKX1yZXR1cm4gZX1jb25zdCBTYT17RVJEOiJFUkQiLHZpc3VhbGl6YXRpb246IkBkaW5ldWcvZXJkLWVkaXRvci9idWlsdGluLXZpc3VhbGl6YXRpb24iLHNjaGVtYVNRTDoiQGRpbmV1Zy9lcmQtZWRpdG9yL2J1aWx0aW4tc2NoZW1hLXNxbCIsZ2VuZXJhdG9yQ29kZToiQGRpbmV1Zy9lcmQtZWRpdG9yL2J1aWx0aW4tZ2VuZXJhdG9yLWNvZGUiLHNldHRpbmdzOiJzZXR0aW5ncyJ9LGxlPXt0YWJsZUNvbW1lbnQ6MSxjb2x1bW5Db21tZW50OjIsY29sdW1uRGF0YVR5cGU6NCxjb2x1bW5EZWZhdWx0OjgsY29sdW1uQXV0b0luY3JlbWVudDoxNixjb2x1bW5QcmltYXJ5S2V5OjMyLGNvbHVtblVuaXF1ZTo2NCxjb2x1bW5Ob3ROdWxsOjEyOCxyZWxhdGlvbnNoaXA6MjU2fSxlZT17Y29sdW1uTmFtZToxLGNvbHVtbkRhdGFUeXBlOjIsY29sdW1uTm90TnVsbDo0LGNvbHVtblVuaXF1ZTo4LGNvbHVtbkF1dG9JbmNyZW1lbnQ6MTYsY29sdW1uRGVmYXVsdDozMixjb2x1bW5Db21tZW50OjY0fSxObj1PYmplY3QudmFsdWVzKGVlKSxNbj17TWFyaWFEQjoxLE1TU1FMOjIsTXlTUUw6NCxPcmFjbGU6OCxQb3N0Z3JlU1FMOjE2LFNRTGl0ZTozMn0sT2E9T2JqZWN0LnZhbHVlcyhNbikseG49e0dyYXBoUUw6MSxjc2hhcnA6MixKYXZhOjQsS290bGluOjgsVHlwZVNjcmlwdDoxNixKUEE6MzIsU2NhbGE6NjR9LGthPU9iamVjdC52YWx1ZXMoeG4pLER0PXtub25lOjEsY2FtZWxDYXNlOjIscGFzY2FsQ2FzZTo0LHNuYWtlQ2FzZTo4fSxEbj1PYmplY3QudmFsdWVzKER0KSxDbj17bm9uZToxLGRvdWJsZVF1b3RlOjIsc2luZ2xlUXVvdGU6NCxiYWNrdGljazo4fSxiYT1PYmplY3QudmFsdWVzKENuKSx2YT0uMSxJYT0xLEVhPTJlMyxOYT0yZTQsTWE9bGUudGFibGVDb21tZW50fGxlLmNvbHVtbkNvbW1lbnR8bGUuY29sdW1uRGF0YVR5cGV8bGUuY29sdW1uRGVmYXVsdHxsZS5jb2x1bW5QcmltYXJ5S2V5fGxlLmNvbHVtbk5vdE51bGx8bGUucmVsYXRpb25zaGlwLHhhPSgpPT4oe3dpZHRoOjJlMyxoZWlnaHQ6MmUzLHNjcm9sbFRvcDowLHNjcm9sbExlZnQ6MCx6b29tTGV2ZWw6MSxzaG93Ok1hLGRhdGFiYXNlOk1uLk15U1FMLGRhdGFiYXNlTmFtZToiIixjYW52YXNUeXBlOlNhLkVSRCxsYW5ndWFnZTp4bi5HcmFwaFFMLHRhYmxlTmFtZUNhc2U6RHQucGFzY2FsQ2FzZSxjb2x1bW5OYW1lQ2FzZTpEdC5jYW1lbENhc2UsYnJhY2tldFR5cGU6Q24ubm9uZSxyZWxhdGlvbnNoaXBEYXRhVHlwZVN5bmM6ITAscmVsYXRpb25zaGlwT3B0aW1pemF0aW9uOiExLGNvbHVtbk9yZGVyOltlZS5jb2x1bW5OYW1lLGVlLmNvbHVtbkRhdGFUeXBlLGVlLmNvbHVtbk5vdE51bGwsZWUuY29sdW1uVW5pcXVlLGVlLmNvbHVtbkF1dG9JbmNyZW1lbnQsZWUuY29sdW1uRGVmYXVsdCxlZS5jb2x1bW5Db21tZW50XSxtYXhXaWR0aENvbW1lbnQ6LTEsaWdub3JlU2F2ZVNldHRpbmdzOjB9KSxGbj1NdChFYSxOYSksRGE9TXQodmEsSWEpLENhPU10KDYwLDIwMCk7ZnVuY3Rpb24gRmEodCl7Y29uc3QgZT14YSgpO2lmKCFVKHQpfHxHKHQpKXJldHVybiBlO2NvbnN0IG49cChFLGUsdCkscj1wKEYsZSx0KSxzPXAoTnQsZSx0KTtyZXR1cm4gRSh0LndpZHRoKSYmKGUud2lkdGg9Rm4odC53aWR0aCkpLEUodC5oZWlnaHQpJiYoZS5oZWlnaHQ9Rm4odC5oZWlnaHQpKSxFKHQuem9vbUxldmVsKSYmKGUuem9vbUxldmVsPURhKHQuem9vbUxldmVsKSksRSh0Lm1heFdpZHRoQ29tbWVudCkmJnQubWF4V2lkdGhDb21tZW50IT09LTEmJihlLm1heFdpZHRoQ29tbWVudD1DYSh0Lm1heFdpZHRoQ29tbWVudCkpLG4oInNjcm9sbFRvcCIpLG4oInNjcm9sbExlZnQiKSxuKCJzaG93IiksbigiaWdub3JlU2F2ZVNldHRpbmdzIikscigiZGF0YWJhc2VOYW1lIikscigiY2FudmFzVHlwZSIpLHMoInJlbGF0aW9uc2hpcERhdGFUeXBlU3luYyIpLHMoInJlbGF0aW9uc2hpcE9wdGltaXphdGlvbiIpLHAoSChPYSksZSx0KSgiZGF0YWJhc2UiKSxwKEgoa2EpLGUsdCkoImxhbmd1YWdlIikscChIKERuKSxlLHQpKCJ0YWJsZU5hbWVDYXNlIikscChIKERuKSxlLHQpKCJjb2x1bW5OYW1lQ2FzZSIpLHAoSChiYSksZSx0KSgiYnJhY2tldFR5cGUiKSxYKHQuY29sdW1uT3JkZXIpJiZObi5sZW5ndGg9PT10LmNvbHVtbk9yZGVyLmxlbmd0aCYmbmEoTm4sdC5jb2x1bW5PcmRlcikubGVuZ3RoPT09MCYmKGUuY29sdW1uT3JkZXI9dC5jb2x1bW5PcmRlciksZX1jb25zdCBBYT0oKT0+KHtpZDoiIixuYW1lOiIiLGNvbW1lbnQ6IiIsY29sdW1uSWRzOltdLHNlcUNvbHVtbklkczpbXSx1aTp7eDoyMDAseToxMDAsekluZGV4OjIsd2lkdGhOYW1lOjYwLHdpZHRoQ29tbWVudDo2MCxjb2xvcjoiIn0sbWV0YTpTZSgpfSk7ZnVuY3Rpb24gVmEodCl7Y29uc3QgZT17fTtpZighVSh0KXx8Ryh0KSlyZXR1cm4gZTtmb3IoY29uc3QgbiBvZiBPYmplY3QudmFsdWVzKHQpKXtpZighbiljb250aW51ZTtjb25zdCByPUFhKCkscz1wKEYscixuKSxpPXAoWCxyLG4pLGE9cChFLHIudWksbi51aSksbz1wKEYsci51aSxuLnVpKTtzKCJpZCIpLHMoIm5hbWUiKSxzKCJjb21tZW50IiksaSgiY29sdW1uSWRzIiksaSgic2VxQ29sdW1uSWRzIiksbygiY29sb3IiKSxhKCJ4IiksYSgieSIpLGEoInpJbmRleCIpLGEoIndpZHRoTmFtZSIpLGEoIndpZHRoQ29tbWVudCIpLE9lKHIubWV0YSxuLm1ldGEpLHIuaWQmJihlW3IuaWRdPXIpfXJldHVybiBlfWNvbnN0IFdhPSgpPT4oe2lkOiIiLHRhYmxlSWQ6IiIsbmFtZToiIixjb21tZW50OiIiLGRhdGFUeXBlOiIiLGRlZmF1bHQ6IiIsb3B0aW9uczowLHVpOntrZXlzOjAsd2lkdGhOYW1lOjYwLHdpZHRoQ29tbWVudDo2MCx3aWR0aERhdGFUeXBlOjYwLHdpZHRoRGVmYXVsdDo2MH0sbWV0YTpTZSgpfSk7ZnVuY3Rpb24gTGEodCl7Y29uc3QgZT17fTtpZighVSh0KXx8Ryh0KSlyZXR1cm4gZTtmb3IoY29uc3QgbiBvZiBPYmplY3QudmFsdWVzKHQpKXtpZighbiljb250aW51ZTtjb25zdCByPVdhKCkscz1wKEYscixuKSxpPXAoRSxyLG4pLGE9cChFLHIudWksbi51aSk7cygiaWQiKSxzKCJ0YWJsZUlkIikscygibmFtZSIpLHMoImNvbW1lbnQiKSxzKCJkYXRhVHlwZSIpLHMoImRlZmF1bHQiKSxpKCJvcHRpb25zIiksYSgia2V5cyIpLGEoIndpZHRoTmFtZSIpLGEoIndpZHRoQ29tbWVudCIpLGEoIndpZHRoRGF0YVR5cGUiKSxhKCJ3aWR0aERlZmF1bHQiKSxPZShyLm1ldGEsbi5tZXRhKSxyLmlkJiYoZVtyLmlkXT1yKX1yZXR1cm4gZX1mdW5jdGlvbiAkYSh0KXt2YXIgZSxuLHIscyxpLGE7Y29uc3Qgbz10LGw9RmEoby5zZXR0aW5ncyksdT1hYShvLmRvYyksYz1oYShvLmx3dyksZD1WYSgoZT1vLmNvbGxlY3Rpb25zKT09bnVsbD92b2lkIDA6ZS50YWJsZUVudGl0aWVzKSx3PUxhKChuPW8uY29sbGVjdGlvbnMpPT1udWxsP3ZvaWQgMDpuLnRhYmxlQ29sdW1uRW50aXRpZXMpLGg9VGEoKHI9by5jb2xsZWN0aW9ucyk9PW51bGw/dm9pZCAwOnIucmVsYXRpb25zaGlwRW50aXRpZXMpLGs9bGEoKHM9by5jb2xsZWN0aW9ucyk9PW51bGw/dm9pZCAwOnMuaW5kZXhFbnRpdGllcyksUD1mYSgoaT1vLmNvbGxlY3Rpb25zKT09bnVsbD92b2lkIDA6aS5pbmRleENvbHVtbkVudGl0aWVzKSxNPXlhKChhPW8uY29sbGVjdGlvbnMpPT1udWxsP3ZvaWQgMDphLm1lbW9FbnRpdGllcyk7cmV0dXJueyRzY2hlbWE6Imh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9kaW5ldWcvZXJkLWVkaXRvci9tYWluL2pzb24tc2NoZW1hL3NjaGVtYS5qc29uIix2ZXJzaW9uOiIzLjAuMCIsc2V0dGluZ3M6bCxkb2M6dSxjb2xsZWN0aW9uczp7dGFibGVFbnRpdGllczpkLHRhYmxlQ29sdW1uRW50aXRpZXM6dyxyZWxhdGlvbnNoaXBFbnRpdGllczpoLGluZGV4RW50aXRpZXM6ayxpbmRleENvbHVtbkVudGl0aWVzOlAsbWVtb0VudGl0aWVzOk19LGx3dzpjfX1mdW5jdGlvbiBfYSh0KXtyZXR1cm5bdCwtMSwtMSx7fV19ZnVuY3Rpb24gQ3QodCxlLG4pe3JldHVybiB0W2VdfHwodFtlXT1fYShuKSx0W2VdKX1mdW5jdGlvbiB6YSh0LGUsbixyLHMpe2NvbnN0IGk9Q3QodCxuLHIpLGE9aVsxXSxvPWlbMl07YTxlJiYoaVsxXT1lKSxvPGUmJnMoKX1mdW5jdGlvbiBSYSh0LGUsbixyLHMpe2NvbnN0IGk9Q3QodCxuLHIpLGE9aVsyXSxvPWlbMV07YTxlJiYoaVsyXT1lKSxvPD1lJiZzKCl9ZnVuY3Rpb24gWmEodCxlLG4scixzLGkpe2NvbnN0IGE9Q3QodCxuLHIpOyhhWzNdW3NdPz8tMSk8PWUmJihhWzNdW3NdPWUsaSgpKX1jbGFzcyBQYXtjb25zdHJ1Y3RvcihlKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywiY29sbGVjdGlvbnMiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTplfSl9Y29sbGVjdGlvbihlKXtyZXR1cm4gbmV3IFVhKHRoaXMuY29sbGVjdGlvbnNbZV0sZSl9fWNsYXNzIFVhe2NvbnN0cnVjdG9yKGUsbil7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsImNvbGxlY3Rpb24iLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTplfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsImNvbGxlY3Rpb25LZXkiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpufSl9c2VsZWN0QnlJZChlKXtyZXR1cm4gdGhpcy5jb2xsZWN0aW9uW2VdfXNlbGVjdEJ5SWRzKGUpe3JldHVybiBlLmxlbmd0aCxlLm1hcChuPT50aGlzLnNlbGVjdEJ5SWQobikpLmZpbHRlcihCb29sZWFuKX1zZWxlY3RFbnRpdGllcygpe3JldHVybiB0aGlzLmNvbGxlY3Rpb259c2VsZWN0QWxsKCl7cmV0dXJuIE9iamVjdC52YWx1ZXModGhpcy5jb2xsZWN0aW9uKX1zZXRPbmUoZSl7cmV0dXJuIHRoaXMuY29sbGVjdGlvbltlLmlkXT1lLHRoaXN9c2V0TWFueShlKXtyZXR1cm4gZS5mb3JFYWNoKG49PnRoaXMuc2V0T25lKG4pKSx0aGlzfXNldEFsbChlKXtyZXR1cm4gdGhpcy5yZW1vdmVBbGwoKSx0aGlzLnNldE1hbnkoZSksdGhpc31hZGRPbmUoZSl7cmV0dXJuIHRoaXMuc2VsZWN0QnlJZChlLmlkKT90aGlzOih0aGlzLnNldE9uZShlKSx0aGlzKX1hZGRNYW55KGUpe3JldHVybiBlLmZvckVhY2gobj0+dGhpcy5hZGRPbmUobikpLHRoaXN9cmVtb3ZlT25lKGUpe3JldHVybiB0aGlzLnNlbGVjdEJ5SWQoZSkmJlJlZmxlY3QuZGVsZXRlUHJvcGVydHkodGhpcy5jb2xsZWN0aW9uLGUpLHRoaXN9cmVtb3ZlTWFueShlKXtyZXR1cm4gZS5mb3JFYWNoKG49PnRoaXMucmVtb3ZlT25lKG4pKSx0aGlzfXJlbW92ZUFsbCgpe3JldHVybiB0aGlzLmNvbGxlY3Rpb249e30sdGhpc311cGRhdGVPbmUoZSxuKXtjb25zdCByPXRoaXMuc2VsZWN0QnlJZChlKTtyZXR1cm4gciYmKG4ociksci5tZXRhLnVwZGF0ZUF0PURhdGUubm93KCkpLHRoaXN9dXBkYXRlTWFueShlLG4pe3JldHVybiBlLmZvckVhY2gocj0+dGhpcy51cGRhdGVPbmUocixuKSksdGhpc31nZXRPckNyZWF0ZShlLG4pe2NvbnN0IHI9dGhpcy5zZWxlY3RCeUlkKGUpO2lmKHIpcmV0dXJuIHI7Y29uc3Qgcz1uKGUpO3JldHVybiB0aGlzLnNldE9uZShzKSx0aGlzLnNlbGVjdEJ5SWQoZSl9YWRkT3BlcmF0b3IoZSxuLHIscyl7cmV0dXJuIHphKGUsbixyLHRoaXMuY29sbGVjdGlvbktleSxzKSx0aGlzfXJlbW92ZU9wZXJhdG9yKGUsbixyLHMpe3JldHVybiBSYShlLG4scix0aGlzLmNvbGxlY3Rpb25LZXkscyksdGhpc31yZXBsYWNlT3BlcmF0b3IoZSxuLHIscyxpKXtyZXR1cm4gWmEoZSxuLHIsdGhpcy5jb2xsZWN0aW9uS2V5LHMsaSksdGhpc319Y29uc3QgQT10PT5uZXcgUGEodCk7Y2xhc3MgdWUgZXh0ZW5kcyBFcnJvcnt9Y2xhc3MgSGEgZXh0ZW5kcyB1ZXtjb25zdHJ1Y3RvcihlKXtzdXBlcihgSW52YWxpZCBEYXRlVGltZTogJHtlLnRvTWVzc2FnZSgpfWApfX1jbGFzcyBqYSBleHRlbmRzIHVle2NvbnN0cnVjdG9yKGUpe3N1cGVyKGBJbnZhbGlkIEludGVydmFsOiAke2UudG9NZXNzYWdlKCl9YCl9fWNsYXNzIHFhIGV4dGVuZHMgdWV7Y29uc3RydWN0b3IoZSl7c3VwZXIoYEludmFsaWQgRHVyYXRpb246ICR7ZS50b01lc3NhZ2UoKX1gKX19Y2xhc3Mga2UgZXh0ZW5kcyB1ZXt9Y2xhc3MgQW4gZXh0ZW5kcyB1ZXtjb25zdHJ1Y3RvcihlKXtzdXBlcihgSW52YWxpZCB1bml0ICR7ZX1gKX19Y2xhc3MgRCBleHRlbmRzIHVle31jbGFzcyB0ZSBleHRlbmRzIHVle2NvbnN0cnVjdG9yKCl7c3VwZXIoIlpvbmUgaXMgYW4gYWJzdHJhY3QgY2xhc3MiKX19Y29uc3QgZj0ibnVtZXJpYyIsXz0ic2hvcnQiLEM9ImxvbmciLGV0PXt5ZWFyOmYsbW9udGg6ZixkYXk6Zn0sVm49e3llYXI6Zixtb250aDpfLGRheTpmfSxZYT17eWVhcjpmLG1vbnRoOl8sZGF5OmYsd2Vla2RheTpffSxXbj17eWVhcjpmLG1vbnRoOkMsZGF5OmZ9LExuPXt5ZWFyOmYsbW9udGg6QyxkYXk6Zix3ZWVrZGF5OkN9LCRuPXtob3VyOmYsbWludXRlOmZ9LF9uPXtob3VyOmYsbWludXRlOmYsc2Vjb25kOmZ9LHpuPXtob3VyOmYsbWludXRlOmYsc2Vjb25kOmYsdGltZVpvbmVOYW1lOl99LFJuPXtob3VyOmYsbWludXRlOmYsc2Vjb25kOmYsdGltZVpvbmVOYW1lOkN9LFpuPXtob3VyOmYsbWludXRlOmYsaG91ckN5Y2xlOiJoMjMifSxQbj17aG91cjpmLG1pbnV0ZTpmLHNlY29uZDpmLGhvdXJDeWNsZToiaDIzIn0sVW49e2hvdXI6ZixtaW51dGU6ZixzZWNvbmQ6Zixob3VyQ3ljbGU6ImgyMyIsdGltZVpvbmVOYW1lOl99LEhuPXtob3VyOmYsbWludXRlOmYsc2Vjb25kOmYsaG91ckN5Y2xlOiJoMjMiLHRpbWVab25lTmFtZTpDfSxqbj17eWVhcjpmLG1vbnRoOmYsZGF5OmYsaG91cjpmLG1pbnV0ZTpmfSxxbj17eWVhcjpmLG1vbnRoOmYsZGF5OmYsaG91cjpmLG1pbnV0ZTpmLHNlY29uZDpmfSxZbj17eWVhcjpmLG1vbnRoOl8sZGF5OmYsaG91cjpmLG1pbnV0ZTpmfSxHbj17eWVhcjpmLG1vbnRoOl8sZGF5OmYsaG91cjpmLG1pbnV0ZTpmLHNlY29uZDpmfSxHYT17eWVhcjpmLG1vbnRoOl8sZGF5OmYsd2Vla2RheTpfLGhvdXI6ZixtaW51dGU6Zn0sSm49e3llYXI6Zixtb250aDpDLGRheTpmLGhvdXI6ZixtaW51dGU6Zix0aW1lWm9uZU5hbWU6X30sQm49e3llYXI6Zixtb250aDpDLGRheTpmLGhvdXI6ZixtaW51dGU6ZixzZWNvbmQ6Zix0aW1lWm9uZU5hbWU6X30sUW49e3llYXI6Zixtb250aDpDLGRheTpmLHdlZWtkYXk6Qyxob3VyOmYsbWludXRlOmYsdGltZVpvbmVOYW1lOkN9LEtuPXt5ZWFyOmYsbW9udGg6QyxkYXk6Zix3ZWVrZGF5OkMsaG91cjpmLG1pbnV0ZTpmLHNlY29uZDpmLHRpbWVab25lTmFtZTpDfTtjbGFzcyBMZXtnZXQgdHlwZSgpe3Rocm93IG5ldyB0ZX1nZXQgbmFtZSgpe3Rocm93IG5ldyB0ZX1nZXQgaWFuYU5hbWUoKXtyZXR1cm4gdGhpcy5uYW1lfWdldCBpc1VuaXZlcnNhbCgpe3Rocm93IG5ldyB0ZX1vZmZzZXROYW1lKGUsbil7dGhyb3cgbmV3IHRlfWZvcm1hdE9mZnNldChlLG4pe3Rocm93IG5ldyB0ZX1vZmZzZXQoZSl7dGhyb3cgbmV3IHRlfWVxdWFscyhlKXt0aHJvdyBuZXcgdGV9Z2V0IGlzVmFsaWQoKXt0aHJvdyBuZXcgdGV9fWxldCBGdD1udWxsO2NsYXNzIHR0IGV4dGVuZHMgTGV7c3RhdGljIGdldCBpbnN0YW5jZSgpe3JldHVybiBGdD09PW51bGwmJihGdD1uZXcgdHQpLEZ0fWdldCB0eXBlKCl7cmV0dXJuInN5c3RlbSJ9Z2V0IG5hbWUoKXtyZXR1cm4gbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQoKS5yZXNvbHZlZE9wdGlvbnMoKS50aW1lWm9uZX1nZXQgaXNVbml2ZXJzYWwoKXtyZXR1cm4hMX1vZmZzZXROYW1lKGUse2Zvcm1hdDpuLGxvY2FsZTpyfSl7cmV0dXJuIGtyKGUsbixyKX1mb3JtYXRPZmZzZXQoZSxuKXtyZXR1cm4gUmUodGhpcy5vZmZzZXQoZSksbil9b2Zmc2V0KGUpe3JldHVybi1uZXcgRGF0ZShlKS5nZXRUaW1lem9uZU9mZnNldCgpfWVxdWFscyhlKXtyZXR1cm4gZS50eXBlPT09InN5c3RlbSJ9Z2V0IGlzVmFsaWQoKXtyZXR1cm4hMH19bGV0IG50PXt9O2Z1bmN0aW9uIEphKHQpe3JldHVybiBudFt0XXx8KG50W3RdPW5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KCJlbi1VUyIse2hvdXIxMjohMSx0aW1lWm9uZTp0LHllYXI6Im51bWVyaWMiLG1vbnRoOiIyLWRpZ2l0IixkYXk6IjItZGlnaXQiLGhvdXI6IjItZGlnaXQiLG1pbnV0ZToiMi1kaWdpdCIsc2Vjb25kOiIyLWRpZ2l0IixlcmE6InNob3J0In0pKSxudFt0XX1jb25zdCBCYT17eWVhcjowLG1vbnRoOjEsZGF5OjIsZXJhOjMsaG91cjo0LG1pbnV0ZTo1LHNlY29uZDo2fTtmdW5jdGlvbiBRYSh0LGUpe2NvbnN0IG49dC5mb3JtYXQoZSkucmVwbGFjZSgvXHUyMDBFL2csIiIpLHI9LyhcZCspXC8oXGQrKVwvKFxkKykgKEFEfEJDKSw/IChcZCspOihcZCspOihcZCspLy5leGVjKG4pLFsscyxpLGEsbyxsLHUsY109cjtyZXR1cm5bYSxzLGksbyxsLHUsY119ZnVuY3Rpb24gS2EodCxlKXtjb25zdCBuPXQuZm9ybWF0VG9QYXJ0cyhlKSxyPVtdO2ZvcihsZXQgcz0wO3M8bi5sZW5ndGg7cysrKXtjb25zdHt0eXBlOmksdmFsdWU6YX09bltzXSxvPUJhW2ldO2k9PT0iZXJhIj9yW29dPWE6eShvKXx8KHJbb109cGFyc2VJbnQoYSwxMCkpfXJldHVybiByfWxldCBydD17fTtjbGFzcyBKIGV4dGVuZHMgTGV7c3RhdGljIGNyZWF0ZShlKXtyZXR1cm4gcnRbZV18fChydFtlXT1uZXcgSihlKSkscnRbZV19c3RhdGljIHJlc2V0Q2FjaGUoKXtydD17fSxudD17fX1zdGF0aWMgaXNWYWxpZFNwZWNpZmllcihlKXtyZXR1cm4gdGhpcy5pc1ZhbGlkWm9uZShlKX1zdGF0aWMgaXNWYWxpZFpvbmUoZSl7aWYoIWUpcmV0dXJuITE7dHJ5e3JldHVybiBuZXcgSW50bC5EYXRlVGltZUZvcm1hdCgiZW4tVVMiLHt0aW1lWm9uZTplfSkuZm9ybWF0KCksITB9Y2F0Y2h7cmV0dXJuITF9fWNvbnN0cnVjdG9yKGUpe3N1cGVyKCksdGhpcy56b25lTmFtZT1lLHRoaXMudmFsaWQ9Si5pc1ZhbGlkWm9uZShlKX1nZXQgdHlwZSgpe3JldHVybiJpYW5hIn1nZXQgbmFtZSgpe3JldHVybiB0aGlzLnpvbmVOYW1lfWdldCBpc1VuaXZlcnNhbCgpe3JldHVybiExfW9mZnNldE5hbWUoZSx7Zm9ybWF0Om4sbG9jYWxlOnJ9KXtyZXR1cm4ga3IoZSxuLHIsdGhpcy5uYW1lKX1mb3JtYXRPZmZzZXQoZSxuKXtyZXR1cm4gUmUodGhpcy5vZmZzZXQoZSksbil9b2Zmc2V0KGUpe2NvbnN0IG49bmV3IERhdGUoZSk7aWYoaXNOYU4obikpcmV0dXJuIE5hTjtjb25zdCByPUphKHRoaXMubmFtZSk7bGV0W3MsaSxhLG8sbCx1LGNdPXIuZm9ybWF0VG9QYXJ0cz9LYShyLG4pOlFhKHIsbik7bz09PSJCQyImJihzPS1NYXRoLmFicyhzKSsxKTtjb25zdCB3PWx0KHt5ZWFyOnMsbW9udGg6aSxkYXk6YSxob3VyOmw9PT0yND8wOmwsbWludXRlOnUsc2Vjb25kOmMsbWlsbGlzZWNvbmQ6MH0pO2xldCBoPStuO2NvbnN0IGs9aCUxZTM7cmV0dXJuIGgtPWs+PTA/azoxZTMraywody1oKS8oNjAqMWUzKX1lcXVhbHMoZSl7cmV0dXJuIGUudHlwZT09PSJpYW5hIiYmZS5uYW1lPT09dGhpcy5uYW1lfWdldCBpc1ZhbGlkKCl7cmV0dXJuIHRoaXMudmFsaWR9fWxldCBYbj17fTtmdW5jdGlvbiBYYSh0LGU9e30pe2NvbnN0IG49SlNPTi5zdHJpbmdpZnkoW3QsZV0pO2xldCByPVhuW25dO3JldHVybiByfHwocj1uZXcgSW50bC5MaXN0Rm9ybWF0KHQsZSksWG5bbl09cikscn1sZXQgQXQ9e307ZnVuY3Rpb24gVnQodCxlPXt9KXtjb25zdCBuPUpTT04uc3RyaW5naWZ5KFt0LGVdKTtsZXQgcj1BdFtuXTtyZXR1cm4gcnx8KHI9bmV3IEludGwuRGF0ZVRpbWVGb3JtYXQodCxlKSxBdFtuXT1yKSxyfWxldCBXdD17fTtmdW5jdGlvbiBlbyh0LGU9e30pe2NvbnN0IG49SlNPTi5zdHJpbmdpZnkoW3QsZV0pO2xldCByPVd0W25dO3JldHVybiByfHwocj1uZXcgSW50bC5OdW1iZXJGb3JtYXQodCxlKSxXdFtuXT1yKSxyfWxldCBMdD17fTtmdW5jdGlvbiB0byh0LGU9e30pe2NvbnN0e2Jhc2U6biwuLi5yfT1lLHM9SlNPTi5zdHJpbmdpZnkoW3Qscl0pO2xldCBpPUx0W3NdO3JldHVybiBpfHwoaT1uZXcgSW50bC5SZWxhdGl2ZVRpbWVGb3JtYXQodCxlKSxMdFtzXT1pKSxpfWxldCAkZT1udWxsO2Z1bmN0aW9uIG5vKCl7cmV0dXJuICRlfHwoJGU9bmV3IEludGwuRGF0ZVRpbWVGb3JtYXQoKS5yZXNvbHZlZE9wdGlvbnMoKS5sb2NhbGUsJGUpfWxldCBlcj17fTtmdW5jdGlvbiBybyh0KXtsZXQgZT1lclt0XTtpZighZSl7Y29uc3Qgbj1uZXcgSW50bC5Mb2NhbGUodCk7ZT0iZ2V0V2Vla0luZm8iaW4gbj9uLmdldFdlZWtJbmZvKCk6bi53ZWVrSW5mbyxlclt0XT1lfXJldHVybiBlfWZ1bmN0aW9uIHNvKHQpe2NvbnN0IGU9dC5pbmRleE9mKCIteC0iKTtlIT09LTEmJih0PXQuc3Vic3RyaW5nKDAsZSkpO2NvbnN0IG49dC5pbmRleE9mKCItdS0iKTtpZihuPT09LTEpcmV0dXJuW3RdO3tsZXQgcixzO3RyeXtyPVZ0KHQpLnJlc29sdmVkT3B0aW9ucygpLHM9dH1jYXRjaHtjb25zdCBsPXQuc3Vic3RyaW5nKDAsbik7cj1WdChsKS5yZXNvbHZlZE9wdGlvbnMoKSxzPWx9Y29uc3R7bnVtYmVyaW5nU3lzdGVtOmksY2FsZW5kYXI6YX09cjtyZXR1cm5bcyxpLGFdfX1mdW5jdGlvbiBpbyh0LGUsbil7cmV0dXJuKG58fGUpJiYodC5pbmNsdWRlcygiLXUtIil8fCh0Kz0iLXUiKSxuJiYodCs9YC1jYS0ke259YCksZSYmKHQrPWAtbnUtJHtlfWApKSx0fWZ1bmN0aW9uIGFvKHQpe2NvbnN0IGU9W107Zm9yKGxldCBuPTE7bjw9MTI7bisrKXtjb25zdCByPWcudXRjKDIwMDksbiwxKTtlLnB1c2godChyKSl9cmV0dXJuIGV9ZnVuY3Rpb24gb28odCl7Y29uc3QgZT1bXTtmb3IobGV0IG49MTtuPD03O24rKyl7Y29uc3Qgcj1nLnV0YygyMDE2LDExLDEzK24pO2UucHVzaCh0KHIpKX1yZXR1cm4gZX1mdW5jdGlvbiBzdCh0LGUsbixyKXtjb25zdCBzPXQubGlzdGluZ01vZGUoKTtyZXR1cm4gcz09PSJlcnJvciI/bnVsbDpzPT09ImVuIj9uKGUpOnIoZSl9ZnVuY3Rpb24gbG8odCl7cmV0dXJuIHQubnVtYmVyaW5nU3lzdGVtJiZ0Lm51bWJlcmluZ1N5c3RlbSE9PSJsYXRuIj8hMTp0Lm51bWJlcmluZ1N5c3RlbT09PSJsYXRuInx8IXQubG9jYWxlfHx0LmxvY2FsZS5zdGFydHNXaXRoKCJlbiIpfHxuZXcgSW50bC5EYXRlVGltZUZvcm1hdCh0LmludGwpLnJlc29sdmVkT3B0aW9ucygpLm51bWJlcmluZ1N5c3RlbT09PSJsYXRuIn1jbGFzcyB1b3tjb25zdHJ1Y3RvcihlLG4scil7dGhpcy5wYWRUbz1yLnBhZFRvfHwwLHRoaXMuZmxvb3I9ci5mbG9vcnx8ITE7Y29uc3R7cGFkVG86cyxmbG9vcjppLC4uLmF9PXI7aWYoIW58fE9iamVjdC5rZXlzKGEpLmxlbmd0aD4wKXtjb25zdCBvPXt1c2VHcm91cGluZzohMSwuLi5yfTtyLnBhZFRvPjAmJihvLm1pbmltdW1JbnRlZ2VyRGlnaXRzPXIucGFkVG8pLHRoaXMuaW5mPWVvKGUsbyl9fWZvcm1hdChlKXtpZih0aGlzLmluZil7Y29uc3Qgbj10aGlzLmZsb29yP01hdGguZmxvb3IoZSk6ZTtyZXR1cm4gdGhpcy5pbmYuZm9ybWF0KG4pfWVsc2V7Y29uc3Qgbj10aGlzLmZsb29yP01hdGguZmxvb3IoZSk6VXQoZSwzKTtyZXR1cm4gSShuLHRoaXMucGFkVG8pfX19Y2xhc3MgY297Y29uc3RydWN0b3IoZSxuLHIpe3RoaXMub3B0cz1yLHRoaXMub3JpZ2luYWxab25lPXZvaWQgMDtsZXQgcztpZih0aGlzLm9wdHMudGltZVpvbmUpdGhpcy5kdD1lO2Vsc2UgaWYoZS56b25lLnR5cGU9PT0iZml4ZWQiKXtjb25zdCBhPS0xKihlLm9mZnNldC82MCksbz1hPj0wP2BFdGMvR01UKyR7YX1gOmBFdGMvR01UJHthfWA7ZS5vZmZzZXQhPT0wJiZKLmNyZWF0ZShvKS52YWxpZD8ocz1vLHRoaXMuZHQ9ZSk6KHM9IlVUQyIsdGhpcy5kdD1lLm9mZnNldD09PTA/ZTplLnNldFpvbmUoIlVUQyIpLnBsdXMoe21pbnV0ZXM6ZS5vZmZzZXR9KSx0aGlzLm9yaWdpbmFsWm9uZT1lLnpvbmUpfWVsc2UgZS56b25lLnR5cGU9PT0ic3lzdGVtIj90aGlzLmR0PWU6ZS56b25lLnR5cGU9PT0iaWFuYSI/KHRoaXMuZHQ9ZSxzPWUuem9uZS5uYW1lKToocz0iVVRDIix0aGlzLmR0PWUuc2V0Wm9uZSgiVVRDIikucGx1cyh7bWludXRlczplLm9mZnNldH0pLHRoaXMub3JpZ2luYWxab25lPWUuem9uZSk7Y29uc3QgaT17Li4udGhpcy5vcHRzfTtpLnRpbWVab25lPWkudGltZVpvbmV8fHMsdGhpcy5kdGY9VnQobixpKX1mb3JtYXQoKXtyZXR1cm4gdGhpcy5vcmlnaW5hbFpvbmU/dGhpcy5mb3JtYXRUb1BhcnRzKCkubWFwKCh7dmFsdWU6ZX0pPT5lKS5qb2luKCIiKTp0aGlzLmR0Zi5mb3JtYXQodGhpcy5kdC50b0pTRGF0ZSgpKX1mb3JtYXRUb1BhcnRzKCl7Y29uc3QgZT10aGlzLmR0Zi5mb3JtYXRUb1BhcnRzKHRoaXMuZHQudG9KU0RhdGUoKSk7cmV0dXJuIHRoaXMub3JpZ2luYWxab25lP2UubWFwKG49PntpZihuLnR5cGU9PT0idGltZVpvbmVOYW1lIil7Y29uc3Qgcj10aGlzLm9yaWdpbmFsWm9uZS5vZmZzZXROYW1lKHRoaXMuZHQudHMse2xvY2FsZTp0aGlzLmR0LmxvY2FsZSxmb3JtYXQ6dGhpcy5vcHRzLnRpbWVab25lTmFtZX0pO3JldHVybnsuLi5uLHZhbHVlOnJ9fWVsc2UgcmV0dXJuIG59KTplfXJlc29sdmVkT3B0aW9ucygpe3JldHVybiB0aGlzLmR0Zi5yZXNvbHZlZE9wdGlvbnMoKX19Y2xhc3MgZm97Y29uc3RydWN0b3IoZSxuLHIpe3RoaXMub3B0cz17c3R5bGU6ImxvbmciLC4uLnJ9LCFuJiZwcigpJiYodGhpcy5ydGY9dG8oZSxyKSl9Zm9ybWF0KGUsbil7cmV0dXJuIHRoaXMucnRmP3RoaXMucnRmLmZvcm1hdChlLG4pOkZvKG4sZSx0aGlzLm9wdHMubnVtZXJpYyx0aGlzLm9wdHMuc3R5bGUhPT0ibG9uZyIpfWZvcm1hdFRvUGFydHMoZSxuKXtyZXR1cm4gdGhpcy5ydGY/dGhpcy5ydGYuZm9ybWF0VG9QYXJ0cyhlLG4pOltdfX1jb25zdCBobz17Zmlyc3REYXk6MSxtaW5pbWFsRGF5czo0LHdlZWtlbmQ6WzYsN119O2NsYXNzIE97c3RhdGljIGZyb21PcHRzKGUpe3JldHVybiBPLmNyZWF0ZShlLmxvY2FsZSxlLm51bWJlcmluZ1N5c3RlbSxlLm91dHB1dENhbGVuZGFyLGUud2Vla1NldHRpbmdzLGUuZGVmYXVsdFRvRU4pfXN0YXRpYyBjcmVhdGUoZSxuLHIscyxpPSExKXtjb25zdCBhPWV8fHYuZGVmYXVsdExvY2FsZSxvPWF8fChpPyJlbi1VUyI6bm8oKSksbD1ufHx2LmRlZmF1bHROdW1iZXJpbmdTeXN0ZW0sdT1yfHx2LmRlZmF1bHRPdXRwdXRDYWxlbmRhcixjPVp0KHMpfHx2LmRlZmF1bHRXZWVrU2V0dGluZ3M7cmV0dXJuIG5ldyBPKG8sbCx1LGMsYSl9c3RhdGljIHJlc2V0Q2FjaGUoKXskZT1udWxsLEF0PXt9LFd0PXt9LEx0PXt9fXN0YXRpYyBmcm9tT2JqZWN0KHtsb2NhbGU6ZSxudW1iZXJpbmdTeXN0ZW06bixvdXRwdXRDYWxlbmRhcjpyLHdlZWtTZXR0aW5nczpzfT17fSl7cmV0dXJuIE8uY3JlYXRlKGUsbixyLHMpfWNvbnN0cnVjdG9yKGUsbixyLHMsaSl7Y29uc3RbYSxvLGxdPXNvKGUpO3RoaXMubG9jYWxlPWEsdGhpcy5udW1iZXJpbmdTeXN0ZW09bnx8b3x8bnVsbCx0aGlzLm91dHB1dENhbGVuZGFyPXJ8fGx8fG51bGwsdGhpcy53ZWVrU2V0dGluZ3M9cyx0aGlzLmludGw9aW8odGhpcy5sb2NhbGUsdGhpcy5udW1iZXJpbmdTeXN0ZW0sdGhpcy5vdXRwdXRDYWxlbmRhciksdGhpcy53ZWVrZGF5c0NhY2hlPXtmb3JtYXQ6e30sc3RhbmRhbG9uZTp7fX0sdGhpcy5tb250aHNDYWNoZT17Zm9ybWF0Ont9LHN0YW5kYWxvbmU6e319LHRoaXMubWVyaWRpZW1DYWNoZT1udWxsLHRoaXMuZXJhQ2FjaGU9e30sdGhpcy5zcGVjaWZpZWRMb2NhbGU9aSx0aGlzLmZhc3ROdW1iZXJzQ2FjaGVkPW51bGx9Z2V0IGZhc3ROdW1iZXJzKCl7cmV0dXJuIHRoaXMuZmFzdE51bWJlcnNDYWNoZWQ9PW51bGwmJih0aGlzLmZhc3ROdW1iZXJzQ2FjaGVkPWxvKHRoaXMpKSx0aGlzLmZhc3ROdW1iZXJzQ2FjaGVkfWxpc3RpbmdNb2RlKCl7Y29uc3QgZT10aGlzLmlzRW5nbGlzaCgpLG49KHRoaXMubnVtYmVyaW5nU3lzdGVtPT09bnVsbHx8dGhpcy5udW1iZXJpbmdTeXN0ZW09PT0ibGF0biIpJiYodGhpcy5vdXRwdXRDYWxlbmRhcj09PW51bGx8fHRoaXMub3V0cHV0Q2FsZW5kYXI9PT0iZ3JlZ29yeSIpO3JldHVybiBlJiZuPyJlbiI6ImludGwifWNsb25lKGUpe3JldHVybiFlfHxPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhlKS5sZW5ndGg9PT0wP3RoaXM6Ty5jcmVhdGUoZS5sb2NhbGV8fHRoaXMuc3BlY2lmaWVkTG9jYWxlLGUubnVtYmVyaW5nU3lzdGVtfHx0aGlzLm51bWJlcmluZ1N5c3RlbSxlLm91dHB1dENhbGVuZGFyfHx0aGlzLm91dHB1dENhbGVuZGFyLFp0KGUud2Vla1NldHRpbmdzKXx8dGhpcy53ZWVrU2V0dGluZ3MsZS5kZWZhdWx0VG9FTnx8ITEpfXJlZGVmYXVsdFRvRU4oZT17fSl7cmV0dXJuIHRoaXMuY2xvbmUoey4uLmUsZGVmYXVsdFRvRU46ITB9KX1yZWRlZmF1bHRUb1N5c3RlbShlPXt9KXtyZXR1cm4gdGhpcy5jbG9uZSh7Li4uZSxkZWZhdWx0VG9FTjohMX0pfW1vbnRocyhlLG49ITEpe3JldHVybiBzdCh0aGlzLGUsSXIsKCk9Pntjb25zdCByPW4/e21vbnRoOmUsZGF5OiJudW1lcmljIn06e21vbnRoOmV9LHM9bj8iZm9ybWF0Ijoic3RhbmRhbG9uZSI7cmV0dXJuIHRoaXMubW9udGhzQ2FjaGVbc11bZV18fCh0aGlzLm1vbnRoc0NhY2hlW3NdW2VdPWFvKGk9PnRoaXMuZXh0cmFjdChpLHIsIm1vbnRoIikpKSx0aGlzLm1vbnRoc0NhY2hlW3NdW2VdfSl9d2Vla2RheXMoZSxuPSExKXtyZXR1cm4gc3QodGhpcyxlLE1yLCgpPT57Y29uc3Qgcj1uP3t3ZWVrZGF5OmUseWVhcjoibnVtZXJpYyIsbW9udGg6ImxvbmciLGRheToibnVtZXJpYyJ9Ont3ZWVrZGF5OmV9LHM9bj8iZm9ybWF0Ijoic3RhbmRhbG9uZSI7cmV0dXJuIHRoaXMud2Vla2RheXNDYWNoZVtzXVtlXXx8KHRoaXMud2Vla2RheXNDYWNoZVtzXVtlXT1vbyhpPT50aGlzLmV4dHJhY3QoaSxyLCJ3ZWVrZGF5IikpKSx0aGlzLndlZWtkYXlzQ2FjaGVbc11bZV19KX1tZXJpZGllbXMoKXtyZXR1cm4gc3QodGhpcyx2b2lkIDAsKCk9PnhyLCgpPT57aWYoIXRoaXMubWVyaWRpZW1DYWNoZSl7Y29uc3QgZT17aG91cjoibnVtZXJpYyIsaG91ckN5Y2xlOiJoMTIifTt0aGlzLm1lcmlkaWVtQ2FjaGU9W2cudXRjKDIwMTYsMTEsMTMsOSksZy51dGMoMjAxNiwxMSwxMywxOSldLm1hcChuPT50aGlzLmV4dHJhY3QobixlLCJkYXlwZXJpb2QiKSl9cmV0dXJuIHRoaXMubWVyaWRpZW1DYWNoZX0pfWVyYXMoZSl7cmV0dXJuIHN0KHRoaXMsZSxEciwoKT0+e2NvbnN0IG49e2VyYTplfTtyZXR1cm4gdGhpcy5lcmFDYWNoZVtlXXx8KHRoaXMuZXJhQ2FjaGVbZV09W2cudXRjKC00MCwxLDEpLGcudXRjKDIwMTcsMSwxKV0ubWFwKHI9PnRoaXMuZXh0cmFjdChyLG4sImVyYSIpKSksdGhpcy5lcmFDYWNoZVtlXX0pfWV4dHJhY3QoZSxuLHIpe2NvbnN0IHM9dGhpcy5kdEZvcm1hdHRlcihlLG4pLGk9cy5mb3JtYXRUb1BhcnRzKCksYT1pLmZpbmQobz0+by50eXBlLnRvTG93ZXJDYXNlKCk9PT1yKTtyZXR1cm4gYT9hLnZhbHVlOm51bGx9bnVtYmVyRm9ybWF0dGVyKGU9e30pe3JldHVybiBuZXcgdW8odGhpcy5pbnRsLGUuZm9yY2VTaW1wbGV8fHRoaXMuZmFzdE51bWJlcnMsZSl9ZHRGb3JtYXR0ZXIoZSxuPXt9KXtyZXR1cm4gbmV3IGNvKGUsdGhpcy5pbnRsLG4pfXJlbEZvcm1hdHRlcihlPXt9KXtyZXR1cm4gbmV3IGZvKHRoaXMuaW50bCx0aGlzLmlzRW5nbGlzaCgpLGUpfWxpc3RGb3JtYXR0ZXIoZT17fSl7cmV0dXJuIFhhKHRoaXMuaW50bCxlKX1pc0VuZ2xpc2goKXtyZXR1cm4gdGhpcy5sb2NhbGU9PT0iZW4ifHx0aGlzLmxvY2FsZS50b0xvd2VyQ2FzZSgpPT09ImVuLXVzInx8bmV3IEludGwuRGF0ZVRpbWVGb3JtYXQodGhpcy5pbnRsKS5yZXNvbHZlZE9wdGlvbnMoKS5sb2NhbGUuc3RhcnRzV2l0aCgiZW4tdXMiKX1nZXRXZWVrU2V0dGluZ3MoKXtyZXR1cm4gdGhpcy53ZWVrU2V0dGluZ3M/dGhpcy53ZWVrU2V0dGluZ3M6VHIoKT9ybyh0aGlzLmxvY2FsZSk6aG99Z2V0U3RhcnRPZldlZWsoKXtyZXR1cm4gdGhpcy5nZXRXZWVrU2V0dGluZ3MoKS5maXJzdERheX1nZXRNaW5EYXlzSW5GaXJzdFdlZWsoKXtyZXR1cm4gdGhpcy5nZXRXZWVrU2V0dGluZ3MoKS5taW5pbWFsRGF5c31nZXRXZWVrZW5kRGF5cygpe3JldHVybiB0aGlzLmdldFdlZWtTZXR0aW5ncygpLndlZWtlbmR9ZXF1YWxzKGUpe3JldHVybiB0aGlzLmxvY2FsZT09PWUubG9jYWxlJiZ0aGlzLm51bWJlcmluZ1N5c3RlbT09PWUubnVtYmVyaW5nU3lzdGVtJiZ0aGlzLm91dHB1dENhbGVuZGFyPT09ZS5vdXRwdXRDYWxlbmRhcn19bGV0ICR0PW51bGw7Y2xhc3MgeCBleHRlbmRzIExle3N0YXRpYyBnZXQgdXRjSW5zdGFuY2UoKXtyZXR1cm4gJHQ9PT1udWxsJiYoJHQ9bmV3IHgoMCkpLCR0fXN0YXRpYyBpbnN0YW5jZShlKXtyZXR1cm4gZT09PTA/eC51dGNJbnN0YW5jZTpuZXcgeChlKX1zdGF0aWMgcGFyc2VTcGVjaWZpZXIoZSl7aWYoZSl7Y29uc3Qgbj1lLm1hdGNoKC9edXRjKD86KFsrLV1cZHsxLDJ9KSg/OjooXGR7Mn0pKT8pPyQvaSk7aWYobilyZXR1cm4gbmV3IHgodXQoblsxXSxuWzJdKSl9cmV0dXJuIG51bGx9Y29uc3RydWN0b3IoZSl7c3VwZXIoKSx0aGlzLmZpeGVkPWV9Z2V0IHR5cGUoKXtyZXR1cm4iZml4ZWQifWdldCBuYW1lKCl7cmV0dXJuIHRoaXMuZml4ZWQ9PT0wPyJVVEMiOmBVVEMke1JlKHRoaXMuZml4ZWQsIm5hcnJvdyIpfWB9Z2V0IGlhbmFOYW1lKCl7cmV0dXJuIHRoaXMuZml4ZWQ9PT0wPyJFdGMvVVRDIjpgRXRjL0dNVCR7UmUoLXRoaXMuZml4ZWQsIm5hcnJvdyIpfWB9b2Zmc2V0TmFtZSgpe3JldHVybiB0aGlzLm5hbWV9Zm9ybWF0T2Zmc2V0KGUsbil7cmV0dXJuIFJlKHRoaXMuZml4ZWQsbil9Z2V0IGlzVW5pdmVyc2FsKCl7cmV0dXJuITB9b2Zmc2V0KCl7cmV0dXJuIHRoaXMuZml4ZWR9ZXF1YWxzKGUpe3JldHVybiBlLnR5cGU9PT0iZml4ZWQiJiZlLmZpeGVkPT09dGhpcy5maXhlZH1nZXQgaXNWYWxpZCgpe3JldHVybiEwfX1jbGFzcyBtbyBleHRlbmRzIExle2NvbnN0cnVjdG9yKGUpe3N1cGVyKCksdGhpcy56b25lTmFtZT1lfWdldCB0eXBlKCl7cmV0dXJuImludmFsaWQifWdldCBuYW1lKCl7cmV0dXJuIHRoaXMuem9uZU5hbWV9Z2V0IGlzVW5pdmVyc2FsKCl7cmV0dXJuITF9b2Zmc2V0TmFtZSgpe3JldHVybiBudWxsfWZvcm1hdE9mZnNldCgpe3JldHVybiIifW9mZnNldCgpe3JldHVybiBOYU59ZXF1YWxzKCl7cmV0dXJuITF9Z2V0IGlzVmFsaWQoKXtyZXR1cm4hMX19ZnVuY3Rpb24gbmUodCxlKXtpZih5KHQpfHx0PT09bnVsbClyZXR1cm4gZTtpZih0IGluc3RhbmNlb2YgTGUpcmV0dXJuIHQ7aWYod28odCkpe2NvbnN0IG49dC50b0xvd2VyQ2FzZSgpO3JldHVybiBuPT09ImRlZmF1bHQiP2U6bj09PSJsb2NhbCJ8fG49PT0ic3lzdGVtIj90dC5pbnN0YW5jZTpuPT09InV0YyJ8fG49PT0iZ210Ij94LnV0Y0luc3RhbmNlOngucGFyc2VTcGVjaWZpZXIobil8fEouY3JlYXRlKHQpfWVsc2UgcmV0dXJuIGNlKHQpP3guaW5zdGFuY2UodCk6dHlwZW9mIHQ9PSJvYmplY3QiJiYib2Zmc2V0ImluIHQmJnR5cGVvZiB0Lm9mZnNldD09ImZ1bmN0aW9uIj90Om5ldyBtbyh0KX1sZXQgdHI9KCk9PkRhdGUubm93KCksbnI9InN5c3RlbSIscnI9bnVsbCxzcj1udWxsLGlyPW51bGwsYXI9NjAsb3IsbHI9bnVsbDtjbGFzcyB2e3N0YXRpYyBnZXQgbm93KCl7cmV0dXJuIHRyfXN0YXRpYyBzZXQgbm93KGUpe3RyPWV9c3RhdGljIHNldCBkZWZhdWx0Wm9uZShlKXtucj1lfXN0YXRpYyBnZXQgZGVmYXVsdFpvbmUoKXtyZXR1cm4gbmUobnIsdHQuaW5zdGFuY2UpfXN0YXRpYyBnZXQgZGVmYXVsdExvY2FsZSgpe3JldHVybiBycn1zdGF0aWMgc2V0IGRlZmF1bHRMb2NhbGUoZSl7cnI9ZX1zdGF0aWMgZ2V0IGRlZmF1bHROdW1iZXJpbmdTeXN0ZW0oKXtyZXR1cm4gc3J9c3RhdGljIHNldCBkZWZhdWx0TnVtYmVyaW5nU3lzdGVtKGUpe3NyPWV9c3RhdGljIGdldCBkZWZhdWx0T3V0cHV0Q2FsZW5kYXIoKXtyZXR1cm4gaXJ9c3RhdGljIHNldCBkZWZhdWx0T3V0cHV0Q2FsZW5kYXIoZSl7aXI9ZX1zdGF0aWMgZ2V0IGRlZmF1bHRXZWVrU2V0dGluZ3MoKXtyZXR1cm4gbHJ9c3RhdGljIHNldCBkZWZhdWx0V2Vla1NldHRpbmdzKGUpe2xyPVp0KGUpfXN0YXRpYyBnZXQgdHdvRGlnaXRDdXRvZmZZZWFyKCl7cmV0dXJuIGFyfXN0YXRpYyBzZXQgdHdvRGlnaXRDdXRvZmZZZWFyKGUpe2FyPWUlMTAwfXN0YXRpYyBnZXQgdGhyb3dPbkludmFsaWQoKXtyZXR1cm4gb3J9c3RhdGljIHNldCB0aHJvd09uSW52YWxpZChlKXtvcj1lfXN0YXRpYyByZXNldENhY2hlcygpe08ucmVzZXRDYWNoZSgpLEoucmVzZXRDYWNoZSgpfX1jbGFzcyB6e2NvbnN0cnVjdG9yKGUsbil7dGhpcy5yZWFzb249ZSx0aGlzLmV4cGxhbmF0aW9uPW59dG9NZXNzYWdlKCl7cmV0dXJuIHRoaXMuZXhwbGFuYXRpb24/YCR7dGhpcy5yZWFzb259OiAke3RoaXMuZXhwbGFuYXRpb259YDp0aGlzLnJlYXNvbn19Y29uc3QgdXI9WzAsMzEsNTksOTAsMTIwLDE1MSwxODEsMjEyLDI0MywyNzMsMzA0LDMzNF0sY3I9WzAsMzEsNjAsOTEsMTIxLDE1MiwxODIsMjEzLDI0NCwyNzQsMzA1LDMzNV07ZnVuY3Rpb24gVih0LGUpe3JldHVybiBuZXcgeigidW5pdCBvdXQgb2YgcmFuZ2UiLGB5b3Ugc3BlY2lmaWVkICR7ZX0gKG9mIHR5cGUgJHt0eXBlb2YgZX0pIGFzIGEgJHt0fSwgd2hpY2ggaXMgaW52YWxpZGApfWZ1bmN0aW9uIF90KHQsZSxuKXtjb25zdCByPW5ldyBEYXRlKERhdGUuVVRDKHQsZS0xLG4pKTt0PDEwMCYmdD49MCYmci5zZXRVVENGdWxsWWVhcihyLmdldFVUQ0Z1bGxZZWFyKCktMTkwMCk7Y29uc3Qgcz1yLmdldFVUQ0RheSgpO3JldHVybiBzPT09MD83OnN9ZnVuY3Rpb24gZnIodCxlLG4pe3JldHVybiBuKyhfZSh0KT9jcjp1cilbZS0xXX1mdW5jdGlvbiBkcih0LGUpe2NvbnN0IG49X2UodCk/Y3I6dXIscj1uLmZpbmRJbmRleChpPT5pPGUpLHM9ZS1uW3JdO3JldHVybnttb250aDpyKzEsZGF5OnN9fWZ1bmN0aW9uIHp0KHQsZSl7cmV0dXJuKHQtZSs3KSU3KzF9ZnVuY3Rpb24gaXQodCxlPTQsbj0xKXtjb25zdHt5ZWFyOnIsbW9udGg6cyxkYXk6aX09dCxhPWZyKHIscyxpKSxvPXp0KF90KHIscyxpKSxuKTtsZXQgbD1NYXRoLmZsb29yKChhLW8rMTQtZSkvNyksdTtyZXR1cm4gbDwxPyh1PXItMSxsPXplKHUsZSxuKSk6bD56ZShyLGUsbik/KHU9cisxLGw9MSk6dT1yLHt3ZWVrWWVhcjp1LHdlZWtOdW1iZXI6bCx3ZWVrZGF5Om8sLi4uZnQodCl9fWZ1bmN0aW9uIGhyKHQsZT00LG49MSl7Y29uc3R7d2Vla1llYXI6cix3ZWVrTnVtYmVyOnMsd2Vla2RheTppfT10LGE9enQoX3QociwxLGUpLG4pLG89dmUocik7bGV0IGw9cyo3K2ktYS03K2UsdTtsPDE/KHU9ci0xLGwrPXZlKHUpKTpsPm8/KHU9cisxLGwtPXZlKHIpKTp1PXI7Y29uc3R7bW9udGg6YyxkYXk6ZH09ZHIodSxsKTtyZXR1cm57eWVhcjp1LG1vbnRoOmMsZGF5OmQsLi4uZnQodCl9fWZ1bmN0aW9uIFJ0KHQpe2NvbnN0e3llYXI6ZSxtb250aDpuLGRheTpyfT10LHM9ZnIoZSxuLHIpO3JldHVybnt5ZWFyOmUsb3JkaW5hbDpzLC4uLmZ0KHQpfX1mdW5jdGlvbiBtcih0KXtjb25zdHt5ZWFyOmUsb3JkaW5hbDpufT10LHttb250aDpyLGRheTpzfT1kcihlLG4pO3JldHVybnt5ZWFyOmUsbW9udGg6cixkYXk6cywuLi5mdCh0KX19ZnVuY3Rpb24geXIodCxlKXtpZigheSh0LmxvY2FsV2Vla2RheSl8fCF5KHQubG9jYWxXZWVrTnVtYmVyKXx8IXkodC5sb2NhbFdlZWtZZWFyKSl7aWYoIXkodC53ZWVrZGF5KXx8IXkodC53ZWVrTnVtYmVyKXx8IXkodC53ZWVrWWVhcikpdGhyb3cgbmV3IGtlKCJDYW5ub3QgbWl4IGxvY2FsZS1iYXNlZCB3ZWVrIGZpZWxkcyB3aXRoIElTTy1iYXNlZCB3ZWVrIGZpZWxkcyIpO3JldHVybiB5KHQubG9jYWxXZWVrZGF5KXx8KHQud2Vla2RheT10LmxvY2FsV2Vla2RheSkseSh0LmxvY2FsV2Vla051bWJlcil8fCh0LndlZWtOdW1iZXI9dC5sb2NhbFdlZWtOdW1iZXIpLHkodC5sb2NhbFdlZWtZZWFyKXx8KHQud2Vla1llYXI9dC5sb2NhbFdlZWtZZWFyKSxkZWxldGUgdC5sb2NhbFdlZWtkYXksZGVsZXRlIHQubG9jYWxXZWVrTnVtYmVyLGRlbGV0ZSB0LmxvY2FsV2Vla1llYXIse21pbkRheXNJbkZpcnN0V2VlazplLmdldE1pbkRheXNJbkZpcnN0V2VlaygpLHN0YXJ0T2ZXZWVrOmUuZ2V0U3RhcnRPZldlZWsoKX19ZWxzZSByZXR1cm57bWluRGF5c0luRmlyc3RXZWVrOjQsc3RhcnRPZldlZWs6MX19ZnVuY3Rpb24geW8odCxlPTQsbj0xKXtjb25zdCByPWF0KHQud2Vla1llYXIpLHM9Vyh0LndlZWtOdW1iZXIsMSx6ZSh0LndlZWtZZWFyLGUsbikpLGk9Vyh0LndlZWtkYXksMSw3KTtyZXR1cm4gcj9zP2k/ITE6Vigid2Vla2RheSIsdC53ZWVrZGF5KTpWKCJ3ZWVrIix0LndlZWtOdW1iZXIpOlYoIndlZWtZZWFyIix0LndlZWtZZWFyKX1mdW5jdGlvbiBnbyh0KXtjb25zdCBlPWF0KHQueWVhciksbj1XKHQub3JkaW5hbCwxLHZlKHQueWVhcikpO3JldHVybiBlP24/ITE6Vigib3JkaW5hbCIsdC5vcmRpbmFsKTpWKCJ5ZWFyIix0LnllYXIpfWZ1bmN0aW9uIGdyKHQpe2NvbnN0IGU9YXQodC55ZWFyKSxuPVcodC5tb250aCwxLDEyKSxyPVcodC5kYXksMSxvdCh0LnllYXIsdC5tb250aCkpO3JldHVybiBlP24/cj8hMTpWKCJkYXkiLHQuZGF5KTpWKCJtb250aCIsdC5tb250aCk6VigieWVhciIsdC55ZWFyKX1mdW5jdGlvbiB3cih0KXtjb25zdHtob3VyOmUsbWludXRlOm4sc2Vjb25kOnIsbWlsbGlzZWNvbmQ6c309dCxpPVcoZSwwLDIzKXx8ZT09PTI0JiZuPT09MCYmcj09PTAmJnM9PT0wLGE9VyhuLDAsNTkpLG89VyhyLDAsNTkpLGw9VyhzLDAsOTk5KTtyZXR1cm4gaT9hP28/bD8hMTpWKCJtaWxsaXNlY29uZCIscyk6Vigic2Vjb25kIixyKTpWKCJtaW51dGUiLG4pOlYoImhvdXIiLGUpfWZ1bmN0aW9uIHkodCl7cmV0dXJuIHR5cGVvZiB0PiJ1In1mdW5jdGlvbiBjZSh0KXtyZXR1cm4gdHlwZW9mIHQ9PSJudW1iZXIifWZ1bmN0aW9uIGF0KHQpe3JldHVybiB0eXBlb2YgdD09Im51bWJlciImJnQlMT09PTB9ZnVuY3Rpb24gd28odCl7cmV0dXJuIHR5cGVvZiB0PT0ic3RyaW5nIn1mdW5jdGlvbiBwbyh0KXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpPT09IltvYmplY3QgRGF0ZV0ifWZ1bmN0aW9uIHByKCl7dHJ5e3JldHVybiB0eXBlb2YgSW50bDwidSImJiEhSW50bC5SZWxhdGl2ZVRpbWVGb3JtYXR9Y2F0Y2h7cmV0dXJuITF9fWZ1bmN0aW9uIFRyKCl7dHJ5e3JldHVybiB0eXBlb2YgSW50bDwidSImJiEhSW50bC5Mb2NhbGUmJigid2Vla0luZm8iaW4gSW50bC5Mb2NhbGUucHJvdG90eXBlfHwiZ2V0V2Vla0luZm8iaW4gSW50bC5Mb2NhbGUucHJvdG90eXBlKX1jYXRjaHtyZXR1cm4hMX19ZnVuY3Rpb24gVG8odCl7cmV0dXJuIEFycmF5LmlzQXJyYXkodCk/dDpbdF19ZnVuY3Rpb24gU3IodCxlLG4pe2lmKHQubGVuZ3RoIT09MClyZXR1cm4gdC5yZWR1Y2UoKHIscyk9Pntjb25zdCBpPVtlKHMpLHNdO3JldHVybiByJiZuKHJbMF0saVswXSk9PT1yWzBdP3I6aX0sbnVsbClbMV19ZnVuY3Rpb24gU28odCxlKXtyZXR1cm4gZS5yZWR1Y2UoKG4scik9PihuW3JdPXRbcl0sbikse30pfWZ1bmN0aW9uIGJlKHQsZSl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LGUpfWZ1bmN0aW9uIFp0KHQpe2lmKHQ9PW51bGwpcmV0dXJuIG51bGw7aWYodHlwZW9mIHQhPSJvYmplY3QiKXRocm93IG5ldyBEKCJXZWVrIHNldHRpbmdzIG11c3QgYmUgYW4gb2JqZWN0Iik7aWYoIVcodC5maXJzdERheSwxLDcpfHwhVyh0Lm1pbmltYWxEYXlzLDEsNyl8fCFBcnJheS5pc0FycmF5KHQud2Vla2VuZCl8fHQud2Vla2VuZC5zb21lKGU9PiFXKGUsMSw3KSkpdGhyb3cgbmV3IEQoIkludmFsaWQgd2VlayBzZXR0aW5ncyIpO3JldHVybntmaXJzdERheTp0LmZpcnN0RGF5LG1pbmltYWxEYXlzOnQubWluaW1hbERheXMsd2Vla2VuZDpBcnJheS5mcm9tKHQud2Vla2VuZCl9fWZ1bmN0aW9uIFcodCxlLG4pe3JldHVybiBhdCh0KSYmdD49ZSYmdDw9bn1mdW5jdGlvbiBPbyh0LGUpe3JldHVybiB0LWUqTWF0aC5mbG9vcih0L2UpfWZ1bmN0aW9uIEkodCxlPTIpe2NvbnN0IG49dDwwO2xldCByO3JldHVybiBuP3I9Ii0iKygiIistdCkucGFkU3RhcnQoZSwiMCIpOnI9KCIiK3QpLnBhZFN0YXJ0KGUsIjAiKSxyfWZ1bmN0aW9uIHJlKHQpe2lmKCEoeSh0KXx8dD09PW51bGx8fHQ9PT0iIikpcmV0dXJuIHBhcnNlSW50KHQsMTApfWZ1bmN0aW9uIGZlKHQpe2lmKCEoeSh0KXx8dD09PW51bGx8fHQ9PT0iIikpcmV0dXJuIHBhcnNlRmxvYXQodCl9ZnVuY3Rpb24gUHQodCl7aWYoISh5KHQpfHx0PT09bnVsbHx8dD09PSIiKSl7Y29uc3QgZT1wYXJzZUZsb2F0KCIwLiIrdCkqMWUzO3JldHVybiBNYXRoLmZsb29yKGUpfX1mdW5jdGlvbiBVdCh0LGUsbj0hMSl7Y29uc3Qgcj0xMCoqZTtyZXR1cm4obj9NYXRoLnRydW5jOk1hdGgucm91bmQpKHQqcikvcn1mdW5jdGlvbiBfZSh0KXtyZXR1cm4gdCU0PT09MCYmKHQlMTAwIT09MHx8dCU0MDA9PT0wKX1mdW5jdGlvbiB2ZSh0KXtyZXR1cm4gX2UodCk/MzY2OjM2NX1mdW5jdGlvbiBvdCh0LGUpe2NvbnN0IG49T28oZS0xLDEyKSsxLHI9dCsoZS1uKS8xMjtyZXR1cm4gbj09PTI/X2Uocik/Mjk6Mjg6WzMxLG51bGwsMzEsMzAsMzEsMzAsMzEsMzEsMzAsMzEsMzAsMzFdW24tMV19ZnVuY3Rpb24gbHQodCl7bGV0IGU9RGF0ZS5VVEModC55ZWFyLHQubW9udGgtMSx0LmRheSx0LmhvdXIsdC5taW51dGUsdC5zZWNvbmQsdC5taWxsaXNlY29uZCk7cmV0dXJuIHQueWVhcjwxMDAmJnQueWVhcj49MCYmKGU9bmV3IERhdGUoZSksZS5zZXRVVENGdWxsWWVhcih0LnllYXIsdC5tb250aC0xLHQuZGF5KSksK2V9ZnVuY3Rpb24gT3IodCxlLG4pe3JldHVybi16dChfdCh0LDEsZSksbikrZS0xfWZ1bmN0aW9uIHplKHQsZT00LG49MSl7Y29uc3Qgcj1Pcih0LGUsbikscz1Pcih0KzEsZSxuKTtyZXR1cm4odmUodCktcitzKS83fWZ1bmN0aW9uIEh0KHQpe3JldHVybiB0Pjk5P3Q6dD52LnR3b0RpZ2l0Q3V0b2ZmWWVhcj8xOTAwK3Q6MmUzK3R9ZnVuY3Rpb24ga3IodCxlLG4scj1udWxsKXtjb25zdCBzPW5ldyBEYXRlKHQpLGk9e2hvdXJDeWNsZToiaDIzIix5ZWFyOiJudW1lcmljIixtb250aDoiMi1kaWdpdCIsZGF5OiIyLWRpZ2l0Iixob3VyOiIyLWRpZ2l0IixtaW51dGU6IjItZGlnaXQifTtyJiYoaS50aW1lWm9uZT1yKTtjb25zdCBhPXt0aW1lWm9uZU5hbWU6ZSwuLi5pfSxvPW5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KG4sYSkuZm9ybWF0VG9QYXJ0cyhzKS5maW5kKGw9PmwudHlwZS50b0xvd2VyQ2FzZSgpPT09InRpbWV6b25lbmFtZSIpO3JldHVybiBvP28udmFsdWU6bnVsbH1mdW5jdGlvbiB1dCh0LGUpe2xldCBuPXBhcnNlSW50KHQsMTApO051bWJlci5pc05hTihuKSYmKG49MCk7Y29uc3Qgcj1wYXJzZUludChlLDEwKXx8MCxzPW48MHx8T2JqZWN0LmlzKG4sLTApPy1yOnI7cmV0dXJuIG4qNjArc31mdW5jdGlvbiBicih0KXtjb25zdCBlPU51bWJlcih0KTtpZih0eXBlb2YgdD09ImJvb2xlYW4ifHx0PT09IiJ8fE51bWJlci5pc05hTihlKSl0aHJvdyBuZXcgRChgSW52YWxpZCB1bml0IHZhbHVlICR7dH1gKTtyZXR1cm4gZX1mdW5jdGlvbiBjdCh0LGUpe2NvbnN0IG49e307Zm9yKGNvbnN0IHIgaW4gdClpZihiZSh0LHIpKXtjb25zdCBzPXRbcl07aWYocz09bnVsbCljb250aW51ZTtuW2UocildPWJyKHMpfXJldHVybiBufWZ1bmN0aW9uIFJlKHQsZSl7Y29uc3Qgbj1NYXRoLnRydW5jKE1hdGguYWJzKHQvNjApKSxyPU1hdGgudHJ1bmMoTWF0aC5hYnModCU2MCkpLHM9dD49MD8iKyI6Ii0iO3N3aXRjaChlKXtjYXNlInNob3J0IjpyZXR1cm5gJHtzfSR7SShuLDIpfToke0kociwyKX1gO2Nhc2UibmFycm93IjpyZXR1cm5gJHtzfSR7bn0ke3I+MD9gOiR7cn1gOiIifWA7Y2FzZSJ0ZWNoaWUiOnJldHVybmAke3N9JHtJKG4sMil9JHtJKHIsMil9YDtkZWZhdWx0OnRocm93IG5ldyBSYW5nZUVycm9yKGBWYWx1ZSBmb3JtYXQgJHtlfSBpcyBvdXQgb2YgcmFuZ2UgZm9yIHByb3BlcnR5IGZvcm1hdGApfX1mdW5jdGlvbiBmdCh0KXtyZXR1cm4gU28odCxbImhvdXIiLCJtaW51dGUiLCJzZWNvbmQiLCJtaWxsaXNlY29uZCJdKX1jb25zdCBrbz1bIkphbnVhcnkiLCJGZWJydWFyeSIsIk1hcmNoIiwiQXByaWwiLCJNYXkiLCJKdW5lIiwiSnVseSIsIkF1Z3VzdCIsIlNlcHRlbWJlciIsIk9jdG9iZXIiLCJOb3ZlbWJlciIsIkRlY2VtYmVyIl0sdnI9WyJKYW4iLCJGZWIiLCJNYXIiLCJBcHIiLCJNYXkiLCJKdW4iLCJKdWwiLCJBdWciLCJTZXAiLCJPY3QiLCJOb3YiLCJEZWMiXSxibz1bIkoiLCJGIiwiTSIsIkEiLCJNIiwiSiIsIkoiLCJBIiwiUyIsIk8iLCJOIiwiRCJdO2Z1bmN0aW9uIElyKHQpe3N3aXRjaCh0KXtjYXNlIm5hcnJvdyI6cmV0dXJuWy4uLmJvXTtjYXNlInNob3J0IjpyZXR1cm5bLi4udnJdO2Nhc2UibG9uZyI6cmV0dXJuWy4uLmtvXTtjYXNlIm51bWVyaWMiOnJldHVyblsiMSIsIjIiLCIzIiwiNCIsIjUiLCI2IiwiNyIsIjgiLCI5IiwiMTAiLCIxMSIsIjEyIl07Y2FzZSIyLWRpZ2l0IjpyZXR1cm5bIjAxIiwiMDIiLCIwMyIsIjA0IiwiMDUiLCIwNiIsIjA3IiwiMDgiLCIwOSIsIjEwIiwiMTEiLCIxMiJdO2RlZmF1bHQ6cmV0dXJuIG51bGx9fWNvbnN0IEVyPVsiTW9uZGF5IiwiVHVlc2RheSIsIldlZG5lc2RheSIsIlRodXJzZGF5IiwiRnJpZGF5IiwiU2F0dXJkYXkiLCJTdW5kYXkiXSxOcj1bIk1vbiIsIlR1ZSIsIldlZCIsIlRodSIsIkZyaSIsIlNhdCIsIlN1biJdLHZvPVsiTSIsIlQiLCJXIiwiVCIsIkYiLCJTIiwiUyJdO2Z1bmN0aW9uIE1yKHQpe3N3aXRjaCh0KXtjYXNlIm5hcnJvdyI6cmV0dXJuWy4uLnZvXTtjYXNlInNob3J0IjpyZXR1cm5bLi4uTnJdO2Nhc2UibG9uZyI6cmV0dXJuWy4uLkVyXTtjYXNlIm51bWVyaWMiOnJldHVyblsiMSIsIjIiLCIzIiwiNCIsIjUiLCI2IiwiNyJdO2RlZmF1bHQ6cmV0dXJuIG51bGx9fWNvbnN0IHhyPVsiQU0iLCJQTSJdLElvPVsiQmVmb3JlIENocmlzdCIsIkFubm8gRG9taW5pIl0sRW89WyJCQyIsIkFEIl0sTm89WyJCIiwiQSJdO2Z1bmN0aW9uIERyKHQpe3N3aXRjaCh0KXtjYXNlIm5hcnJvdyI6cmV0dXJuWy4uLk5vXTtjYXNlInNob3J0IjpyZXR1cm5bLi4uRW9dO2Nhc2UibG9uZyI6cmV0dXJuWy4uLklvXTtkZWZhdWx0OnJldHVybiBudWxsfX1mdW5jdGlvbiBNbyh0KXtyZXR1cm4geHJbdC5ob3VyPDEyPzA6MV19ZnVuY3Rpb24geG8odCxlKXtyZXR1cm4gTXIoZSlbdC53ZWVrZGF5LTFdfWZ1bmN0aW9uIERvKHQsZSl7cmV0dXJuIElyKGUpW3QubW9udGgtMV19ZnVuY3Rpb24gQ28odCxlKXtyZXR1cm4gRHIoZSlbdC55ZWFyPDA/MDoxXX1mdW5jdGlvbiBGbyh0LGUsbj0iYWx3YXlzIixyPSExKXtjb25zdCBzPXt5ZWFyczpbInllYXIiLCJ5ci4iXSxxdWFydGVyczpbInF1YXJ0ZXIiLCJxdHIuIl0sbW9udGhzOlsibW9udGgiLCJtby4iXSx3ZWVrczpbIndlZWsiLCJ3ay4iXSxkYXlzOlsiZGF5IiwiZGF5IiwiZGF5cyJdLGhvdXJzOlsiaG91ciIsImhyLiJdLG1pbnV0ZXM6WyJtaW51dGUiLCJtaW4uIl0sc2Vjb25kczpbInNlY29uZCIsInNlYy4iXX0saT1bImhvdXJzIiwibWludXRlcyIsInNlY29uZHMiXS5pbmRleE9mKHQpPT09LTE7aWYobj09PSJhdXRvIiYmaSl7Y29uc3QgZD10PT09ImRheXMiO3N3aXRjaChlKXtjYXNlIDE6cmV0dXJuIGQ/InRvbW9ycm93IjpgbmV4dCAke3NbdF1bMF19YDtjYXNlLTE6cmV0dXJuIGQ/Inllc3RlcmRheSI6YGxhc3QgJHtzW3RdWzBdfWA7Y2FzZSAwOnJldHVybiBkPyJ0b2RheSI6YHRoaXMgJHtzW3RdWzBdfWB9fWNvbnN0IGE9T2JqZWN0LmlzKGUsLTApfHxlPDAsbz1NYXRoLmFicyhlKSxsPW89PT0xLHU9c1t0XSxjPXI/bD91WzFdOnVbMl18fHVbMV06bD9zW3RdWzBdOnQ7cmV0dXJuIGE/YCR7b30gJHtjfSBhZ29gOmBpbiAke299ICR7Y31gfWZ1bmN0aW9uIENyKHQsZSl7bGV0IG49IiI7Zm9yKGNvbnN0IHIgb2YgdClyLmxpdGVyYWw/bis9ci52YWw6bis9ZShyLnZhbCk7cmV0dXJuIG59Y29uc3QgQW89e0Q6ZXQsREQ6Vm4sREREOlduLEREREQ6TG4sdDokbix0dDpfbix0dHQ6em4sdHR0dDpSbixUOlpuLFRUOlBuLFRUVDpVbixUVFRUOkhuLGY6am4sZmY6WW4sZmZmOkpuLGZmZmY6UW4sRjpxbixGRjpHbixGRkY6Qm4sRkZGRjpLbn07Y2xhc3MgTntzdGF0aWMgY3JlYXRlKGUsbj17fSl7cmV0dXJuIG5ldyBOKGUsbil9c3RhdGljIHBhcnNlRm9ybWF0KGUpe2xldCBuPW51bGwscj0iIixzPSExO2NvbnN0IGk9W107Zm9yKGxldCBhPTA7YTxlLmxlbmd0aDthKyspe2NvbnN0IG89ZS5jaGFyQXQoYSk7bz09PSInIj8oci5sZW5ndGg+MCYmaS5wdXNoKHtsaXRlcmFsOnN8fC9eXHMrJC8udGVzdChyKSx2YWw6cn0pLG49bnVsbCxyPSIiLHM9IXMpOnN8fG89PT1uP3IrPW86KHIubGVuZ3RoPjAmJmkucHVzaCh7bGl0ZXJhbDovXlxzKyQvLnRlc3QociksdmFsOnJ9KSxyPW8sbj1vKX1yZXR1cm4gci5sZW5ndGg+MCYmaS5wdXNoKHtsaXRlcmFsOnN8fC9eXHMrJC8udGVzdChyKSx2YWw6cn0pLGl9c3RhdGljIG1hY3JvVG9rZW5Ub0Zvcm1hdE9wdHMoZSl7cmV0dXJuIEFvW2VdfWNvbnN0cnVjdG9yKGUsbil7dGhpcy5vcHRzPW4sdGhpcy5sb2M9ZSx0aGlzLnN5c3RlbUxvYz1udWxsfWZvcm1hdFdpdGhTeXN0ZW1EZWZhdWx0KGUsbil7cmV0dXJuIHRoaXMuc3lzdGVtTG9jPT09bnVsbCYmKHRoaXMuc3lzdGVtTG9jPXRoaXMubG9jLnJlZGVmYXVsdFRvU3lzdGVtKCkpLHRoaXMuc3lzdGVtTG9jLmR0Rm9ybWF0dGVyKGUsey4uLnRoaXMub3B0cywuLi5ufSkuZm9ybWF0KCl9ZHRGb3JtYXR0ZXIoZSxuPXt9KXtyZXR1cm4gdGhpcy5sb2MuZHRGb3JtYXR0ZXIoZSx7Li4udGhpcy5vcHRzLC4uLm59KX1mb3JtYXREYXRlVGltZShlLG4pe3JldHVybiB0aGlzLmR0Rm9ybWF0dGVyKGUsbikuZm9ybWF0KCl9Zm9ybWF0RGF0ZVRpbWVQYXJ0cyhlLG4pe3JldHVybiB0aGlzLmR0Rm9ybWF0dGVyKGUsbikuZm9ybWF0VG9QYXJ0cygpfWZvcm1hdEludGVydmFsKGUsbil7cmV0dXJuIHRoaXMuZHRGb3JtYXR0ZXIoZS5zdGFydCxuKS5kdGYuZm9ybWF0UmFuZ2UoZS5zdGFydC50b0pTRGF0ZSgpLGUuZW5kLnRvSlNEYXRlKCkpfXJlc29sdmVkT3B0aW9ucyhlLG4pe3JldHVybiB0aGlzLmR0Rm9ybWF0dGVyKGUsbikucmVzb2x2ZWRPcHRpb25zKCl9bnVtKGUsbj0wKXtpZih0aGlzLm9wdHMuZm9yY2VTaW1wbGUpcmV0dXJuIEkoZSxuKTtjb25zdCByPXsuLi50aGlzLm9wdHN9O3JldHVybiBuPjAmJihyLnBhZFRvPW4pLHRoaXMubG9jLm51bWJlckZvcm1hdHRlcihyKS5mb3JtYXQoZSl9Zm9ybWF0RGF0ZVRpbWVGcm9tU3RyaW5nKGUsbil7Y29uc3Qgcj10aGlzLmxvYy5saXN0aW5nTW9kZSgpPT09ImVuIixzPXRoaXMubG9jLm91dHB1dENhbGVuZGFyJiZ0aGlzLmxvYy5vdXRwdXRDYWxlbmRhciE9PSJncmVnb3J5IixpPShoLGspPT50aGlzLmxvYy5leHRyYWN0KGUsaCxrKSxhPWg9PmUuaXNPZmZzZXRGaXhlZCYmZS5vZmZzZXQ9PT0wJiZoLmFsbG93Wj8iWiI6ZS5pc1ZhbGlkP2Uuem9uZS5mb3JtYXRPZmZzZXQoZS50cyxoLmZvcm1hdCk6IiIsbz0oKT0+cj9NbyhlKTppKHtob3VyOiJudW1lcmljIixob3VyQ3ljbGU6ImgxMiJ9LCJkYXlwZXJpb2QiKSxsPShoLGspPT5yP0RvKGUsaCk6aShrP3ttb250aDpofTp7bW9udGg6aCxkYXk6Im51bWVyaWMifSwibW9udGgiKSx1PShoLGspPT5yP3hvKGUsaCk6aShrP3t3ZWVrZGF5Omh9Ont3ZWVrZGF5OmgsbW9udGg6ImxvbmciLGRheToibnVtZXJpYyJ9LCJ3ZWVrZGF5IiksYz1oPT57Y29uc3Qgaz1OLm1hY3JvVG9rZW5Ub0Zvcm1hdE9wdHMoaCk7cmV0dXJuIGs/dGhpcy5mb3JtYXRXaXRoU3lzdGVtRGVmYXVsdChlLGspOmh9LGQ9aD0+cj9DbyhlLGgpOmkoe2VyYTpofSwiZXJhIiksdz1oPT57c3dpdGNoKGgpe2Nhc2UiUyI6cmV0dXJuIHRoaXMubnVtKGUubWlsbGlzZWNvbmQpO2Nhc2UidSI6Y2FzZSJTU1MiOnJldHVybiB0aGlzLm51bShlLm1pbGxpc2Vjb25kLDMpO2Nhc2UicyI6cmV0dXJuIHRoaXMubnVtKGUuc2Vjb25kKTtjYXNlInNzIjpyZXR1cm4gdGhpcy5udW0oZS5zZWNvbmQsMik7Y2FzZSJ1dSI6cmV0dXJuIHRoaXMubnVtKE1hdGguZmxvb3IoZS5taWxsaXNlY29uZC8xMCksMik7Y2FzZSJ1dXUiOnJldHVybiB0aGlzLm51bShNYXRoLmZsb29yKGUubWlsbGlzZWNvbmQvMTAwKSk7Y2FzZSJtIjpyZXR1cm4gdGhpcy5udW0oZS5taW51dGUpO2Nhc2UibW0iOnJldHVybiB0aGlzLm51bShlLm1pbnV0ZSwyKTtjYXNlImgiOnJldHVybiB0aGlzLm51bShlLmhvdXIlMTI9PT0wPzEyOmUuaG91ciUxMik7Y2FzZSJoaCI6cmV0dXJuIHRoaXMubnVtKGUuaG91ciUxMj09PTA/MTI6ZS5ob3VyJTEyLDIpO2Nhc2UiSCI6cmV0dXJuIHRoaXMubnVtKGUuaG91cik7Y2FzZSJISCI6cmV0dXJuIHRoaXMubnVtKGUuaG91ciwyKTtjYXNlIloiOnJldHVybiBhKHtmb3JtYXQ6Im5hcnJvdyIsYWxsb3daOnRoaXMub3B0cy5hbGxvd1p9KTtjYXNlIlpaIjpyZXR1cm4gYSh7Zm9ybWF0OiJzaG9ydCIsYWxsb3daOnRoaXMub3B0cy5hbGxvd1p9KTtjYXNlIlpaWiI6cmV0dXJuIGEoe2Zvcm1hdDoidGVjaGllIixhbGxvd1o6dGhpcy5vcHRzLmFsbG93Wn0pO2Nhc2UiWlpaWiI6cmV0dXJuIGUuem9uZS5vZmZzZXROYW1lKGUudHMse2Zvcm1hdDoic2hvcnQiLGxvY2FsZTp0aGlzLmxvYy5sb2NhbGV9KTtjYXNlIlpaWlpaIjpyZXR1cm4gZS56b25lLm9mZnNldE5hbWUoZS50cyx7Zm9ybWF0OiJsb25nIixsb2NhbGU6dGhpcy5sb2MubG9jYWxlfSk7Y2FzZSJ6IjpyZXR1cm4gZS56b25lTmFtZTtjYXNlImEiOnJldHVybiBvKCk7Y2FzZSJkIjpyZXR1cm4gcz9pKHtkYXk6Im51bWVyaWMifSwiZGF5Iik6dGhpcy5udW0oZS5kYXkpO2Nhc2UiZGQiOnJldHVybiBzP2koe2RheToiMi1kaWdpdCJ9LCJkYXkiKTp0aGlzLm51bShlLmRheSwyKTtjYXNlImMiOnJldHVybiB0aGlzLm51bShlLndlZWtkYXkpO2Nhc2UiY2NjIjpyZXR1cm4gdSgic2hvcnQiLCEwKTtjYXNlImNjY2MiOnJldHVybiB1KCJsb25nIiwhMCk7Y2FzZSJjY2NjYyI6cmV0dXJuIHUoIm5hcnJvdyIsITApO2Nhc2UiRSI6cmV0dXJuIHRoaXMubnVtKGUud2Vla2RheSk7Y2FzZSJFRUUiOnJldHVybiB1KCJzaG9ydCIsITEpO2Nhc2UiRUVFRSI6cmV0dXJuIHUoImxvbmciLCExKTtjYXNlIkVFRUVFIjpyZXR1cm4gdSgibmFycm93IiwhMSk7Y2FzZSJMIjpyZXR1cm4gcz9pKHttb250aDoibnVtZXJpYyIsZGF5OiJudW1lcmljIn0sIm1vbnRoIik6dGhpcy5udW0oZS5tb250aCk7Y2FzZSJMTCI6cmV0dXJuIHM/aSh7bW9udGg6IjItZGlnaXQiLGRheToibnVtZXJpYyJ9LCJtb250aCIpOnRoaXMubnVtKGUubW9udGgsMik7Y2FzZSJMTEwiOnJldHVybiBsKCJzaG9ydCIsITApO2Nhc2UiTExMTCI6cmV0dXJuIGwoImxvbmciLCEwKTtjYXNlIkxMTExMIjpyZXR1cm4gbCgibmFycm93IiwhMCk7Y2FzZSJNIjpyZXR1cm4gcz9pKHttb250aDoibnVtZXJpYyJ9LCJtb250aCIpOnRoaXMubnVtKGUubW9udGgpO2Nhc2UiTU0iOnJldHVybiBzP2koe21vbnRoOiIyLWRpZ2l0In0sIm1vbnRoIik6dGhpcy5udW0oZS5tb250aCwyKTtjYXNlIk1NTSI6cmV0dXJuIGwoInNob3J0IiwhMSk7Y2FzZSJNTU1NIjpyZXR1cm4gbCgibG9uZyIsITEpO2Nhc2UiTU1NTU0iOnJldHVybiBsKCJuYXJyb3ciLCExKTtjYXNlInkiOnJldHVybiBzP2koe3llYXI6Im51bWVyaWMifSwieWVhciIpOnRoaXMubnVtKGUueWVhcik7Y2FzZSJ5eSI6cmV0dXJuIHM/aSh7eWVhcjoiMi1kaWdpdCJ9LCJ5ZWFyIik6dGhpcy5udW0oZS55ZWFyLnRvU3RyaW5nKCkuc2xpY2UoLTIpLDIpO2Nhc2UieXl5eSI6cmV0dXJuIHM/aSh7eWVhcjoibnVtZXJpYyJ9LCJ5ZWFyIik6dGhpcy5udW0oZS55ZWFyLDQpO2Nhc2UieXl5eXl5IjpyZXR1cm4gcz9pKHt5ZWFyOiJudW1lcmljIn0sInllYXIiKTp0aGlzLm51bShlLnllYXIsNik7Y2FzZSJHIjpyZXR1cm4gZCgic2hvcnQiKTtjYXNlIkdHIjpyZXR1cm4gZCgibG9uZyIpO2Nhc2UiR0dHR0ciOnJldHVybiBkKCJuYXJyb3ciKTtjYXNlImtrIjpyZXR1cm4gdGhpcy5udW0oZS53ZWVrWWVhci50b1N0cmluZygpLnNsaWNlKC0yKSwyKTtjYXNlImtra2siOnJldHVybiB0aGlzLm51bShlLndlZWtZZWFyLDQpO2Nhc2UiVyI6cmV0dXJuIHRoaXMubnVtKGUud2Vla051bWJlcik7Y2FzZSJXVyI6cmV0dXJuIHRoaXMubnVtKGUud2Vla051bWJlciwyKTtjYXNlIm4iOnJldHVybiB0aGlzLm51bShlLmxvY2FsV2Vla051bWJlcik7Y2FzZSJubiI6cmV0dXJuIHRoaXMubnVtKGUubG9jYWxXZWVrTnVtYmVyLDIpO2Nhc2UiaWkiOnJldHVybiB0aGlzLm51bShlLmxvY2FsV2Vla1llYXIudG9TdHJpbmcoKS5zbGljZSgtMiksMik7Y2FzZSJpaWlpIjpyZXR1cm4gdGhpcy5udW0oZS5sb2NhbFdlZWtZZWFyLDQpO2Nhc2UibyI6cmV0dXJuIHRoaXMubnVtKGUub3JkaW5hbCk7Y2FzZSJvb28iOnJldHVybiB0aGlzLm51bShlLm9yZGluYWwsMyk7Y2FzZSJxIjpyZXR1cm4gdGhpcy5udW0oZS5xdWFydGVyKTtjYXNlInFxIjpyZXR1cm4gdGhpcy5udW0oZS5xdWFydGVyLDIpO2Nhc2UiWCI6cmV0dXJuIHRoaXMubnVtKE1hdGguZmxvb3IoZS50cy8xZTMpKTtjYXNlIngiOnJldHVybiB0aGlzLm51bShlLnRzKTtkZWZhdWx0OnJldHVybiBjKGgpfX07cmV0dXJuIENyKE4ucGFyc2VGb3JtYXQobiksdyl9Zm9ybWF0RHVyYXRpb25Gcm9tU3RyaW5nKGUsbil7Y29uc3Qgcj1sPT57c3dpdGNoKGxbMF0pe2Nhc2UiUyI6cmV0dXJuIm1pbGxpc2Vjb25kIjtjYXNlInMiOnJldHVybiJzZWNvbmQiO2Nhc2UibSI6cmV0dXJuIm1pbnV0ZSI7Y2FzZSJoIjpyZXR1cm4iaG91ciI7Y2FzZSJkIjpyZXR1cm4iZGF5IjtjYXNlInciOnJldHVybiJ3ZWVrIjtjYXNlIk0iOnJldHVybiJtb250aCI7Y2FzZSJ5IjpyZXR1cm4ieWVhciI7ZGVmYXVsdDpyZXR1cm4gbnVsbH19LHM9bD0+dT0+e2NvbnN0IGM9cih1KTtyZXR1cm4gYz90aGlzLm51bShsLmdldChjKSx1Lmxlbmd0aCk6dX0saT1OLnBhcnNlRm9ybWF0KG4pLGE9aS5yZWR1Y2UoKGwse2xpdGVyYWw6dSx2YWw6Y30pPT51P2w6bC5jb25jYXQoYyksW10pLG89ZS5zaGlmdFRvKC4uLmEubWFwKHIpLmZpbHRlcihsPT5sKSk7cmV0dXJuIENyKGkscyhvKSl9fWNvbnN0IEZyPS9bQS1aYS16XystXXsxLDI1Nn0oPzo6P1wvW0EtWmEtejAtOV8rLV17MSwyNTZ9KD86XC9bQS1aYS16MC05XystXXsxLDI1Nn0pPyk/LztmdW5jdGlvbiBJZSguLi50KXtjb25zdCBlPXQucmVkdWNlKChuLHIpPT5uK3Iuc291cmNlLCIiKTtyZXR1cm4gUmVnRXhwKGBeJHtlfSRgKX1mdW5jdGlvbiBFZSguLi50KXtyZXR1cm4gZT0+dC5yZWR1Y2UoKFtuLHIsc10saSk9Pntjb25zdFthLG8sbF09aShlLHMpO3JldHVyblt7Li4ubiwuLi5hfSxvfHxyLGxdfSxbe30sbnVsbCwxXSkuc2xpY2UoMCwyKX1mdW5jdGlvbiBOZSh0LC4uLmUpe2lmKHQ9PW51bGwpcmV0dXJuW251bGwsbnVsbF07Zm9yKGNvbnN0W24scl1vZiBlKXtjb25zdCBzPW4uZXhlYyh0KTtpZihzKXJldHVybiByKHMpfXJldHVybltudWxsLG51bGxdfWZ1bmN0aW9uIEFyKC4uLnQpe3JldHVybihlLG4pPT57Y29uc3Qgcj17fTtsZXQgcztmb3Iocz0wO3M8dC5sZW5ndGg7cysrKXJbdFtzXV09cmUoZVtuK3NdKTtyZXR1cm5bcixudWxsLG4rc119fWNvbnN0IFZyPS8oPzooWil8KFsrLV1cZFxkKSg/Ojo/KFxkXGQpKT8pLyxWbz1gKD86JHtWci5zb3VyY2V9Pyg/OlxcWygke0ZyLnNvdXJjZX0pXFxdKT8pP2AsanQ9LyhcZFxkKSg/Ojo/KFxkXGQpKD86Oj8oXGRcZCkoPzpbLixdKFxkezEsMzB9KSk/KT8pPy8sV3I9UmVnRXhwKGAke2p0LnNvdXJjZX0ke1ZvfWApLHF0PVJlZ0V4cChgKD86VCR7V3Iuc291cmNlfSk/YCksV289LyhbKy1dXGR7Nn18XGR7NH0pKD86LT8oXGRcZCkoPzotPyhcZFxkKSk/KT8vLExvPS8oXGR7NH0pLT9XKFxkXGQpKD86LT8oXGQpKT8vLCRvPS8oXGR7NH0pLT8oXGR7M30pLyxfbz1Bcigid2Vla1llYXIiLCJ3ZWVrTnVtYmVyIiwid2Vla0RheSIpLHpvPUFyKCJ5ZWFyIiwib3JkaW5hbCIpLFJvPS8oXGR7NH0pLShcZFxkKS0oXGRcZCkvLExyPVJlZ0V4cChgJHtqdC5zb3VyY2V9ID8oPzoke1ZyLnNvdXJjZX18KCR7RnIuc291cmNlfSkpP2ApLFpvPVJlZ0V4cChgKD86ICR7THIuc291cmNlfSk/YCk7ZnVuY3Rpb24gTWUodCxlLG4pe2NvbnN0IHI9dFtlXTtyZXR1cm4geShyKT9uOnJlKHIpfWZ1bmN0aW9uIFBvKHQsZSl7cmV0dXJuW3t5ZWFyOk1lKHQsZSksbW9udGg6TWUodCxlKzEsMSksZGF5Ok1lKHQsZSsyLDEpfSxudWxsLGUrM119ZnVuY3Rpb24geGUodCxlKXtyZXR1cm5be2hvdXJzOk1lKHQsZSwwKSxtaW51dGVzOk1lKHQsZSsxLDApLHNlY29uZHM6TWUodCxlKzIsMCksbWlsbGlzZWNvbmRzOlB0KHRbZSszXSl9LG51bGwsZSs0XX1mdW5jdGlvbiBaZSh0LGUpe2NvbnN0IG49IXRbZV0mJiF0W2UrMV0scj11dCh0W2UrMV0sdFtlKzJdKSxzPW4/bnVsbDp4Lmluc3RhbmNlKHIpO3JldHVyblt7fSxzLGUrM119ZnVuY3Rpb24gUGUodCxlKXtjb25zdCBuPXRbZV0/Si5jcmVhdGUodFtlXSk6bnVsbDtyZXR1cm5be30sbixlKzFdfWNvbnN0IFVvPVJlZ0V4cChgXlQ/JHtqdC5zb3VyY2V9JGApLEhvPS9eLT9QKD86KD86KC0/XGR7MSwyMH0oPzpcLlxkezEsMjB9KT8pWSk/KD86KC0/XGR7MSwyMH0oPzpcLlxkezEsMjB9KT8pTSk/KD86KC0/XGR7MSwyMH0oPzpcLlxkezEsMjB9KT8pVyk/KD86KC0/XGR7MSwyMH0oPzpcLlxkezEsMjB9KT8pRCk/KD86VCg/OigtP1xkezEsMjB9KD86XC5cZHsxLDIwfSk/KUgpPyg/OigtP1xkezEsMjB9KD86XC5cZHsxLDIwfSk/KU0pPyg/OigtP1xkezEsMjB9KSg/OlsuLF0oLT9cZHsxLDIwfSkpP1MpPyk/KSQvO2Z1bmN0aW9uIGpvKHQpe2NvbnN0W2UsbixyLHMsaSxhLG8sbCx1XT10LGM9ZVswXT09PSItIixkPWwmJmxbMF09PT0iLSIsdz0oaCxrPSExKT0+aCE9PXZvaWQgMCYmKGt8fGgmJmMpPy1oOmg7cmV0dXJuW3t5ZWFyczp3KGZlKG4pKSxtb250aHM6dyhmZShyKSksd2Vla3M6dyhmZShzKSksZGF5czp3KGZlKGkpKSxob3Vyczp3KGZlKGEpKSxtaW51dGVzOncoZmUobykpLHNlY29uZHM6dyhmZShsKSxsPT09Ii0wIiksbWlsbGlzZWNvbmRzOncoUHQodSksZCl9XX1jb25zdCBxbz17R01UOjAsRURUOi00KjYwLEVTVDotNSo2MCxDRFQ6LTUqNjAsQ1NUOi02KjYwLE1EVDotNio2MCxNU1Q6LTcqNjAsUERUOi03KjYwLFBTVDotOCo2MH07ZnVuY3Rpb24gWXQodCxlLG4scixzLGksYSl7Y29uc3Qgbz17eWVhcjplLmxlbmd0aD09PTI/SHQocmUoZSkpOnJlKGUpLG1vbnRoOnZyLmluZGV4T2YobikrMSxkYXk6cmUociksaG91cjpyZShzKSxtaW51dGU6cmUoaSl9O3JldHVybiBhJiYoby5zZWNvbmQ9cmUoYSkpLHQmJihvLndlZWtkYXk9dC5sZW5ndGg+Mz9Fci5pbmRleE9mKHQpKzE6TnIuaW5kZXhPZih0KSsxKSxvfWNvbnN0IFlvPS9eKD86KE1vbnxUdWV8V2VkfFRodXxGcml8U2F0fFN1biksXHMpPyhcZHsxLDJ9KVxzKEphbnxGZWJ8TWFyfEFwcnxNYXl8SnVufEp1bHxBdWd8U2VwfE9jdHxOb3Z8RGVjKVxzKFxkezIsNH0pXHMoXGRcZCk6KFxkXGQpKD86OihcZFxkKSk/XHMoPzooVVR8R01UfFtFQ01QXVtTRF1UKXwoW1p6XSl8KD86KFsrLV1cZFxkKShcZFxkKSkpJC87ZnVuY3Rpb24gR28odCl7Y29uc3RbLGUsbixyLHMsaSxhLG8sbCx1LGMsZF09dCx3PVl0KGUscyxyLG4saSxhLG8pO2xldCBoO3JldHVybiBsP2g9cW9bbF06dT9oPTA6aD11dChjLGQpLFt3LG5ldyB4KGgpXX1mdW5jdGlvbiBKbyh0KXtyZXR1cm4gdC5yZXBsYWNlKC9cKFteKCldKlwpfFtcblx0XS9nLCIgIikucmVwbGFjZSgvKFxzXHMrKS9nLCIgIikudHJpbSgpfWNvbnN0IEJvPS9eKE1vbnxUdWV8V2VkfFRodXxGcml8U2F0fFN1biksIChcZFxkKSAoSmFufEZlYnxNYXJ8QXByfE1heXxKdW58SnVsfEF1Z3xTZXB8T2N0fE5vdnxEZWMpIChcZHs0fSkgKFxkXGQpOihcZFxkKTooXGRcZCkgR01UJC8sUW89L14oTW9uZGF5fFR1ZXNkYXl8V2VkbmVzZGF5fFRodXJzZGF5fEZyaWRheXxTYXR1cmRheXxTdW5kYXkpLCAoXGRcZCktKEphbnxGZWJ8TWFyfEFwcnxNYXl8SnVufEp1bHxBdWd8U2VwfE9jdHxOb3Z8RGVjKS0oXGRcZCkgKFxkXGQpOihcZFxkKTooXGRcZCkgR01UJC8sS289L14oTW9ufFR1ZXxXZWR8VGh1fEZyaXxTYXR8U3VuKSAoSmFufEZlYnxNYXJ8QXByfE1heXxKdW58SnVsfEF1Z3xTZXB8T2N0fE5vdnxEZWMpICggXGR8XGRcZCkgKFxkXGQpOihcZFxkKTooXGRcZCkgKFxkezR9KSQvO2Z1bmN0aW9uICRyKHQpe2NvbnN0WyxlLG4scixzLGksYSxvXT10O3JldHVybltZdChlLHMscixuLGksYSxvKSx4LnV0Y0luc3RhbmNlXX1mdW5jdGlvbiBYbyh0KXtjb25zdFssZSxuLHIscyxpLGEsb109dDtyZXR1cm5bWXQoZSxvLG4scixzLGksYSkseC51dGNJbnN0YW5jZV19Y29uc3QgZWw9SWUoV28scXQpLHRsPUllKExvLHF0KSxubD1JZSgkbyxxdCkscmw9SWUoV3IpLF9yPUVlKFBvLHhlLFplLFBlKSxzbD1FZShfbyx4ZSxaZSxQZSksaWw9RWUoem8seGUsWmUsUGUpLGFsPUVlKHhlLFplLFBlKTtmdW5jdGlvbiBvbCh0KXtyZXR1cm4gTmUodCxbZWwsX3JdLFt0bCxzbF0sW25sLGlsXSxbcmwsYWxdKX1mdW5jdGlvbiBsbCh0KXtyZXR1cm4gTmUoSm8odCksW1lvLEdvXSl9ZnVuY3Rpb24gdWwodCl7cmV0dXJuIE5lKHQsW0JvLCRyXSxbUW8sJHJdLFtLbyxYb10pfWZ1bmN0aW9uIGNsKHQpe3JldHVybiBOZSh0LFtIbyxqb10pfWNvbnN0IGZsPUVlKHhlKTtmdW5jdGlvbiBkbCh0KXtyZXR1cm4gTmUodCxbVW8sZmxdKX1jb25zdCBobD1JZShSbyxabyksbWw9SWUoTHIpLHlsPUVlKHhlLFplLFBlKTtmdW5jdGlvbiBnbCh0KXtyZXR1cm4gTmUodCxbaGwsX3JdLFttbCx5bF0pfWNvbnN0IHpyPSJJbnZhbGlkIER1cmF0aW9uIixScj17d2Vla3M6e2RheXM6Nyxob3Vyczo3KjI0LG1pbnV0ZXM6NyoyNCo2MCxzZWNvbmRzOjcqMjQqNjAqNjAsbWlsbGlzZWNvbmRzOjcqMjQqNjAqNjAqMWUzfSxkYXlzOntob3VyczoyNCxtaW51dGVzOjI0KjYwLHNlY29uZHM6MjQqNjAqNjAsbWlsbGlzZWNvbmRzOjI0KjYwKjYwKjFlM30saG91cnM6e21pbnV0ZXM6NjAsc2Vjb25kczo2MCo2MCxtaWxsaXNlY29uZHM6NjAqNjAqMWUzfSxtaW51dGVzOntzZWNvbmRzOjYwLG1pbGxpc2Vjb25kczo2MCoxZTN9LHNlY29uZHM6e21pbGxpc2Vjb25kczoxZTN9fSx3bD17eWVhcnM6e3F1YXJ0ZXJzOjQsbW9udGhzOjEyLHdlZWtzOjUyLGRheXM6MzY1LGhvdXJzOjM2NSoyNCxtaW51dGVzOjM2NSoyNCo2MCxzZWNvbmRzOjM2NSoyNCo2MCo2MCxtaWxsaXNlY29uZHM6MzY1KjI0KjYwKjYwKjFlM30scXVhcnRlcnM6e21vbnRoczozLHdlZWtzOjEzLGRheXM6OTEsaG91cnM6OTEqMjQsbWludXRlczo5MSoyNCo2MCxzZWNvbmRzOjkxKjI0KjYwKjYwLG1pbGxpc2Vjb25kczo5MSoyNCo2MCo2MCoxZTN9LG1vbnRoczp7d2Vla3M6NCxkYXlzOjMwLGhvdXJzOjMwKjI0LG1pbnV0ZXM6MzAqMjQqNjAsc2Vjb25kczozMCoyNCo2MCo2MCxtaWxsaXNlY29uZHM6MzAqMjQqNjAqNjAqMWUzfSwuLi5Scn0sTD0xNDYwOTcvNDAwLERlPTE0NjA5Ny80ODAwLHBsPXt5ZWFyczp7cXVhcnRlcnM6NCxtb250aHM6MTIsd2Vla3M6TC83LGRheXM6TCxob3VyczpMKjI0LG1pbnV0ZXM6TCoyNCo2MCxzZWNvbmRzOkwqMjQqNjAqNjAsbWlsbGlzZWNvbmRzOkwqMjQqNjAqNjAqMWUzfSxxdWFydGVyczp7bW9udGhzOjMsd2Vla3M6TC8yOCxkYXlzOkwvNCxob3VyczpMKjI0LzQsbWludXRlczpMKjI0KjYwLzQsc2Vjb25kczpMKjI0KjYwKjYwLzQsbWlsbGlzZWNvbmRzOkwqMjQqNjAqNjAqMWUzLzR9LG1vbnRoczp7d2Vla3M6RGUvNyxkYXlzOkRlLGhvdXJzOkRlKjI0LG1pbnV0ZXM6RGUqMjQqNjAsc2Vjb25kczpEZSoyNCo2MCo2MCxtaWxsaXNlY29uZHM6RGUqMjQqNjAqNjAqMWUzfSwuLi5Scn0sZGU9WyJ5ZWFycyIsInF1YXJ0ZXJzIiwibW9udGhzIiwid2Vla3MiLCJkYXlzIiwiaG91cnMiLCJtaW51dGVzIiwic2Vjb25kcyIsIm1pbGxpc2Vjb25kcyJdLFRsPWRlLnNsaWNlKDApLnJldmVyc2UoKTtmdW5jdGlvbiBzZSh0LGUsbj0hMSl7Y29uc3Qgcj17dmFsdWVzOm4/ZS52YWx1ZXM6ey4uLnQudmFsdWVzLC4uLmUudmFsdWVzfHx7fX0sbG9jOnQubG9jLmNsb25lKGUubG9jKSxjb252ZXJzaW9uQWNjdXJhY3k6ZS5jb252ZXJzaW9uQWNjdXJhY3l8fHQuY29udmVyc2lvbkFjY3VyYWN5LG1hdHJpeDplLm1hdHJpeHx8dC5tYXRyaXh9O3JldHVybiBuZXcgVChyKX1mdW5jdGlvbiBacih0LGUpe2xldCBuPWUubWlsbGlzZWNvbmRzPz8wO2Zvcihjb25zdCByIG9mIFRsLnNsaWNlKDEpKWVbcl0mJihuKz1lW3JdKnRbcl0ubWlsbGlzZWNvbmRzKTtyZXR1cm4gbn1mdW5jdGlvbiBQcih0LGUpe2NvbnN0IG49WnIodCxlKTwwPy0xOjE7ZGUucmVkdWNlUmlnaHQoKHIscyk9PntpZih5KGVbc10pKXJldHVybiByO2lmKHIpe2NvbnN0IGk9ZVtyXSpuLGE9dFtzXVtyXSxvPU1hdGguZmxvb3IoaS9hKTtlW3NdKz1vKm4sZVtyXS09byphKm59cmV0dXJuIHN9LG51bGwpLGRlLnJlZHVjZSgocixzKT0+e2lmKHkoZVtzXSkpcmV0dXJuIHI7aWYocil7Y29uc3QgaT1lW3JdJTE7ZVtyXS09aSxlW3NdKz1pKnRbcl1bc119cmV0dXJuIHN9LG51bGwpfWZ1bmN0aW9uIFNsKHQpe2NvbnN0IGU9e307Zm9yKGNvbnN0W24scl1vZiBPYmplY3QuZW50cmllcyh0KSlyIT09MCYmKGVbbl09cik7cmV0dXJuIGV9Y2xhc3MgVHtjb25zdHJ1Y3RvcihlKXtjb25zdCBuPWUuY29udmVyc2lvbkFjY3VyYWN5PT09Imxvbmd0ZXJtInx8ITE7bGV0IHI9bj9wbDp3bDtlLm1hdHJpeCYmKHI9ZS5tYXRyaXgpLHRoaXMudmFsdWVzPWUudmFsdWVzLHRoaXMubG9jPWUubG9jfHxPLmNyZWF0ZSgpLHRoaXMuY29udmVyc2lvbkFjY3VyYWN5PW4/Imxvbmd0ZXJtIjoiY2FzdWFsIix0aGlzLmludmFsaWQ9ZS5pbnZhbGlkfHxudWxsLHRoaXMubWF0cml4PXIsdGhpcy5pc0x1eG9uRHVyYXRpb249ITB9c3RhdGljIGZyb21NaWxsaXMoZSxuKXtyZXR1cm4gVC5mcm9tT2JqZWN0KHttaWxsaXNlY29uZHM6ZX0sbil9c3RhdGljIGZyb21PYmplY3QoZSxuPXt9KXtpZihlPT1udWxsfHx0eXBlb2YgZSE9Im9iamVjdCIpdGhyb3cgbmV3IEQoYER1cmF0aW9uLmZyb21PYmplY3Q6IGFyZ3VtZW50IGV4cGVjdGVkIHRvIGJlIGFuIG9iamVjdCwgZ290ICR7ZT09PW51bGw/Im51bGwiOnR5cGVvZiBlfWApO3JldHVybiBuZXcgVCh7dmFsdWVzOmN0KGUsVC5ub3JtYWxpemVVbml0KSxsb2M6Ty5mcm9tT2JqZWN0KG4pLGNvbnZlcnNpb25BY2N1cmFjeTpuLmNvbnZlcnNpb25BY2N1cmFjeSxtYXRyaXg6bi5tYXRyaXh9KX1zdGF0aWMgZnJvbUR1cmF0aW9uTGlrZShlKXtpZihjZShlKSlyZXR1cm4gVC5mcm9tTWlsbGlzKGUpO2lmKFQuaXNEdXJhdGlvbihlKSlyZXR1cm4gZTtpZih0eXBlb2YgZT09Im9iamVjdCIpcmV0dXJuIFQuZnJvbU9iamVjdChlKTt0aHJvdyBuZXcgRChgVW5rbm93biBkdXJhdGlvbiBhcmd1bWVudCAke2V9IG9mIHR5cGUgJHt0eXBlb2YgZX1gKX1zdGF0aWMgZnJvbUlTTyhlLG4pe2NvbnN0W3JdPWNsKGUpO3JldHVybiByP1QuZnJvbU9iamVjdChyLG4pOlQuaW52YWxpZCgidW5wYXJzYWJsZSIsYHRoZSBpbnB1dCAiJHtlfSIgY2FuJ3QgYmUgcGFyc2VkIGFzIElTTyA4NjAxYCl9c3RhdGljIGZyb21JU09UaW1lKGUsbil7Y29uc3Rbcl09ZGwoZSk7cmV0dXJuIHI/VC5mcm9tT2JqZWN0KHIsbik6VC5pbnZhbGlkKCJ1bnBhcnNhYmxlIixgdGhlIGlucHV0ICIke2V9IiBjYW4ndCBiZSBwYXJzZWQgYXMgSVNPIDg2MDFgKX1zdGF0aWMgaW52YWxpZChlLG49bnVsbCl7aWYoIWUpdGhyb3cgbmV3IEQoIm5lZWQgdG8gc3BlY2lmeSBhIHJlYXNvbiB0aGUgRHVyYXRpb24gaXMgaW52YWxpZCIpO2NvbnN0IHI9ZSBpbnN0YW5jZW9mIHo/ZTpuZXcgeihlLG4pO2lmKHYudGhyb3dPbkludmFsaWQpdGhyb3cgbmV3IHFhKHIpO3JldHVybiBuZXcgVCh7aW52YWxpZDpyfSl9c3RhdGljIG5vcm1hbGl6ZVVuaXQoZSl7Y29uc3Qgbj17eWVhcjoieWVhcnMiLHllYXJzOiJ5ZWFycyIscXVhcnRlcjoicXVhcnRlcnMiLHF1YXJ0ZXJzOiJxdWFydGVycyIsbW9udGg6Im1vbnRocyIsbW9udGhzOiJtb250aHMiLHdlZWs6IndlZWtzIix3ZWVrczoid2Vla3MiLGRheToiZGF5cyIsZGF5czoiZGF5cyIsaG91cjoiaG91cnMiLGhvdXJzOiJob3VycyIsbWludXRlOiJtaW51dGVzIixtaW51dGVzOiJtaW51dGVzIixzZWNvbmQ6InNlY29uZHMiLHNlY29uZHM6InNlY29uZHMiLG1pbGxpc2Vjb25kOiJtaWxsaXNlY29uZHMiLG1pbGxpc2Vjb25kczoibWlsbGlzZWNvbmRzIn1bZSYmZS50b0xvd2VyQ2FzZSgpXTtpZighbil0aHJvdyBuZXcgQW4oZSk7cmV0dXJuIG59c3RhdGljIGlzRHVyYXRpb24oZSl7cmV0dXJuIGUmJmUuaXNMdXhvbkR1cmF0aW9ufHwhMX1nZXQgbG9jYWxlKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLmxvYy5sb2NhbGU6bnVsbH1nZXQgbnVtYmVyaW5nU3lzdGVtKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLmxvYy5udW1iZXJpbmdTeXN0ZW06bnVsbH10b0Zvcm1hdChlLG49e30pe2NvbnN0IHI9ey4uLm4sZmxvb3I6bi5yb3VuZCE9PSExJiZuLmZsb29yIT09ITF9O3JldHVybiB0aGlzLmlzVmFsaWQ/Ti5jcmVhdGUodGhpcy5sb2MscikuZm9ybWF0RHVyYXRpb25Gcm9tU3RyaW5nKHRoaXMsZSk6enJ9dG9IdW1hbihlPXt9KXtpZighdGhpcy5pc1ZhbGlkKXJldHVybiB6cjtjb25zdCBuPWRlLm1hcChyPT57Y29uc3Qgcz10aGlzLnZhbHVlc1tyXTtyZXR1cm4geShzKT9udWxsOnRoaXMubG9jLm51bWJlckZvcm1hdHRlcih7c3R5bGU6InVuaXQiLHVuaXREaXNwbGF5OiJsb25nIiwuLi5lLHVuaXQ6ci5zbGljZSgwLC0xKX0pLmZvcm1hdChzKX0pLmZpbHRlcihyPT5yKTtyZXR1cm4gdGhpcy5sb2MubGlzdEZvcm1hdHRlcih7dHlwZToiY29uanVuY3Rpb24iLHN0eWxlOmUubGlzdFN0eWxlfHwibmFycm93IiwuLi5lfSkuZm9ybWF0KG4pfXRvT2JqZWN0KCl7cmV0dXJuIHRoaXMuaXNWYWxpZD97Li4udGhpcy52YWx1ZXN9Ont9fXRvSVNPKCl7aWYoIXRoaXMuaXNWYWxpZClyZXR1cm4gbnVsbDtsZXQgZT0iUCI7cmV0dXJuIHRoaXMueWVhcnMhPT0wJiYoZSs9dGhpcy55ZWFycysiWSIpLCh0aGlzLm1vbnRocyE9PTB8fHRoaXMucXVhcnRlcnMhPT0wKSYmKGUrPXRoaXMubW9udGhzK3RoaXMucXVhcnRlcnMqMysiTSIpLHRoaXMud2Vla3MhPT0wJiYoZSs9dGhpcy53ZWVrcysiVyIpLHRoaXMuZGF5cyE9PTAmJihlKz10aGlzLmRheXMrIkQiKSwodGhpcy5ob3VycyE9PTB8fHRoaXMubWludXRlcyE9PTB8fHRoaXMuc2Vjb25kcyE9PTB8fHRoaXMubWlsbGlzZWNvbmRzIT09MCkmJihlKz0iVCIpLHRoaXMuaG91cnMhPT0wJiYoZSs9dGhpcy5ob3VycysiSCIpLHRoaXMubWludXRlcyE9PTAmJihlKz10aGlzLm1pbnV0ZXMrIk0iKSwodGhpcy5zZWNvbmRzIT09MHx8dGhpcy5taWxsaXNlY29uZHMhPT0wKSYmKGUrPVV0KHRoaXMuc2Vjb25kcyt0aGlzLm1pbGxpc2Vjb25kcy8xZTMsMykrIlMiKSxlPT09IlAiJiYoZSs9IlQwUyIpLGV9dG9JU09UaW1lKGU9e30pe2lmKCF0aGlzLmlzVmFsaWQpcmV0dXJuIG51bGw7Y29uc3Qgbj10aGlzLnRvTWlsbGlzKCk7cmV0dXJuIG48MHx8bj49ODY0ZTU/bnVsbDooZT17c3VwcHJlc3NNaWxsaXNlY29uZHM6ITEsc3VwcHJlc3NTZWNvbmRzOiExLGluY2x1ZGVQcmVmaXg6ITEsZm9ybWF0OiJleHRlbmRlZCIsLi4uZSxpbmNsdWRlT2Zmc2V0OiExfSxnLmZyb21NaWxsaXMobix7em9uZToiVVRDIn0pLnRvSVNPVGltZShlKSl9dG9KU09OKCl7cmV0dXJuIHRoaXMudG9JU08oKX10b1N0cmluZygpe3JldHVybiB0aGlzLnRvSVNPKCl9W1N5bWJvbC5mb3IoIm5vZGVqcy51dGlsLmluc3BlY3QuY3VzdG9tIildKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD9gRHVyYXRpb24geyB2YWx1ZXM6ICR7SlNPTi5zdHJpbmdpZnkodGhpcy52YWx1ZXMpfSB9YDpgRHVyYXRpb24geyBJbnZhbGlkLCByZWFzb246ICR7dGhpcy5pbnZhbGlkUmVhc29ufSB9YH10b01pbGxpcygpe3JldHVybiB0aGlzLmlzVmFsaWQ/WnIodGhpcy5tYXRyaXgsdGhpcy52YWx1ZXMpOk5hTn12YWx1ZU9mKCl7cmV0dXJuIHRoaXMudG9NaWxsaXMoKX1wbHVzKGUpe2lmKCF0aGlzLmlzVmFsaWQpcmV0dXJuIHRoaXM7Y29uc3Qgbj1ULmZyb21EdXJhdGlvbkxpa2UoZSkscj17fTtmb3IoY29uc3QgcyBvZiBkZSkoYmUobi52YWx1ZXMscyl8fGJlKHRoaXMudmFsdWVzLHMpKSYmKHJbc109bi5nZXQocykrdGhpcy5nZXQocykpO3JldHVybiBzZSh0aGlzLHt2YWx1ZXM6cn0sITApfW1pbnVzKGUpe2lmKCF0aGlzLmlzVmFsaWQpcmV0dXJuIHRoaXM7Y29uc3Qgbj1ULmZyb21EdXJhdGlvbkxpa2UoZSk7cmV0dXJuIHRoaXMucGx1cyhuLm5lZ2F0ZSgpKX1tYXBVbml0cyhlKXtpZighdGhpcy5pc1ZhbGlkKXJldHVybiB0aGlzO2NvbnN0IG49e307Zm9yKGNvbnN0IHIgb2YgT2JqZWN0LmtleXModGhpcy52YWx1ZXMpKW5bcl09YnIoZSh0aGlzLnZhbHVlc1tyXSxyKSk7cmV0dXJuIHNlKHRoaXMse3ZhbHVlczpufSwhMCl9Z2V0KGUpe3JldHVybiB0aGlzW1Qubm9ybWFsaXplVW5pdChlKV19c2V0KGUpe2lmKCF0aGlzLmlzVmFsaWQpcmV0dXJuIHRoaXM7Y29uc3Qgbj17Li4udGhpcy52YWx1ZXMsLi4uY3QoZSxULm5vcm1hbGl6ZVVuaXQpfTtyZXR1cm4gc2UodGhpcyx7dmFsdWVzOm59KX1yZWNvbmZpZ3VyZSh7bG9jYWxlOmUsbnVtYmVyaW5nU3lzdGVtOm4sY29udmVyc2lvbkFjY3VyYWN5OnIsbWF0cml4OnN9PXt9KXtjb25zdCBhPXtsb2M6dGhpcy5sb2MuY2xvbmUoe2xvY2FsZTplLG51bWJlcmluZ1N5c3RlbTpufSksbWF0cml4OnMsY29udmVyc2lvbkFjY3VyYWN5OnJ9O3JldHVybiBzZSh0aGlzLGEpfWFzKGUpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy5zaGlmdFRvKGUpLmdldChlKTpOYU59bm9ybWFsaXplKCl7aWYoIXRoaXMuaXNWYWxpZClyZXR1cm4gdGhpcztjb25zdCBlPXRoaXMudG9PYmplY3QoKTtyZXR1cm4gUHIodGhpcy5tYXRyaXgsZSksc2UodGhpcyx7dmFsdWVzOmV9LCEwKX1yZXNjYWxlKCl7aWYoIXRoaXMuaXNWYWxpZClyZXR1cm4gdGhpcztjb25zdCBlPVNsKHRoaXMubm9ybWFsaXplKCkuc2hpZnRUb0FsbCgpLnRvT2JqZWN0KCkpO3JldHVybiBzZSh0aGlzLHt2YWx1ZXM6ZX0sITApfXNoaWZ0VG8oLi4uZSl7aWYoIXRoaXMuaXNWYWxpZClyZXR1cm4gdGhpcztpZihlLmxlbmd0aD09PTApcmV0dXJuIHRoaXM7ZT1lLm1hcChhPT5ULm5vcm1hbGl6ZVVuaXQoYSkpO2NvbnN0IG49e30scj17fSxzPXRoaXMudG9PYmplY3QoKTtsZXQgaTtmb3IoY29uc3QgYSBvZiBkZSlpZihlLmluZGV4T2YoYSk+PTApe2k9YTtsZXQgbz0wO2Zvcihjb25zdCB1IGluIHIpbys9dGhpcy5tYXRyaXhbdV1bYV0qclt1XSxyW3VdPTA7Y2Uoc1thXSkmJihvKz1zW2FdKTtjb25zdCBsPU1hdGgudHJ1bmMobyk7blthXT1sLHJbYV09KG8qMWUzLWwqMWUzKS8xZTN9ZWxzZSBjZShzW2FdKSYmKHJbYV09c1thXSk7Zm9yKGNvbnN0IGEgaW4gcilyW2FdIT09MCYmKG5baV0rPWE9PT1pP3JbYV06clthXS90aGlzLm1hdHJpeFtpXVthXSk7cmV0dXJuIFByKHRoaXMubWF0cml4LG4pLHNlKHRoaXMse3ZhbHVlczpufSwhMCl9c2hpZnRUb0FsbCgpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy5zaGlmdFRvKCJ5ZWFycyIsIm1vbnRocyIsIndlZWtzIiwiZGF5cyIsImhvdXJzIiwibWludXRlcyIsInNlY29uZHMiLCJtaWxsaXNlY29uZHMiKTp0aGlzfW5lZ2F0ZSgpe2lmKCF0aGlzLmlzVmFsaWQpcmV0dXJuIHRoaXM7Y29uc3QgZT17fTtmb3IoY29uc3QgbiBvZiBPYmplY3Qua2V5cyh0aGlzLnZhbHVlcykpZVtuXT10aGlzLnZhbHVlc1tuXT09PTA/MDotdGhpcy52YWx1ZXNbbl07cmV0dXJuIHNlKHRoaXMse3ZhbHVlczplfSwhMCl9Z2V0IHllYXJzKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLnZhbHVlcy55ZWFyc3x8MDpOYU59Z2V0IHF1YXJ0ZXJzKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLnZhbHVlcy5xdWFydGVyc3x8MDpOYU59Z2V0IG1vbnRocygpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy52YWx1ZXMubW9udGhzfHwwOk5hTn1nZXQgd2Vla3MoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMudmFsdWVzLndlZWtzfHwwOk5hTn1nZXQgZGF5cygpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy52YWx1ZXMuZGF5c3x8MDpOYU59Z2V0IGhvdXJzKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLnZhbHVlcy5ob3Vyc3x8MDpOYU59Z2V0IG1pbnV0ZXMoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMudmFsdWVzLm1pbnV0ZXN8fDA6TmFOfWdldCBzZWNvbmRzKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLnZhbHVlcy5zZWNvbmRzfHwwOk5hTn1nZXQgbWlsbGlzZWNvbmRzKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLnZhbHVlcy5taWxsaXNlY29uZHN8fDA6TmFOfWdldCBpc1ZhbGlkKCl7cmV0dXJuIHRoaXMuaW52YWxpZD09PW51bGx9Z2V0IGludmFsaWRSZWFzb24oKXtyZXR1cm4gdGhpcy5pbnZhbGlkP3RoaXMuaW52YWxpZC5yZWFzb246bnVsbH1nZXQgaW52YWxpZEV4cGxhbmF0aW9uKCl7cmV0dXJuIHRoaXMuaW52YWxpZD90aGlzLmludmFsaWQuZXhwbGFuYXRpb246bnVsbH1lcXVhbHMoZSl7aWYoIXRoaXMuaXNWYWxpZHx8IWUuaXNWYWxpZHx8IXRoaXMubG9jLmVxdWFscyhlLmxvYykpcmV0dXJuITE7ZnVuY3Rpb24gbihyLHMpe3JldHVybiByPT09dm9pZCAwfHxyPT09MD9zPT09dm9pZCAwfHxzPT09MDpyPT09c31mb3IoY29uc3QgciBvZiBkZSlpZighbih0aGlzLnZhbHVlc1tyXSxlLnZhbHVlc1tyXSkpcmV0dXJuITE7cmV0dXJuITB9fWNvbnN0IENlPSJJbnZhbGlkIEludGVydmFsIjtmdW5jdGlvbiBPbCh0LGUpe3JldHVybiF0fHwhdC5pc1ZhbGlkP2IuaW52YWxpZCgibWlzc2luZyBvciBpbnZhbGlkIHN0YXJ0Iik6IWV8fCFlLmlzVmFsaWQ/Yi5pbnZhbGlkKCJtaXNzaW5nIG9yIGludmFsaWQgZW5kIik6ZTx0P2IuaW52YWxpZCgiZW5kIGJlZm9yZSBzdGFydCIsYFRoZSBlbmQgb2YgYW4gaW50ZXJ2YWwgbXVzdCBiZSBhZnRlciBpdHMgc3RhcnQsIGJ1dCB5b3UgaGFkIHN0YXJ0PSR7dC50b0lTTygpfSBhbmQgZW5kPSR7ZS50b0lTTygpfWApOm51bGx9Y2xhc3MgYntjb25zdHJ1Y3RvcihlKXt0aGlzLnM9ZS5zdGFydCx0aGlzLmU9ZS5lbmQsdGhpcy5pbnZhbGlkPWUuaW52YWxpZHx8bnVsbCx0aGlzLmlzTHV4b25JbnRlcnZhbD0hMH1zdGF0aWMgaW52YWxpZChlLG49bnVsbCl7aWYoIWUpdGhyb3cgbmV3IEQoIm5lZWQgdG8gc3BlY2lmeSBhIHJlYXNvbiB0aGUgSW50ZXJ2YWwgaXMgaW52YWxpZCIpO2NvbnN0IHI9ZSBpbnN0YW5jZW9mIHo/ZTpuZXcgeihlLG4pO2lmKHYudGhyb3dPbkludmFsaWQpdGhyb3cgbmV3IGphKHIpO3JldHVybiBuZXcgYih7aW52YWxpZDpyfSl9c3RhdGljIGZyb21EYXRlVGltZXMoZSxuKXtjb25zdCByPUhlKGUpLHM9SGUobiksaT1PbChyLHMpO3JldHVybiBpPz9uZXcgYih7c3RhcnQ6cixlbmQ6c30pfXN0YXRpYyBhZnRlcihlLG4pe2NvbnN0IHI9VC5mcm9tRHVyYXRpb25MaWtlKG4pLHM9SGUoZSk7cmV0dXJuIGIuZnJvbURhdGVUaW1lcyhzLHMucGx1cyhyKSl9c3RhdGljIGJlZm9yZShlLG4pe2NvbnN0IHI9VC5mcm9tRHVyYXRpb25MaWtlKG4pLHM9SGUoZSk7cmV0dXJuIGIuZnJvbURhdGVUaW1lcyhzLm1pbnVzKHIpLHMpfXN0YXRpYyBmcm9tSVNPKGUsbil7Y29uc3RbcixzXT0oZXx8IiIpLnNwbGl0KCIvIiwyKTtpZihyJiZzKXtsZXQgaSxhO3RyeXtpPWcuZnJvbUlTTyhyLG4pLGE9aS5pc1ZhbGlkfWNhdGNoe2E9ITF9bGV0IG8sbDt0cnl7bz1nLmZyb21JU08ocyxuKSxsPW8uaXNWYWxpZH1jYXRjaHtsPSExfWlmKGEmJmwpcmV0dXJuIGIuZnJvbURhdGVUaW1lcyhpLG8pO2lmKGEpe2NvbnN0IHU9VC5mcm9tSVNPKHMsbik7aWYodS5pc1ZhbGlkKXJldHVybiBiLmFmdGVyKGksdSl9ZWxzZSBpZihsKXtjb25zdCB1PVQuZnJvbUlTTyhyLG4pO2lmKHUuaXNWYWxpZClyZXR1cm4gYi5iZWZvcmUobyx1KX19cmV0dXJuIGIuaW52YWxpZCgidW5wYXJzYWJsZSIsYHRoZSBpbnB1dCAiJHtlfSIgY2FuJ3QgYmUgcGFyc2VkIGFzIElTTyA4NjAxYCl9c3RhdGljIGlzSW50ZXJ2YWwoZSl7cmV0dXJuIGUmJmUuaXNMdXhvbkludGVydmFsfHwhMX1nZXQgc3RhcnQoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMuczpudWxsfWdldCBlbmQoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMuZTpudWxsfWdldCBpc1ZhbGlkKCl7cmV0dXJuIHRoaXMuaW52YWxpZFJlYXNvbj09PW51bGx9Z2V0IGludmFsaWRSZWFzb24oKXtyZXR1cm4gdGhpcy5pbnZhbGlkP3RoaXMuaW52YWxpZC5yZWFzb246bnVsbH1nZXQgaW52YWxpZEV4cGxhbmF0aW9uKCl7cmV0dXJuIHRoaXMuaW52YWxpZD90aGlzLmludmFsaWQuZXhwbGFuYXRpb246bnVsbH1sZW5ndGgoZT0ibWlsbGlzZWNvbmRzIil7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLnRvRHVyYXRpb24oZSkuZ2V0KGUpOk5hTn1jb3VudChlPSJtaWxsaXNlY29uZHMiLG4pe2lmKCF0aGlzLmlzVmFsaWQpcmV0dXJuIE5hTjtjb25zdCByPXRoaXMuc3RhcnQuc3RhcnRPZihlLG4pO2xldCBzO3JldHVybiBuIT1udWxsJiZuLnVzZUxvY2FsZVdlZWtzP3M9dGhpcy5lbmQucmVjb25maWd1cmUoe2xvY2FsZTpyLmxvY2FsZX0pOnM9dGhpcy5lbmQscz1zLnN0YXJ0T2YoZSxuKSxNYXRoLmZsb29yKHMuZGlmZihyLGUpLmdldChlKSkrKHMudmFsdWVPZigpIT09dGhpcy5lbmQudmFsdWVPZigpKX1oYXNTYW1lKGUpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy5pc0VtcHR5KCl8fHRoaXMuZS5taW51cygxKS5oYXNTYW1lKHRoaXMucyxlKTohMX1pc0VtcHR5KCl7cmV0dXJuIHRoaXMucy52YWx1ZU9mKCk9PT10aGlzLmUudmFsdWVPZigpfWlzQWZ0ZXIoZSl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLnM+ZTohMX1pc0JlZm9yZShlKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMuZTw9ZTohMX1jb250YWlucyhlKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMuczw9ZSYmdGhpcy5lPmU6ITF9c2V0KHtzdGFydDplLGVuZDpufT17fSl7cmV0dXJuIHRoaXMuaXNWYWxpZD9iLmZyb21EYXRlVGltZXMoZXx8dGhpcy5zLG58fHRoaXMuZSk6dGhpc31zcGxpdEF0KC4uLmUpe2lmKCF0aGlzLmlzVmFsaWQpcmV0dXJuW107Y29uc3Qgbj1lLm1hcChIZSkuZmlsdGVyKGE9PnRoaXMuY29udGFpbnMoYSkpLnNvcnQoKGEsbyk9PmEudG9NaWxsaXMoKS1vLnRvTWlsbGlzKCkpLHI9W107bGV0e3N9PXRoaXMsaT0wO2Zvcig7czx0aGlzLmU7KXtjb25zdCBhPW5baV18fHRoaXMuZSxvPSthPit0aGlzLmU/dGhpcy5lOmE7ci5wdXNoKGIuZnJvbURhdGVUaW1lcyhzLG8pKSxzPW8saSs9MX1yZXR1cm4gcn1zcGxpdEJ5KGUpe2NvbnN0IG49VC5mcm9tRHVyYXRpb25MaWtlKGUpO2lmKCF0aGlzLmlzVmFsaWR8fCFuLmlzVmFsaWR8fG4uYXMoIm1pbGxpc2Vjb25kcyIpPT09MClyZXR1cm5bXTtsZXR7czpyfT10aGlzLHM9MSxpO2NvbnN0IGE9W107Zm9yKDtyPHRoaXMuZTspe2NvbnN0IG89dGhpcy5zdGFydC5wbHVzKG4ubWFwVW5pdHMobD0+bCpzKSk7aT0rbz4rdGhpcy5lP3RoaXMuZTpvLGEucHVzaChiLmZyb21EYXRlVGltZXMocixpKSkscj1pLHMrPTF9cmV0dXJuIGF9ZGl2aWRlRXF1YWxseShlKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMuc3BsaXRCeSh0aGlzLmxlbmd0aCgpL2UpLnNsaWNlKDAsZSk6W119b3ZlcmxhcHMoZSl7cmV0dXJuIHRoaXMuZT5lLnMmJnRoaXMuczxlLmV9YWJ1dHNTdGFydChlKXtyZXR1cm4gdGhpcy5pc1ZhbGlkPyt0aGlzLmU9PStlLnM6ITF9YWJ1dHNFbmQoZSl7cmV0dXJuIHRoaXMuaXNWYWxpZD8rZS5lPT0rdGhpcy5zOiExfWVuZ3VsZnMoZSl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLnM8PWUucyYmdGhpcy5lPj1lLmU6ITF9ZXF1YWxzKGUpe3JldHVybiF0aGlzLmlzVmFsaWR8fCFlLmlzVmFsaWQ/ITE6dGhpcy5zLmVxdWFscyhlLnMpJiZ0aGlzLmUuZXF1YWxzKGUuZSl9aW50ZXJzZWN0aW9uKGUpe2lmKCF0aGlzLmlzVmFsaWQpcmV0dXJuIHRoaXM7Y29uc3Qgbj10aGlzLnM+ZS5zP3RoaXMuczplLnMscj10aGlzLmU8ZS5lP3RoaXMuZTplLmU7cmV0dXJuIG4+PXI/bnVsbDpiLmZyb21EYXRlVGltZXMobixyKX11bmlvbihlKXtpZighdGhpcy5pc1ZhbGlkKXJldHVybiB0aGlzO2NvbnN0IG49dGhpcy5zPGUucz90aGlzLnM6ZS5zLHI9dGhpcy5lPmUuZT90aGlzLmU6ZS5lO3JldHVybiBiLmZyb21EYXRlVGltZXMobixyKX1zdGF0aWMgbWVyZ2UoZSl7Y29uc3RbbixyXT1lLnNvcnQoKHMsaSk9PnMucy1pLnMpLnJlZHVjZSgoW3MsaV0sYSk9Pmk/aS5vdmVybGFwcyhhKXx8aS5hYnV0c1N0YXJ0KGEpP1tzLGkudW5pb24oYSldOltzLmNvbmNhdChbaV0pLGFdOltzLGFdLFtbXSxudWxsXSk7cmV0dXJuIHImJm4ucHVzaChyKSxufXN0YXRpYyB4b3IoZSl7bGV0IG49bnVsbCxyPTA7Y29uc3Qgcz1bXSxpPWUubWFwKGw9Plt7dGltZTpsLnMsdHlwZToicyJ9LHt0aW1lOmwuZSx0eXBlOiJlIn1dKSxhPUFycmF5LnByb3RvdHlwZS5jb25jYXQoLi4uaSksbz1hLnNvcnQoKGwsdSk9PmwudGltZS11LnRpbWUpO2Zvcihjb25zdCBsIG9mIG8pcis9bC50eXBlPT09InMiPzE6LTEscj09PTE/bj1sLnRpbWU6KG4mJituIT0rbC50aW1lJiZzLnB1c2goYi5mcm9tRGF0ZVRpbWVzKG4sbC50aW1lKSksbj1udWxsKTtyZXR1cm4gYi5tZXJnZShzKX1kaWZmZXJlbmNlKC4uLmUpe3JldHVybiBiLnhvcihbdGhpc10uY29uY2F0KGUpKS5tYXAobj0+dGhpcy5pbnRlcnNlY3Rpb24obikpLmZpbHRlcihuPT5uJiYhbi5pc0VtcHR5KCkpfXRvU3RyaW5nKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD9gWyR7dGhpcy5zLnRvSVNPKCl9IOKAkyAke3RoaXMuZS50b0lTTygpfSlgOkNlfVtTeW1ib2wuZm9yKCJub2RlanMudXRpbC5pbnNwZWN0LmN1c3RvbSIpXSgpe3JldHVybiB0aGlzLmlzVmFsaWQ/YEludGVydmFsIHsgc3RhcnQ6ICR7dGhpcy5zLnRvSVNPKCl9LCBlbmQ6ICR7dGhpcy5lLnRvSVNPKCl9IH1gOmBJbnRlcnZhbCB7IEludmFsaWQsIHJlYXNvbjogJHt0aGlzLmludmFsaWRSZWFzb259IH1gfXRvTG9jYWxlU3RyaW5nKGU9ZXQsbj17fSl7cmV0dXJuIHRoaXMuaXNWYWxpZD9OLmNyZWF0ZSh0aGlzLnMubG9jLmNsb25lKG4pLGUpLmZvcm1hdEludGVydmFsKHRoaXMpOkNlfXRvSVNPKGUpe3JldHVybiB0aGlzLmlzVmFsaWQ/YCR7dGhpcy5zLnRvSVNPKGUpfS8ke3RoaXMuZS50b0lTTyhlKX1gOkNlfXRvSVNPRGF0ZSgpe3JldHVybiB0aGlzLmlzVmFsaWQ/YCR7dGhpcy5zLnRvSVNPRGF0ZSgpfS8ke3RoaXMuZS50b0lTT0RhdGUoKX1gOkNlfXRvSVNPVGltZShlKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP2Ake3RoaXMucy50b0lTT1RpbWUoZSl9LyR7dGhpcy5lLnRvSVNPVGltZShlKX1gOkNlfXRvRm9ybWF0KGUse3NlcGFyYXRvcjpuPSIg4oCTICJ9PXt9KXtyZXR1cm4gdGhpcy5pc1ZhbGlkP2Ake3RoaXMucy50b0Zvcm1hdChlKX0ke259JHt0aGlzLmUudG9Gb3JtYXQoZSl9YDpDZX10b0R1cmF0aW9uKGUsbil7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLmUuZGlmZih0aGlzLnMsZSxuKTpULmludmFsaWQodGhpcy5pbnZhbGlkUmVhc29uKX1tYXBFbmRwb2ludHMoZSl7cmV0dXJuIGIuZnJvbURhdGVUaW1lcyhlKHRoaXMucyksZSh0aGlzLmUpKX19Y2xhc3MgZHR7c3RhdGljIGhhc0RTVChlPXYuZGVmYXVsdFpvbmUpe2NvbnN0IG49Zy5ub3coKS5zZXRab25lKGUpLnNldCh7bW9udGg6MTJ9KTtyZXR1cm4hZS5pc1VuaXZlcnNhbCYmbi5vZmZzZXQhPT1uLnNldCh7bW9udGg6Nn0pLm9mZnNldH1zdGF0aWMgaXNWYWxpZElBTkFab25lKGUpe3JldHVybiBKLmlzVmFsaWRab25lKGUpfXN0YXRpYyBub3JtYWxpemVab25lKGUpe3JldHVybiBuZShlLHYuZGVmYXVsdFpvbmUpfXN0YXRpYyBnZXRTdGFydE9mV2Vlayh7bG9jYWxlOmU9bnVsbCxsb2NPYmo6bj1udWxsfT17fSl7cmV0dXJuKG58fE8uY3JlYXRlKGUpKS5nZXRTdGFydE9mV2VlaygpfXN0YXRpYyBnZXRNaW5pbXVtRGF5c0luRmlyc3RXZWVrKHtsb2NhbGU6ZT1udWxsLGxvY09iajpuPW51bGx9PXt9KXtyZXR1cm4obnx8Ty5jcmVhdGUoZSkpLmdldE1pbkRheXNJbkZpcnN0V2VlaygpfXN0YXRpYyBnZXRXZWVrZW5kV2Vla2RheXMoe2xvY2FsZTplPW51bGwsbG9jT2JqOm49bnVsbH09e30pe3JldHVybihufHxPLmNyZWF0ZShlKSkuZ2V0V2Vla2VuZERheXMoKS5zbGljZSgpfXN0YXRpYyBtb250aHMoZT0ibG9uZyIse2xvY2FsZTpuPW51bGwsbnVtYmVyaW5nU3lzdGVtOnI9bnVsbCxsb2NPYmo6cz1udWxsLG91dHB1dENhbGVuZGFyOmk9ImdyZWdvcnkifT17fSl7cmV0dXJuKHN8fE8uY3JlYXRlKG4scixpKSkubW9udGhzKGUpfXN0YXRpYyBtb250aHNGb3JtYXQoZT0ibG9uZyIse2xvY2FsZTpuPW51bGwsbnVtYmVyaW5nU3lzdGVtOnI9bnVsbCxsb2NPYmo6cz1udWxsLG91dHB1dENhbGVuZGFyOmk9ImdyZWdvcnkifT17fSl7cmV0dXJuKHN8fE8uY3JlYXRlKG4scixpKSkubW9udGhzKGUsITApfXN0YXRpYyB3ZWVrZGF5cyhlPSJsb25nIix7bG9jYWxlOm49bnVsbCxudW1iZXJpbmdTeXN0ZW06cj1udWxsLGxvY09iajpzPW51bGx9PXt9KXtyZXR1cm4oc3x8Ty5jcmVhdGUobixyLG51bGwpKS53ZWVrZGF5cyhlKX1zdGF0aWMgd2Vla2RheXNGb3JtYXQoZT0ibG9uZyIse2xvY2FsZTpuPW51bGwsbnVtYmVyaW5nU3lzdGVtOnI9bnVsbCxsb2NPYmo6cz1udWxsfT17fSl7cmV0dXJuKHN8fE8uY3JlYXRlKG4scixudWxsKSkud2Vla2RheXMoZSwhMCl9c3RhdGljIG1lcmlkaWVtcyh7bG9jYWxlOmU9bnVsbH09e30pe3JldHVybiBPLmNyZWF0ZShlKS5tZXJpZGllbXMoKX1zdGF0aWMgZXJhcyhlPSJzaG9ydCIse2xvY2FsZTpuPW51bGx9PXt9KXtyZXR1cm4gTy5jcmVhdGUobixudWxsLCJncmVnb3J5IikuZXJhcyhlKX1zdGF0aWMgZmVhdHVyZXMoKXtyZXR1cm57cmVsYXRpdmU6cHIoKSxsb2NhbGVXZWVrOlRyKCl9fX1mdW5jdGlvbiBVcih0LGUpe2NvbnN0IG49cz0+cy50b1VUQygwLHtrZWVwTG9jYWxUaW1lOiEwfSkuc3RhcnRPZigiZGF5IikudmFsdWVPZigpLHI9bihlKS1uKHQpO3JldHVybiBNYXRoLmZsb29yKFQuZnJvbU1pbGxpcyhyKS5hcygiZGF5cyIpKX1mdW5jdGlvbiBrbCh0LGUsbil7Y29uc3Qgcj1bWyJ5ZWFycyIsKGwsdSk9PnUueWVhci1sLnllYXJdLFsicXVhcnRlcnMiLChsLHUpPT51LnF1YXJ0ZXItbC5xdWFydGVyKyh1LnllYXItbC55ZWFyKSo0XSxbIm1vbnRocyIsKGwsdSk9PnUubW9udGgtbC5tb250aCsodS55ZWFyLWwueWVhcikqMTJdLFsid2Vla3MiLChsLHUpPT57Y29uc3QgYz1VcihsLHUpO3JldHVybihjLWMlNykvN31dLFsiZGF5cyIsVXJdXSxzPXt9LGk9dDtsZXQgYSxvO2Zvcihjb25zdFtsLHVdb2YgciluLmluZGV4T2YobCk+PTAmJihhPWwsc1tsXT11KHQsZSksbz1pLnBsdXMocyksbz5lPyhzW2xdLS0sdD1pLnBsdXMocyksdD5lJiYobz10LHNbbF0tLSx0PWkucGx1cyhzKSkpOnQ9byk7cmV0dXJuW3QscyxvLGFdfWZ1bmN0aW9uIGJsKHQsZSxuLHIpe2xldFtzLGksYSxvXT1rbCh0LGUsbik7Y29uc3QgbD1lLXMsdT1uLmZpbHRlcihkPT5bImhvdXJzIiwibWludXRlcyIsInNlY29uZHMiLCJtaWxsaXNlY29uZHMiXS5pbmRleE9mKGQpPj0wKTt1Lmxlbmd0aD09PTAmJihhPGUmJihhPXMucGx1cyh7W29dOjF9KSksYSE9PXMmJihpW29dPShpW29dfHwwKStsLyhhLXMpKSk7Y29uc3QgYz1ULmZyb21PYmplY3QoaSxyKTtyZXR1cm4gdS5sZW5ndGg+MD9ULmZyb21NaWxsaXMobCxyKS5zaGlmdFRvKC4uLnUpLnBsdXMoYyk6Y31jb25zdCBHdD17YXJhYjoiW9mgLdmpXSIsYXJhYmV4dDoiW9uwLdu5XSIsYmFsaToiW+GtkC3hrZldIixiZW5nOiJb4KemLeCnr10iLGRldmE6IlvgpaYt4KWvXSIsZnVsbHdpZGU6IlvvvJAt77yZXSIsZ3VqcjoiW+Crpi3gq69dIixoYW5pZGVjOiJb44CHfOS4gHzkuox85LiJfOWbm3zkupR85YWtfOS4g3zlhat85LmdXSIsa2htcjoiW+GfoC3hn6ldIixrbmRhOiJb4LOmLeCzr10iLGxhb286Ilvgu5At4LuZXSIsbGltYjoiW+Glhi3hpY9dIixtbHltOiJb4LWmLeC1r10iLG1vbmc6IlvhoJAt4aCZXSIsbXltcjoiW+GBgC3hgYldIixvcnlhOiJb4K2mLeCtr10iLHRhbWxkZWM6Ilvgr6Yt4K+vXSIsdGVsdToiW+Cxpi3gsa9dIix0aGFpOiJb4LmQLeC5mV0iLHRpYnQ6IlvgvKAt4LypXSIsbGF0bjoiXFxkIn0sSHI9e2FyYWI6WzE2MzIsMTY0MV0sYXJhYmV4dDpbMTc3NiwxNzg1XSxiYWxpOls2OTkyLDcwMDFdLGJlbmc6WzI1MzQsMjU0M10sZGV2YTpbMjQwNiwyNDE1XSxmdWxsd2lkZTpbNjUyOTYsNjUzMDNdLGd1anI6WzI3OTAsMjc5OV0sa2htcjpbNjExMiw2MTIxXSxrbmRhOlszMzAyLDMzMTFdLGxhb286WzM3OTIsMzgwMV0sbGltYjpbNjQ3MCw2NDc5XSxtbHltOlszNDMwLDM0MzldLG1vbmc6WzYxNjAsNjE2OV0sbXltcjpbNDE2MCw0MTY5XSxvcnlhOlsyOTE4LDI5MjddLHRhbWxkZWM6WzMwNDYsMzA1NV0sdGVsdTpbMzE3NCwzMTgzXSx0aGFpOlszNjY0LDM2NzNdLHRpYnQ6WzM4NzIsMzg4MV19LHZsPUd0LmhhbmlkZWMucmVwbGFjZSgvW1xbfFxdXS9nLCIiKS5zcGxpdCgiIik7ZnVuY3Rpb24gSWwodCl7bGV0IGU9cGFyc2VJbnQodCwxMCk7aWYoaXNOYU4oZSkpe2U9IiI7Zm9yKGxldCBuPTA7bjx0Lmxlbmd0aDtuKyspe2NvbnN0IHI9dC5jaGFyQ29kZUF0KG4pO2lmKHRbbl0uc2VhcmNoKEd0LmhhbmlkZWMpIT09LTEpZSs9dmwuaW5kZXhPZih0W25dKTtlbHNlIGZvcihjb25zdCBzIGluIEhyKXtjb25zdFtpLGFdPUhyW3NdO3I+PWkmJnI8PWEmJihlKz1yLWkpfX1yZXR1cm4gcGFyc2VJbnQoZSwxMCl9ZWxzZSByZXR1cm4gZX1mdW5jdGlvbiBSKHtudW1iZXJpbmdTeXN0ZW06dH0sZT0iIil7cmV0dXJuIG5ldyBSZWdFeHAoYCR7R3RbdHx8ImxhdG4iXX0ke2V9YCl9Y29uc3QgRWw9Im1pc3NpbmcgSW50bC5EYXRlVGltZUZvcm1hdC5mb3JtYXRUb1BhcnRzIHN1cHBvcnQiO2Z1bmN0aW9uIFModCxlPW49Pm4pe3JldHVybntyZWdleDp0LGRlc2VyOihbbl0pPT5lKElsKG4pKX19Y29uc3QganI9IlsgwqBdIixxcj1uZXcgUmVnRXhwKGpyLCJnIik7ZnVuY3Rpb24gTmwodCl7cmV0dXJuIHQucmVwbGFjZSgvXC4vZywiXFwuPyIpLnJlcGxhY2UocXIsanIpfWZ1bmN0aW9uIFlyKHQpe3JldHVybiB0LnJlcGxhY2UoL1wuL2csIiIpLnJlcGxhY2UocXIsIiAiKS50b0xvd2VyQ2FzZSgpfWZ1bmN0aW9uIFoodCxlKXtyZXR1cm4gdD09PW51bGw/bnVsbDp7cmVnZXg6UmVnRXhwKHQubWFwKE5sKS5qb2luKCJ8IikpLGRlc2VyOihbbl0pPT50LmZpbmRJbmRleChyPT5ZcihuKT09PVlyKHIpKStlfX1mdW5jdGlvbiBHcih0LGUpe3JldHVybntyZWdleDp0LGRlc2VyOihbLG4scl0pPT51dChuLHIpLGdyb3VwczplfX1mdW5jdGlvbiBodCh0KXtyZXR1cm57cmVnZXg6dCxkZXNlcjooW2VdKT0+ZX19ZnVuY3Rpb24gTWwodCl7cmV0dXJuIHQucmVwbGFjZSgvW1wtXFtcXXt9KCkqKz8uLFxcXF4kfCNcc10vZywiXFwkJiIpfWZ1bmN0aW9uIHhsKHQsZSl7Y29uc3Qgbj1SKGUpLHI9UihlLCJ7Mn0iKSxzPVIoZSwiezN9IiksaT1SKGUsIns0fSIpLGE9UihlLCJ7Nn0iKSxvPVIoZSwiezEsMn0iKSxsPVIoZSwiezEsM30iKSx1PVIoZSwiezEsNn0iKSxjPVIoZSwiezEsOX0iKSxkPVIoZSwiezIsNH0iKSx3PVIoZSwiezQsNn0iKSxoPU09Pih7cmVnZXg6UmVnRXhwKE1sKE0udmFsKSksZGVzZXI6KFtqXSk9PmosbGl0ZXJhbDohMH0pLFA9KE09PntpZih0LmxpdGVyYWwpcmV0dXJuIGgoTSk7c3dpdGNoKE0udmFsKXtjYXNlIkciOnJldHVybiBaKGUuZXJhcygic2hvcnQiKSwwKTtjYXNlIkdHIjpyZXR1cm4gWihlLmVyYXMoImxvbmciKSwwKTtjYXNlInkiOnJldHVybiBTKHUpO2Nhc2UieXkiOnJldHVybiBTKGQsSHQpO2Nhc2UieXl5eSI6cmV0dXJuIFMoaSk7Y2FzZSJ5eXl5eSI6cmV0dXJuIFModyk7Y2FzZSJ5eXl5eXkiOnJldHVybiBTKGEpO2Nhc2UiTSI6cmV0dXJuIFMobyk7Y2FzZSJNTSI6cmV0dXJuIFMocik7Y2FzZSJNTU0iOnJldHVybiBaKGUubW9udGhzKCJzaG9ydCIsITApLDEpO2Nhc2UiTU1NTSI6cmV0dXJuIFooZS5tb250aHMoImxvbmciLCEwKSwxKTtjYXNlIkwiOnJldHVybiBTKG8pO2Nhc2UiTEwiOnJldHVybiBTKHIpO2Nhc2UiTExMIjpyZXR1cm4gWihlLm1vbnRocygic2hvcnQiLCExKSwxKTtjYXNlIkxMTEwiOnJldHVybiBaKGUubW9udGhzKCJsb25nIiwhMSksMSk7Y2FzZSJkIjpyZXR1cm4gUyhvKTtjYXNlImRkIjpyZXR1cm4gUyhyKTtjYXNlIm8iOnJldHVybiBTKGwpO2Nhc2Uib29vIjpyZXR1cm4gUyhzKTtjYXNlIkhIIjpyZXR1cm4gUyhyKTtjYXNlIkgiOnJldHVybiBTKG8pO2Nhc2UiaGgiOnJldHVybiBTKHIpO2Nhc2UiaCI6cmV0dXJuIFMobyk7Y2FzZSJtbSI6cmV0dXJuIFMocik7Y2FzZSJtIjpyZXR1cm4gUyhvKTtjYXNlInEiOnJldHVybiBTKG8pO2Nhc2UicXEiOnJldHVybiBTKHIpO2Nhc2UicyI6cmV0dXJuIFMobyk7Y2FzZSJzcyI6cmV0dXJuIFMocik7Y2FzZSJTIjpyZXR1cm4gUyhsKTtjYXNlIlNTUyI6cmV0dXJuIFMocyk7Y2FzZSJ1IjpyZXR1cm4gaHQoYyk7Y2FzZSJ1dSI6cmV0dXJuIGh0KG8pO2Nhc2UidXV1IjpyZXR1cm4gUyhuKTtjYXNlImEiOnJldHVybiBaKGUubWVyaWRpZW1zKCksMCk7Y2FzZSJra2trIjpyZXR1cm4gUyhpKTtjYXNlImtrIjpyZXR1cm4gUyhkLEh0KTtjYXNlIlciOnJldHVybiBTKG8pO2Nhc2UiV1ciOnJldHVybiBTKHIpO2Nhc2UiRSI6Y2FzZSJjIjpyZXR1cm4gUyhuKTtjYXNlIkVFRSI6cmV0dXJuIFooZS53ZWVrZGF5cygic2hvcnQiLCExKSwxKTtjYXNlIkVFRUUiOnJldHVybiBaKGUud2Vla2RheXMoImxvbmciLCExKSwxKTtjYXNlImNjYyI6cmV0dXJuIFooZS53ZWVrZGF5cygic2hvcnQiLCEwKSwxKTtjYXNlImNjY2MiOnJldHVybiBaKGUud2Vla2RheXMoImxvbmciLCEwKSwxKTtjYXNlIloiOmNhc2UiWloiOnJldHVybiBHcihuZXcgUmVnRXhwKGAoWystXSR7by5zb3VyY2V9KSg/OjooJHtyLnNvdXJjZX0pKT9gKSwyKTtjYXNlIlpaWiI6cmV0dXJuIEdyKG5ldyBSZWdFeHAoYChbKy1dJHtvLnNvdXJjZX0pKCR7ci5zb3VyY2V9KT9gKSwyKTtjYXNlInoiOnJldHVybiBodCgvW2Etel8rLS9dezEsMjU2fT8vaSk7Y2FzZSIgIjpyZXR1cm4gaHQoL1teXFNcblxyXS8pO2RlZmF1bHQ6cmV0dXJuIGgoTSl9fSkodCl8fHtpbnZhbGlkUmVhc29uOkVsfTtyZXR1cm4gUC50b2tlbj10LFB9Y29uc3QgRGw9e3llYXI6eyIyLWRpZ2l0IjoieXkiLG51bWVyaWM6Inl5eXl5In0sbW9udGg6e251bWVyaWM6Ik0iLCIyLWRpZ2l0IjoiTU0iLHNob3J0OiJNTU0iLGxvbmc6Ik1NTU0ifSxkYXk6e251bWVyaWM6ImQiLCIyLWRpZ2l0IjoiZGQifSx3ZWVrZGF5OntzaG9ydDoiRUVFIixsb25nOiJFRUVFIn0sZGF5cGVyaW9kOiJhIixkYXlQZXJpb2Q6ImEiLGhvdXIxMjp7bnVtZXJpYzoiaCIsIjItZGlnaXQiOiJoaCJ9LGhvdXIyNDp7bnVtZXJpYzoiSCIsIjItZGlnaXQiOiJISCJ9LG1pbnV0ZTp7bnVtZXJpYzoibSIsIjItZGlnaXQiOiJtbSJ9LHNlY29uZDp7bnVtZXJpYzoicyIsIjItZGlnaXQiOiJzcyJ9LHRpbWVab25lTmFtZTp7bG9uZzoiWlpaWloiLHNob3J0OiJaWloifX07ZnVuY3Rpb24gQ2wodCxlLG4pe2NvbnN0e3R5cGU6cix2YWx1ZTpzfT10O2lmKHI9PT0ibGl0ZXJhbCIpe2NvbnN0IGw9L15ccyskLy50ZXN0KHMpO3JldHVybntsaXRlcmFsOiFsLHZhbDpsPyIgIjpzfX1jb25zdCBpPWVbcl07bGV0IGE9cjtyPT09ImhvdXIiJiYoZS5ob3VyMTIhPW51bGw/YT1lLmhvdXIxMj8iaG91cjEyIjoiaG91cjI0IjplLmhvdXJDeWNsZSE9bnVsbD9lLmhvdXJDeWNsZT09PSJoMTEifHxlLmhvdXJDeWNsZT09PSJoMTIiP2E9ImhvdXIxMiI6YT0iaG91cjI0IjphPW4uaG91cjEyPyJob3VyMTIiOiJob3VyMjQiKTtsZXQgbz1EbFthXTtpZih0eXBlb2Ygbz09Im9iamVjdCImJihvPW9baV0pLG8pcmV0dXJue2xpdGVyYWw6ITEsdmFsOm99fWZ1bmN0aW9uIEZsKHQpe3JldHVybltgXiR7dC5tYXAobj0+bi5yZWdleCkucmVkdWNlKChuLHIpPT5gJHtufSgke3Iuc291cmNlfSlgLCIiKX0kYCx0XX1mdW5jdGlvbiBBbCh0LGUsbil7Y29uc3Qgcj10Lm1hdGNoKGUpO2lmKHIpe2NvbnN0IHM9e307bGV0IGk9MTtmb3IoY29uc3QgYSBpbiBuKWlmKGJlKG4sYSkpe2NvbnN0IG89blthXSxsPW8uZ3JvdXBzP28uZ3JvdXBzKzE6MTshby5saXRlcmFsJiZvLnRva2VuJiYoc1tvLnRva2VuLnZhbFswXV09by5kZXNlcihyLnNsaWNlKGksaStsKSkpLGkrPWx9cmV0dXJuW3Isc119ZWxzZSByZXR1cm5bcix7fV19ZnVuY3Rpb24gVmwodCl7Y29uc3QgZT1pPT57c3dpdGNoKGkpe2Nhc2UiUyI6cmV0dXJuIm1pbGxpc2Vjb25kIjtjYXNlInMiOnJldHVybiJzZWNvbmQiO2Nhc2UibSI6cmV0dXJuIm1pbnV0ZSI7Y2FzZSJoIjpjYXNlIkgiOnJldHVybiJob3VyIjtjYXNlImQiOnJldHVybiJkYXkiO2Nhc2UibyI6cmV0dXJuIm9yZGluYWwiO2Nhc2UiTCI6Y2FzZSJNIjpyZXR1cm4ibW9udGgiO2Nhc2UieSI6cmV0dXJuInllYXIiO2Nhc2UiRSI6Y2FzZSJjIjpyZXR1cm4id2Vla2RheSI7Y2FzZSJXIjpyZXR1cm4id2Vla051bWJlciI7Y2FzZSJrIjpyZXR1cm4id2Vla1llYXIiO2Nhc2UicSI6cmV0dXJuInF1YXJ0ZXIiO2RlZmF1bHQ6cmV0dXJuIG51bGx9fTtsZXQgbj1udWxsLHI7cmV0dXJuIHkodC56KXx8KG49Si5jcmVhdGUodC56KSkseSh0LlopfHwobnx8KG49bmV3IHgodC5aKSkscj10LlopLHkodC5xKXx8KHQuTT0odC5xLTEpKjMrMSkseSh0LmgpfHwodC5oPDEyJiZ0LmE9PT0xP3QuaCs9MTI6dC5oPT09MTImJnQuYT09PTAmJih0Lmg9MCkpLHQuRz09PTAmJnQueSYmKHQueT0tdC55KSx5KHQudSl8fCh0LlM9UHQodC51KSksW09iamVjdC5rZXlzKHQpLnJlZHVjZSgoaSxhKT0+e2NvbnN0IG89ZShhKTtyZXR1cm4gbyYmKGlbb109dFthXSksaX0se30pLG4scl19bGV0IEp0PW51bGw7ZnVuY3Rpb24gV2woKXtyZXR1cm4gSnR8fChKdD1nLmZyb21NaWxsaXMoMTU1NTU1NTU1NTU1NSkpLEp0fWZ1bmN0aW9uIExsKHQsZSl7aWYodC5saXRlcmFsKXJldHVybiB0O2NvbnN0IG49Ti5tYWNyb1Rva2VuVG9Gb3JtYXRPcHRzKHQudmFsKSxyPVFyKG4sZSk7cmV0dXJuIHI9PW51bGx8fHIuaW5jbHVkZXModm9pZCAwKT90OnJ9ZnVuY3Rpb24gSnIodCxlKXtyZXR1cm4gQXJyYXkucHJvdG90eXBlLmNvbmNhdCguLi50Lm1hcChuPT5MbChuLGUpKSl9ZnVuY3Rpb24gQnIodCxlLG4pe2NvbnN0IHI9SnIoTi5wYXJzZUZvcm1hdChuKSx0KSxzPXIubWFwKGE9PnhsKGEsdCkpLGk9cy5maW5kKGE9PmEuaW52YWxpZFJlYXNvbik7aWYoaSlyZXR1cm57aW5wdXQ6ZSx0b2tlbnM6cixpbnZhbGlkUmVhc29uOmkuaW52YWxpZFJlYXNvbn07e2NvbnN0W2Esb109RmwocyksbD1SZWdFeHAoYSwiaSIpLFt1LGNdPUFsKGUsbCxvKSxbZCx3LGhdPWM/VmwoYyk6W251bGwsbnVsbCx2b2lkIDBdO2lmKGJlKGMsImEiKSYmYmUoYywiSCIpKXRocm93IG5ldyBrZSgiQ2FuJ3QgaW5jbHVkZSBtZXJpZGllbSB3aGVuIHNwZWNpZnlpbmcgMjQtaG91ciBmb3JtYXQiKTtyZXR1cm57aW5wdXQ6ZSx0b2tlbnM6cixyZWdleDpsLHJhd01hdGNoZXM6dSxtYXRjaGVzOmMscmVzdWx0OmQsem9uZTp3LHNwZWNpZmljT2Zmc2V0Omh9fX1mdW5jdGlvbiAkbCh0LGUsbil7Y29uc3R7cmVzdWx0OnIsem9uZTpzLHNwZWNpZmljT2Zmc2V0OmksaW52YWxpZFJlYXNvbjphfT1Ccih0LGUsbik7cmV0dXJuW3IscyxpLGFdfWZ1bmN0aW9uIFFyKHQsZSl7aWYoIXQpcmV0dXJuIG51bGw7Y29uc3Qgcj1OLmNyZWF0ZShlLHQpLmR0Rm9ybWF0dGVyKFdsKCkpLHM9ci5mb3JtYXRUb1BhcnRzKCksaT1yLnJlc29sdmVkT3B0aW9ucygpO3JldHVybiBzLm1hcChhPT5DbChhLHQsaSkpfWNvbnN0IEJ0PSJJbnZhbGlkIERhdGVUaW1lIixLcj04NjRlMTM7ZnVuY3Rpb24gbXQodCl7cmV0dXJuIG5ldyB6KCJ1bnN1cHBvcnRlZCB6b25lIixgdGhlIHpvbmUgIiR7dC5uYW1lfSIgaXMgbm90IHN1cHBvcnRlZGApfWZ1bmN0aW9uIFF0KHQpe3JldHVybiB0LndlZWtEYXRhPT09bnVsbCYmKHQud2Vla0RhdGE9aXQodC5jKSksdC53ZWVrRGF0YX1mdW5jdGlvbiBLdCh0KXtyZXR1cm4gdC5sb2NhbFdlZWtEYXRhPT09bnVsbCYmKHQubG9jYWxXZWVrRGF0YT1pdCh0LmMsdC5sb2MuZ2V0TWluRGF5c0luRmlyc3RXZWVrKCksdC5sb2MuZ2V0U3RhcnRPZldlZWsoKSkpLHQubG9jYWxXZWVrRGF0YX1mdW5jdGlvbiBoZSh0LGUpe2NvbnN0IG49e3RzOnQudHMsem9uZTp0LnpvbmUsYzp0LmMsbzp0Lm8sbG9jOnQubG9jLGludmFsaWQ6dC5pbnZhbGlkfTtyZXR1cm4gbmV3IGcoey4uLm4sLi4uZSxvbGQ6bn0pfWZ1bmN0aW9uIFhyKHQsZSxuKXtsZXQgcj10LWUqNjAqMWUzO2NvbnN0IHM9bi5vZmZzZXQocik7aWYoZT09PXMpcmV0dXJuW3IsZV07ci09KHMtZSkqNjAqMWUzO2NvbnN0IGk9bi5vZmZzZXQocik7cmV0dXJuIHM9PT1pP1tyLHNdOlt0LU1hdGgubWluKHMsaSkqNjAqMWUzLE1hdGgubWF4KHMsaSldfWZ1bmN0aW9uIHl0KHQsZSl7dCs9ZSo2MCoxZTM7Y29uc3Qgbj1uZXcgRGF0ZSh0KTtyZXR1cm57eWVhcjpuLmdldFVUQ0Z1bGxZZWFyKCksbW9udGg6bi5nZXRVVENNb250aCgpKzEsZGF5Om4uZ2V0VVRDRGF0ZSgpLGhvdXI6bi5nZXRVVENIb3VycygpLG1pbnV0ZTpuLmdldFVUQ01pbnV0ZXMoKSxzZWNvbmQ6bi5nZXRVVENTZWNvbmRzKCksbWlsbGlzZWNvbmQ6bi5nZXRVVENNaWxsaXNlY29uZHMoKX19ZnVuY3Rpb24gZ3QodCxlLG4pe3JldHVybiBYcihsdCh0KSxlLG4pfWZ1bmN0aW9uIGVzKHQsZSl7Y29uc3Qgbj10Lm8scj10LmMueWVhcitNYXRoLnRydW5jKGUueWVhcnMpLHM9dC5jLm1vbnRoK01hdGgudHJ1bmMoZS5tb250aHMpK01hdGgudHJ1bmMoZS5xdWFydGVycykqMyxpPXsuLi50LmMseWVhcjpyLG1vbnRoOnMsZGF5Ok1hdGgubWluKHQuYy5kYXksb3QocixzKSkrTWF0aC50cnVuYyhlLmRheXMpK01hdGgudHJ1bmMoZS53ZWVrcykqN30sYT1ULmZyb21PYmplY3Qoe3llYXJzOmUueWVhcnMtTWF0aC50cnVuYyhlLnllYXJzKSxxdWFydGVyczplLnF1YXJ0ZXJzLU1hdGgudHJ1bmMoZS5xdWFydGVycyksbW9udGhzOmUubW9udGhzLU1hdGgudHJ1bmMoZS5tb250aHMpLHdlZWtzOmUud2Vla3MtTWF0aC50cnVuYyhlLndlZWtzKSxkYXlzOmUuZGF5cy1NYXRoLnRydW5jKGUuZGF5cyksaG91cnM6ZS5ob3VycyxtaW51dGVzOmUubWludXRlcyxzZWNvbmRzOmUuc2Vjb25kcyxtaWxsaXNlY29uZHM6ZS5taWxsaXNlY29uZHN9KS5hcygibWlsbGlzZWNvbmRzIiksbz1sdChpKTtsZXRbbCx1XT1YcihvLG4sdC56b25lKTtyZXR1cm4gYSE9PTAmJihsKz1hLHU9dC56b25lLm9mZnNldChsKSkse3RzOmwsbzp1fX1mdW5jdGlvbiBVZSh0LGUsbixyLHMsaSl7Y29uc3R7c2V0Wm9uZTphLHpvbmU6b309bjtpZih0JiZPYmplY3Qua2V5cyh0KS5sZW5ndGghPT0wfHxlKXtjb25zdCBsPWV8fG8sdT1nLmZyb21PYmplY3QodCx7Li4ubix6b25lOmwsc3BlY2lmaWNPZmZzZXQ6aX0pO3JldHVybiBhP3U6dS5zZXRab25lKG8pfWVsc2UgcmV0dXJuIGcuaW52YWxpZChuZXcgeigidW5wYXJzYWJsZSIsYHRoZSBpbnB1dCAiJHtzfSIgY2FuJ3QgYmUgcGFyc2VkIGFzICR7cn1gKSl9ZnVuY3Rpb24gd3QodCxlLG49ITApe3JldHVybiB0LmlzVmFsaWQ/Ti5jcmVhdGUoTy5jcmVhdGUoImVuLVVTIikse2FsbG93WjpuLGZvcmNlU2ltcGxlOiEwfSkuZm9ybWF0RGF0ZVRpbWVGcm9tU3RyaW5nKHQsZSk6bnVsbH1mdW5jdGlvbiBYdCh0LGUpe2NvbnN0IG49dC5jLnllYXI+OTk5OXx8dC5jLnllYXI8MDtsZXQgcj0iIjtyZXR1cm4gbiYmdC5jLnllYXI+PTAmJihyKz0iKyIpLHIrPUkodC5jLnllYXIsbj82OjQpLGU/KHIrPSItIixyKz1JKHQuYy5tb250aCkscis9Ii0iLHIrPUkodC5jLmRheSkpOihyKz1JKHQuYy5tb250aCkscis9SSh0LmMuZGF5KSkscn1mdW5jdGlvbiB0cyh0LGUsbixyLHMsaSl7bGV0IGE9SSh0LmMuaG91cik7cmV0dXJuIGU/KGErPSI6IixhKz1JKHQuYy5taW51dGUpLCh0LmMubWlsbGlzZWNvbmQhPT0wfHx0LmMuc2Vjb25kIT09MHx8IW4pJiYoYSs9IjoiKSk6YSs9SSh0LmMubWludXRlKSwodC5jLm1pbGxpc2Vjb25kIT09MHx8dC5jLnNlY29uZCE9PTB8fCFuKSYmKGErPUkodC5jLnNlY29uZCksKHQuYy5taWxsaXNlY29uZCE9PTB8fCFyKSYmKGErPSIuIixhKz1JKHQuYy5taWxsaXNlY29uZCwzKSkpLHMmJih0LmlzT2Zmc2V0Rml4ZWQmJnQub2Zmc2V0PT09MCYmIWk/YSs9IloiOnQubzwwPyhhKz0iLSIsYSs9SShNYXRoLnRydW5jKC10Lm8vNjApKSxhKz0iOiIsYSs9SShNYXRoLnRydW5jKC10Lm8lNjApKSk6KGErPSIrIixhKz1JKE1hdGgudHJ1bmModC5vLzYwKSksYSs9IjoiLGErPUkoTWF0aC50cnVuYyh0Lm8lNjApKSkpLGkmJihhKz0iWyIrdC56b25lLmlhbmFOYW1lKyJdIiksYX1jb25zdCBucz17bW9udGg6MSxkYXk6MSxob3VyOjAsbWludXRlOjAsc2Vjb25kOjAsbWlsbGlzZWNvbmQ6MH0sX2w9e3dlZWtOdW1iZXI6MSx3ZWVrZGF5OjEsaG91cjowLG1pbnV0ZTowLHNlY29uZDowLG1pbGxpc2Vjb25kOjB9LHpsPXtvcmRpbmFsOjEsaG91cjowLG1pbnV0ZTowLHNlY29uZDowLG1pbGxpc2Vjb25kOjB9LHJzPVsieWVhciIsIm1vbnRoIiwiZGF5IiwiaG91ciIsIm1pbnV0ZSIsInNlY29uZCIsIm1pbGxpc2Vjb25kIl0sUmw9WyJ3ZWVrWWVhciIsIndlZWtOdW1iZXIiLCJ3ZWVrZGF5IiwiaG91ciIsIm1pbnV0ZSIsInNlY29uZCIsIm1pbGxpc2Vjb25kIl0sWmw9WyJ5ZWFyIiwib3JkaW5hbCIsImhvdXIiLCJtaW51dGUiLCJzZWNvbmQiLCJtaWxsaXNlY29uZCJdO2Z1bmN0aW9uIFBsKHQpe2NvbnN0IGU9e3llYXI6InllYXIiLHllYXJzOiJ5ZWFyIixtb250aDoibW9udGgiLG1vbnRoczoibW9udGgiLGRheToiZGF5IixkYXlzOiJkYXkiLGhvdXI6ImhvdXIiLGhvdXJzOiJob3VyIixtaW51dGU6Im1pbnV0ZSIsbWludXRlczoibWludXRlIixxdWFydGVyOiJxdWFydGVyIixxdWFydGVyczoicXVhcnRlciIsc2Vjb25kOiJzZWNvbmQiLHNlY29uZHM6InNlY29uZCIsbWlsbGlzZWNvbmQ6Im1pbGxpc2Vjb25kIixtaWxsaXNlY29uZHM6Im1pbGxpc2Vjb25kIix3ZWVrZGF5OiJ3ZWVrZGF5Iix3ZWVrZGF5czoid2Vla2RheSIsd2Vla251bWJlcjoid2Vla051bWJlciIsd2Vla3NudW1iZXI6IndlZWtOdW1iZXIiLHdlZWtudW1iZXJzOiJ3ZWVrTnVtYmVyIix3ZWVreWVhcjoid2Vla1llYXIiLHdlZWt5ZWFyczoid2Vla1llYXIiLG9yZGluYWw6Im9yZGluYWwifVt0LnRvTG93ZXJDYXNlKCldO2lmKCFlKXRocm93IG5ldyBBbih0KTtyZXR1cm4gZX1mdW5jdGlvbiBzcyh0KXtzd2l0Y2godC50b0xvd2VyQ2FzZSgpKXtjYXNlImxvY2Fsd2Vla2RheSI6Y2FzZSJsb2NhbHdlZWtkYXlzIjpyZXR1cm4ibG9jYWxXZWVrZGF5IjtjYXNlImxvY2Fsd2Vla251bWJlciI6Y2FzZSJsb2NhbHdlZWtudW1iZXJzIjpyZXR1cm4ibG9jYWxXZWVrTnVtYmVyIjtjYXNlImxvY2Fsd2Vla3llYXIiOmNhc2UibG9jYWx3ZWVreWVhcnMiOnJldHVybiJsb2NhbFdlZWtZZWFyIjtkZWZhdWx0OnJldHVybiBQbCh0KX19ZnVuY3Rpb24gaXModCxlKXtjb25zdCBuPW5lKGUuem9uZSx2LmRlZmF1bHRab25lKSxyPU8uZnJvbU9iamVjdChlKSxzPXYubm93KCk7bGV0IGksYTtpZih5KHQueWVhcikpaT1zO2Vsc2V7Zm9yKGNvbnN0IHUgb2YgcnMpeSh0W3VdKSYmKHRbdV09bnNbdV0pO2NvbnN0IG89Z3IodCl8fHdyKHQpO2lmKG8pcmV0dXJuIGcuaW52YWxpZChvKTtjb25zdCBsPW4ub2Zmc2V0KHMpO1tpLGFdPWd0KHQsbCxuKX1yZXR1cm4gbmV3IGcoe3RzOmksem9uZTpuLGxvYzpyLG86YX0pfWZ1bmN0aW9uIGFzKHQsZSxuKXtjb25zdCByPXkobi5yb3VuZCk/ITA6bi5yb3VuZCxzPShhLG8pPT4oYT1VdChhLHJ8fG4uY2FsZW5kYXJ5PzA6MiwhMCksZS5sb2MuY2xvbmUobikucmVsRm9ybWF0dGVyKG4pLmZvcm1hdChhLG8pKSxpPWE9Pm4uY2FsZW5kYXJ5P2UuaGFzU2FtZSh0LGEpPzA6ZS5zdGFydE9mKGEpLmRpZmYodC5zdGFydE9mKGEpLGEpLmdldChhKTplLmRpZmYodCxhKS5nZXQoYSk7aWYobi51bml0KXJldHVybiBzKGkobi51bml0KSxuLnVuaXQpO2Zvcihjb25zdCBhIG9mIG4udW5pdHMpe2NvbnN0IG89aShhKTtpZihNYXRoLmFicyhvKT49MSlyZXR1cm4gcyhvLGEpfXJldHVybiBzKHQ+ZT8tMDowLG4udW5pdHNbbi51bml0cy5sZW5ndGgtMV0pfWZ1bmN0aW9uIG9zKHQpe2xldCBlPXt9LG47cmV0dXJuIHQubGVuZ3RoPjAmJnR5cGVvZiB0W3QubGVuZ3RoLTFdPT0ib2JqZWN0Ij8oZT10W3QubGVuZ3RoLTFdLG49QXJyYXkuZnJvbSh0KS5zbGljZSgwLHQubGVuZ3RoLTEpKTpuPUFycmF5LmZyb20odCksW2Usbl19Y2xhc3MgZ3tjb25zdHJ1Y3RvcihlKXtjb25zdCBuPWUuem9uZXx8di5kZWZhdWx0Wm9uZTtsZXQgcj1lLmludmFsaWR8fChOdW1iZXIuaXNOYU4oZS50cyk/bmV3IHooImludmFsaWQgaW5wdXQiKTpudWxsKXx8KG4uaXNWYWxpZD9udWxsOm10KG4pKTt0aGlzLnRzPXkoZS50cyk/di5ub3coKTplLnRzO2xldCBzPW51bGwsaT1udWxsO2lmKCFyKWlmKGUub2xkJiZlLm9sZC50cz09PXRoaXMudHMmJmUub2xkLnpvbmUuZXF1YWxzKG4pKVtzLGldPVtlLm9sZC5jLGUub2xkLm9dO2Vsc2V7Y29uc3Qgbz1uLm9mZnNldCh0aGlzLnRzKTtzPXl0KHRoaXMudHMsbykscj1OdW1iZXIuaXNOYU4ocy55ZWFyKT9uZXcgeigiaW52YWxpZCBpbnB1dCIpOm51bGwscz1yP251bGw6cyxpPXI/bnVsbDpvfXRoaXMuX3pvbmU9bix0aGlzLmxvYz1lLmxvY3x8Ty5jcmVhdGUoKSx0aGlzLmludmFsaWQ9cix0aGlzLndlZWtEYXRhPW51bGwsdGhpcy5sb2NhbFdlZWtEYXRhPW51bGwsdGhpcy5jPXMsdGhpcy5vPWksdGhpcy5pc0x1eG9uRGF0ZVRpbWU9ITB9c3RhdGljIG5vdygpe3JldHVybiBuZXcgZyh7fSl9c3RhdGljIGxvY2FsKCl7Y29uc3RbZSxuXT1vcyhhcmd1bWVudHMpLFtyLHMsaSxhLG8sbCx1XT1uO3JldHVybiBpcyh7eWVhcjpyLG1vbnRoOnMsZGF5OmksaG91cjphLG1pbnV0ZTpvLHNlY29uZDpsLG1pbGxpc2Vjb25kOnV9LGUpfXN0YXRpYyB1dGMoKXtjb25zdFtlLG5dPW9zKGFyZ3VtZW50cyksW3IscyxpLGEsbyxsLHVdPW47cmV0dXJuIGUuem9uZT14LnV0Y0luc3RhbmNlLGlzKHt5ZWFyOnIsbW9udGg6cyxkYXk6aSxob3VyOmEsbWludXRlOm8sc2Vjb25kOmwsbWlsbGlzZWNvbmQ6dX0sZSl9c3RhdGljIGZyb21KU0RhdGUoZSxuPXt9KXtjb25zdCByPXBvKGUpP2UudmFsdWVPZigpOk5hTjtpZihOdW1iZXIuaXNOYU4ocikpcmV0dXJuIGcuaW52YWxpZCgiaW52YWxpZCBpbnB1dCIpO2NvbnN0IHM9bmUobi56b25lLHYuZGVmYXVsdFpvbmUpO3JldHVybiBzLmlzVmFsaWQ/bmV3IGcoe3RzOnIsem9uZTpzLGxvYzpPLmZyb21PYmplY3Qobil9KTpnLmludmFsaWQobXQocykpfXN0YXRpYyBmcm9tTWlsbGlzKGUsbj17fSl7aWYoY2UoZSkpcmV0dXJuIGU8LUtyfHxlPktyP2cuaW52YWxpZCgiVGltZXN0YW1wIG91dCBvZiByYW5nZSIpOm5ldyBnKHt0czplLHpvbmU6bmUobi56b25lLHYuZGVmYXVsdFpvbmUpLGxvYzpPLmZyb21PYmplY3Qobil9KTt0aHJvdyBuZXcgRChgZnJvbU1pbGxpcyByZXF1aXJlcyBhIG51bWVyaWNhbCBpbnB1dCwgYnV0IHJlY2VpdmVkIGEgJHt0eXBlb2YgZX0gd2l0aCB2YWx1ZSAke2V9YCl9c3RhdGljIGZyb21TZWNvbmRzKGUsbj17fSl7aWYoY2UoZSkpcmV0dXJuIG5ldyBnKHt0czplKjFlMyx6b25lOm5lKG4uem9uZSx2LmRlZmF1bHRab25lKSxsb2M6Ty5mcm9tT2JqZWN0KG4pfSk7dGhyb3cgbmV3IEQoImZyb21TZWNvbmRzIHJlcXVpcmVzIGEgbnVtZXJpY2FsIGlucHV0Iil9c3RhdGljIGZyb21PYmplY3QoZSxuPXt9KXtlPWV8fHt9O2NvbnN0IHI9bmUobi56b25lLHYuZGVmYXVsdFpvbmUpO2lmKCFyLmlzVmFsaWQpcmV0dXJuIGcuaW52YWxpZChtdChyKSk7Y29uc3Qgcz1PLmZyb21PYmplY3QobiksaT1jdChlLHNzKSx7bWluRGF5c0luRmlyc3RXZWVrOmEsc3RhcnRPZldlZWs6b309eXIoaSxzKSxsPXYubm93KCksdT15KG4uc3BlY2lmaWNPZmZzZXQpP3Iub2Zmc2V0KGwpOm4uc3BlY2lmaWNPZmZzZXQsYz0heShpLm9yZGluYWwpLGQ9IXkoaS55ZWFyKSx3PSF5KGkubW9udGgpfHwheShpLmRheSksaD1kfHx3LGs9aS53ZWVrWWVhcnx8aS53ZWVrTnVtYmVyO2lmKChofHxjKSYmayl0aHJvdyBuZXcga2UoIkNhbid0IG1peCB3ZWVrWWVhci93ZWVrTnVtYmVyIHVuaXRzIHdpdGggeWVhci9tb250aC9kYXkgb3Igb3JkaW5hbHMiKTtpZih3JiZjKXRocm93IG5ldyBrZSgiQ2FuJ3QgbWl4IG9yZGluYWwgZGF0ZXMgd2l0aCBtb250aC9kYXkiKTtjb25zdCBQPWt8fGkud2Vla2RheSYmIWg7bGV0IE0saixCPXl0KGwsdSk7UD8oTT1SbCxqPV9sLEI9aXQoQixhLG8pKTpjPyhNPVpsLGo9emwsQj1SdChCKSk6KE09cnMsaj1ucyk7bGV0IEZlPSExO2Zvcihjb25zdCBLIG9mIE0pe2NvbnN0IFR0PWlbS107eShUdCk/RmU/aVtLXT1qW0tdOmlbS109QltLXTpGZT0hMH1jb25zdCBwdD1QP3lvKGksYSxvKTpjP2dvKGkpOmdyKGkpLHE9cHR8fHdyKGkpO2lmKHEpcmV0dXJuIGcuaW52YWxpZChxKTtjb25zdCBtZT1QP2hyKGksYSxvKTpjP21yKGkpOmksW3llLGllXT1ndChtZSx1LHIpLFE9bmV3IGcoe3RzOnllLHpvbmU6cixvOmllLGxvYzpzfSk7cmV0dXJuIGkud2Vla2RheSYmaCYmZS53ZWVrZGF5IT09US53ZWVrZGF5P2cuaW52YWxpZCgibWlzbWF0Y2hlZCB3ZWVrZGF5IixgeW91IGNhbid0IHNwZWNpZnkgYm90aCBhIHdlZWtkYXkgb2YgJHtpLndlZWtkYXl9IGFuZCBhIGRhdGUgb2YgJHtRLnRvSVNPKCl9YCk6UX1zdGF0aWMgZnJvbUlTTyhlLG49e30pe2NvbnN0W3Isc109b2woZSk7cmV0dXJuIFVlKHIscyxuLCJJU08gODYwMSIsZSl9c3RhdGljIGZyb21SRkMyODIyKGUsbj17fSl7Y29uc3RbcixzXT1sbChlKTtyZXR1cm4gVWUocixzLG4sIlJGQyAyODIyIixlKX1zdGF0aWMgZnJvbUhUVFAoZSxuPXt9KXtjb25zdFtyLHNdPXVsKGUpO3JldHVybiBVZShyLHMsbiwiSFRUUCIsbil9c3RhdGljIGZyb21Gb3JtYXQoZSxuLHI9e30pe2lmKHkoZSl8fHkobikpdGhyb3cgbmV3IEQoImZyb21Gb3JtYXQgcmVxdWlyZXMgYW4gaW5wdXQgc3RyaW5nIGFuZCBhIGZvcm1hdCIpO2NvbnN0e2xvY2FsZTpzPW51bGwsbnVtYmVyaW5nU3lzdGVtOmk9bnVsbH09cixhPU8uZnJvbU9wdHMoe2xvY2FsZTpzLG51bWJlcmluZ1N5c3RlbTppLGRlZmF1bHRUb0VOOiEwfSksW28sbCx1LGNdPSRsKGEsZSxuKTtyZXR1cm4gYz9nLmludmFsaWQoYyk6VWUobyxsLHIsYGZvcm1hdCAke259YCxlLHUpfXN0YXRpYyBmcm9tU3RyaW5nKGUsbixyPXt9KXtyZXR1cm4gZy5mcm9tRm9ybWF0KGUsbixyKX1zdGF0aWMgZnJvbVNRTChlLG49e30pe2NvbnN0W3Isc109Z2woZSk7cmV0dXJuIFVlKHIscyxuLCJTUUwiLGUpfXN0YXRpYyBpbnZhbGlkKGUsbj1udWxsKXtpZighZSl0aHJvdyBuZXcgRCgibmVlZCB0byBzcGVjaWZ5IGEgcmVhc29uIHRoZSBEYXRlVGltZSBpcyBpbnZhbGlkIik7Y29uc3Qgcj1lIGluc3RhbmNlb2Ygej9lOm5ldyB6KGUsbik7aWYodi50aHJvd09uSW52YWxpZCl0aHJvdyBuZXcgSGEocik7cmV0dXJuIG5ldyBnKHtpbnZhbGlkOnJ9KX1zdGF0aWMgaXNEYXRlVGltZShlKXtyZXR1cm4gZSYmZS5pc0x1eG9uRGF0ZVRpbWV8fCExfXN0YXRpYyBwYXJzZUZvcm1hdEZvck9wdHMoZSxuPXt9KXtjb25zdCByPVFyKGUsTy5mcm9tT2JqZWN0KG4pKTtyZXR1cm4gcj9yLm1hcChzPT5zP3MudmFsOm51bGwpLmpvaW4oIiIpOm51bGx9c3RhdGljIGV4cGFuZEZvcm1hdChlLG49e30pe3JldHVybiBKcihOLnBhcnNlRm9ybWF0KGUpLE8uZnJvbU9iamVjdChuKSkubWFwKHM9PnMudmFsKS5qb2luKCIiKX1nZXQoZSl7cmV0dXJuIHRoaXNbZV19Z2V0IGlzVmFsaWQoKXtyZXR1cm4gdGhpcy5pbnZhbGlkPT09bnVsbH1nZXQgaW52YWxpZFJlYXNvbigpe3JldHVybiB0aGlzLmludmFsaWQ/dGhpcy5pbnZhbGlkLnJlYXNvbjpudWxsfWdldCBpbnZhbGlkRXhwbGFuYXRpb24oKXtyZXR1cm4gdGhpcy5pbnZhbGlkP3RoaXMuaW52YWxpZC5leHBsYW5hdGlvbjpudWxsfWdldCBsb2NhbGUoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMubG9jLmxvY2FsZTpudWxsfWdldCBudW1iZXJpbmdTeXN0ZW0oKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMubG9jLm51bWJlcmluZ1N5c3RlbTpudWxsfWdldCBvdXRwdXRDYWxlbmRhcigpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy5sb2Mub3V0cHV0Q2FsZW5kYXI6bnVsbH1nZXQgem9uZSgpe3JldHVybiB0aGlzLl96b25lfWdldCB6b25lTmFtZSgpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy56b25lLm5hbWU6bnVsbH1nZXQgeWVhcigpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy5jLnllYXI6TmFOfWdldCBxdWFydGVyKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD9NYXRoLmNlaWwodGhpcy5jLm1vbnRoLzMpOk5hTn1nZXQgbW9udGgoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMuYy5tb250aDpOYU59Z2V0IGRheSgpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy5jLmRheTpOYU59Z2V0IGhvdXIoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMuYy5ob3VyOk5hTn1nZXQgbWludXRlKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLmMubWludXRlOk5hTn1nZXQgc2Vjb25kKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLmMuc2Vjb25kOk5hTn1nZXQgbWlsbGlzZWNvbmQoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMuYy5taWxsaXNlY29uZDpOYU59Z2V0IHdlZWtZZWFyKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD9RdCh0aGlzKS53ZWVrWWVhcjpOYU59Z2V0IHdlZWtOdW1iZXIoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP1F0KHRoaXMpLndlZWtOdW1iZXI6TmFOfWdldCB3ZWVrZGF5KCl7cmV0dXJuIHRoaXMuaXNWYWxpZD9RdCh0aGlzKS53ZWVrZGF5Ok5hTn1nZXQgaXNXZWVrZW5kKCl7cmV0dXJuIHRoaXMuaXNWYWxpZCYmdGhpcy5sb2MuZ2V0V2Vla2VuZERheXMoKS5pbmNsdWRlcyh0aGlzLndlZWtkYXkpfWdldCBsb2NhbFdlZWtkYXkoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP0t0KHRoaXMpLndlZWtkYXk6TmFOfWdldCBsb2NhbFdlZWtOdW1iZXIoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP0t0KHRoaXMpLndlZWtOdW1iZXI6TmFOfWdldCBsb2NhbFdlZWtZZWFyKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD9LdCh0aGlzKS53ZWVrWWVhcjpOYU59Z2V0IG9yZGluYWwoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP1J0KHRoaXMuYykub3JkaW5hbDpOYU59Z2V0IG1vbnRoU2hvcnQoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP2R0Lm1vbnRocygic2hvcnQiLHtsb2NPYmo6dGhpcy5sb2N9KVt0aGlzLm1vbnRoLTFdOm51bGx9Z2V0IG1vbnRoTG9uZygpe3JldHVybiB0aGlzLmlzVmFsaWQ/ZHQubW9udGhzKCJsb25nIix7bG9jT2JqOnRoaXMubG9jfSlbdGhpcy5tb250aC0xXTpudWxsfWdldCB3ZWVrZGF5U2hvcnQoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP2R0LndlZWtkYXlzKCJzaG9ydCIse2xvY09iajp0aGlzLmxvY30pW3RoaXMud2Vla2RheS0xXTpudWxsfWdldCB3ZWVrZGF5TG9uZygpe3JldHVybiB0aGlzLmlzVmFsaWQ/ZHQud2Vla2RheXMoImxvbmciLHtsb2NPYmo6dGhpcy5sb2N9KVt0aGlzLndlZWtkYXktMV06bnVsbH1nZXQgb2Zmc2V0KCl7cmV0dXJuIHRoaXMuaXNWYWxpZD8rdGhpcy5vOk5hTn1nZXQgb2Zmc2V0TmFtZVNob3J0KCl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLnpvbmUub2Zmc2V0TmFtZSh0aGlzLnRzLHtmb3JtYXQ6InNob3J0Iixsb2NhbGU6dGhpcy5sb2NhbGV9KTpudWxsfWdldCBvZmZzZXROYW1lTG9uZygpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy56b25lLm9mZnNldE5hbWUodGhpcy50cyx7Zm9ybWF0OiJsb25nIixsb2NhbGU6dGhpcy5sb2NhbGV9KTpudWxsfWdldCBpc09mZnNldEZpeGVkKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLnpvbmUuaXNVbml2ZXJzYWw6bnVsbH1nZXQgaXNJbkRTVCgpe3JldHVybiB0aGlzLmlzT2Zmc2V0Rml4ZWQ/ITE6dGhpcy5vZmZzZXQ+dGhpcy5zZXQoe21vbnRoOjEsZGF5OjF9KS5vZmZzZXR8fHRoaXMub2Zmc2V0PnRoaXMuc2V0KHttb250aDo1fSkub2Zmc2V0fWdldFBvc3NpYmxlT2Zmc2V0cygpe2lmKCF0aGlzLmlzVmFsaWR8fHRoaXMuaXNPZmZzZXRGaXhlZClyZXR1cm5bdGhpc107Y29uc3QgZT04NjRlNSxuPTZlNCxyPWx0KHRoaXMuYykscz10aGlzLnpvbmUub2Zmc2V0KHItZSksaT10aGlzLnpvbmUub2Zmc2V0KHIrZSksYT10aGlzLnpvbmUub2Zmc2V0KHItcypuKSxvPXRoaXMuem9uZS5vZmZzZXQoci1pKm4pO2lmKGE9PT1vKXJldHVyblt0aGlzXTtjb25zdCBsPXItYSpuLHU9ci1vKm4sYz15dChsLGEpLGQ9eXQodSxvKTtyZXR1cm4gYy5ob3VyPT09ZC5ob3VyJiZjLm1pbnV0ZT09PWQubWludXRlJiZjLnNlY29uZD09PWQuc2Vjb25kJiZjLm1pbGxpc2Vjb25kPT09ZC5taWxsaXNlY29uZD9baGUodGhpcyx7dHM6bH0pLGhlKHRoaXMse3RzOnV9KV06W3RoaXNdfWdldCBpc0luTGVhcFllYXIoKXtyZXR1cm4gX2UodGhpcy55ZWFyKX1nZXQgZGF5c0luTW9udGgoKXtyZXR1cm4gb3QodGhpcy55ZWFyLHRoaXMubW9udGgpfWdldCBkYXlzSW5ZZWFyKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD92ZSh0aGlzLnllYXIpOk5hTn1nZXQgd2Vla3NJbldlZWtZZWFyKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD96ZSh0aGlzLndlZWtZZWFyKTpOYU59Z2V0IHdlZWtzSW5Mb2NhbFdlZWtZZWFyKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD96ZSh0aGlzLmxvY2FsV2Vla1llYXIsdGhpcy5sb2MuZ2V0TWluRGF5c0luRmlyc3RXZWVrKCksdGhpcy5sb2MuZ2V0U3RhcnRPZldlZWsoKSk6TmFOfXJlc29sdmVkTG9jYWxlT3B0aW9ucyhlPXt9KXtjb25zdHtsb2NhbGU6bixudW1iZXJpbmdTeXN0ZW06cixjYWxlbmRhcjpzfT1OLmNyZWF0ZSh0aGlzLmxvYy5jbG9uZShlKSxlKS5yZXNvbHZlZE9wdGlvbnModGhpcyk7cmV0dXJue2xvY2FsZTpuLG51bWJlcmluZ1N5c3RlbTpyLG91dHB1dENhbGVuZGFyOnN9fXRvVVRDKGU9MCxuPXt9KXtyZXR1cm4gdGhpcy5zZXRab25lKHguaW5zdGFuY2UoZSksbil9dG9Mb2NhbCgpe3JldHVybiB0aGlzLnNldFpvbmUodi5kZWZhdWx0Wm9uZSl9c2V0Wm9uZShlLHtrZWVwTG9jYWxUaW1lOm49ITEsa2VlcENhbGVuZGFyVGltZTpyPSExfT17fSl7aWYoZT1uZShlLHYuZGVmYXVsdFpvbmUpLGUuZXF1YWxzKHRoaXMuem9uZSkpcmV0dXJuIHRoaXM7aWYoZS5pc1ZhbGlkKXtsZXQgcz10aGlzLnRzO2lmKG58fHIpe2NvbnN0IGk9ZS5vZmZzZXQodGhpcy50cyksYT10aGlzLnRvT2JqZWN0KCk7W3NdPWd0KGEsaSxlKX1yZXR1cm4gaGUodGhpcyx7dHM6cyx6b25lOmV9KX1lbHNlIHJldHVybiBnLmludmFsaWQobXQoZSkpfXJlY29uZmlndXJlKHtsb2NhbGU6ZSxudW1iZXJpbmdTeXN0ZW06bixvdXRwdXRDYWxlbmRhcjpyfT17fSl7Y29uc3Qgcz10aGlzLmxvYy5jbG9uZSh7bG9jYWxlOmUsbnVtYmVyaW5nU3lzdGVtOm4sb3V0cHV0Q2FsZW5kYXI6cn0pO3JldHVybiBoZSh0aGlzLHtsb2M6c30pfXNldExvY2FsZShlKXtyZXR1cm4gdGhpcy5yZWNvbmZpZ3VyZSh7bG9jYWxlOmV9KX1zZXQoZSl7aWYoIXRoaXMuaXNWYWxpZClyZXR1cm4gdGhpcztjb25zdCBuPWN0KGUsc3MpLHttaW5EYXlzSW5GaXJzdFdlZWs6cixzdGFydE9mV2VlazpzfT15cihuLHRoaXMubG9jKSxpPSF5KG4ud2Vla1llYXIpfHwheShuLndlZWtOdW1iZXIpfHwheShuLndlZWtkYXkpLGE9IXkobi5vcmRpbmFsKSxvPSF5KG4ueWVhciksbD0heShuLm1vbnRoKXx8IXkobi5kYXkpLHU9b3x8bCxjPW4ud2Vla1llYXJ8fG4ud2Vla051bWJlcjtpZigodXx8YSkmJmMpdGhyb3cgbmV3IGtlKCJDYW4ndCBtaXggd2Vla1llYXIvd2Vla051bWJlciB1bml0cyB3aXRoIHllYXIvbW9udGgvZGF5IG9yIG9yZGluYWxzIik7aWYobCYmYSl0aHJvdyBuZXcga2UoIkNhbid0IG1peCBvcmRpbmFsIGRhdGVzIHdpdGggbW9udGgvZGF5Iik7bGV0IGQ7aT9kPWhyKHsuLi5pdCh0aGlzLmMscixzKSwuLi5ufSxyLHMpOnkobi5vcmRpbmFsKT8oZD17Li4udGhpcy50b09iamVjdCgpLC4uLm59LHkobi5kYXkpJiYoZC5kYXk9TWF0aC5taW4ob3QoZC55ZWFyLGQubW9udGgpLGQuZGF5KSkpOmQ9bXIoey4uLlJ0KHRoaXMuYyksLi4ubn0pO2NvbnN0W3csaF09Z3QoZCx0aGlzLm8sdGhpcy56b25lKTtyZXR1cm4gaGUodGhpcyx7dHM6dyxvOmh9KX1wbHVzKGUpe2lmKCF0aGlzLmlzVmFsaWQpcmV0dXJuIHRoaXM7Y29uc3Qgbj1ULmZyb21EdXJhdGlvbkxpa2UoZSk7cmV0dXJuIGhlKHRoaXMsZXModGhpcyxuKSl9bWludXMoZSl7aWYoIXRoaXMuaXNWYWxpZClyZXR1cm4gdGhpcztjb25zdCBuPVQuZnJvbUR1cmF0aW9uTGlrZShlKS5uZWdhdGUoKTtyZXR1cm4gaGUodGhpcyxlcyh0aGlzLG4pKX1zdGFydE9mKGUse3VzZUxvY2FsZVdlZWtzOm49ITF9PXt9KXtpZighdGhpcy5pc1ZhbGlkKXJldHVybiB0aGlzO2NvbnN0IHI9e30scz1ULm5vcm1hbGl6ZVVuaXQoZSk7c3dpdGNoKHMpe2Nhc2UieWVhcnMiOnIubW9udGg9MTtjYXNlInF1YXJ0ZXJzIjpjYXNlIm1vbnRocyI6ci5kYXk9MTtjYXNlIndlZWtzIjpjYXNlImRheXMiOnIuaG91cj0wO2Nhc2UiaG91cnMiOnIubWludXRlPTA7Y2FzZSJtaW51dGVzIjpyLnNlY29uZD0wO2Nhc2Uic2Vjb25kcyI6ci5taWxsaXNlY29uZD0wO2JyZWFrfWlmKHM9PT0id2Vla3MiKWlmKG4pe2NvbnN0IGk9dGhpcy5sb2MuZ2V0U3RhcnRPZldlZWsoKSx7d2Vla2RheTphfT10aGlzO2E8aSYmKHIud2Vla051bWJlcj10aGlzLndlZWtOdW1iZXItMSksci53ZWVrZGF5PWl9ZWxzZSByLndlZWtkYXk9MTtpZihzPT09InF1YXJ0ZXJzIil7Y29uc3QgaT1NYXRoLmNlaWwodGhpcy5tb250aC8zKTtyLm1vbnRoPShpLTEpKjMrMX1yZXR1cm4gdGhpcy5zZXQocil9ZW5kT2YoZSxuKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMucGx1cyh7W2VdOjF9KS5zdGFydE9mKGUsbikubWludXMoMSk6dGhpc310b0Zvcm1hdChlLG49e30pe3JldHVybiB0aGlzLmlzVmFsaWQ/Ti5jcmVhdGUodGhpcy5sb2MucmVkZWZhdWx0VG9FTihuKSkuZm9ybWF0RGF0ZVRpbWVGcm9tU3RyaW5nKHRoaXMsZSk6QnR9dG9Mb2NhbGVTdHJpbmcoZT1ldCxuPXt9KXtyZXR1cm4gdGhpcy5pc1ZhbGlkP04uY3JlYXRlKHRoaXMubG9jLmNsb25lKG4pLGUpLmZvcm1hdERhdGVUaW1lKHRoaXMpOkJ0fXRvTG9jYWxlUGFydHMoZT17fSl7cmV0dXJuIHRoaXMuaXNWYWxpZD9OLmNyZWF0ZSh0aGlzLmxvYy5jbG9uZShlKSxlKS5mb3JtYXREYXRlVGltZVBhcnRzKHRoaXMpOltdfXRvSVNPKHtmb3JtYXQ6ZT0iZXh0ZW5kZWQiLHN1cHByZXNzU2Vjb25kczpuPSExLHN1cHByZXNzTWlsbGlzZWNvbmRzOnI9ITEsaW5jbHVkZU9mZnNldDpzPSEwLGV4dGVuZGVkWm9uZTppPSExfT17fSl7aWYoIXRoaXMuaXNWYWxpZClyZXR1cm4gbnVsbDtjb25zdCBhPWU9PT0iZXh0ZW5kZWQiO2xldCBvPVh0KHRoaXMsYSk7cmV0dXJuIG8rPSJUIixvKz10cyh0aGlzLGEsbixyLHMsaSksb310b0lTT0RhdGUoe2Zvcm1hdDplPSJleHRlbmRlZCJ9PXt9KXtyZXR1cm4gdGhpcy5pc1ZhbGlkP1h0KHRoaXMsZT09PSJleHRlbmRlZCIpOm51bGx9dG9JU09XZWVrRGF0ZSgpe3JldHVybiB3dCh0aGlzLCJra2trLSdXJ1dXLWMiKX10b0lTT1RpbWUoe3N1cHByZXNzTWlsbGlzZWNvbmRzOmU9ITEsc3VwcHJlc3NTZWNvbmRzOm49ITEsaW5jbHVkZU9mZnNldDpyPSEwLGluY2x1ZGVQcmVmaXg6cz0hMSxleHRlbmRlZFpvbmU6aT0hMSxmb3JtYXQ6YT0iZXh0ZW5kZWQifT17fSl7cmV0dXJuIHRoaXMuaXNWYWxpZD8ocz8iVCI6IiIpK3RzKHRoaXMsYT09PSJleHRlbmRlZCIsbixlLHIsaSk6bnVsbH10b1JGQzI4MjIoKXtyZXR1cm4gd3QodGhpcywiRUVFLCBkZCBMTEwgeXl5eSBISDptbTpzcyBaWloiLCExKX10b0hUVFAoKXtyZXR1cm4gd3QodGhpcy50b1VUQygpLCJFRUUsIGRkIExMTCB5eXl5IEhIOm1tOnNzICdHTVQnIil9dG9TUUxEYXRlKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD9YdCh0aGlzLCEwKTpudWxsfXRvU1FMVGltZSh7aW5jbHVkZU9mZnNldDplPSEwLGluY2x1ZGVab25lOm49ITEsaW5jbHVkZU9mZnNldFNwYWNlOnI9ITB9PXt9KXtsZXQgcz0iSEg6bW06c3MuU1NTIjtyZXR1cm4obnx8ZSkmJihyJiYocys9IiAiKSxuP3MrPSJ6IjplJiYocys9IlpaIikpLHd0KHRoaXMscywhMCl9dG9TUUwoZT17fSl7cmV0dXJuIHRoaXMuaXNWYWxpZD9gJHt0aGlzLnRvU1FMRGF0ZSgpfSAke3RoaXMudG9TUUxUaW1lKGUpfWA6bnVsbH10b1N0cmluZygpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy50b0lTTygpOkJ0fVtTeW1ib2wuZm9yKCJub2RlanMudXRpbC5pbnNwZWN0LmN1c3RvbSIpXSgpe3JldHVybiB0aGlzLmlzVmFsaWQ/YERhdGVUaW1lIHsgdHM6ICR7dGhpcy50b0lTTygpfSwgem9uZTogJHt0aGlzLnpvbmUubmFtZX0sIGxvY2FsZTogJHt0aGlzLmxvY2FsZX0gfWA6YERhdGVUaW1lIHsgSW52YWxpZCwgcmVhc29uOiAke3RoaXMuaW52YWxpZFJlYXNvbn0gfWB9dmFsdWVPZigpe3JldHVybiB0aGlzLnRvTWlsbGlzKCl9dG9NaWxsaXMoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMudHM6TmFOfXRvU2Vjb25kcygpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy50cy8xZTM6TmFOfXRvVW5peEludGVnZXIoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP01hdGguZmxvb3IodGhpcy50cy8xZTMpOk5hTn10b0pTT04oKXtyZXR1cm4gdGhpcy50b0lTTygpfXRvQlNPTigpe3JldHVybiB0aGlzLnRvSlNEYXRlKCl9dG9PYmplY3QoZT17fSl7aWYoIXRoaXMuaXNWYWxpZClyZXR1cm57fTtjb25zdCBuPXsuLi50aGlzLmN9O3JldHVybiBlLmluY2x1ZGVDb25maWcmJihuLm91dHB1dENhbGVuZGFyPXRoaXMub3V0cHV0Q2FsZW5kYXIsbi5udW1iZXJpbmdTeXN0ZW09dGhpcy5sb2MubnVtYmVyaW5nU3lzdGVtLG4ubG9jYWxlPXRoaXMubG9jLmxvY2FsZSksbn10b0pTRGF0ZSgpe3JldHVybiBuZXcgRGF0ZSh0aGlzLmlzVmFsaWQ/dGhpcy50czpOYU4pfWRpZmYoZSxuPSJtaWxsaXNlY29uZHMiLHI9e30pe2lmKCF0aGlzLmlzVmFsaWR8fCFlLmlzVmFsaWQpcmV0dXJuIFQuaW52YWxpZCgiY3JlYXRlZCBieSBkaWZmaW5nIGFuIGludmFsaWQgRGF0ZVRpbWUiKTtjb25zdCBzPXtsb2NhbGU6dGhpcy5sb2NhbGUsbnVtYmVyaW5nU3lzdGVtOnRoaXMubnVtYmVyaW5nU3lzdGVtLC4uLnJ9LGk9VG8obikubWFwKFQubm9ybWFsaXplVW5pdCksYT1lLnZhbHVlT2YoKT50aGlzLnZhbHVlT2YoKSxvPWE/dGhpczplLGw9YT9lOnRoaXMsdT1ibChvLGwsaSxzKTtyZXR1cm4gYT91Lm5lZ2F0ZSgpOnV9ZGlmZk5vdyhlPSJtaWxsaXNlY29uZHMiLG49e30pe3JldHVybiB0aGlzLmRpZmYoZy5ub3coKSxlLG4pfXVudGlsKGUpe3JldHVybiB0aGlzLmlzVmFsaWQ/Yi5mcm9tRGF0ZVRpbWVzKHRoaXMsZSk6dGhpc31oYXNTYW1lKGUsbixyKXtpZighdGhpcy5pc1ZhbGlkKXJldHVybiExO2NvbnN0IHM9ZS52YWx1ZU9mKCksaT10aGlzLnNldFpvbmUoZS56b25lLHtrZWVwTG9jYWxUaW1lOiEwfSk7cmV0dXJuIGkuc3RhcnRPZihuLHIpPD1zJiZzPD1pLmVuZE9mKG4scil9ZXF1YWxzKGUpe3JldHVybiB0aGlzLmlzVmFsaWQmJmUuaXNWYWxpZCYmdGhpcy52YWx1ZU9mKCk9PT1lLnZhbHVlT2YoKSYmdGhpcy56b25lLmVxdWFscyhlLnpvbmUpJiZ0aGlzLmxvYy5lcXVhbHMoZS5sb2MpfXRvUmVsYXRpdmUoZT17fSl7aWYoIXRoaXMuaXNWYWxpZClyZXR1cm4gbnVsbDtjb25zdCBuPWUuYmFzZXx8Zy5mcm9tT2JqZWN0KHt9LHt6b25lOnRoaXMuem9uZX0pLHI9ZS5wYWRkaW5nP3RoaXM8bj8tZS5wYWRkaW5nOmUucGFkZGluZzowO2xldCBzPVsieWVhcnMiLCJtb250aHMiLCJkYXlzIiwiaG91cnMiLCJtaW51dGVzIiwic2Vjb25kcyJdLGk9ZS51bml0O3JldHVybiBBcnJheS5pc0FycmF5KGUudW5pdCkmJihzPWUudW5pdCxpPXZvaWQgMCksYXMobix0aGlzLnBsdXMociksey4uLmUsbnVtZXJpYzoiYWx3YXlzIix1bml0czpzLHVuaXQ6aX0pfXRvUmVsYXRpdmVDYWxlbmRhcihlPXt9KXtyZXR1cm4gdGhpcy5pc1ZhbGlkP2FzKGUuYmFzZXx8Zy5mcm9tT2JqZWN0KHt9LHt6b25lOnRoaXMuem9uZX0pLHRoaXMsey4uLmUsbnVtZXJpYzoiYXV0byIsdW5pdHM6WyJ5ZWFycyIsIm1vbnRocyIsImRheXMiXSxjYWxlbmRhcnk6ITB9KTpudWxsfXN0YXRpYyBtaW4oLi4uZSl7aWYoIWUuZXZlcnkoZy5pc0RhdGVUaW1lKSl0aHJvdyBuZXcgRCgibWluIHJlcXVpcmVzIGFsbCBhcmd1bWVudHMgYmUgRGF0ZVRpbWVzIik7cmV0dXJuIFNyKGUsbj0+bi52YWx1ZU9mKCksTWF0aC5taW4pfXN0YXRpYyBtYXgoLi4uZSl7aWYoIWUuZXZlcnkoZy5pc0RhdGVUaW1lKSl0aHJvdyBuZXcgRCgibWF4IHJlcXVpcmVzIGFsbCBhcmd1bWVudHMgYmUgRGF0ZVRpbWVzIik7cmV0dXJuIFNyKGUsbj0+bi52YWx1ZU9mKCksTWF0aC5tYXgpfXN0YXRpYyBmcm9tRm9ybWF0RXhwbGFpbihlLG4scj17fSl7Y29uc3R7bG9jYWxlOnM9bnVsbCxudW1iZXJpbmdTeXN0ZW06aT1udWxsfT1yLGE9Ty5mcm9tT3B0cyh7bG9jYWxlOnMsbnVtYmVyaW5nU3lzdGVtOmksZGVmYXVsdFRvRU46ITB9KTtyZXR1cm4gQnIoYSxlLG4pfXN0YXRpYyBmcm9tU3RyaW5nRXhwbGFpbihlLG4scj17fSl7cmV0dXJuIGcuZnJvbUZvcm1hdEV4cGxhaW4oZSxuLHIpfXN0YXRpYyBnZXQgREFURV9TSE9SVCgpe3JldHVybiBldH1zdGF0aWMgZ2V0IERBVEVfTUVEKCl7cmV0dXJuIFZufXN0YXRpYyBnZXQgREFURV9NRURfV0lUSF9XRUVLREFZKCl7cmV0dXJuIFlhfXN0YXRpYyBnZXQgREFURV9GVUxMKCl7cmV0dXJuIFdufXN0YXRpYyBnZXQgREFURV9IVUdFKCl7cmV0dXJuIExufXN0YXRpYyBnZXQgVElNRV9TSU1QTEUoKXtyZXR1cm4gJG59c3RhdGljIGdldCBUSU1FX1dJVEhfU0VDT05EUygpe3JldHVybiBfbn1zdGF0aWMgZ2V0IFRJTUVfV0lUSF9TSE9SVF9PRkZTRVQoKXtyZXR1cm4gem59c3RhdGljIGdldCBUSU1FX1dJVEhfTE9OR19PRkZTRVQoKXtyZXR1cm4gUm59c3RhdGljIGdldCBUSU1FXzI0X1NJTVBMRSgpe3JldHVybiBabn1zdGF0aWMgZ2V0IFRJTUVfMjRfV0lUSF9TRUNPTkRTKCl7cmV0dXJuIFBufXN0YXRpYyBnZXQgVElNRV8yNF9XSVRIX1NIT1JUX09GRlNFVCgpe3JldHVybiBVbn1zdGF0aWMgZ2V0IFRJTUVfMjRfV0lUSF9MT05HX09GRlNFVCgpe3JldHVybiBIbn1zdGF0aWMgZ2V0IERBVEVUSU1FX1NIT1JUKCl7cmV0dXJuIGpufXN0YXRpYyBnZXQgREFURVRJTUVfU0hPUlRfV0lUSF9TRUNPTkRTKCl7cmV0dXJuIHFufXN0YXRpYyBnZXQgREFURVRJTUVfTUVEKCl7cmV0dXJuIFlufXN0YXRpYyBnZXQgREFURVRJTUVfTUVEX1dJVEhfU0VDT05EUygpe3JldHVybiBHbn1zdGF0aWMgZ2V0IERBVEVUSU1FX01FRF9XSVRIX1dFRUtEQVkoKXtyZXR1cm4gR2F9c3RhdGljIGdldCBEQVRFVElNRV9GVUxMKCl7cmV0dXJuIEpufXN0YXRpYyBnZXQgREFURVRJTUVfRlVMTF9XSVRIX1NFQ09ORFMoKXtyZXR1cm4gQm59c3RhdGljIGdldCBEQVRFVElNRV9IVUdFKCl7cmV0dXJuIFFufXN0YXRpYyBnZXQgREFURVRJTUVfSFVHRV9XSVRIX1NFQ09ORFMoKXtyZXR1cm4gS259fWZ1bmN0aW9uIEhlKHQpe2lmKGcuaXNEYXRlVGltZSh0KSlyZXR1cm4gdDtpZih0JiZ0LnZhbHVlT2YmJmNlKHQudmFsdWVPZigpKSlyZXR1cm4gZy5mcm9tSlNEYXRlKHQpO2lmKHQmJnR5cGVvZiB0PT0ib2JqZWN0IilyZXR1cm4gZy5mcm9tT2JqZWN0KHQpO3Rocm93IG5ldyBEKGBVbmtub3duIGRhdGV0aW1lIGFyZ3VtZW50OiAke3R9LCBvZiB0eXBlICR7dHlwZW9mIHR9YCl9ZnVuY3Rpb24gVWwoe2NvbGxlY3Rpb25zOnQsbHd3OmV9LHt0YWJsZUlkczpuLHRhYmxlQ29sdW1uSWRzOnIscmVsYXRpb25zaGlwSWRzOnMsaW5kZXhJZHM6aSxpbmRleENvbHVtbklkczphLG1lbW9JZHM6b30pe0EodCkuY29sbGVjdGlvbigidGFibGVFbnRpdGllcyIpLnJlbW92ZU1hbnkobiksQSh0KS5jb2xsZWN0aW9uKCJ0YWJsZUNvbHVtbkVudGl0aWVzIikucmVtb3ZlTWFueShyKSxBKHQpLmNvbGxlY3Rpb24oInJlbGF0aW9uc2hpcEVudGl0aWVzIikucmVtb3ZlTWFueShzKSxBKHQpLmNvbGxlY3Rpb24oImluZGV4RW50aXRpZXMiKS5yZW1vdmVNYW55KGkpLEEodCkuY29sbGVjdGlvbigiaW5kZXhDb2x1bW5FbnRpdGllcyIpLnJlbW92ZU1hbnkoYSksQSh0KS5jb2xsZWN0aW9uKCJtZW1vRW50aXRpZXMiKS5yZW1vdmVNYW55KG8pLFsuLi5uLC4uLnIsLi4ucywuLi5pLC4uLmEsLi4ub10uZm9yRWFjaChsPT5SZWZsZWN0LmRlbGV0ZVByb3BlcnR5KGUsbCkpfWNvbnN0IEhsPTMsamw9JChbInRhYmxlRW50aXRpZXMiLCJ0YWJsZUNvbHVtbkVudGl0aWVzIiwicmVsYXRpb25zaGlwRW50aXRpZXMiLCJpbmRleEVudGl0aWVzIiwiaW5kZXhDb2x1bW5FbnRpdGllcyIsIm1lbW9FbnRpdGllcyJdKTtjbGFzcyBxbHthc3luYyBydW4oZSl7Y29uc3Qgbj1KU09OLnBhcnNlKGUpLHI9JGEobikse2RvYzp7dGFibGVJZHM6cyxtZW1vSWRzOmksaW5kZXhJZHM6YSxyZWxhdGlvbnNoaXBJZHM6b30sY29sbGVjdGlvbnM6bCxsd3c6dX09cixjPSQocyksZD0kKGkpLHc9JChhKSxoPSQobyksaz1ZbChnLm5vdygpKSxQPUEobCkuY29sbGVjdGlvbigidGFibGVFbnRpdGllcyIpLE09QShsKS5jb2xsZWN0aW9uKCJ0YWJsZUNvbHVtbkVudGl0aWVzIiksaj1BKGwpLmNvbGxlY3Rpb24oImluZGV4RW50aXRpZXMiKSxCPUEobCkuY29sbGVjdGlvbigiaW5kZXhDb2x1bW5FbnRpdGllcyIpLEZlPUEobCkuY29sbGVjdGlvbigicmVsYXRpb25zaGlwRW50aXRpZXMiKSxwdD1BKGwpLmNvbGxlY3Rpb24oIm1lbW9FbnRpdGllcyIpLHE9bmV3IFNldChQLnNlbGVjdEFsbCgpLmZpbHRlcihrKGMpKS5tYXAoKHtpZDptfSk9Pm0pKSxtZT1uZXcgU2V0LHllPW5ldyBTZXQoRmUuc2VsZWN0QWxsKCkuZmlsdGVyKGsoaCkpLm1hcCgoe2lkOm19KT0+bSkpLGllPW5ldyBTZXQoai5zZWxlY3RBbGwoKS5maWx0ZXIoayh3KSkubWFwKCh7aWQ6bX0pPT5tKSksUT1uZXcgU2V0LEs9bmV3IFNldChwdC5zZWxlY3RBbGwoKS5maWx0ZXIoayhkKSkubWFwKCh7aWQ6bX0pPT5tKSk7TS5zZWxlY3RBbGwoKS5maWx0ZXIoKHt0YWJsZUlkOm19KT0+cS5oYXMobSkpLmZvckVhY2goKHtpZDptfSk9Pm1lLmFkZChtKSksRmUuc2VsZWN0QWxsKCkuZmlsdGVyKCh7aWQ6bSxzdGFydDpZLGVuZDpqZX0pPT4heWUuaGFzKG0pJiYocS5oYXMoWS50YWJsZUlkKXx8cS5oYXMoamUudGFibGVJZCkpKS5mb3JFYWNoKCh7aWQ6bX0pPT55ZS5hZGQobSkpLGouc2VsZWN0QWxsKCkuZmlsdGVyKCh7aWQ6bSx0YWJsZUlkOll9KT0+IWllLmhhcyhtKSYmcS5oYXMoWSkpLmZvckVhY2goKHtpZDptfSk9PmllLmFkZChtKSksQi5zZWxlY3RBbGwoKS5maWx0ZXIoKHtpbmRleElkOm19KT0+aWUuaGFzKG0pKS5mb3JFYWNoKCh7aWQ6bX0pPT5RLmFkZChtKSksVWwocix7dGFibGVJZHM6Wy4uLnFdLHRhYmxlQ29sdW1uSWRzOlsuLi5tZV0scmVsYXRpb25zaGlwSWRzOlsuLi55ZV0saW5kZXhJZHM6Wy4uLmllXSxpbmRleENvbHVtbklkczpbLi4uUV0sbWVtb0lkczpbLi4uS119KTtjb25zdCBUdD0kKFAuc2VsZWN0QWxsKCkubWFwKCh7aWQ6bX0pPT5tKSksSmw9JChNLnNlbGVjdEFsbCgpLm1hcCgoe2lkOm19KT0+bSkpLGxzPSQoai5zZWxlY3RBbGwoKS5tYXAoKHtpZDptfSk9Pm0pKSxCbD0kKEIuc2VsZWN0QWxsKCkubWFwKCh7aWQ6bX0pPT5tKSksUWw9JChGZS5zZWxlY3RBbGwoKS5tYXAoKHtpZDptfSk9Pm0pKSxLbD0kKHB0LnNlbGVjdEFsbCgpLm1hcCgoe2lkOm19KT0+bSkpO3JldHVybiBNLnNlbGVjdEFsbCgpLmZpbHRlcigoe3RhYmxlSWQ6bSxpZDpZLG1ldGE6amV9KT0+IVR0KG0pJiZrKCgpPT4hMSkoe2lkOlksbWV0YTpqZX0pKS5mb3JFYWNoKCh7aWQ6bX0pPT5tZS5hZGQobSkpLEIuc2VsZWN0QWxsKCkuZmlsdGVyKCh7aW5kZXhJZDptLGlkOlksbWV0YTpqZX0pPT4hbHMobSkmJmsoKCk9PiExKSh7aWQ6WSxtZXRhOmplfSkpLmZvckVhY2goKHtpZDptfSk9PlEuYWRkKG0pKSxPYmplY3QuZW50cmllcyh1KS5mb3JFYWNoKChbbSxbWV1dKT0+e2lmKGpsKFkpKXN3aXRjaChZKXtjYXNlInRhYmxlRW50aXRpZXMiOiFUdChtKSYmcS5hZGQobSk7YnJlYWs7Y2FzZSJ0YWJsZUNvbHVtbkVudGl0aWVzIjohSmwobSkmJm1lLmFkZChtKTticmVhaztjYXNlInJlbGF0aW9uc2hpcEVudGl0aWVzIjohUWwobSkmJnllLmFkZChtKTticmVhaztjYXNlImluZGV4RW50aXRpZXMiOiFscyhtKSYmaWUuYWRkKG0pO2JyZWFrO2Nhc2UiaW5kZXhDb2x1bW5FbnRpdGllcyI6IUJsKG0pJiZRLmFkZChtKTticmVhaztjYXNlIm1lbW9FbnRpdGllcyI6IUtsKG0pJiZLLmFkZChtKTticmVha319KSx7dGFibGVJZHM6Wy4uLnFdLHRhYmxlQ29sdW1uSWRzOlsuLi5tZV0scmVsYXRpb25zaGlwSWRzOlsuLi55ZV0saW5kZXhJZHM6Wy4uLmllXSxpbmRleENvbHVtbklkczpbLi4uUV0sbWVtb0lkczpbLi4uS119fX1jb25zdCBZbD10PT5lPT4oe2lkOm4sbWV0YTpyfSk9PntpZihlKG4pKXJldHVybiExO2NvbnN0IHM9TWF0aC5mbG9vcih0LmRpZmYoZy5mcm9tTWlsbGlzKHIudXBkYXRlQXQpLCJkYXlzIikudG9PYmplY3QoKS5kYXlzPz8wKTtyZXR1cm4gSGw8c30sR2w9bmV3IHFsO090KEdsKX0pKCk7Cg==",qE=typeof window<"u"&&window.Blob&&new Blob([(e=>Uint8Array.from(atob(e),(e=>e.charCodeAt(0))))(_E)],{type:"text/javascript;charset=utf-8"});function eU(e){let t;try{if(t=qE&&(window.URL||window.webkitURL).createObjectURL(qE),!t)throw"";const n=new Worker(t,{name:null==e?void 0:e.name});return n.addEventListener("error",(()=>{(window.URL||window.webkitURL).revokeObjectURL(t)})),n}catch{return new Worker("data:text/javascript;base64,"+_E,{name:null==e?void 0:e.name})}finally{t&&(window.URL||window.webkitURL).revokeObjectURL(t)}}const tU="@dineug/erd-editor-schema-gc-worker?v3.2.6";let nU=null;let iU,oU=null;const lU=Qh`
  visibility: hidden;
  position: fixed;
  top: -100px;
  white-space: nowrap;
  font-family: var(--text-font-family);
  ${zL};
`;function rU(){const e=oU||(oU=document.createElement("canvas"),oU);return iU||(iU=e.getContext("2d"),iU&&(iU.font=`400 12px ${EO}`),iU)}const aU=Qh`
  display: flex;
  flex-direction: column;
  width: 100%;
  height: 100%;
  overflow: hidden;
  position: relative;
`,sU=Qh`
  ${aU};
  background-color: var(--canvas-boundary-background);
  outline: none;

  &.none-focus {
    div[data-focus-border] {
      border-color: var(--placeholder) !important;
    }

    div[data-focus-border-bottom] {
      border-bottom-color: var(--placeholder) !important;
    }

    input[data-focus-border-bottom] {
      border-bottom-color: var(--placeholder) !important;
    }
  }
`,cU=Qh`
  ${aU};
`,uU=jl(["settings.changeZoomLevel","settings.streamZoomLevel","settings.scrollTo","settings.streamScrollTo","settings.changeCanvasType"]);const dU=jl([nL.edit,nL.stop,nL.search,nL.undo,nL.redo,nL.zoomIn,nL.zoomOut]),pU=iL.filter((e=>!dU(e))),hU={grayColor:$$.slate,accentColor:U$.indigo,appearance:F$.dark},mU=jl(E$),bU=jl(P$),fU=jl(O$);function yU({props:e,ctx:t,app:n,root:i}){const{store:o,keyBindingMap:l,emitter:r,shortcut$:a,keydown$:s}=n,c=Bs({options:{...hU},preset:B$(hU),custom:{}}),u=Bs({...c.preset,...c.custom},{shallow:!0}),d=function(){const e=globalThis.matchMedia("(prefers-color-scheme: dark)"),t=Bs({isDark:e.matches},{shallow:!0}),{addUnsubscribe:n}=WL(),i=e=>{t.isDark=e.matches};return Ts((()=>{e.addEventListener("change",i),n((()=>{e.removeEventListener("change",i)}))})),{state:t}}(),{addUnsubscribe:p}=WL(),h=new Set,m=()=>{e.readonly||t.dispatchEvent(new CustomEvent("change"))},b=new Set([Qs(e).subscribe((t=>{"systemDarkMode"!==t||!e.systemDarkMode||(c.options.appearance=d.state.isDark?F$.dark:F$.light)})),Qs(d.state).subscribe((t=>{"isDark"!==t||!e.systemDarkMode||(c.options.appearance=d.state.isDark?F$.dark:F$.light)})),Qs(c.options).subscribe((()=>{Object.assign(c.preset,B$(c.options))})),Qs(c.preset).subscribe((()=>{Object.assign(u,c.preset,c.custom)})),Qs(c).subscribe((e=>{"custom"===e&&Object.assign(u,c.preset,c.custom)}))]);return Ts((()=>{p(o.change$.subscribe(m),r.on({setThemeOptions:({payload:e})=>{t.setPresetTheme(e),t.dispatchEvent(new CustomEvent("changePresetTheme",{detail:Xo(c.options)}))}}))})),t.focus=()=>{var e;null==(e=i.value)||e.focus()},t.blur=()=>{var e;t.focus(),null==(e=i.value)||e.blur()},t.clear=()=>{o.dispatchSync($y())},t.destroy=()=>{gL(n),Array.from(b).forEach((e=>e())),Array.from(h).forEach((e=>e.destroy())),b.clear(),h.clear()},t.setInitialValue=e=>{const t=ly(e);o.dispatchSync(fG(Vl(t)?"{}":t)),r.emit(CR())},t.setPresetTheme=e=>{Bl(e.grayColor)&&mU(e.grayColor)&&(c.options.grayColor=e.grayColor),Bl(e.accentColor)&&bU(e.accentColor)&&(c.options.accentColor=e.accentColor),Bl(e.appearance)&&fU(e.appearance)&&(c.options.appearance=e.appearance)},t.setTheme=e=>{const t={};M$.forEach((n=>{const i=At(e,n);Bl(i)&&Reflect.set(t,n,i)})),c.custom=t},t.setKeyBindingMap=e=>{pU.forEach((t=>{const n=At(e,t);ql(n)&&Reflect.set(l,t,n)}))},t.setSchemaSQL=e=>{const t=ly(e);Vl(t)||o.dispatchSync(WG(t))},t.getSchemaSQL=e=>{const t=ny(e??"")?At(jf,e??""):void 0;return Kj(o.state,t)},t.getSharedStore=e=>{const t=(null==e?void 0:e.mouseTracker)??!0,n=function(e,t){const n={editorId:e.state.editor.id},i=new Set,o=new Set,l=new Hm,r=new Hm,a=new Hm;let s=!0;i.add(new Lm((t=>e.subscribe((e=>t.next(e))))).pipe(tI(AG),qS([ff.shared]),rI,_S(r,a),rI,ab((e=>gf(ff.shared,e.map((e=>{var i;const o={...e,meta:Object.assign({},e.meta??{},{...n,nickname:null==(i=null==t?void 0:t.getNickname)?void 0:i.call(t)})};return uU(e.type)?yf(ff.following,o):o})))))).subscribe((e=>l.next(e))));const c=()=>{const e=0<o.size;s&&e?r.next():a.next()};return Object.freeze({connection:()=>{s=!0,c()},disconnect:()=>{s=!1,c()},dispatch:t=>{e.dispatch(t)},dispatchSync:t=>{e.dispatchSync(t)},subscribe:e=>{const t=l.subscribe((t=>e(t)));return o.add(t),c(),()=>{t.unsubscribe(),o.delete(t),c()}},destroy:()=>{Array.from(i).forEach((e=>e.unsubscribe())),Array.from(o).forEach((e=>e.unsubscribe())),i.clear(),o.clear(),e.destroy(),l.complete(),r.complete(),a.complete()}})}(o,e);return h.add(n),t&&r.emit(YR()),Object.freeze({...n,destroy:()=>{n.destroy(),h.delete(n),0===h.size&&r.emit(TR())}})},t.setDiffValue=e=>{const t=ly(e);r.emit(wR({value:Vl(t)?"{}":t}))},Object.defineProperty(t,"value",{get:()=>Ra(o.state),set:e=>{const t=ly(e);o.dispatchSync(bG(Vl(t)?"{}":t))}}),{theme:u,themeState:c,destroySet:b,hasDarkMode:()=>c.options.appearance===F$.dark}}!function(e,t){var n,i,o,l,r;t.shadow??(t.shadow="open");const a=(e=>Aa(e)?e:Ua(e)?[]:Object.keys(e))(t.observedProps),s=(e=>Ua(e)||Aa(e)?[]:Object.keys(e).filter((t=>{const n=e[t];return Fa(n)||Ba(n)&&!Ua(n.type)})).map((t=>{const n=e[t];return Ba(n)?[t,Reflect.get(n,"type")]:[t,n]})))(t.observedProps),c=(e=>Ua(e)||Aa(e)?[]:Object.keys(e).filter((t=>{const n=e[t];return n===Number||n===String||n===Boolean||Ba(n)&&!Ua(n.default)})).map((t=>{const n=e[t];return Ba(n)?[t,Reflect.get(n,"default")]:n===Number?[t,0]:n===Boolean?[t,!1]:[t,""]})))(t.observedProps),u=(r=class extends HTMLElement{static get observedAttributes(){return Array.from(new Set([...a,...a.map((e=>(e=>{var t;return(null==(t=e.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g))?void 0:t.join("-").toLowerCase())??""})(e)))]))}constructor(){super(),Object.defineProperty(this,l,{enumerable:!0,configurable:!0,writable:!0,value:Bs({},{shallow:!0})}),n.set(this,null),i.set(this,this),o.set(this,void 0),Object.defineProperty(this,"host",{enumerable:!0,configurable:!0,writable:!0,value:this}),c.forEach((([e,t])=>Reflect.set(this[Fh],pc(e),t))),t.shadow&&ps(this,i,this.attachShadow({mode:t.shadow}),"f"),Rs(this),ps(this,o,t.render.call(this,this[Fh],this),"f"),Rs(null)}connectedCallback(){const e=this.getRootNode();e instanceof ShadowRoot&&(this.host=e.host),ds(this,i,"f")instanceof ShadowRoot&&function(e){const t=zh();t.hostContextMap.has(e)||(t.hostContextMap.set(e,{vSheets:new Set,styleElements:new Set}),jh())}(ds(this,i,"f")),Hs(this,vs);let t=!1;ps(this,n,Us((()=>{Hs(this,t?Gs:Xs),function(e,t){var n;if(!vc(t))return void(ep.has(e)&&(null==(n=ep.get(e))||n.destroy(),ep.delete(e)));const{strings:i,values:o}=t,l=ep.get(e);if(null!=l&&l.equalStrings(i))null==l||l.commit(o);else{const n=new qd(t);null==l||l.destroy(),ep.set(e,n),n.insert("children",e),n.commit(o)}}(ds(this,i,"f"),Ch`${ds(this,o,"f").call(this)}`),t?Hs(this,Ws):(Hs(this,Is),t=!0)})),"f"),Hs(this,Zs)}disconnectedCallback(){var e;null==(e=ds(this,n,"f"))||e.call(this),ps(this,n,null,"f"),Hs(this,xs),ds(this,i,"f")instanceof ShadowRoot&&function(e){const t=zh(),n=t.hostContextMap.get(e);n&&(Mh?e.adoptedStyleSheets=[]:n.styleElements.forEach((t=>e.removeChild(t))),t.hostContextMap.delete(e))}(ds(this,i,"f"))}attributeChangedCallback(e,t,n){const i=s.find((([t])=>pc(t)===pc(e)));i?Reflect.set(this[Fh],pc(e),i[1]===Boolean?"true"===n||""===n:i[1](n)):Reflect.set(this[Fh],pc(e),n)}},n=new WeakMap,i=new WeakMap,o=new WeakMap,l=Fh,r);a.forEach((e=>{Object.defineProperty(u.prototype,e,{get(){return Reflect.get(this[Fh],e)},set(t){Reflect.set(this[Fh],e,t)}})})),customElements.define(e,u)}("erd-editor",{shadow:"closed",observedProps:{readonly:Boolean,systemDarkMode:Boolean,enableThemeBuilder:Boolean},render:(e,t)=>{const n=function(){const e=rU(),t=document.createElement("span");return t.className=lU.toString(),{span:t,toWidth:n=>{let i=0;return e?i=e.measureText(n).width:(t.innerText=n,i=t.offsetWidth),Math.round(i)+2}}}(),i=bL({toWidth:n.toWidth},{getReadonly:()=>e.readonly}),o=_s(t,fL,i),l=tp();!function(e,t){const n=yL(e),{addUnsubscribe:i}=WL();let o=()=>{};const l=()=>{const{keyBindingMap:e,shortcut$:i}=n.value,l=t.value;o(),o=kE(l,Object.keys(e).reduce(((t,n)=>{const o=n;return e[o].forEach((e=>{t[e.shortcut]=t=>{e.preventDefault&&t.preventDefault(),e.stopPropagation&&t.stopPropagation(),i.next({type:o,event:t})}})),t}),{}))};Ts((()=>{const{keyBindingMap:e}=n.value;l(),i(Qs(e).subscribe(l),(()=>{o()}))}))}(t,l);const{theme:r,themeState:a,destroySet:s,hasDarkMode:c}=yU({props:e,ctx:t,app:i,root:l}),{store:u,keydown$:d,emitter:p}=i,{addUnsubscribe:h}=WL(),m=Bs({isFocus:!1,mouseTracking:!1});s.add(o.destroy),s.add(p.on({mouseTrackerStart:()=>{m.mouseTracking=!0},mouseTrackerEnd:()=>{m.mouseTracking=!1}}));const b=()=>{setTimeout((()=>{document.activeElement!==t&&t.focus()}),1)},f=e=>{d.next(e)};let y=!1,g=-1;const v=()=>{y=!0,m.isFocus=!0},Z=()=>{y=!1,clearTimeout(g),g=setTimeout((()=>{m.isFocus=y}),10)},x=e=>{p.emit(kR({event:e}))},X=e=>{p.emit(VR({event:e}))};s.add(p.on({schemaGC:()=>{var e;null==(e=function(){if(nU)return nU;try{const e=new DE({name:tU});nU=ME(e.port)}catch{try{const e=new eU({name:tU});nU=ME(e)}catch{nU=new kS}}return nU}())||e.run(Ra(u.state)).then((e=>{(e.tableIds.length||e.tableColumnIds.length||e.relationshipIds.length||e.indexIds.length||e.indexColumnIds.length||e.memoIds.length)&&(IS(u.state,e),u.dispatchSync(dg()))}))}})),Ts((()=>{t.focus();const e=l.value,n=new ResizeObserver((e=>{for(const t of e){const{width:e,height:n}=t.contentRect;u.dispatch(Oy({width:e,height:n-30}))}}));n.observe(e),h((()=>{n.unobserve(e),n.disconnect()}),US(t,_L.type).pipe(mb(50)).subscribe(b),US(t,qL.type).subscribe(t.focus))}));const G=e=>{const t=e.target;if(!t)return;const{store:n}=i;n.state.editor.openMap[_w]&&!t.closest(".toolbar")&&!t.closest(".theme-builder")&&n.dispatch(ag({[_w]:!1}))};return()=>{const{settings:t}=u.state,i=c();return Ch`
      <${UO} />
      <${z$} theme=${r} />
      <div
        ${np(l)}
        class=${["root",sU,{dark:i,"none-focus":!m.isFocus}]}
        tabindex="-1"
        @keydown=${f}
        @focus=${v}
        @focusin=${v}
        @focusout=${Z}
        @copy=${x}
        @paste=${X}
        @mousedown=${G}
      >
        <${dE}
          enableThemeBuilder=${e.enableThemeBuilder}
          readonly=${e.readonly}
        />
        ${op(t.canvasType===Fb.ERD?Ch`
                <div class=${cU}>
                  <${$O}
                    isDarkMode=${i}
                    mouseTracking=${m.mouseTracking}
                  />
                </div>
              `:null)}
        ${t.canvasType===Fb.visualization?Ch`<div class=${cU}><${gE} /></div>`:t.canvasType===Fb.schemaSQL?Ch`
                <div class=${cU}>
                  <${dO} isDarkMode=${i} />
                </div>
              `:t.canvasType===Fb.generatorCode?Ch`
                  <div class=${cU}>
                    <${rO} isDarkMode=${i} />
                  </div>
                `:t.canvasType===Fb.settings?Ch`<div class=${cU}><${H$} /></div>`:null}
        <${rE} />
        ${e.enableThemeBuilder?Ch`<${oE} theme=${a.options} />`:null}
        <${r$} />
        ${n.span}
      </div>
    `}}});export{rj as setExportFileCallback,RF as setGetShikiServiceCallback,hJ as setImportFileCallback};export default null;
//# sourceMappingURL=/sm/bcb9cdae201a4caeb605563d2269e409c2846a19e793c9a87c438a17643decce.map